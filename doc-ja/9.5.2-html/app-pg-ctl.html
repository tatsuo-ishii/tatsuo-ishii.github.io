<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>pg_ctl</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 9.5.2文書"
HREF="index.html"><LINK
REL="UP"
TITLE="PostgreSQLサーバアプリケーション"
HREF="reference-server.html"><LINK
REL="PREVIOUS"
TITLE="pg_controldata"
HREF="app-pgcontroldata.html"><LINK
REL="NEXT"
TITLE="pg_resetxlog"
HREF="app-pgresetxlog.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=utf-8"><META
NAME="creation"
CONTENT="2016-05-13T05:09:04"></HEAD
><BODY
CLASS="REFENTRY"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>PostgreSQL 9.5.2文書</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="pg_controldata"
HREF="app-pgcontroldata.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="reference-server.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="pg_resetxlog"
HREF="app-pgresetxlog.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="APP-PG-CTL"
></A
><SPAN
CLASS="APPLICATION"
>pg_ctl</SPAN
></H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN97819"
></A
><H2
>名前</H2
>pg_ctl&nbsp;--&nbsp;<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>サーバを初期化、起動、停止、制御する</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN97823"
></A
><H2
>概要</H2
><P
><TT
CLASS="COMMAND"
>pg_ctl</TT
>  <TT
CLASS="OPTION"
>init[db]</TT
>  [<TT
CLASS="OPTION"
>-s</TT
>] [<TT
CLASS="OPTION"
>-D</TT
> <TT
CLASS="REPLACEABLE"
><I
>datadir</I
></TT
>] [<TT
CLASS="OPTION"
>-o</TT
> <TT
CLASS="REPLACEABLE"
><I
>initdb-options</I
></TT
>]</P
><P
><TT
CLASS="COMMAND"
>pg_ctl</TT
>  <TT
CLASS="OPTION"
>start</TT
>  [<TT
CLASS="OPTION"
>-w</TT
>] [<TT
CLASS="OPTION"
>-t</TT
> <TT
CLASS="REPLACEABLE"
><I
>seconds</I
></TT
>] [<TT
CLASS="OPTION"
>-s</TT
>] [<TT
CLASS="OPTION"
>-D</TT
> <TT
CLASS="REPLACEABLE"
><I
>datadir</I
></TT
>] [<TT
CLASS="OPTION"
>-l</TT
> <TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
>] [<TT
CLASS="OPTION"
>-o</TT
> <TT
CLASS="REPLACEABLE"
><I
>options</I
></TT
>] [<TT
CLASS="OPTION"
>-p</TT
> <TT
CLASS="REPLACEABLE"
><I
>path</I
></TT
>] [<TT
CLASS="OPTION"
>-c</TT
>]</P
><P
><TT
CLASS="COMMAND"
>pg_ctl</TT
>  <TT
CLASS="OPTION"
>stop</TT
>  [<TT
CLASS="OPTION"
>-W</TT
>] [<TT
CLASS="OPTION"
>-t</TT
> <TT
CLASS="REPLACEABLE"
><I
>seconds</I
></TT
>] [<TT
CLASS="OPTION"
>-s</TT
>] [<TT
CLASS="OPTION"
>-D</TT
> <TT
CLASS="REPLACEABLE"
><I
>datadir</I
></TT
>] [<TT
CLASS="OPTION"
>-m</TT
>
       <TT
CLASS="OPTION"
>s[mart]</TT
> | <TT
CLASS="OPTION"
>f[ast]</TT
> | <TT
CLASS="OPTION"
>i[mmediate]</TT
> 
   ]</P
><P
><TT
CLASS="COMMAND"
>pg_ctl</TT
>  <TT
CLASS="OPTION"
>restart</TT
>  [<TT
CLASS="OPTION"
>-w</TT
>] [<TT
CLASS="OPTION"
>-t</TT
> <TT
CLASS="REPLACEABLE"
><I
>seconds</I
></TT
>] [<TT
CLASS="OPTION"
>-s</TT
>] [<TT
CLASS="OPTION"
>-D</TT
> <TT
CLASS="REPLACEABLE"
><I
>datadir</I
></TT
>] [<TT
CLASS="OPTION"
>-c</TT
>] [<TT
CLASS="OPTION"
>-m</TT
>
       <TT
CLASS="OPTION"
>s[mart]</TT
> | <TT
CLASS="OPTION"
>f[ast]</TT
> | <TT
CLASS="OPTION"
>i[mmediate]</TT
> 
   ] [<TT
CLASS="OPTION"
>-o</TT
> <TT
CLASS="REPLACEABLE"
><I
>options</I
></TT
>]</P
><P
><TT
CLASS="COMMAND"
>pg_ctl</TT
>  <TT
CLASS="OPTION"
>reload</TT
>  [<TT
CLASS="OPTION"
>-s</TT
>] [<TT
CLASS="OPTION"
>-D</TT
> <TT
CLASS="REPLACEABLE"
><I
>datadir</I
></TT
>]</P
><P
><TT
CLASS="COMMAND"
>pg_ctl</TT
>  <TT
CLASS="OPTION"
>status</TT
>  [<TT
CLASS="OPTION"
>-D</TT
> <TT
CLASS="REPLACEABLE"
><I
>datadir</I
></TT
>]</P
><P
><TT
CLASS="COMMAND"
>pg_ctl</TT
>  <TT
CLASS="OPTION"
>promote</TT
>  [<TT
CLASS="OPTION"
>-s</TT
>] [<TT
CLASS="OPTION"
>-D</TT
> <TT
CLASS="REPLACEABLE"
><I
>datadir</I
></TT
>]</P
><P
><TT
CLASS="COMMAND"
>pg_ctl</TT
>  <TT
CLASS="OPTION"
>kill</TT
>   <TT
CLASS="REPLACEABLE"
><I
>signal_name</I
></TT
>   <TT
CLASS="REPLACEABLE"
><I
>process_id</I
></TT
> </P
><P
><TT
CLASS="COMMAND"
>pg_ctl</TT
>  <TT
CLASS="OPTION"
>register</TT
>  [<TT
CLASS="OPTION"
>-N</TT
> <TT
CLASS="REPLACEABLE"
><I
>servicename</I
></TT
>] [<TT
CLASS="OPTION"
>-U</TT
> <TT
CLASS="REPLACEABLE"
><I
>username</I
></TT
>] [<TT
CLASS="OPTION"
>-P</TT
> <TT
CLASS="REPLACEABLE"
><I
>password</I
></TT
>] [<TT
CLASS="OPTION"
>-D</TT
> <TT
CLASS="REPLACEABLE"
><I
>datadir</I
></TT
>] [<TT
CLASS="OPTION"
>-S</TT
>
       <TT
CLASS="OPTION"
>a[uto]</TT
> | <TT
CLASS="OPTION"
>d[emand]</TT
> 
   ] [<TT
CLASS="OPTION"
>-w</TT
>] [<TT
CLASS="OPTION"
>-t</TT
> <TT
CLASS="REPLACEABLE"
><I
>seconds</I
></TT
>] [<TT
CLASS="OPTION"
>-s</TT
>] [<TT
CLASS="OPTION"
>-o</TT
> <TT
CLASS="REPLACEABLE"
><I
>options</I
></TT
>]</P
><P
><TT
CLASS="COMMAND"
>pg_ctl</TT
>  <TT
CLASS="OPTION"
>unregister</TT
>  [<TT
CLASS="OPTION"
>-N</TT
> <TT
CLASS="REPLACEABLE"
><I
>servicename</I
></TT
>]</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="APP-PG-CTL-DESCRIPTION"
></A
><H2
>説明</H2
><P
><SPAN
CLASS="APPLICATION"
>pg_ctl</SPAN
>は<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>データベースクラスタの初期化、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>のデータベースサーバ（<A
HREF="app-postgres.html"
><SPAN
CLASS="APPLICATION"
>postgres</SPAN
></A
>）を起動、停止、再起動する、あるいは稼働中のサーバの状態を表示するためのユーティリティです。
サーバは手動で起動することも可能ですが、<SPAN
CLASS="APPLICATION"
>pg_ctl</SPAN
>は、ログ出力のリダイレクトや、端末とプロセスグループの適切な分離などの作業を隠蔽してくれます。
さらにシャットダウン制御のための便利なオプションも提供します。
  </P
><P
><TT
CLASS="OPTION"
>init</TT
>または<TT
CLASS="OPTION"
>initdb</TT
>モードは<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の新しいデータベースクラスタを作成します。
データベースクラスタとは、単一のサーバインスタンスで管理されるデータベースの集合です。
このモードは<TT
CLASS="COMMAND"
>initdb</TT
>コマンドを呼び出します。
詳しくは<A
HREF="app-initdb.html"
>initdb</A
>を参照して下さい。
  </P
><P
><TT
CLASS="OPTION"
>start</TT
>モードでは、新しいサーバが立ち上がります。
サーバはバックグラウンドで起動され、その標準入力は<TT
CLASS="FILENAME"
>/dev/null</TT
>（Windowsの場合は<TT
CLASS="LITERAL"
>nul</TT
>）に接続されます。
Unix系のシステムではデフォルトで、サーバの標準出力と標準エラーは<SPAN
CLASS="APPLICATION"
>pg_ctl</SPAN
>の標準出力に転送されます(標準エラー出力には転送されません）。
<SPAN
CLASS="APPLICATION"
>pg_ctl</SPAN
>の標準出力はファイルにリダイレクトするか、例えば<SPAN
CLASS="APPLICATION"
>rotatelogs</SPAN
>などのログローテーションプログラムのような別プロセスにパイプで渡すべきです。
こうしないと、<TT
CLASS="COMMAND"
>postgres</TT
>はその出力を（バックグラウンドから）制御端末に書き出しますので、シェルのプロセスグループから切り離すことができません。
Windowsではデフォルトで、サーバの標準出力と標準エラーは端末に送信されます。
こうしたデフォルトの動作は<TT
CLASS="OPTION"
>-l</TT
>を用いてサーバの出力をログファイルに追加するように変更することができます。
<TT
CLASS="OPTION"
>-l</TT
>または出力のリダイレクトのどちらかを使用することを勧めます。
  </P
><P
><TT
CLASS="OPTION"
>stop</TT
>モードは、指定されたデータディレクトリで稼働しているサーバを停止（シャットダウン）します。
<TT
CLASS="OPTION"
>-m</TT
>オプションでは、3つの異なる停止方式を選択できます。
<SPAN
CLASS="QUOTE"
>"smart"</SPAN
>モードは、全てのクライアントが切断し、オンラインバックアップがあればそれが終了するまで待ちます。
サーバがホットスタンバイ状態の場合、すべてのクライアント接続が切断された後にリカバリとストリーミングレプリケーションは終了します。
<SPAN
CLASS="QUOTE"
>"fast"</SPAN
>モード（デフォルト）はクライアントが切断するまで待たず、かつ、実行中のオンラインバックアップを終了させます。
全ての実行中のトランザクションをロールバックし、クライアントとの接続を強制的に切断した後、サーバを停止します。
<SPAN
CLASS="QUOTE"
>"immediate"</SPAN
>モードは、クリーンアップ処理なしで、全てのサーバプロセスを即座に中断します。
これを指定すると、再起動時にクラッシュリカバリ処理が実行されます。
  </P
><P
><TT
CLASS="OPTION"
>restart</TT
>モードは、実質的にはstopを実行して、その後、startを実行します。
この時、<TT
CLASS="COMMAND"
>postgres</TT
>コマンドラインオプションを変更することができます。
指定された相対パスがサーバ起動時にコマンドラインから指定されていた場合に <TT
CLASS="OPTION"
>restart</TT
>が失敗する可能性があります。
  </P
><P
><TT
CLASS="OPTION"
>reload</TT
>モードは、単に<TT
CLASS="COMMAND"
>postgres</TT
>に<SPAN
CLASS="SYSTEMITEM"
>SIGHUP</SPAN
>シグナルを送り、（<TT
CLASS="FILENAME"
>postgresql.conf</TT
>、<TT
CLASS="FILENAME"
>pg_hba.conf</TT
>などの）設定ファイルの再読み込みを実行させます。
これにより、設定ファイルのオプションで完全な再起動を必要としないものについて、変更を反映させることができます。
  </P
><P
><TT
CLASS="OPTION"
>status</TT
>モードは指定したデータディレクトリでサーバが稼働しているかどうかを確認します。
稼働している場合は<ACRONYM
CLASS="ACRONYM"
>PID</ACRONYM
>と、サーバを起動する時に使われたコマンドラインオプションを表示します。
サーバが稼働していない場合、このプロセスは終了ステータス３を返します。
アクセス可能なデータディレクトリが指定されていない場合、プロセスは終了ステータス４を返します。
  </P
><P
><TT
CLASS="OPTION"
>promote</TT
>モードでは、指定したデータディレクトリで稼動中のスタンバイサーバにリカバリを終了し読み書き操作を始めるようコマンドを送ります。
  </P
><P
><TT
CLASS="OPTION"
>kill</TT
>モードでは指定したプロセスにシグナルを送信することができます。
これは特に、<SPAN
CLASS="APPLICATION"
>kill</SPAN
>コマンドを持たない<SPAN
CLASS="PRODUCTNAME"
>Microsoft Windows</SPAN
>で有用です。
サポートするシグナル名の一覧は<TT
CLASS="LITERAL"
>--help</TT
>を使用して確認してください。
  </P
><P
><TT
CLASS="OPTION"
>register</TT
>モードにより、<SPAN
CLASS="PRODUCTNAME"
>Microsoft Windows</SPAN
>上でシステムサービスを登録することができます。
<TT
CLASS="OPTION"
>-S</TT
>オプションによりサービスの起動種類を<SPAN
CLASS="QUOTE"
>"auto"</SPAN
>（システム起動時に自動的にサービスを起動）か<SPAN
CLASS="QUOTE"
>"demand"</SPAN
>（要求が合った時にサービスを起動）から選択することができます。
  </P
><P
><TT
CLASS="OPTION"
>unregister</TT
>により<SPAN
CLASS="PRODUCTNAME"
>Microsoft Windows</SPAN
>上のシステムサービスを登録解除することができます。
これは過去に<TT
CLASS="OPTION"
>register</TT
>コマンドによりなされた変更を元に戻します。
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="APP-PG-CTL-OPTIONS"
></A
><H2
>オプション</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="OPTION"
>-c</TT
><BR><TT
CLASS="OPTION"
>--core-file</TT
></DT
><DD
><P
>実現可能なプラットフォームにおいて、サーバクラッシュ時にcoreファイルを生成できるように関連するソフトリソース制限を上げます。
障害が起きたサーバプロセスからスタックトレースを取得できますので、問題のデバッグや診断の際に有用です。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-D <TT
CLASS="REPLACEABLE"
><I
>datadir</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--pgdata <TT
CLASS="REPLACEABLE"
><I
>datadir</I
></TT
></TT
></DT
><DD
><P
>データベース設定ファイルのファイルシステム上の場所を指定します。
これが省略された場合、環境変数<TT
CLASS="ENVAR"
>PGDATA</TT
>が使われます。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-l <TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--log <TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
></TT
></DT
><DD
><P
>サーバログ出力を<TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
>に追記します。
そのファイルが存在しない場合は作成されます。
<SPAN
CLASS="SYSTEMITEM"
>umask</SPAN
>は077に設定されますので、他のユーザからのログファイルへのアクセスはデフォルトでは許可されません。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-m <TT
CLASS="REPLACEABLE"
><I
>mode</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--mode <TT
CLASS="REPLACEABLE"
><I
>mode</I
></TT
></TT
></DT
><DD
><P
>停止（シャットダウン）モードを指定します。
<TT
CLASS="REPLACEABLE"
><I
>mode</I
></TT
>は<TT
CLASS="LITERAL"
>smart</TT
>、<TT
CLASS="LITERAL"
>fast</TT
>、<TT
CLASS="LITERAL"
>immediate</TT
>、もしくはこの3つのモード名の最初の1文字をとることができます。
省略時は<TT
CLASS="LITERAL"
>fast</TT
>が使用されます。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-o <TT
CLASS="REPLACEABLE"
><I
>options</I
></TT
></TT
></DT
><DD
><P
><TT
CLASS="COMMAND"
>postgres</TT
>に直接渡されるオプションを指定します。
複数オプションの呼び出しが追加されます。
       </P
><P
>このオプションは、確実に1グループとして渡すために、通常は単一引用符または二重引用符で囲まなければなりません。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-o <TT
CLASS="REPLACEABLE"
><I
>initdb-options</I
></TT
></TT
></DT
><DD
><P
><TT
CLASS="COMMAND"
>initdb</TT
>コマンドに直接渡すオプションを指定します。
       </P
><P
>このオプションは、確実にひとまとめとして渡すために、通常は単一引用符または二重引用符で囲まなければなりません。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-p <TT
CLASS="REPLACEABLE"
><I
>path</I
></TT
></TT
></DT
><DD
><P
><TT
CLASS="FILENAME"
>postgres</TT
>の実行プログラムの位置を指定します。
デフォルトでは<TT
CLASS="FILENAME"
>postgres</TT
>の実行プログラムは<TT
CLASS="COMMAND"
>pg_ctl</TT
>と同じディレクトリにあるものとみなされます。また、このディレクトリに存在しなければ、構築時に指定したインストールディレクトリが使われます。
このオプションは、何か異例なことをしていて<TT
CLASS="FILENAME"
>postgres</TT
>が見つからないというようなエラーが出ない限り、使う必要はありません。
       </P
><P
><TT
CLASS="LITERAL"
>init</TT
>モードでは、このオプションは同様に<TT
CLASS="FILENAME"
>initdb</TT
>実行プログラムの場所を指定します。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-s</TT
><BR><TT
CLASS="OPTION"
>--silent</TT
></DT
><DD
><P
>エラーメッセージのみを表示し、その他の情報を表示しません。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-t</TT
><BR><TT
CLASS="OPTION"
>--timeout</TT
></DT
><DD
><P
>起動または停止の完了まで待機する最大の秒数。
デフォルトは環境変数<TT
CLASS="ENVAR"
>PGCTLTIMEOUT</TT
>の値で、それが設定されていなければ60秒です。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-V</TT
><BR><TT
CLASS="OPTION"
>--version</TT
></DT
><DD
><P
><SPAN
CLASS="APPLICATION"
>pg_ctl</SPAN
>のバージョンを表示し、終了します。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>-w</TT
></DT
><DD
><P
>起動もしくは停止処理が完了するのを待ちます。
待機は停止処理ではデフォルトのオプションですが、起動処理ではデフォルトではありません。
起動処理を待機している場合、<TT
CLASS="COMMAND"
>pg_ctl</TT
>は繰り返しサーバへの接続を試行します。
停止処理を待機している場合、<TT
CLASS="COMMAND"
>pg_ctl</TT
>はサーバが<ACRONYM
CLASS="ACRONYM"
>PID</ACRONYM
>ファイルを削除するまで待機します。
このオプションにより起動時に<ACRONYM
CLASS="ACRONYM"
>SSL</ACRONYM
>パスフレーズを入力することができます。
<TT
CLASS="COMMAND"
>pg_ctl</TT
>は、起動もしくは停止が成功したかどうかに基づいて終了コードを返します。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-W</TT
></DT
><DD
><P
>起動処理もしくは停止処理が完了するのを待ちません。
起動と再起動モードのデフォルトです。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-?</TT
><BR><TT
CLASS="OPTION"
>--help</TT
></DT
><DD
><P
><SPAN
CLASS="APPLICATION"
>pg_ctl</SPAN
>コマンドライン引数の説明を表示し、終了します。
       </P
></DD
></DL
></DIV
><DIV
CLASS="REFSECT2"
><A
NAME="APP-PG-CTL-WINDOWS-OPTIONS"
></A
><H3
>Windows用オプション</H3
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="OPTION"
>-e <TT
CLASS="REPLACEABLE"
><I
>source</I
></TT
></TT
></DT
><DD
><P
>Windowsのサービスとして実行する際に、イベントログへの出力用に<SPAN
CLASS="APPLICATION"
>pg_ctl</SPAN
>が使用するイベントソースの名前です。
デフォルトは<TT
CLASS="LITERAL"
>PostgreSQL</TT
>です。
これは<SPAN
CLASS="APPLICATION"
>pg_ctl</SPAN
>自体からのログ出力のみを制御することに注意してください。
サーバが起動した後は、<A
HREF="runtime-config-logging.html#GUC-EVENT-SOURCE"
>event_source</A
>で指定したイベントソースが使用されます。
サーバが起動の初期で障害を起こした場合は、デフォルトのイベントソースの<TT
CLASS="LITERAL"
>PostgreSQL</TT
>を使用するかもしれません。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-N <TT
CLASS="REPLACEABLE"
><I
>servicename</I
></TT
></TT
></DT
><DD
><P
>登録するシステムサービスの名前です。
この名前は、システム名としても表示名としても使用されます。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-P <TT
CLASS="REPLACEABLE"
><I
>password</I
></TT
></TT
></DT
><DD
><P
>サービスを開始するユーザ用のパスワードです。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-S <TT
CLASS="REPLACEABLE"
><I
>start-type</I
></TT
></TT
></DT
><DD
><P
>登録するシステムサービスの起動種類です。
起動種類は<TT
CLASS="LITERAL"
>auto</TT
>、<TT
CLASS="LITERAL"
>demand</TT
>、またはこれら2単語の先頭の文字のいずれかです。
省略時は<TT
CLASS="LITERAL"
>auto</TT
>が使用されます。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-U <TT
CLASS="REPLACEABLE"
><I
>username</I
></TT
></TT
></DT
><DD
><P
>サービスを起動するユーザのユーザ名です。
ドメインユーザの場合は<TT
CLASS="LITERAL"
>DOMAIN\username</TT
>書式を使用してください。
      </P
></DD
></DL
></DIV
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN98207"
></A
><H2
>環境</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="ENVAR"
>PGCTLTIMEOUT</TT
></DT
><DD
><P
>起動または終了が完了するまでに待機する秒数のデフォルトの最大値です。
設定されていない場合のデフォルトは60秒です。
     </P
></DD
><DT
><TT
CLASS="ENVAR"
>PGDATA</TT
></DT
><DD
><P
>デフォルトのデータディレクトリの場所です。
     </P
></DD
></DL
></DIV
><P
>また、<TT
CLASS="COMMAND"
>pg_ctl</TT
>は、他のほとんどの<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>ユーティリティと同様、<SPAN
CLASS="APPLICATION"
>libpq</SPAN
>でサポートされる環境変数を使用します（<A
HREF="libpq-envars.html"
>項31.14</A
>を参照してください）。
この他のサーバ変数については<A
HREF="app-postgres.html"
><SPAN
CLASS="APPLICATION"
>postgres</SPAN
></A
>を参照してください。
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN98226"
></A
><H2
>ファイル</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="FILENAME"
>postmaster.pid</TT
></DT
><DD
><P
>データディレクトリにこのファイルがあるかどうかによって、<SPAN
CLASS="APPLICATION"
>pg_ctl</SPAN
>はサーバが現在稼働中かどうかを決定します。
     </P
></DD
><DT
><TT
CLASS="FILENAME"
>postmaster.opts</TT
></DT
><DD
><P
>このファイルがデータディレクトリにあれば、<SPAN
CLASS="APPLICATION"
>pg_ctl</SPAN
>（の<TT
CLASS="OPTION"
>restart</TT
>モード）は、<TT
CLASS="OPTION"
>-o</TT
>で上書きされるものを除き、このファイルの内容をオプションとして<TT
CLASS="COMMAND"
>postgres</TT
>に渡します。
また、このファイルの内容が<TT
CLASS="OPTION"
>status</TT
>モードで表示されます。
     </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="R1-APP-PGCTL-2"
></A
><H2
>例</H2
><DIV
CLASS="REFSECT2"
><A
NAME="R2-APP-PGCTL-3"
></A
><H3
>サーバの起動</H3
><P
>サーバを起動します。
</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>pg_ctl start</KBD
></PRE
><P>
   </P
><P
>以下はサーバが接続を植え付けられるようになるまで待機する起動例です。
</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>pg_ctl -w start</KBD
></PRE
><P>
   </P
><P
>ポート5433を使い<CODE
CLASS="FUNCTION"
>fsync</CODE
>なしでサーバを起動します。
</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>pg_ctl -o "-F -p 5433" start</KBD
></PRE
><P></P
></DIV
><DIV
CLASS="REFSECT2"
><A
NAME="R2-APP-PGCTL-4"
></A
><H3
>サーバの停止</H3
><P
>サーバを停止するためには以下を使用します。
</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>pg_ctl stop</KBD
></PRE
><P>
<TT
CLASS="OPTION"
>-m</TT
>オプションにより<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>どのように</I
></SPAN
>バックエンドを停止させるかを制御できます。
</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>pg_ctl stop -m fast</KBD
></PRE
><P></P
></DIV
><DIV
CLASS="REFSECT2"
><A
NAME="R2-APP-PGCTL-5"
></A
><H3
>サーバの再起動</H3
><P
>サーバの再起動は、サーバを停止してもう一度起動するのとほぼ同じですが、違うのは、<TT
CLASS="COMMAND"
>pg_ctl</TT
>が以前起動していたインスタンスに渡されていたコマンドラインオプションを保存し再利用することです。
下記はサーバを再起動する最も簡単な方法です。
</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>pg_ctl restart</KBD
></PRE
><P>
   </P
><P
>再起動の際にサーバのシャットダウンを待ってから起動を行う方法です。
</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>pg_ctl -w restart</KBD
></PRE
><P>
   </P
><P
>以下はポート5433を使って再起動し、再起動後に<CODE
CLASS="FUNCTION"
>fsync</CODE
>を無効にする方法です。
</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>pg_ctl -o "-F -p 5433" restart</KBD
></PRE
><P></P
></DIV
><DIV
CLASS="REFSECT2"
><A
NAME="R2-APP-PGCTL-6"
></A
><H3
>サーバの状態表示</H3
><P
>下記は<SPAN
CLASS="APPLICATION"
>pg_ctl</SPAN
>からの状態の出力の例です。
</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>pg_ctl status</KBD
>
<SAMP
CLASS="COMPUTEROUTPUT"
>pg_ctl: server is running (PID: 13718)
/usr/local/pgsql/bin/postgres "-D" "/usr/local/pgsql/data" "-p" "5433" "-B" "128"</SAMP
></PRE
><P>
これは再起動（restart）モードで呼び出されるコマンドラインです。
   </P
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN98297"
></A
><H2
>関連項目</H2
><A
HREF="app-initdb.html"
>initdb</A
>, <A
HREF="app-postgres.html"
><SPAN
CLASS="APPLICATION"
>postgres</SPAN
></A
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="app-pgcontroldata.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>ホーム</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="app-pgresetxlog.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><SPAN
CLASS="APPLICATION"
>pg_controldata</SPAN
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="reference-server.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><SPAN
CLASS="APPLICATION"
>pg_resetxlog</SPAN
></TD
></TR
></TABLE
></DIV
></BODY
></HTML
>