<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>日付/時刻関数と演算子</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 9.5.2文書"
HREF="index.html"><LINK
REL="UP"
TITLE="関数と演算子"
HREF="functions.html"><LINK
REL="PREVIOUS"
TITLE="データ型書式設定関数"
HREF="functions-formatting.html"><LINK
REL="NEXT"
TITLE="列挙型サポート関数"
HREF="functions-enum.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=utf-8"><META
NAME="creation"
CONTENT="2016-05-13T05:09:04"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>PostgreSQL 9.5.2文書</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="データ型書式設定関数"
HREF="functions-formatting.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="functions.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>第 9章関数と演算子</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="列挙型サポート関数"
HREF="functions-enum.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="FUNCTIONS-DATETIME"
>9.9. 日付/時刻関数と演算子</A
></H1
><P
><A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-TABLE"
>表9-28</A
>は、日付/時刻型の値の処理で使用可能な関数を示しています。詳細は、以下の副節で説明します。
<A
HREF="functions-datetime.html#OPERATORS-DATETIME-TABLE"
>表9-27</A
>は、（<TT
CLASS="LITERAL"
>+</TT
>、<TT
CLASS="LITERAL"
>*</TT
>等の）基本的な算術演算子の振舞いを説明しています。
書式設定関数については<A
HREF="functions-formatting.html"
>項9.8</A
>を参照してください。
<A
HREF="datatype-datetime.html"
>項8.5</A
>を参照して、日付/時刻データ型についての背景となっている情報に精通していなければなりません。
  </P
><P
>以下の<TT
CLASS="TYPE"
>time</TT
>もしくは<TT
CLASS="TYPE"
>timestamp</TT
>型の入力を受け取る関数および演算子は全て、実際には2つの種類があります。1つは<TT
CLASS="TYPE"
>time with time zone</TT
>型または<TT
CLASS="TYPE"
>timestamp with time zone</TT
>型を取るもので、もう1つは<TT
CLASS="TYPE"
>time without time zone</TT
>型もしくは<TT
CLASS="TYPE"
>timestamp without time zone</TT
>型を取るものです。
簡略化のため、これらの種類の違いは個別に示していません。
また、<TT
CLASS="LITERAL"
>+</TT
>と<TT
CLASS="LITERAL"
>*</TT
>演算子は可換な2項をとります（例えばdate + integerとinteger + date）。こうした組み合わせは片方のみ示します。
  </P
><DIV
CLASS="TABLE"
><A
NAME="OPERATORS-DATETIME-TABLE"
></A
><P
><B
>表 9-27. 日付/時刻演算子</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>演算子名</TH
><TH
>例</TH
><TH
>結果</TH
></TR
></THEAD
><TBODY
><TR
><TD
> <TT
CLASS="LITERAL"
>+</TT
> </TD
><TD
><TT
CLASS="LITERAL"
>date '2001-09-28' + integer '7'</TT
></TD
><TD
><TT
CLASS="LITERAL"
>date '2001-10-05'</TT
></TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>+</TT
> </TD
><TD
><TT
CLASS="LITERAL"
>date '2001-09-28' + interval '1 hour'</TT
></TD
><TD
><TT
CLASS="LITERAL"
>timestamp '2001-09-28 01:00:00'</TT
></TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>+</TT
> </TD
><TD
><TT
CLASS="LITERAL"
>date '2001-09-28' + time '03:00'</TT
></TD
><TD
><TT
CLASS="LITERAL"
>timestamp '2001-09-28 03:00:00'</TT
></TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>+</TT
> </TD
><TD
><TT
CLASS="LITERAL"
>interval '1 day' + interval '1 hour'</TT
></TD
><TD
><TT
CLASS="LITERAL"
>interval '1 day 01:00:00'</TT
></TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>+</TT
> </TD
><TD
><TT
CLASS="LITERAL"
>timestamp '2001-09-28 01:00' + interval '23 hours'</TT
></TD
><TD
><TT
CLASS="LITERAL"
>timestamp '2001-09-29 00:00:00'</TT
></TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>+</TT
> </TD
><TD
><TT
CLASS="LITERAL"
>time '01:00' + interval '3 hours'</TT
></TD
><TD
><TT
CLASS="LITERAL"
>time '04:00:00'</TT
></TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>-</TT
> </TD
><TD
><TT
CLASS="LITERAL"
>- interval '23 hours'</TT
></TD
><TD
><TT
CLASS="LITERAL"
>interval '-23:00:00'</TT
></TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>-</TT
> </TD
><TD
><TT
CLASS="LITERAL"
>date '2001-10-01' - date '2001-09-28'</TT
></TD
><TD
><TT
CLASS="LITERAL"
>integer '3'</TT
>（日付）</TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>-</TT
> </TD
><TD
><TT
CLASS="LITERAL"
>date '2001-10-01' - integer '7'</TT
></TD
><TD
><TT
CLASS="LITERAL"
>date '2001-09-24'</TT
></TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>-</TT
> </TD
><TD
><TT
CLASS="LITERAL"
>date '2001-09-28' - interval '1 hour'</TT
></TD
><TD
><TT
CLASS="LITERAL"
>timestamp '2001-09-27 23:00:00'</TT
></TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>-</TT
> </TD
><TD
><TT
CLASS="LITERAL"
>time '05:00' - time '03:00'</TT
></TD
><TD
><TT
CLASS="LITERAL"
>interval '02:00:00'</TT
></TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>-</TT
> </TD
><TD
><TT
CLASS="LITERAL"
>time '05:00' - interval '2 hours'</TT
></TD
><TD
><TT
CLASS="LITERAL"
>time '03:00:00'</TT
></TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>-</TT
> </TD
><TD
><TT
CLASS="LITERAL"
>timestamp '2001-09-28 23:00' - interval '23 hours'</TT
></TD
><TD
><TT
CLASS="LITERAL"
>timestamp '2001-09-28 00:00:00'</TT
></TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>-</TT
> </TD
><TD
><TT
CLASS="LITERAL"
>interval '1 day' - interval '1 hour'</TT
></TD
><TD
><TT
CLASS="LITERAL"
>interval '1 day -01:00:00'</TT
></TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>-</TT
> </TD
><TD
><TT
CLASS="LITERAL"
>timestamp '2001-09-29 03:00' - timestamp '2001-09-27 12:00'</TT
></TD
><TD
><TT
CLASS="LITERAL"
>interval '1 day 15:00:00'</TT
></TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>*</TT
> </TD
><TD
><TT
CLASS="LITERAL"
>900 * interval '1 second'</TT
></TD
><TD
><TT
CLASS="LITERAL"
>interval '00:15:00'</TT
></TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>*</TT
> </TD
><TD
><TT
CLASS="LITERAL"
>21 * interval '1 day'</TT
></TD
><TD
><TT
CLASS="LITERAL"
>interval '21 days'</TT
></TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>*</TT
> </TD
><TD
><TT
CLASS="LITERAL"
>double precision '3.5' * interval '1 hour'</TT
></TD
><TD
><TT
CLASS="LITERAL"
>interval '03:30:00'</TT
></TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>/</TT
> </TD
><TD
><TT
CLASS="LITERAL"
>interval '1 hour' / double precision '1.5'</TT
></TD
><TD
><TT
CLASS="LITERAL"
>interval '00:40:00'</TT
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-DATETIME-TABLE"
></A
><P
><B
>表 9-28. 日付/時刻関数</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><COL><COL><THEAD
><TR
><TH
>関数名</TH
><TH
>戻り値型</TH
><TH
>説明</TH
><TH
>例</TH
><TH
>結果</TH
></TR
></THEAD
><TBODY
><TR
><TD
>         
         <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>age(<TT
CLASS="TYPE"
>timestamp</TT
>, <TT
CLASS="TYPE"
>timestamp</TT
>)</CODE
></TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>interval</TT
></TD
><TD
>引数間の減算。日数だけでなく年と月を使用した<SPAN
CLASS="QUOTE"
>"言葉による"</SPAN
>結果を生成</TD
><TD
><TT
CLASS="LITERAL"
>age(timestamp '2001-04-10', timestamp '1957-06-13')</TT
></TD
><TD
><TT
CLASS="LITERAL"
>43 years 9 mons 27 days</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>age(<TT
CLASS="TYPE"
>timestamp</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>interval</TT
></TD
><TD
><CODE
CLASS="FUNCTION"
>current_date</CODE
>（午前零時）から減算</TD
><TD
><TT
CLASS="LITERAL"
>age(timestamp '1957-06-13')</TT
></TD
><TD
><TT
CLASS="LITERAL"
>43 years 8 mons 3 days</TT
></TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>clock_timestamp()</CODE
></TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>現在の日付と時刻（文実行中に変化する）。<A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT"
>項9.9.4</A
>を参照。
        </TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>current_date</CODE
></TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>date</TT
></TD
><TD
>現在の日付。<A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT"
>項9.9.4</A
>を参照
        </TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>current_time</CODE
></TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>time with time zone</TT
></TD
><TD
>現在の時刻。<A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT"
>項9.9.4</A
>を参照。
        </TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>current_timestamp</CODE
></TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>現在の日付と時刻（現在のトランザクションの開始時）。<A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT"
>項9.9.4</A
>を参照。
        </TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>date_part(<TT
CLASS="TYPE"
>text</TT
>, <TT
CLASS="TYPE"
>timestamp</TT
>)</CODE
></TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>double precision</TT
></TD
><TD
>部分フィールドの取得（<CODE
CLASS="FUNCTION"
>extract</CODE
>と同じ）。<A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT"
>項9.9.1</A
>を参照。
        </TD
><TD
><TT
CLASS="LITERAL"
>date_part('hour', timestamp '2001-02-16 20:38:40')</TT
></TD
><TD
><TT
CLASS="LITERAL"
>20</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>date_part(<TT
CLASS="TYPE"
>text</TT
>, <TT
CLASS="TYPE"
>interval</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>double precision</TT
></TD
><TD
>部分フィールドの取得（<CODE
CLASS="FUNCTION"
>extract</CODE
>と同じ）。<A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT"
>項9.9.1</A
>を参照。
        </TD
><TD
><TT
CLASS="LITERAL"
>date_part('month', interval '2 years 3 months')</TT
></TD
><TD
><TT
CLASS="LITERAL"
>3</TT
></TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>date_trunc(<TT
CLASS="TYPE"
>text</TT
>, <TT
CLASS="TYPE"
>timestamp</TT
>)</CODE
></TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>timestamp</TT
></TD
><TD
>指定された精度で切り捨て。<A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-TRUNC"
>項9.9.2</A
>も参照。
        </TD
><TD
><TT
CLASS="LITERAL"
>date_trunc('hour', timestamp '2001-02-16 20:38:40')</TT
></TD
><TD
><TT
CLASS="LITERAL"
>2001-02-16 20:00:00</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>date_trunc(<TT
CLASS="TYPE"
>text</TT
>, <TT
CLASS="TYPE"
>interval</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>interval</TT
></TD
><TD
>指定された精度で切り捨て。<A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-TRUNC"
>項9.9.2</A
>も参照。
        </TD
><TD
><TT
CLASS="LITERAL"
>date_trunc('hour', interval '2 days 3 hours 40 minutes')</TT
></TD
><TD
><TT
CLASS="LITERAL"
>2 days 03:00:00</TT
></TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>extract</CODE
>(<TT
CLASS="PARAMETER"
>field</TT
> from
         <TT
CLASS="TYPE"
>timestamp</TT
>)</TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>double precision</TT
></TD
><TD
>部分フィールドの取得。<A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT"
>項9.9.1</A
>を参照。
        </TD
><TD
><TT
CLASS="LITERAL"
>extract(hour from timestamp '2001-02-16 20:38:40')</TT
></TD
><TD
><TT
CLASS="LITERAL"
>20</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>extract</CODE
>(<TT
CLASS="PARAMETER"
>field</TT
> from
         <TT
CLASS="TYPE"
>interval</TT
>)</TT
></TD
><TD
><TT
CLASS="TYPE"
>double precision</TT
></TD
><TD
>部分フィールドの取得。<A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT"
>項9.9.1</A
>を参照。
        </TD
><TD
><TT
CLASS="LITERAL"
>extract(month from interval '2 years 3 months')</TT
></TD
><TD
><TT
CLASS="LITERAL"
>3</TT
></TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>isfinite(<TT
CLASS="TYPE"
>date</TT
>)</CODE
></TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>日付が有限（+/-無限でない）かどうかの検査</TD
><TD
><TT
CLASS="LITERAL"
>isfinite(date '2001-02-16')</TT
></TD
><TD
><TT
CLASS="LITERAL"
>true</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>isfinite(<TT
CLASS="TYPE"
>timestamp</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>タイムスタンプが有限（+/-無限でない）かどうかの検査</TD
><TD
><TT
CLASS="LITERAL"
>isfinite(timestamp '2001-02-16 21:28:30')</TT
></TD
><TD
><TT
CLASS="LITERAL"
>true</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>isfinite(<TT
CLASS="TYPE"
>interval</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>時間間隔が有限かどうかの検査</TD
><TD
><TT
CLASS="LITERAL"
>isfinite(interval '4 hours')</TT
></TD
><TD
><TT
CLASS="LITERAL"
>true</TT
></TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>justify_days(<TT
CLASS="TYPE"
>interval</TT
>)</CODE
></TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>interval</TT
></TD
><TD
>30日周期が1月を表すように時間間隔を調整</TD
><TD
><TT
CLASS="LITERAL"
>justify_days(interval '35 days')</TT
></TD
><TD
><TT
CLASS="LITERAL"
>1 mon 5 days</TT
></TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>justify_hours(<TT
CLASS="TYPE"
>interval</TT
>)</CODE
></TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>interval</TT
></TD
><TD
>24時間を1日とする時間間隔の調整</TD
><TD
><TT
CLASS="LITERAL"
>justify_hours(interval '27 hours')</TT
></TD
><TD
><TT
CLASS="LITERAL"
>1 day 03:00:00</TT
></TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>justify_interval(<TT
CLASS="TYPE"
>interval</TT
>)</CODE
></TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>interval</TT
></TD
><TD
><CODE
CLASS="FUNCTION"
>justify_days</CODE
>および<CODE
CLASS="FUNCTION"
>justify_hours</CODE
>を使用し、さらに符号による調整を行っての時間間隔の調整</TD
><TD
><TT
CLASS="LITERAL"
>justify_interval(interval '1 mon -1 hour')</TT
></TD
><TD
><TT
CLASS="LITERAL"
>29 days 23:00:00</TT
></TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>localtime</CODE
></TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>time</TT
></TD
><TD
>現在の時刻。<A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT"
>項9.9.4</A
>を参照。
        </TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>localtimestamp</CODE
></TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>timestamp</TT
></TD
><TD
>現在の日付と時刻（現在のトランザクションの開始時）。<A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT"
>項9.9.4</A
>を参照。
        </TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
>            <CODE
CLASS="FUNCTION"
>             make_date(<TT
CLASS="PARAMETER"
>year</TT
> <TT
CLASS="TYPE"
>int</TT
>,
             <TT
CLASS="PARAMETER"
>month</TT
> <TT
CLASS="TYPE"
>int</TT
>,
             <TT
CLASS="PARAMETER"
>day</TT
> <TT
CLASS="TYPE"
>int</TT
>)
            </CODE
>
         </TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>date</TT
></TD
><TD
>         年、月、日フィールドから日付を作成
        </TD
><TD
><TT
CLASS="LITERAL"
>make_date(2013, 7, 15)</TT
></TD
><TD
><TT
CLASS="LITERAL"
>2013-07-15</TT
></TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
>          <CODE
CLASS="FUNCTION"
>           make_interval(<TT
CLASS="PARAMETER"
>years</TT
> <TT
CLASS="TYPE"
>int</TT
> DEFAULT 0,
           <TT
CLASS="PARAMETER"
>months</TT
> <TT
CLASS="TYPE"
>int</TT
> DEFAULT 0,
           <TT
CLASS="PARAMETER"
>weeks</TT
> <TT
CLASS="TYPE"
>int</TT
> DEFAULT 0,
           <TT
CLASS="PARAMETER"
>days</TT
> <TT
CLASS="TYPE"
>int</TT
> DEFAULT 0,
           <TT
CLASS="PARAMETER"
>hours</TT
> <TT
CLASS="TYPE"
>int</TT
> DEFAULT 0,
           <TT
CLASS="PARAMETER"
>mins</TT
> <TT
CLASS="TYPE"
>int</TT
> DEFAULT 0,
           <TT
CLASS="PARAMETER"
>secs</TT
> <TT
CLASS="TYPE"
>double precision</TT
> DEFAULT 0.0)
          </CODE
>
         </TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>interval</TT
></TD
><TD
>         年、月、週、日、時間、分、秒フィールドから時間間隔を作成
        </TD
><TD
><TT
CLASS="LITERAL"
>make_interval(days =&#62; 10)</TT
></TD
><TD
><TT
CLASS="LITERAL"
>10 days</TT
></TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
>          <CODE
CLASS="FUNCTION"
>           make_time(<TT
CLASS="PARAMETER"
>hour</TT
> <TT
CLASS="TYPE"
>int</TT
>,
           <TT
CLASS="PARAMETER"
>min</TT
> <TT
CLASS="TYPE"
>int</TT
>,
           <TT
CLASS="PARAMETER"
>sec</TT
> <TT
CLASS="TYPE"
>double precision</TT
>)
          </CODE
>
         </TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>time</TT
></TD
><TD
>         時、分、秒フィールドから時刻を作成
        </TD
><TD
><TT
CLASS="LITERAL"
>make_time(8, 15, 23.5)</TT
></TD
><TD
><TT
CLASS="LITERAL"
>08:15:23.5</TT
></TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
>          <CODE
CLASS="FUNCTION"
>           make_timestamp(<TT
CLASS="PARAMETER"
>year</TT
> <TT
CLASS="TYPE"
>int</TT
>,
           <TT
CLASS="PARAMETER"
>month</TT
> <TT
CLASS="TYPE"
>int</TT
>,
           <TT
CLASS="PARAMETER"
>day</TT
> <TT
CLASS="TYPE"
>int</TT
>,
           <TT
CLASS="PARAMETER"
>hour</TT
> <TT
CLASS="TYPE"
>int</TT
>,
           <TT
CLASS="PARAMETER"
>min</TT
> <TT
CLASS="TYPE"
>int</TT
>,
           <TT
CLASS="PARAMETER"
>sec</TT
> <TT
CLASS="TYPE"
>double precision</TT
>)
          </CODE
>
         </TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>timestamp</TT
></TD
><TD
>         年、月、日、時、分、秒フィールドから時刻を作成
        </TD
><TD
><TT
CLASS="LITERAL"
>make_timestamp(2013, 7, 15, 8, 15, 23.5)</TT
></TD
><TD
><TT
CLASS="LITERAL"
>2013-07-15 08:15:23.5</TT
></TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
>          <CODE
CLASS="FUNCTION"
>           make_timestamptz(<TT
CLASS="PARAMETER"
>year</TT
> <TT
CLASS="TYPE"
>int</TT
>,
           <TT
CLASS="PARAMETER"
>month</TT
> <TT
CLASS="TYPE"
>int</TT
>,
           <TT
CLASS="PARAMETER"
>day</TT
> <TT
CLASS="TYPE"
>int</TT
>,
           <TT
CLASS="PARAMETER"
>hour</TT
> <TT
CLASS="TYPE"
>int</TT
>,
           <TT
CLASS="PARAMETER"
>min</TT
> <TT
CLASS="TYPE"
>int</TT
>,
           <TT
CLASS="PARAMETER"
>sec</TT
> <TT
CLASS="TYPE"
>double precision</TT
>,
           [<SPAN
CLASS="OPTIONAL"
> <TT
CLASS="PARAMETER"
>timezone</TT
> <TT
CLASS="TYPE"
>text</TT
> </SPAN
>])
          </CODE
>
         </TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>         年、月、日、時、分、秒フィールドから時間帯付きの時刻を作成。<TT
CLASS="PARAMETER"
>timezone</TT
>が指定されていなければ、現在の時間帯が使われる。
        </TD
><TD
><TT
CLASS="LITERAL"
>make_timestamptz(2013, 7, 15, 8, 15, 23.5)</TT
></TD
><TD
><TT
CLASS="LITERAL"
>2013-07-15 08:15:23.5+01</TT
></TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>now()</CODE
></TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>現在の日付と時刻（現在のトランザクションの開始時）。
<A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT"
>項9.9.4</A
>を参照。
        </TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>statement_timestamp()</CODE
></TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>現在の日付と時刻（現在の文の開始時）。
<A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT"
>項9.9.4</A
>を参照。
        </TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>timeofday()</CODE
></TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>現在の日付と時刻（<CODE
CLASS="FUNCTION"
>clock_timestamp</CODE
>と似ているが、<TT
CLASS="TYPE"
>text</TT
>型文字列として返す）。<A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT"
>項9.9.4</A
>を参照。
        </TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>transaction_timestamp()</CODE
></TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>現在の日付と時刻（現在のトランザクションの開始時）。
<A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT"
>項9.9.4</A
>を参照。
        </TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
></TBODY
></TABLE
></DIV
><P
>    
これらの関数に加え、<TT
CLASS="LITERAL"
>OVERLAPS</TT
> SQL演算子がサポートされています。
</P><PRE
CLASS="SYNOPSIS"
>(<TT
CLASS="REPLACEABLE"
><I
>start1</I
></TT
>, <TT
CLASS="REPLACEABLE"
><I
>end1</I
></TT
>) OVERLAPS (<TT
CLASS="REPLACEABLE"
><I
>start2</I
></TT
>, <TT
CLASS="REPLACEABLE"
><I
>end2</I
></TT
>)
(<TT
CLASS="REPLACEABLE"
><I
>start1</I
></TT
>, <TT
CLASS="REPLACEABLE"
><I
>length1</I
></TT
>) OVERLAPS (<TT
CLASS="REPLACEABLE"
><I
>start2</I
></TT
>, <TT
CLASS="REPLACEABLE"
><I
>length2</I
></TT
>)</PRE
><P>
この式は、2つの時間間隔（その両端で定義されます）が重なる時に真を返します。重ならない場合は偽を返します。
両端は2つの日付、時刻、タイムスタンプとして、もしくは、日付/時刻/タイムスタンプとそれに続く時間間隔として指定できます。
値の組み合わせで指定する場合、開始と終了のいずれを先に記述しても構いません。<TT
CLASS="LITERAL"
>OVERLAPS</TT
>は与えられた値のうち、早い方を開始として扱います。
各時間間隔は、<TT
CLASS="REPLACEABLE"
><I
>start</I
></TT
> <TT
CLASS="LITERAL"
>&lt;=</TT
> <TT
CLASS="REPLACEABLE"
><I
>time</I
></TT
> <TT
CLASS="LITERAL"
>&lt;</TT
> <TT
CLASS="REPLACEABLE"
><I
>end</I
></TT
>という半開区間として見なされます。ただし、<TT
CLASS="REPLACEABLE"
><I
>start</I
></TT
>と<TT
CLASS="REPLACEABLE"
><I
>end</I
></TT
>が同じ値の場合には単一の時間点となります。
これは、例えば端点のみが共通である2つの時間間隔は、重ならないということを意味します。
   </P
><PRE
CLASS="SCREEN"
>SELECT (DATE '2001-02-16', DATE '2001-12-21') OVERLAPS
       (DATE '2001-10-30', DATE '2002-10-30');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>true</SAMP
>
SELECT (DATE '2001-02-16', INTERVAL '100 days') OVERLAPS
       (DATE '2001-10-30', DATE '2002-10-30');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>false</SAMP
>
SELECT (DATE '2001-10-29', DATE '2001-10-30') OVERLAPS
       (DATE '2001-10-30', DATE '2001-10-31');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>false</SAMP
>
SELECT (DATE '2001-10-30', DATE '2001-10-30') OVERLAPS
       (DATE '2001-10-30', DATE '2001-10-31');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>true</SAMP
></PRE
><P
><TT
CLASS="TYPE"
>timestamp with time zone</TT
>の値に<TT
CLASS="TYPE"
>interval</TT
>の値を加える時（または<TT
CLASS="TYPE"
>interval</TT
>の値を引く時）、日にちの部分は、<TT
CLASS="TYPE"
>timestamp with time zone</TT
>の日付を指定された日数だけ先に進める、もしくは後に戻します。
（セッションの時間帯がDSTを認識する設定の場合）夏時間の移行に跨っての変化に関しては、<TT
CLASS="LITERAL"
>interval '1 day'</TT
>が<TT
CLASS="LITERAL"
>interval '24 hours'</TT
>に等しいとは限りません。
例えば、セッションの時間帯が <TT
CLASS="LITERAL"
>CST7CDT</TT
>に設定されている時に、 <TT
CLASS="LITERAL"
>timestamp with time zone '2005-04-02 12:00-07' + interval '1 day' </TT
>は、<TT
CLASS="LITERAL"
>timestamp with time zone '2005-04-03 12:00-06'</TT
>となります。一方、元の同じ<TT
CLASS="TYPE"
>timestamp with time zone</TT
>に<TT
CLASS="LITERAL"
>interval '24 hours'</TT
>を加えると、<TT
CLASS="LITERAL"
>timestamp with time zone '2005-04-03 13:00-06'</TT
>という結果になります。その理由は<TT
CLASS="LITERAL"
>CST7CDT</TT
>時間帯で<TT
CLASS="LITERAL"
>2005-04-03 02:00</TT
>に夏時間への変更があるからです。
  </P
><P
>異なる月では日数が異なりますので<CODE
CLASS="FUNCTION"
>age</CODE
>で返される<TT
CLASS="LITERAL"
>months</TT
>フィールドにはあいまいさがあります。
<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>のやり方は月をまたがる２つの日付の計算において、日付の早いほうの月を使用します。
例えば、<TT
CLASS="LITERAL"
>age('2004-06-01', '2004-04-30')</TT
>は4月を使用して<TT
CLASS="LITERAL"
>1 mon 1 day</TT
>を得ます。5月は31日あり、4月は30日のため、もし5月を使用するなら結果は<TT
CLASS="LITERAL"
>1 mon 2 days</TT
>となるでしょう。
  </P
><P
>日付とタイムスタンプの引き算は複雑になることがあります。
引き算をする概念的に単純な方法は、それぞれの値を秒数に<TT
CLASS="LITERAL"
>EXTRACT(EPOCH FROM ...)</TT
>で変換してから、結果を引き算する方法です。この結果は2つの値の間の<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>秒</I
></SPAN
>数になります。
これは各月の日数、時間帯の変更、夏時間の調整に対して調整されるでしょう。
<SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>-</TT
>"</SPAN
>演算子での日付やタイムスタンプの引き算は値の間の(24時間の)日数と時間/分/秒を、同様に調整して返します。
<CODE
CLASS="FUNCTION"
>age</CODE
>関数は年、月、日、時間/分/秒をフィールド毎に引き算し、負のフィールドの値を調整します。
以下の問い合わせは上の各方法の違いを説明する例です。
例の結果は<TT
CLASS="LITERAL"
>timezone = 'US/Eastern'</TT
>で生成されました。2つの日付の間には夏時間の変更があります。
  </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(EPOCH FROM timestamptz '2013-07-01 12:00:00') -
       EXTRACT(EPOCH FROM timestamptz '2013-03-01 12:00:00');
<I
CLASS="LINEANNOTATION"
>結果: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>10537200</SAMP
>
SELECT (EXTRACT(EPOCH FROM timestamptz '2013-07-01 12:00:00') -
        EXTRACT(EPOCH FROM timestamptz '2013-03-01 12:00:00'))
        / 60 / 60 / 24;
<I
CLASS="LINEANNOTATION"
>結果: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>121.958333333333</SAMP
>
SELECT timestamptz '2013-07-01 12:00:00' - timestamptz '2013-03-01 12:00:00';
<I
CLASS="LINEANNOTATION"
>結果: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>121 days 23:00:00</SAMP
>
SELECT age(timestamptz '2013-07-01 12:00:00', timestamptz '2013-03-01 12:00:00');
<I
CLASS="LINEANNOTATION"
>結果: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>4 mons</SAMP
></PRE
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="FUNCTIONS-DATETIME-EXTRACT"
>9.9.1. <CODE
CLASS="FUNCTION"
>EXTRACT</CODE
>, <CODE
CLASS="FUNCTION"
>date_part</CODE
></A
></H2
><PRE
CLASS="SYNOPSIS"
>EXTRACT(<TT
CLASS="REPLACEABLE"
><I
>field</I
></TT
> FROM <TT
CLASS="REPLACEABLE"
><I
>source</I
></TT
>)</PRE
><P
><CODE
CLASS="FUNCTION"
>extract</CODE
>関数は、日付/時刻の値から年や時などの部分フィールドを抽出します。
<TT
CLASS="REPLACEABLE"
><I
>source</I
></TT
>は<TT
CLASS="TYPE"
>timestamp</TT
>型、<TT
CLASS="TYPE"
>time</TT
>型、または<TT
CLASS="TYPE"
>interval</TT
>型の評価式でなければなりません（<TT
CLASS="TYPE"
>date</TT
>型の式は<TT
CLASS="TYPE"
>timestamp</TT
>型にキャストされますので、同様に使用可能です）。
<TT
CLASS="REPLACEABLE"
><I
>field</I
></TT
>はsourceの値からどのフィールドを抽出するかを選択する識別子もしくは文字列です。
<CODE
CLASS="FUNCTION"
>extract</CODE
>関数は<TT
CLASS="TYPE"
>double precision</TT
>型の値を返します。以下に有効なフィールド名を示します。

    
    <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="LITERAL"
>century</TT
></DT
><DD
><P
>世紀
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(CENTURY FROM TIMESTAMP '2000-12-16 12:21:13');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>20</SAMP
>
SELECT EXTRACT(CENTURY FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>21</SAMP
></PRE
><P
>当時の人々にはそのような意識はありませんでしたが、最初の世紀は0001-01-01 00:00:00 ADから始まります。
この定義は全てのグレゴリオ暦を使用する国で適用されています。
0という値の世紀はありません。-1世紀の次は1世紀です。

この定義に納得できなければ、苦情をバチカンローマ聖パウロ大聖堂のローマ法王に伝えてください。
       </P
></DD
><DT
><TT
CLASS="LITERAL"
>day</TT
></DT
><DD
><P
><TT
CLASS="TYPE"
>timestamp</TT
>値については、(月内の）日付フィールド（1〜31)。<TT
CLASS="TYPE"
>interval</TT
>値については日数。
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(DAY FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>16</SAMP
>

SELECT EXTRACT(DAY FROM INTERVAL '40 days 1 minute');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>40</SAMP
></PRE
></DD
><DT
><TT
CLASS="LITERAL"
>decade</TT
></DT
><DD
><P
>年フィールドを10で割ったもの
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(DECADE FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>200</SAMP
></PRE
></DD
><DT
><TT
CLASS="LITERAL"
>dow</TT
></DT
><DD
><P
>日曜日（<TT
CLASS="LITERAL"
>0</TT
>）から土曜日（<TT
CLASS="LITERAL"
>6</TT
>）までの曜日
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(DOW FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>5</SAMP
></PRE
><P
><CODE
CLASS="FUNCTION"
>extract</CODE
>関数の曜日番号は<CODE
CLASS="FUNCTION"
>to_char(...,'D')</CODE
>関数のそれとは異なる点に注意してください。
       </P
></DD
><DT
><TT
CLASS="LITERAL"
>doy</TT
></DT
><DD
><P
>年内での通算日数（1〜365/366）
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(DOY FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>47</SAMP
></PRE
></DD
><DT
><TT
CLASS="LITERAL"
>epoch</TT
></DT
><DD
><P
><TT
CLASS="TYPE"
>timestamp with time zone</TT
>型の値において、1970-01-01 00:00:00 UTCからの秒数（負の数の場合もあり）。<TT
CLASS="TYPE"
>date</TT
>と<TT
CLASS="TYPE"
>timestamp</TT
>型の値において、ローカルタイムの1970-01-01 00:00:00からの秒数。<TT
CLASS="TYPE"
>interval</TT
>型の値ではその時間間隔における全体の秒数。
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(EPOCH FROM TIMESTAMP WITH TIME ZONE '2001-02-16 20:38:40.12-08');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>982384720.12</SAMP
>

SELECT EXTRACT(EPOCH FROM INTERVAL '5 days 3 hours');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>442800</SAMP
></PRE
><P
>以下に、この経過秒数をタイムスタンプ値に変換する方法を示します。
       </P
><PRE
CLASS="SCREEN"
>SELECT TIMESTAMP WITH TIME ZONE 'epoch' + 982384720.12 * INTERVAL '1 second';</PRE
><P
>(<CODE
CLASS="FUNCTION"
>to_timestamp</CODE
>関数は上記の変換をカプセル化します。)
       </P
></DD
><DT
><TT
CLASS="LITERAL"
>hour</TT
></DT
><DD
><P
>時のフィールド（0〜23）
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(HOUR FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>20</SAMP
></PRE
></DD
><DT
><TT
CLASS="LITERAL"
>isodow</TT
></DT
><DD
><P
>月曜日（<TT
CLASS="LITERAL"
>1</TT
>）から日曜日（<TT
CLASS="LITERAL"
>7</TT
>）までの曜日
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(ISODOW FROM TIMESTAMP '2001-02-18 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>7</SAMP
></PRE
><P
>日曜日を除き<TT
CLASS="LITERAL"
>dow</TT
>と同一です。
これは<ACRONYM
CLASS="ACRONYM"
>ISO</ACRONYM
> 8601曜日番号付けに一致します。
       </P
></DD
><DT
><TT
CLASS="LITERAL"
>isoyear</TT
></DT
><DD
><P
>日付に当てはまる<ACRONYM
CLASS="ACRONYM"
>ISO</ACRONYM
> 8601週番号年（intervalには適用できない）。
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(ISOYEAR FROM DATE '2006-01-01');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2005</SAMP
>
SELECT EXTRACT(ISOYEAR FROM DATE '2006-01-02');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2006</SAMP
></PRE
><P
>すべての<ACRONYM
CLASS="ACRONYM"
>ISO</ACRONYM
> 8601週番号年は1月4日を含む週の月曜日から開始されます。従って、1月上旬、または12月下旬で<ACRONYM
CLASS="ACRONYM"
>ISO</ACRONYM
>年がグレゴリオ年と異なる可能性があります。
より詳細は<TT
CLASS="LITERAL"
>week</TT
>フィールドを参照してください。
       </P
><P
>このフィールドは8.3より前のPostgreSQLリリースでは有効でありません。
       </P
></DD
><DT
><TT
CLASS="LITERAL"
>microseconds</TT
></DT
><DD
><P
>端数部分も含む秒フィールドに、1,000,000を乗じた値。秒の整数部を含むことに注意。
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(MICROSECONDS FROM TIME '17:12:28.5');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>28500000</SAMP
></PRE
></DD
><DT
><TT
CLASS="LITERAL"
>millennium</TT
></DT
><DD
><P
>ミレニアム（千年期）
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(MILLENNIUM FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>3</SAMP
></PRE
><P
>1900年代の年は第2ミレニアムです。第3ミレニアムは2001年1月1日から始まりました。
       </P
></DD
><DT
><TT
CLASS="LITERAL"
>milliseconds</TT
></DT
><DD
><P
>端数部分も含む秒フィールドに、1000を乗た値。秒の整数部を含むことに注意してください。
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(MILLISECONDS FROM TIME '17:12:28.5');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>28500</SAMP
></PRE
></DD
><DT
><TT
CLASS="LITERAL"
>minute</TT
></DT
><DD
><P
>分フィールド（0〜59）
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(MINUTE FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>38</SAMP
></PRE
></DD
><DT
><TT
CLASS="LITERAL"
>month</TT
></DT
><DD
><P
><TT
CLASS="TYPE"
>timestamp</TT
>型の値に対しては年内の月番号（1〜12）。<TT
CLASS="TYPE"
>interval</TT
>型の値に対しては月数を12で割った余り（0〜11）。
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(MONTH FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2</SAMP
>

SELECT EXTRACT(MONTH FROM INTERVAL '2 years 3 months');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>3</SAMP
>

SELECT EXTRACT(MONTH FROM INTERVAL '2 years 13 months');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>1</SAMP
></PRE
></DD
><DT
><TT
CLASS="LITERAL"
>quarter</TT
></DT
><DD
><P
>その日付が含まれる年の四半期（1〜4）。
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(QUARTER FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>1</SAMP
></PRE
></DD
><DT
><TT
CLASS="LITERAL"
>second</TT
></DT
><DD
><P
>端数を含んだ秒フィールド（0〜59<A
NAME="AEN15026"
HREF="#FTN.AEN15026"
><SPAN
CLASS="footnote"
>[1]</SPAN
></A
>）。
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(SECOND FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>40</SAMP
>

SELECT EXTRACT(SECOND FROM TIME '17:12:28.5');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>28.5</SAMP
></PRE
></DD
><DT
><TT
CLASS="LITERAL"
>timezone</TT
></DT
><DD
><P
>秒単位のUTCからの時間帯オフセット。正の値はUTCより東の時間帯に対応し、負の値はUTCより西の時間帯に対応。
(技術的には、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>はうるう秒を制御しないため<ACRONYM
CLASS="ACRONYM"
>UT1</ACRONYM
>を使用。)
       </P
></DD
><DT
><TT
CLASS="LITERAL"
>timezone_hour</TT
></DT
><DD
><P
>時間帯オフセットの時の成分。
       </P
></DD
><DT
><TT
CLASS="LITERAL"
>timezone_minute</TT
></DT
><DD
><P
>時間帯オフセットの分の成分。
       </P
></DD
><DT
><TT
CLASS="LITERAL"
>week</TT
></DT
><DD
><P
><ACRONYM
CLASS="ACRONYM"
>ISO</ACRONYM
> 8601週番号。
定義ではISO週は月曜日から始まり、その年の1月4日を含む週をその年の第1週としています。
つまり、年の最初の木曜日がある週がその年の第1週となります。
       </P
><P
>ISO週番号システムでは、1月の早い日にちは前年の第52週もしくは第53週となることがあり、12月の遅い日にちには次年の最初の週の一部となることがあります。
例えば、<TT
CLASS="LITERAL"
>2005-01-01</TT
>は2004年の第53週であり、<TT
CLASS="LITERAL"
>2006-01-01</TT
>は2005年の第52週の一部です、一方<TT
CLASS="LITERAL"
>2012-12-31</TT
>は2013年の第1週の一部となります。
整合性のある結果を得るため、<TT
CLASS="LITERAL"
>isoyear</TT
>フィールドと<TT
CLASS="LITERAL"
>week</TT
>を併用することを推奨します。
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(WEEK FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>7</SAMP
></PRE
></DD
><DT
><TT
CLASS="LITERAL"
>year</TT
></DT
><DD
><P
>年フィールド。<TT
CLASS="LITERAL"
>AD零年</TT
>が存在しないことは忘れないでください。このため<TT
CLASS="LITERAL"
>AD</TT
>の年から<TT
CLASS="LITERAL"
>BC</TT
>の年を減ずる時には注意が必要です。
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(YEAR FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2001</SAMP
></PRE
></DD
></DL
></DIV
><P>
   </P
><P
><CODE
CLASS="FUNCTION"
>extract</CODE
>関数は主に演算処理を意図しています。
日付/時刻の値を表示する目的での書式については<A
HREF="functions-formatting.html"
>項9.8</A
>を参照してください。
   </P
><P
><CODE
CLASS="FUNCTION"
>date_part</CODE
>関数は伝統的な<SPAN
CLASS="PRODUCTNAME"
>Ingres</SPAN
>上で設計されたもので、標準<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>の<CODE
CLASS="FUNCTION"
>extract</CODE
>関数と等価です。
</P><PRE
CLASS="SYNOPSIS"
>date_part('<TT
CLASS="REPLACEABLE"
><I
>field</I
></TT
>', <TT
CLASS="REPLACEABLE"
><I
>source</I
></TT
>)</PRE
><P>
ここで<TT
CLASS="REPLACEABLE"
><I
>field</I
></TT
>パラメータが名前ではなく文字列値である必要があることに注意してください。
<CODE
CLASS="FUNCTION"
>date_part</CODE
>で有効なフィールド名は<CODE
CLASS="FUNCTION"
>extract</CODE
>と同じです。
   </P
><PRE
CLASS="SCREEN"
>SELECT date_part('day', TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>16</SAMP
>

SELECT date_part('hour', INTERVAL '4 hours 3 minutes');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>4</SAMP
></PRE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="FUNCTIONS-DATETIME-TRUNC"
>9.9.2. <CODE
CLASS="FUNCTION"
>date_trunc</CODE
></A
></H2
><P
><CODE
CLASS="FUNCTION"
>date_trunc</CODE
>関数は概念的に数値に対する<CODE
CLASS="FUNCTION"
>trunc</CODE
>関数と類似しています。
   </P
><P
></P><PRE
CLASS="SYNOPSIS"
>date_trunc('<TT
CLASS="REPLACEABLE"
><I
>field</I
></TT
>', <TT
CLASS="REPLACEABLE"
><I
>source</I
></TT
>)</PRE
><P>
<TT
CLASS="REPLACEABLE"
><I
>source</I
></TT
>は、データ型<TT
CLASS="TYPE"
>timestamp</TT
>もしくは<TT
CLASS="TYPE"
>interval</TT
>の評価式です
（<TT
CLASS="TYPE"
>date</TT
>型と<TT
CLASS="TYPE"
>time</TT
>型の値はそれぞれ自動的に<TT
CLASS="TYPE"
>timestamp</TT
>もしくは<TT
CLASS="TYPE"
>interval</TT
>にキャストされます。）
<TT
CLASS="REPLACEABLE"
><I
>field</I
></TT
>は、入力値の値をどの精度で切り捨てるかを選択します。
戻り値は<TT
CLASS="TYPE"
>timestamp</TT
>もしくは<TT
CLASS="TYPE"
>interval</TT
>型で、指定した精度より下のすべてのフィールドがゼロに設定（日と月については1に設定）されます。
   </P
><P
><TT
CLASS="REPLACEABLE"
><I
>field</I
></TT
>の有効値には次のものがあります。
    <P
></P
><TABLE
BORDER="0"
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
>microseconds</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>milliseconds</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>second</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>minute</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>hour</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>day</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>week</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>month</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>quarter</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>year</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>decade</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>century</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>millennium</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
>
   </P
><P
>例：
</P><PRE
CLASS="SCREEN"
>SELECT date_trunc('hour', TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2001-02-16 20:00:00</SAMP
>

SELECT date_trunc('year', TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2001-01-01 00:00:00</SAMP
></PRE
><P>
   </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="FUNCTIONS-DATETIME-ZONECONVERT"
>9.9.3. <TT
CLASS="LITERAL"
>AT TIME ZONE</TT
></A
></H2
><P
><CODE
CLASS="FUNCTION"
>AT TIME ZONE</CODE
>構文を使用することにより、タイムスタンプを異なる時間帯に変換することができます。
<A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-ZONECONVERT-TABLE"
>表9-29</A
>にその種類を示します。
   </P
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-DATETIME-ZONECONVERT-TABLE"
></A
><P
><B
>表 9-29. <TT
CLASS="LITERAL"
>AT TIME ZONE</TT
>の種類</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>式</TH
><TH
>戻り値</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
>         <TT
CLASS="LITERAL"
><TT
CLASS="TYPE"
>timestamp without time zone</TT
> AT TIME ZONE <TT
CLASS="REPLACEABLE"
><I
>zone</I
></TT
></TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>与えられた<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>時間帯なし</I
></SPAN
>タイムスタンプを指定された時間帯にあるとして取り扱います。</TD
></TR
><TR
><TD
>         <TT
CLASS="LITERAL"
><TT
CLASS="TYPE"
>timestamp with time zone</TT
> AT TIME ZONE <TT
CLASS="REPLACEABLE"
><I
>zone</I
></TT
></TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>timestamp without time zone</TT
></TD
><TD
>与えられた<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>時間帯付き</I
></SPAN
>タイムスタンプを新規の時間帯に、時間帯の指定なく変換します。</TD
></TR
><TR
><TD
>         <TT
CLASS="LITERAL"
><TT
CLASS="TYPE"
>time with time zone</TT
> AT TIME ZONE <TT
CLASS="REPLACEABLE"
><I
>zone</I
></TT
></TT
>
        </TD
><TD
><TT
CLASS="TYPE"
>time with time zone</TT
></TD
><TD
>与えられた時刻<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>with time zone</I
></SPAN
>を新しい時間帯に変換します。</TD
></TR
></TBODY
></TABLE
></DIV
><P
>これらの式では、設定する時間帯<TT
CLASS="REPLACEABLE"
><I
>zone</I
></TT
>は、（<TT
CLASS="LITERAL"
>'PST'</TT
>のような）テキスト文字列、または（<TT
CLASS="LITERAL"
>INTERVAL '-08:00'</TT
>のような）時間間隔で指定することができます。
テキストの場合、<A
HREF="datatype-datetime.html#DATATYPE-TIMEZONES"
>項8.5.3</A
>に示した方法で時間帯名称を指定することができます。
   </P
><P
>以下に例を示します（ローカル時間帯を<TT
CLASS="LITERAL"
>PST8PDT</TT
>と想定しています）。
</P><PRE
CLASS="SCREEN"
>SELECT TIMESTAMP '2001-02-16 20:38:40' AT TIME ZONE 'MST';
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2001-02-16 19:38:40-08</SAMP
>

SELECT TIMESTAMP WITH TIME ZONE '2001-02-16 20:38:40-05' AT TIME ZONE 'MST';
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2001-02-16 18:38:40</SAMP
></PRE
><P>
最初の例は、時間帯のないタイプスタンプを使用し、それをMST時間（UTC-7）として解釈し、そして表示用にPST（UTC-7）に変換します。
2番目の例は、EST（UTC-5）で指定されたタイムスタンプを使用し、MST（UTC-7）でのローカル時間に変換しています。
   </P
><P
>関数<CODE
CLASS="FUNCTION"
>timezone</CODE
>(<TT
CLASS="REPLACEABLE"
><I
>zone</I
></TT
>, <TT
CLASS="REPLACEABLE"
><I
>timestamp</I
></TT
>)は、SQL準拠の構文<TT
CLASS="LITERAL"
><TT
CLASS="REPLACEABLE"
><I
>timestamp</I
></TT
> AT TIME ZONE <TT
CLASS="REPLACEABLE"
><I
>zone</I
></TT
></TT
>と等価です。
   </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="FUNCTIONS-DATETIME-CURRENT"
>9.9.4. Current Date/Time</A
></H2
><P
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>は、現在の日付時刻に関した値を返す多くの関数を提供します。
これらの標準SQL関数はすべて、現在のトランザクションの開始時刻に基づいた値を返します。
</P><PRE
CLASS="SYNOPSIS"
>CURRENT_DATE
CURRENT_TIME
CURRENT_TIMESTAMP
CURRENT_TIME(<TT
CLASS="REPLACEABLE"
><I
>precision</I
></TT
>)
CURRENT_TIMESTAMP(<TT
CLASS="REPLACEABLE"
><I
>precision</I
></TT
>)
LOCALTIME
LOCALTIMESTAMP
LOCALTIME(<TT
CLASS="REPLACEABLE"
><I
>precision</I
></TT
>)
LOCALTIMESTAMP(<TT
CLASS="REPLACEABLE"
><I
>precision</I
></TT
>)</PRE
><P>
    </P
><P
><CODE
CLASS="FUNCTION"
>CURRENT_TIME</CODE
>および<CODE
CLASS="FUNCTION"
>CURRENT_TIMESTAMP</CODE
>関数では、時間帯を伴う値を扱います。一方、<CODE
CLASS="FUNCTION"
>LOCALTIME</CODE
>および<CODE
CLASS="FUNCTION"
>LOCALTIMESTAMP</CODE
>関数では、時間帯を伴わない値を扱います。
    </P
><P
><CODE
CLASS="FUNCTION"
>CURRENT_TIME</CODE
>、<CODE
CLASS="FUNCTION"
>CURRENT_TIMESTAMP</CODE
>、<CODE
CLASS="FUNCTION"
>LOCALTIME</CODE
>、および<CODE
CLASS="FUNCTION"
>LOCALTIMESTAMP</CODE
>関数では、精度のパラメータをオプションで取ることができ、それに合わせて秒フィールドの端数桁を丸める結果をもたらします。
精度のパラメータがない場合、結果は使用可能な最大精度で出力されます。
    </P
><P
>例：
</P><PRE
CLASS="SCREEN"
>SELECT CURRENT_TIME;
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>14:39:53.662522-05</SAMP
>

SELECT CURRENT_DATE;
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2001-12-23</SAMP
>

SELECT CURRENT_TIMESTAMP;
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2001-12-23 14:39:53.662522-05</SAMP
>

SELECT CURRENT_TIMESTAMP(2);
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2001-12-23 14:39:53.66-05</SAMP
>

SELECT LOCALTIMESTAMP;
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2001-12-23 14:39:53.662522</SAMP
></PRE
><P>
   </P
><P
>これらの関数は現在のトランザクションの開始時刻を返すため、その値はトランザクションが実行されている間は変化しません。
これは仕様であると考えられており、その意図は、単一のトランザクションが一貫性のある<SPAN
CLASS="QUOTE"
>"現在"</SPAN
>時刻の概念を持ち、同一トランザクション内の複数の変更が同一のタイムスタンプを持つようにすることにあります。
   </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>他のデータベースシステムでは、これらの値をより頻繁に増加させることがあります。
    </P
></BLOCKQUOTE
></DIV
><P
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>はまた、関数を呼び出した時の実際の現在時刻や現在の文の開始時刻を返す関数も提供します。
非標準SQLの時間関数の全一覧を以下に示します。
</P><PRE
CLASS="SYNOPSIS"
>transaction_timestamp()
statement_timestamp()
clock_timestamp()
timeofday()
now()</PRE
><P>
   </P
><P
><CODE
CLASS="FUNCTION"
>transaction_timestamp()</CODE
>は<CODE
CLASS="FUNCTION"
>CURRENT_TIMESTAMP</CODE
>と等価ですが、明確に何を返すかを反映する名前になっています。
<CODE
CLASS="FUNCTION"
>statement_timestamp()</CODE
>は現在の文の実行開始時刻を返すものです（より具体的にいうと、直前のコマンドメッセージをクライアントから受け取った時刻です）。
<CODE
CLASS="FUNCTION"
>statement_timestamp()</CODE
>および<CODE
CLASS="FUNCTION"
>transaction_timestamp()</CODE
>はトランザクションの最初のコマンドでは同じ値を返しますが、その後に引き続くコマンドでは異なる可能性があります。
<CODE
CLASS="FUNCTION"
>clock_timestamp()</CODE
>は実際の現在時刻を返しますので、その値は単一のSQLコマンドであっても異なります。
<CODE
CLASS="FUNCTION"
>timeofday()</CODE
>は<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の歴史的な関数です。
<CODE
CLASS="FUNCTION"
>clock_timestamp()</CODE
>同様、実際の現在時刻を返しますが、<TT
CLASS="TYPE"
>timestamp with time zone</TT
>型の値ではなく、整形された<TT
CLASS="TYPE"
>text</TT
>文字列を返します。<CODE
CLASS="FUNCTION"
>now()</CODE
>は<CODE
CLASS="FUNCTION"
>transaction_timestamp()</CODE
>と同じもので、伝統的な<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>関数です。
   </P
><P
>すべての日付/時刻型はまた、特殊なリテラル値 <TT
CLASS="LITERAL"
>now</TT
>を受け付け、これは現在の日付と時刻（ここでも、トランザクションの開始時刻として解釈されます）を表します。
したがって、下記の３つの実行結果は全て同じものとなります。
</P><PRE
CLASS="PROGRAMLISTING"
>SELECT CURRENT_TIMESTAMP;
SELECT now();
SELECT TIMESTAMP 'now';  -- DEFAULTで使用するのは正しくない</PRE
><P>
   </P
><DIV
CLASS="TIP"
><BLOCKQUOTE
CLASS="TIP"
><P
><B
>ティップ: </B
>テーブルを作成する時、<TT
CLASS="LITERAL"
>DEFAULT</TT
>句を指定するのに3番目の形式を使おうとは思わないでしょう。
システムは<TT
CLASS="LITERAL"
>now</TT
>という定数を解析すると、すぐにそれを<TT
CLASS="TYPE"
>timestamp</TT
>に変換するので、デフォルト値が必要が時には、テーブルが作成された時刻が使われます。最初の2つの形式は関数呼び出しなので、デフォルト値が使用されるまで評価されません。ですから、これらの関数は列の挿入時間をデフォルトとする、望ましい振舞いをします。
     </P
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="FUNCTIONS-DATETIME-DELAY"
>9.9.5. 遅延実行</A
></H2
><P
>以下の関数は、サーバプロセスの実行を遅延させるために使用可能です。
</P><PRE
CLASS="SYNOPSIS"
>pg_sleep(<TT
CLASS="REPLACEABLE"
><I
>seconds</I
></TT
>)
pg_sleep_for(<TT
CLASS="TYPE"
>interval</TT
>)
pg_sleep_until(<TT
CLASS="TYPE"
>timestamp with time zone</TT
>)</PRE
><P>

<CODE
CLASS="FUNCTION"
>pg_sleep</CODE
>は、<TT
CLASS="REPLACEABLE"
><I
>seconds</I
></TT
>秒経過するまで、現在のセッションのプロセスを休止させます。
<TT
CLASS="REPLACEABLE"
><I
>seconds</I
></TT
>は<TT
CLASS="TYPE"
>double precision</TT
>型の値です。そのため、小数単位で休止秒数を指定することができます。
<CODE
CLASS="FUNCTION"
>pg_sleep_for</CODE
>は<TT
CLASS="TYPE"
>interval</TT
>でより長い休止時間を指定する便利な関数です。
<CODE
CLASS="FUNCTION"
>pg_sleep_until</CODE
>は特定の起床時刻が望まれる場合に便利な関数です。
以下に例を示します。

</P><PRE
CLASS="PROGRAMLISTING"
>SELECT pg_sleep(1.5);
SELECT pg_sleep_for('5 minutes');
SELECT pg_sleep_until('tomorrow 03:00');</PRE
><P>
   </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>休止時間の有効な分解能はプラットフォームに依存します。0.01秒が一般的な値です。
休止による遅延は最短で指定した時間と同じになります。
サーバの負荷などが要因となり、より長くなる可能性があります。
特に、<CODE
CLASS="FUNCTION"
>pg_sleep_until</CODE
>は指定した時刻ちょうどに起床する保証はありませんが、それより早く起床することはありません。
     </P
></BLOCKQUOTE
></DIV
><DIV
CLASS="WARNING"
><P
></P
><TABLE
CLASS="WARNING"
BORDER="1"
WIDTH="100%"
><TR
><TD
ALIGN="CENTER"
><B
>警告</B
></TD
></TR
><TR
><TD
ALIGN="LEFT"
><P
><CODE
CLASS="FUNCTION"
>pg_sleep</CODE
>またはその亜種を呼び出す時、セッションが必要以上のロックを保持していないことを確実にしてください。
さもないと、他のセッションが休止中のプロセスを待機しなければならないかもしれません。そのためシステム全体の速度が低下することになるかもしれません。
     </P
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><H3
CLASS="FOOTNOTES"
>注意</H3
><TABLE
BORDER="0"
CLASS="FOOTNOTES"
WIDTH="100%"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN15026"
HREF="functions-datetime.html#AEN15026"
><SPAN
CLASS="footnote"
>[1]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>オペレーティングシステムでうるう秒が実装されている場合は60まで。</P
></TD
></TR
></TABLE
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="functions-formatting.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>ホーム</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="functions-enum.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>データ型書式設定関数</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="functions.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>列挙型サポート関数</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>