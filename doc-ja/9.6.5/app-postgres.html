<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>postgres</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 9.6.5文書"
HREF="index.html"><LINK
REL="UP"
TITLE="PostgreSQLサーバアプリケーション"
HREF="reference-server.html"><LINK
REL="PREVIOUS"
TITLE="pg_xlogdump"
HREF="pgxlogdump.html"><LINK
REL="NEXT"
TITLE="postmaster"
HREF="app-postmaster.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=utf-8"><META
NAME="creation"
CONTENT="2017-10-17T11:51:21"></HEAD
><BODY
CLASS="REFENTRY"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>PostgreSQL 9.6.5文書</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="pg_xlogdump"
HREF="pgxlogdump.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="reference-server.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="postmaster"
HREF="app-postmaster.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="APP-POSTGRES"
></A
><SPAN
CLASS="APPLICATION"
>postgres</SPAN
></H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN103567"
></A
><H2
>名前</H2
>postgres&nbsp;--&nbsp;<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>データベースサーバ</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN103571"
></A
><H2
>概要</H2
><P
><TT
CLASS="COMMAND"
>postgres</TT
> [<TT
CLASS="REPLACEABLE"
><I
>option</I
></TT
>...]</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN103576"
></A
><H2
>説明</H2
><P
><TT
CLASS="COMMAND"
>postgres</TT
>は、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>のデータベースサーバです。
クライアントアプリケーションがデータベースに接続するためには、稼働中の<TT
CLASS="COMMAND"
>postgres</TT
>インスタンスに（ネットワークを介して、またはローカルで）接続する必要があります。
その後、<TT
CLASS="COMMAND"
>postgres</TT
>は接続を取り扱うために別のサーバプロセスを開始します。
  </P
><P
>1つの<TT
CLASS="COMMAND"
>postgres</TT
>インスタンスは常に1つのデータベースクラスタのデータを管理します。
データベースクラスタとは、共通のファイルシステム領域（<SPAN
CLASS="QUOTE"
>"データ領域"</SPAN
>）に格納されているデータベースの集まりのことです。
1つのシステム上で、同時に複数の<TT
CLASS="COMMAND"
>postmaster</TT
>インスタンスを実行することは可能ですが、それらは異なるデータ領域と、異なる接続ポート（下記参照）を使用する必要があります。
<TT
CLASS="COMMAND"
>postgres</TT
>は、その起動時にデータ領域の場所を知らなければなりません。
その場所を<TT
CLASS="OPTION"
>-D</TT
>オプションまたは環境変数<TT
CLASS="ENVAR"
>PGDATA</TT
>によって指定しなければなりません。デフォルト値はありません。
通常、<TT
CLASS="OPTION"
>-D</TT
>または<TT
CLASS="ENVAR"
>PGDATA</TT
>は、<A
HREF="app-initdb.html"
>initdb</A
>で作成されたデータ領域ディレクトリを直接指し示します。
他のファイルレイアウトを取ることもできます。<A
HREF="runtime-config-file-locations.html"
>項19.2</A
>を参照してください。
  </P
><P
>デフォルトでは、<TT
CLASS="COMMAND"
>postgres</TT
>はフォアグラウンドで起動し、ログメッセージを標準エラー出力に出力します。
実運用では、<TT
CLASS="COMMAND"
>postgres</TT
>アプリケーションはおそらくマシン起動時にバックグラウンドで起動されるはずです。
  </P
><P
>また<TT
CLASS="COMMAND"
>postgres</TT
>はシングルユーザモードで呼び出すこともできます。
このモードは、主に<A
HREF="app-initdb.html"
>initdb</A
>による初期化処理の中で使用されます。
これを、デバッグのためや障害からの復旧時に使用することもできます。
実際には発生するはずのプロセス間通信やロック処理が発生しませんので、シングルユーザモードがサーバのデバッグに必ずしも適したものではないことに注意してください。
シェルからシングルユーザモードで起動された場合、ユーザは問い合わせを入力できます。
結果は画面上に表示されますが、その形式はエンドユーザ向けではなく開発者向けのものです。
シングルユーザモードでは、セッションユーザはIDが1のユーザと設定され、暗黙的にスーパーユーザの権限がこのユーザに与えられます。
このユーザは実際に存在していなくても構いません。
このため、シングルユーザモードはシステムカタログの偶発的な損傷などから手動で復旧するために使用することができます。
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="APP-POSTGRES-OPTIONS"
></A
><H2
>オプション</H2
><P
><TT
CLASS="COMMAND"
>postgres</TT
>には、下記のコマンドライン引数を指定できます。
オプションに関する詳細は<A
HREF="runtime-config.html"
>第19章</A
>を参照してください。
また、設定ファイルを使用することによって、これらのほとんどのオプションについて入力する手間を省くことができます。
一部の（安全な）オプションは接続中のクライアントから設定することもできます。
その設定方法はアプリケーションに依存し、また、そのセッションでのみ適用されます。
たとえば、環境変数<TT
CLASS="ENVAR"
>PGOPTIONS</TT
>を設定すると、<SPAN
CLASS="APPLICATION"
>libpq</SPAN
>に基づくクライアントはその文字列をサーバに渡します。
渡された文字列は<TT
CLASS="COMMAND"
>postgres</TT
>コマンドラインオプションとして解釈されます。
   </P
><DIV
CLASS="REFSECT2"
><A
NAME="AEN103608"
></A
><H3
>一般的な目的</H3
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="OPTION"
>-B <TT
CLASS="REPLACEABLE"
><I
>nbuffers</I
></TT
></TT
></DT
><DD
><P
>サーバプロセスが使用する共有バッファの数を設定します。
このパラメータのデフォルト値は<SPAN
CLASS="APPLICATION"
>initdb</SPAN
>により自動的に決まります。
このオプションを指定することは設定パラメータ<A
HREF="runtime-config-resource.html#GUC-SHARED-BUFFERS"
>shared_buffers</A
>を設定することと同等です。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-c <TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
>=<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
></TT
></DT
><DD
><P
>指定の実行時パラメータを設定します。
<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>でサポートされる設定パラメータは<A
HREF="runtime-config.html"
>第19章</A
>で説明します。
実際には、他の多くのコマンドラインオプションはこのようなパラメータへの代入を簡略化したものです。
<TT
CLASS="OPTION"
>-c</TT
>は複数のパラメータを設定するために複数個使用することができます。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-C <TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
></TT
></DT
><DD
><P
>指定された名前の実行時パラメータの値を表示し、終了します、
（詳細については上の<TT
CLASS="OPTION"
>-c</TT
>を参照してください。）
これは実行中のサーバに対して使用することができ、<TT
CLASS="FILENAME"
>postgresql.conf</TT
>からの値やその起動時に与えられたパラメータにより変更された値を返します。
クラスタが起動した時に与えられたパラメータは反映されません。
       </P
><P
>このオプションは、<A
HREF="app-pg-ctl.html"
><SPAN
CLASS="APPLICATION"
>pg_ctl</SPAN
></A
>など、サーバインスタンスと連携する他のプログラムが設定パラメータ値を問い合わせることを意図しています。
ユーザ向けのアプリケーションでは代わりに<A
HREF="sql-show.html"
>SHOW</A
>や<TT
CLASS="STRUCTNAME"
>pg_settings</TT
>ビューなどを使用すべきです。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-d <TT
CLASS="REPLACEABLE"
><I
>debug-level</I
></TT
></TT
></DT
><DD
><P
>デバッグレベルを設定します。
大きな値が設定されているほど、より多くのデバッグ情報がサーバのログに出力されます。
値として設定できる範囲は、1から5までです。
特定のセッションで<TT
CLASS="LITERAL"
>-d 0</TT
>を渡すこともできます。
この設定により、親の<TT
CLASS="COMMAND"
>postgres</TT
>プロセスのサーバログレベルがこのセッションに伝播されません。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-D <TT
CLASS="REPLACEABLE"
><I
>datadir</I
></TT
></TT
></DT
><DD
><P
>ファイルシステム上のデータベース設定ファイルの場所を指定します。
詳細は<A
HREF="runtime-config-file-locations.html"
>項19.2</A
>を参照してください。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-e</TT
></DT
><DD
><P
>デフォルトの日付データ形式を<SPAN
CLASS="QUOTE"
>"ヨーロッパ式"</SPAN
>、つまり<TT
CLASS="LITERAL"
>DMY</TT
>の順番にします。
これにより、いくつかの日付出力形式でも、月の前に日が表示されるようになります。
詳細は<A
HREF="datatype-datetime.html"
>項8.5</A
>を参照してください。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-F</TT
></DT
><DD
><P
>性能向上のために<CODE
CLASS="FUNCTION"
>fsync</CODE
>呼び出しを無効とします。
ただしこの場合、システムクラッシュ時にデータが損傷する危険性があります。
このオプションの指定は設定パラメータ<A
HREF="runtime-config-wal.html#GUC-FSYNC"
>fsync</A
>を無効にすることと同一です。
このオプションを使用する時は、事前に詳細な文書を一読してください。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-h <TT
CLASS="REPLACEABLE"
><I
>hostname</I
></TT
></TT
></DT
><DD
><P
><TT
CLASS="COMMAND"
>postgres</TT
>がクライアントアプリケーションとの接続を監視するホスト名、または、IPアドレスを指定します。
この値には、カンマで区切ったアドレスの一覧、あるいは、全ての利用可能なインタフェースを監視することを意味する<TT
CLASS="LITERAL"
>*</TT
>を指定することができます。
空の値を指定すると、IPアドレスをまったく監視しないことを意味します。
この場合、サーバへの接続には、Unixドメインソケットのみが使用されます。
デフォルトでは<SPAN
CLASS="SYSTEMITEM"
>localhost</SPAN
>のみを監視します。
このオプションを指定することは設定パラメータ<A
HREF="runtime-config-connection.html#GUC-LISTEN-ADDRESSES"
>listen_addresses</A
>を設定することと同等です。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-i</TT
></DT
><DD
><P
>リモートクライアントからのTCP/IP（インターネットドメイン）経由の接続を可能とします。
このオプションを設定しない場合には、ローカルからの接続のみが使用可能となります。
このオプションは、<TT
CLASS="FILENAME"
>postgresql.conf</TT
>内の<TT
CLASS="VARNAME"
>listen_addresses</TT
>を、あるいは<TT
CLASS="OPTION"
>-h</TT
>を<TT
CLASS="LITERAL"
>*</TT
>に設定することと同じ意味を持ちます。
       </P
><P
>このオプションは<A
HREF="runtime-config-connection.html#GUC-LISTEN-ADDRESSES"
>listen_addresses</A
>の全ての機能を実現することができないため廃止が予定されています。
通常は、直接<TT
CLASS="VARNAME"
>listen_addresses</TT
>を設定する方法をお勧めします。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-k <TT
CLASS="REPLACEABLE"
><I
>directory</I
></TT
></TT
></DT
><DD
><P
><TT
CLASS="COMMAND"
>postgres</TT
>がクライアントアプリケーションからの接続を監視するUnixドメインソケットのディレクトリを指定します。
ディレクトリをカンマで区切ったリストを値とすることもできます。
空の値を指定すると、Unixドメインソケットをまったく監視しません。この場合サーバに接続するためにはTCP/IPのみを使用することができます。
デフォルトでは、通常<TT
CLASS="FILENAME"
>/tmp</TT
>となっていますが、これはコンパイルに変更できます。
このオプションを指定することは設定パラメータ<A
HREF="runtime-config-connection.html#GUC-UNIX-SOCKET-DIRECTORIES"
>unix_socket_directories</A
>を設定することと同等です。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-l</TT
></DT
><DD
><P
><ACRONYM
CLASS="ACRONYM"
>SSL</ACRONYM
>を使用して、安全な接続を行います。
このオプションを使用するためには、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>のコンパイル時に<ACRONYM
CLASS="ACRONYM"
>SSL</ACRONYM
>を有効にする必要があります。
<ACRONYM
CLASS="ACRONYM"
>SSL</ACRONYM
>の使用に関する詳細は<A
HREF="ssl-tcp.html"
>項18.9</A
>を参照してください。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-N <TT
CLASS="REPLACEABLE"
><I
>max-connections</I
></TT
></TT
></DT
><DD
><P
>このサーバが受け付けるクライアント接続数の最大値を設定します。
このパラメータのデフォルト値は<SPAN
CLASS="APPLICATION"
>initdb</SPAN
>により自動的に選択されます。
このオプションを指定することは設定パラメータ<A
HREF="runtime-config-connection.html#GUC-MAX-CONNECTIONS"
>max_connections</A
>を設定することと同じ意味を持ちます。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-o <TT
CLASS="REPLACEABLE"
><I
>extra-options</I
></TT
></TT
></DT
><DD
><P
><TT
CLASS="REPLACEABLE"
><I
>extra-options</I
></TT
>で指定されたコマンドライン形式の引数は、この<TT
CLASS="COMMAND"
>postgres</TT
>プロセスにより開始される全てのサーバプロセスに引き渡されます。
       </P
><P
><TT
CLASS="REPLACEABLE"
><I
>extra-options</I
></TT
>内の空白文字は、それがバックスラッシュ(<TT
CLASS="LITERAL"
>\</TT
>)でエスケープされていなければ、引数を区切るものと解釈されます。
文字としてのバックスラッシュを記述するには、<TT
CLASS="LITERAL"
>\\</TT
>と書いてください。
複数の引数は、<TT
CLASS="OPTION"
>-o</TT
>を複数回使うことでも指定できます。
       </P
><P
>このオプションの使用は非推奨です。
サーバプロセス用のすべてのコマンドラインオプションは<TT
CLASS="COMMAND"
>postgres</TT
>コマンドラインで直接指定することができます。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-p <TT
CLASS="REPLACEABLE"
><I
>port</I
></TT
></TT
></DT
><DD
><P
>クライアントアプリケーションからの接続を<TT
CLASS="COMMAND"
>postgres</TT
>が監視するTCP/IPポート、またはローカルUnixドメインソケットファイルの拡張子を指定します。
デフォルトでは、環境変数<TT
CLASS="ENVAR"
>PGPORT</TT
>、<TT
CLASS="ENVAR"
>PGPORT</TT
>が設定されていない場合はコンパイル時に設定された値（通常5432）が使用されます。
デフォルトのポート以外を指定した場合には、コマンドラインオプション、または<TT
CLASS="ENVAR"
>PGPORT</TT
>を使用して、全てのクライアントアプリケーションが同じポートを指定するようにしなければなりません。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-s</TT
></DT
><DD
><P
>各コマンドの終了時に時間情報や他の統計情報を表示します。
これはベンチマークやバッファ数の調整時の使用に適しています。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-S</TT
> <TT
CLASS="REPLACEABLE"
><I
>work-mem</I
></TT
></DT
><DD
><P
>内部的なソート処理やハッシュ処理で一時ディスクファイルに頼る前に使用するメモリ量を指定します。
設定パラメータ<A
HREF="runtime-config-resource.html#RUNTIME-CONFIG-RESOURCE-MEMORY"
>項19.4.1</A
>の<TT
CLASS="VARNAME"
>work_mem</TT
>の説明を参照してください。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-V</TT
><BR><TT
CLASS="OPTION"
>--version</TT
></DT
><DD
><P
><SPAN
CLASS="APPLICATION"
>postgres</SPAN
>のバージョンを表示し、終了します。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>--<TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
>=<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
></TT
></DT
><DD
><P
>指定した実行時パラメータを設定します。
<TT
CLASS="OPTION"
>-c</TT
>の省略形式です。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>--describe-config</TT
></DT
><DD
><P
>このオプションは、サーバの内部設定変数、その説明、および、デフォルト値をタブ区切りの<TT
CLASS="COMMAND"
>COPY</TT
>書式でダンプ出力します。
これは、管理用ツールでの使用を主目的として設計されました。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-?</TT
><BR><TT
CLASS="OPTION"
>--help</TT
></DT
><DD
><P
><SPAN
CLASS="APPLICATION"
>postgres</SPAN
>のコマンドライン引数に関する説明を表示し、終了します。
       </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT2"
><A
NAME="AEN103788"
></A
><H3
>開発者向けオプション</H3
><P
>ここで説明するオプションは、主にデバッグ用に、場合によっては深刻な障害を受けたデータベースの復旧を補助するために使われます。
これらを運用状態のデータベースの設定として使用する理由はないはずです。
これらのオプションを説明しておくのは、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>システム開発者が利用するためです。
さらに、これらのオプションは、いずれも将来のリリースで予告なしに変更・廃止される可能性があります。
    </P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="OPTION"
>-f</TT
> <TT
CLASS="LITERAL"
>{ s | i | o | b | t | n | m | h }</TT
></DT
><DD
><P
>特定のスキャンと結合方式の使用を禁止します。
<TT
CLASS="LITERAL"
>s</TT
>はシーケンシャルスキャン、<TT
CLASS="LITERAL"
>i</TT
>はインデックススキャンを無効にします。
<TT
CLASS="LITERAL"
>o</TT
>、<TT
CLASS="LITERAL"
>b</TT
>、<TT
CLASS="LITERAL"
>t</TT
>はそれぞれ、インデックスオンリースキャン、ビットマップインデックススキャン、TIDスキャンを無効にします。
<TT
CLASS="LITERAL"
>n</TT
>はネステッドループ結合、<TT
CLASS="LITERAL"
>m</TT
>はマージ結合、<TT
CLASS="LITERAL"
>h</TT
>はハッシュ結合を無効にします。
       </P
><P
>シーケンシャルスキャンとネステッドループ結合は、完全に無効にすることはできません。
<TT
CLASS="LITERAL"
>-fs</TT
>オプションと<TT
CLASS="LITERAL"
>-fn</TT
>オプションは、単に「他の選択肢があるならば、これらの種類の計画を使わないようにする」ということをオプティマイザに指示するだけです。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-n</TT
></DT
><DD
><P
>これはサーバプロセスが異常終了する問題をデバッグするためのオプションです。
このような状態では、他のすべてのサーバプロセスに対し、終了し、共有メモリやセマフォを再初期化するように通知するのが、通常の戦略です。
これはエラーが起きたサーバプロセスが、終了する前に、何かしら共有状態を破損したかもしれないからです。
このオプションは、<TT
CLASS="COMMAND"
>postgres</TT
>が共有データ構造を再初期化しないように指定します。
知識のあるシステムプログラマであれば、その後にデバッガを使用して共有メモリやセマフォの状態を検証することができます。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-O</TT
></DT
><DD
><P
>システムテーブルの構造の変更を可能にします。
これは<TT
CLASS="COMMAND"
>initdb</TT
>によって使われます。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-P</TT
></DT
><DD
><P
>システムテーブルの読み込みの際にシステムインデックスを無視します。
しかし、システムテーブルの更新の際にはインデックスを更新します。
破損したシステムインデックスから復旧する場合に有用です。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-t</TT
> <TT
CLASS="LITERAL"
>pa[rser] | pl[anner] | e[xecutor]</TT
></DT
><DD
><P
>それぞれの主要なシステムモジュールに関連する問い合わせに対し、時間に関する統計情報を表示します。
このオプションは<TT
CLASS="OPTION"
>-s</TT
>オプションと一緒に使うことはできません。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-T</TT
></DT
><DD
><P
>これはサーバプロセスが異常終了する問題をデバッグするためのオプションです。
このような状態では、他のすべてのサーバプロセスに対し、終了し、共有メモリやセマフォを再初期化するように通知するのが、通常の戦略です。
これはエラーが起きたサーバプロセスが、終了する前に、何かしら共有状態を破損したかもしれないからです。
このオプションは、<TT
CLASS="COMMAND"
>postgres</TT
>が他のすべてのサーバプロセスに対し<TT
CLASS="LITERAL"
>SIGSTOP</TT
>シグナルを送信して、終了させるのではなく停止させることを指定します。
これによりシステムプログラマはすべてのサーバプロセスのコアダンプを手作業で収集することができます。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-v</TT
> <TT
CLASS="REPLACEABLE"
><I
>protocol</I
></TT
></DT
><DD
><P
>特定のセッションで使われるフロントエンド/バックエンドプロトコルのバージョン番号を指定します。
このオプションは内部使用のみを目的としたものです。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-W</TT
> <TT
CLASS="REPLACEABLE"
><I
>seconds</I
></TT
></DT
><DD
><P
>新規サーバプロセスが起動するとき、認証手続きが行われた後、指定した秒数の遅延が発生します。
サーバプロセスにデバッガを接続する時間を提供することが目的です。
       </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT2"
><A
NAME="AEN103853"
></A
><H3
>シングルユーザモード用のオプション</H3
><P
>以下のオプションはシングルユーザモードに対してのみ適用されます（<A
HREF="app-postgres.html#APP-POSTGRES-SINGLE-USER"
><I
>シングルユーザモード</I
></A
>参照）。
    </P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="OPTION"
>--single</TT
></DT
><DD
><P
>シングルユーザモードを選択します。
これはコマンドラインで最初の引数でなければなりません。
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>database</I
></TT
></DT
><DD
><P
>アクセスするデータベースの名前を指定します。
これはコマンドラインの最後の引数でなければなりません。
省略時は、デフォルトでユーザ名になります。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-E</TT
></DT
><DD
><P
>すべてのコマンドをその実行前に標準出力にエコー表示します。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-j</TT
></DT
><DD
><P
>コマンド入力の終端文字として、単なる改行ではなく、セミコロンとそれに続く2つの改行を使用します。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-r</TT
> <TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
></DT
><DD
><P
>全てのサーバログ出力を<TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
>に送ります。
このオプションは、コマンド行オプションとして指定された場合のみ、受け付けられます。
       </P
></DD
></DL
></DIV
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN103887"
></A
><H2
>環境</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="ENVAR"
>PGCLIENTENCODING</TT
></DT
><DD
><P
>クライアントで使用される文字符号化方式のデフォルトです。
（クライアントは個別に変更することができます。）
また、この値は設定ファイルでも設定可能です。
     </P
></DD
><DT
><TT
CLASS="ENVAR"
>PGDATA</TT
></DT
><DD
><P
>デフォルトのデータディレクトリの場所です。
     </P
></DD
><DT
><TT
CLASS="ENVAR"
>PGDATESTYLE</TT
></DT
><DD
><P
>実行時パラメータ<A
HREF="runtime-config-client.html#GUC-DATESTYLE"
>DateStyle</A
>のデフォルト値です。
（この環境変数の使用は廃止予定です。）
     </P
></DD
><DT
><TT
CLASS="ENVAR"
>PGPORT</TT
></DT
><DD
><P
>デフォルトのポート番号です。
（設定ファイル内で設定するほうが好まれています。）
     </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN103911"
></A
><H2
>診断</H2
><P
><TT
CLASS="LITERAL"
>semget</TT
>や<TT
CLASS="LITERAL"
>shmget</TT
>について言及するエラーメッセージは、おそらく、十分な共有メモリやセマフォを提供できるようにカーネルを再構築する必要があることを示します。
詳細は<A
HREF="kernel-resources.html"
>項18.4</A
>を参照してください。
ただし、<A
HREF="runtime-config-resource.html#GUC-SHARED-BUFFERS"
>shared_buffers</A
>の値を小さくして<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の共有メモリ消費量を低減する、<A
HREF="runtime-config-connection.html#GUC-MAX-CONNECTIONS"
>max_connections</A
>の値を小さくしてセマフォ消費量を低減するといった対策を行うことで、カーネルの再構築を先延ばしすることができるかもしれません。
   </P
><P
>他のサーバが既に実行中であることを示すエラーメッセージに対しては、例えば以下のコマンドを使用して、注意深く検査しなければなりません。
</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>ps ax | grep postgres</KBD
></PRE
><P>
もしくは
</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>ps -ef | grep postgres</KBD
></PRE
><P>
どちらを使用するかは、システムによって異なります。
競合するサーバが稼働していないことが確実であれば、メッセージ内で示されたロックファイルを削除して、再度試してください。
   </P
><P
>ポートをバインドできなかったことを示すエラーメッセージの場合は、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>以外のプロセスが既にそのポートを使用している可能性が考えられます。
また、<TT
CLASS="COMMAND"
>postgres</TT
>を停止して、すぐに同じポートを使う設定で再起動した場合、このエラーが出ることがあります。
この場合、オペレーティングシステムがポートを閉鎖するまで数秒待ってから再挑戦してください。
最後に、オペレーティングシステムが予約しているポート番号を指定した場合も、このエラーが発生することがあります。
例えば、Unixの多くのバージョンでは1024より小さいポート番号は<SPAN
CLASS="QUOTE"
>"信頼できる（trusted）"</SPAN
>とみなされており、Unixのスーパーユーザ以外アクセスできません。
   </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN103931"
></A
><H2
>注釈</H2
><P
>ユーティリティコマンド<A
HREF="app-pg-ctl.html"
><SPAN
CLASS="APPLICATION"
>pg_ctl</SPAN
></A
>を使って、<TT
CLASS="COMMAND"
>postgres</TT
>サーバを安全かつ簡便に起動とシャットダウンすることができます。
  </P
><P
><TT
CLASS="COMMAND"
>postgres</TT
>を終了させるために<TT
CLASS="LITERAL"
>SIGKILL</TT
>を使用するのは<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>可能な限り避けてください</I
></SPAN
>。
<TT
CLASS="LITERAL"
>SIGKILL</TT
>で終了させると、<TT
CLASS="COMMAND"
>postgres</TT
>が終了前に保持しているシステムリソース（共有メモリやセマフォ）を解放しなくなることがあります。
システムリソースが解放されていないと、新しく<TT
CLASS="COMMAND"
>postgres</TT
>を起動する時に問題が起こる可能性があります。
  </P
><P
><TT
CLASS="COMMAND"
>postgres</TT
>サーバを正常に終了させるために、<TT
CLASS="LITERAL"
>SIGTERM</TT
>、<TT
CLASS="LITERAL"
>SIGINT</TT
>、<TT
CLASS="LITERAL"
>SIGQUIT</TT
>を使用することができます。
<TT
CLASS="LITERAL"
>SIGTERM</TT
>は全てのクライアントが終了するのを待ってから終了させます。
<TT
CLASS="LITERAL"
>SIGINT</TT
>は強制的に全てのクライアントとの接続を切断します。
<TT
CLASS="LITERAL"
>SIGQUIT</TT
>は適切なシャットダウンを行わないで、即時に終了させ、次回の起動時に復旧処理が行われます。
  </P
><P
><TT
CLASS="LITERAL"
>SIGHUP</TT
>シグナルによりサーバの設定ファイルを再読み込みします。
また、<TT
CLASS="LITERAL"
>SIGHUP</TT
>を個々のサーバプロセスに送信することも可能ですが、通常は意味がありません。
  </P
><P
>実行中の問い合わせを中止するには、そのコマンドを実行しているプロセスに<TT
CLASS="LITERAL"
>SIGINT</TT
>シグナルを送信してください。
きれいにバックエンドプロセスを終了させるためには、対象プロセスに<TT
CLASS="LITERAL"
>SIGTERM</TT
>を送信してください。
また、これらの２つと同じ操作を行うSQLから呼び出すことができるものについては<A
HREF="functions-admin.html#FUNCTIONS-ADMIN-SIGNAL"
>項9.26.2</A
>内の<CODE
CLASS="FUNCTION"
>pg_cancel_backend</CODE
>および<CODE
CLASS="FUNCTION"
>pg_terminate_backend</CODE
>を参照してください。
  </P
><P
><TT
CLASS="COMMAND"
>postgres</TT
>サーバでは、通常のクリーンアップを行わずに下位のサーバプロセスを終了させるためには<TT
CLASS="LITERAL"
>SIGQUIT</TT
>を使用します。
これは<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>ユーザが使用すべきではありません</I
></SPAN
>。
また、サーバに<TT
CLASS="LITERAL"
>SIGKILL</TT
>シグナルを送信するのは好ましくありません。
メインの<TT
CLASS="COMMAND"
>postgres</TT
>はこれをクラッシュとして解釈するので、クラッシュからの標準的な復旧手続きの一環として、強制的に共通の親プロセスを持つ<TT
CLASS="COMMAND"
>postgres</TT
>プロセスを全て終了させます。
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="APP-POSTGRES-BUGS"
></A
><H2
>不具合</H2
><P
><TT
CLASS="OPTION"
>--</TT
>オプションは<SPAN
CLASS="SYSTEMITEM"
>FreeBSD</SPAN
>や<SPAN
CLASS="SYSTEMITEM"
>OpenBSD</SPAN
>ではうまく動きません。
代わりに<TT
CLASS="OPTION"
>-c</TT
>を使用してください。
これは対象のオペレーティングシステムの不具合です。
もし修正されなければ、将来の<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>リリースで回避策を提供する予定です。
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="APP-POSTGRES-SINGLE-USER"
></A
><H2
>シングルユーザモード</H2
><P
>シングルユーザモードのサーバを起動するには、以下のようなコマンドを使用してください。
</P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>postgres --single -D /usr/local/pgsql/data <TT
CLASS="REPLACEABLE"
><I
>other-options</I
></TT
> my_database</KBD
></PRE
><P>
データベースディレクトリの正確なパスを<TT
CLASS="OPTION"
>-D</TT
>で指定します。パスを指定しない時は、必ず環境変数<TT
CLASS="ENVAR"
>PGDATA</TT
>を設定しておいてください。
また、作業対象とするデータベースの名前も指定してください。
   </P
><P
>通常、シングルユーザモードのサーバでは、改行をコマンド入力の終わりとみなします。
セミコロンについて、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>におけるような高度な機能はありません。
コマンドが複数行にわたる場合は、改行を入力する前にバックスラッシュを入力しなければなりません（最終行を除く）。
バックスラッシュとそれに続く改行は、いずれも入力コマンドから削除されます。
これは文字列リテラルやコメントの中においても当てはまることに注意して下さい。
   </P
><P
>ただし、コマンドラインスイッチ<TT
CLASS="OPTION"
>-j</TT
>を使用した場合は、1つの改行ではコマンド入力の終わりとはみなされず、セミコロン、改行、改行というシーケンスがコマンド入力の終わりとなります。
つまり、セミコロンを入力し、そのすぐ後に続けて完全な空行を入力して下さい。
このモードでは、バックスラッシュと改行の組み合わせは特別扱いされません。
この場合も、文字列リテラルやコメント内に現れるこのようなシーケンスに対する高度な扱いはありません。
   </P
><P
>どちらの入力モードでも、コマンド入力終端の直前や一部でないセミコロンを入力した場合、それはコマンドを分割するものとしてみなされます。
コマンド入力終端を入力すると、それまでに入力した複数の文が、1つのトランザクションとして実行されます。
   </P
><P
>セッションを終了するには、<ACRONYM
CLASS="ACRONYM"
>EOF</ACRONYM
>（通常<B
CLASS="KEYCAP"
>Control</B
>+<B
CLASS="KEYCAP"
>D</B
>）を入力します。
最後にコマンド入力終端を入力した後、何らかのテキストを入力している場合、<ACRONYM
CLASS="ACRONYM"
>EOF</ACRONYM
>はコマンド入力の終端として扱われ、終了するにはもう一度<ACRONYM
CLASS="ACRONYM"
>EOF</ACRONYM
>を入力する必要があります。
   </P
><P
>シングルユーザモードのサーバには、高度な行編集機能が用意されていないことに注意してください（例えばコマンド履歴機能はありません）。
またシングルユーザモードは、自動チェックポイントやレプリケーションなどのバックグラウンド処理をまったく行いません。
   </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="APP-POSTGRES-EXAMPLES"
></A
><H2
>例</H2
><P
>デフォルト値を使用して<TT
CLASS="COMMAND"
>postgres</TT
>をバックグラウンドで起動するには、以下を入力してください。

</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>nohup postgres &gt;logfile 2&gt;&amp;1 &lt;/dev/null &amp;</KBD
></PRE
><P>
  </P
><P
>例えば1234というポートを指定して<TT
CLASS="COMMAND"
>postgres</TT
>を起動するには、以下を入力してください。
</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>postgres -p 1234</KBD
></PRE
><P>
<SPAN
CLASS="APPLICATION"
>psql</SPAN
>を使用して上のサーバに接続するには、以下のように-pオプションでこのポートを指定してください。
</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>psql -p 1234</KBD
></PRE
><P>
または環境変数<TT
CLASS="ENVAR"
>PGPORT</TT
>を設定してください。
</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>export PGPORT=1234</KBD
>
<SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>psql</KBD
></PRE
><P>
  </P
><P
>指定の実行時パラメータを以下のいずれかで設定することができます。
</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>postgres -c work_mem=1234</KBD
>
<SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>postgres --work-mem=1234</KBD
></PRE
><P>
どちらの形式でも、<TT
CLASS="FILENAME"
>postgresql.conf</TT
>内に設定されている<TT
CLASS="VARNAME"
>work_mem</TT
>の値を上書きします。
コマンドラインでは、パラメータ内のアンダースコア（_）をアンダースコアとしてもダッシュ記号（-）としても記載できることに注意してください。
おそらく短期間の実験という場合を除き、コマンドラインスイッチに依存するよりも<TT
CLASS="FILENAME"
>postgresql.conf</TT
>内の設定を変更してパラメータを設定する方が実用的です。
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN104027"
></A
><H2
>関連項目</H2
><P
>   <A
HREF="app-initdb.html"
>initdb</A
>,
   <A
HREF="app-pg-ctl.html"
><SPAN
CLASS="APPLICATION"
>pg_ctl</SPAN
></A
>
  </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="pgxlogdump.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>ホーム</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="app-postmaster.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><SPAN
CLASS="APPLICATION"
>pg_xlogdump</SPAN
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="reference-server.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><SPAN
CLASS="APPLICATION"
>postmaster</SPAN
></TD
></TR
></TABLE
></DIV
></BODY
></HTML
>