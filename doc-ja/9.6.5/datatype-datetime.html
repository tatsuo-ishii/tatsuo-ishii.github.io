<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>日付/時刻データ型</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 9.6.5文書"
HREF="index.html"><LINK
REL="UP"
TITLE="データ型"
HREF="datatype.html"><LINK
REL="PREVIOUS"
TITLE="バイナリ列データ型"
HREF="datatype-binary.html"><LINK
REL="NEXT"
TITLE="論理値データ型"
HREF="datatype-boolean.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=utf-8"><META
NAME="creation"
CONTENT="2017-10-17T11:51:21"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>PostgreSQL 9.6.5文書</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="バイナリ列データ型"
HREF="datatype-binary.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="datatype.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>第 8章データ型</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="論理値データ型"
HREF="datatype-boolean.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="DATATYPE-DATETIME"
>8.5. 日付/時刻データ型</A
></H1
><P
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>では、<A
HREF="datatype-datetime.html#DATATYPE-DATETIME-TABLE"
>表8-9</A
>に示されている<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>の日付と時刻データ型のすべてがサポートされています。
これらのデータ型で利用できる演算については<A
HREF="functions-datetime.html"
>項9.9</A
>で説明します。
グレゴリオ暦が導入されるより前の年であっても（<A
HREF="datetime-units-history.html"
>項B.4</A
>参照）、日付はグレゴリオ暦にしたがって計算されます。
   </P
><DIV
CLASS="TABLE"
><A
NAME="DATATYPE-DATETIME-TABLE"
></A
><P
><B
>表 8-9. 日付/時刻データ型</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><COL><COL><COL><THEAD
><TR
><TH
>型名</TH
><TH
>格納サイズ</TH
><TH
>説明</TH
><TH
>最遠の過去</TH
><TH
>最遠の未来</TH
><TH
>精度</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="TYPE"
>timestamp [ (<TT
CLASS="REPLACEABLE"
><I
>p</I
></TT
>) ] [ without time zone ]</TT
></TD
><TD
>8 バイト</TD
><TD
>日付と時刻両方（時間帯なし）</TD
><TD
>4713 BC</TD
><TD
>294276 AD</TD
><TD
>1マイクロ秒、14桁</TD
></TR
><TR
><TD
><TT
CLASS="TYPE"
>timestamp [ (<TT
CLASS="REPLACEABLE"
><I
>p</I
></TT
>) ] with time zone</TT
></TD
><TD
>8バイト</TD
><TD
>日付と時刻両方、時間帯付き</TD
><TD
>4713 BC</TD
><TD
>294276 AD</TD
><TD
>1マイクロ秒、14桁</TD
></TR
><TR
><TD
><TT
CLASS="TYPE"
>date</TT
></TD
><TD
>4バイト</TD
><TD
>日付（時刻なし）</TD
><TD
>4713 BC</TD
><TD
>5874897 AD</TD
><TD
>1日</TD
></TR
><TR
><TD
><TT
CLASS="TYPE"
>time [ (<TT
CLASS="REPLACEABLE"
><I
>p</I
></TT
>) ] [ without time zone ]</TT
></TD
><TD
>8バイト</TD
><TD
>時刻（日付なし）</TD
><TD
>00:00:00</TD
><TD
>24:00:00</TD
><TD
>1マイクロ秒、14桁</TD
></TR
><TR
><TD
><TT
CLASS="TYPE"
>time [ (<TT
CLASS="REPLACEABLE"
><I
>p</I
></TT
>) ] with time zone</TT
></TD
><TD
>12バイト</TD
><TD
>その日の時刻のみ、時間帯付き</TD
><TD
>00:00:00+1459</TD
><TD
>24:00:00-1459</TD
><TD
>1マイクロ秒、14桁</TD
></TR
><TR
><TD
><TT
CLASS="TYPE"
>interval [ <TT
CLASS="REPLACEABLE"
><I
>fields</I
></TT
> ] [ (<TT
CLASS="REPLACEABLE"
><I
>p</I
></TT
>) ]</TT
></TD
><TD
>16バイト</TD
><TD
>時間間隔</TD
><TD
>-178000000年</TD
><TD
>178000000年</TD
><TD
>1マイクロ秒、14桁</TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>標準SQLでは、単なる<TT
CLASS="TYPE"
>timestamp</TT
>という記述は<TT
CLASS="TYPE"
>timestamp without time zone</TT
>と同じであることを要求します。
<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>はこれに準じます。
<TT
CLASS="TYPE"
>timestamp with time zone</TT
>は<TT
CLASS="TYPE"
>timestamptz</TT
>と省略することができますが、これは<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の拡張です。
    </P
></BLOCKQUOTE
></DIV
><P
><TT
CLASS="TYPE"
>time</TT
>、<TT
CLASS="TYPE"
>timestamp</TT
>および<TT
CLASS="TYPE"
>interval</TT
>は秒フィールドに保有されている小数点以下の桁数を指定する精度値<TT
CLASS="REPLACEABLE"
><I
>p</I
></TT
>をオプションで受け付けます。
デフォルトでは、精度についての明示的な限界はありません。
<TT
CLASS="REPLACEABLE"
><I
>p</I
></TT
>の許容範囲は<TT
CLASS="TYPE"
>timestamp</TT
>型と<TT
CLASS="TYPE"
>interval</TT
>型の場合は0から6です。
   </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
><TT
CLASS="TYPE"
>timestamp</TT
>の値が8バイト整数（現在のデフォルト）で格納されていれば、すべての値についてマイクロ秒精度が有効です。
<TT
CLASS="TYPE"
>timestamp</TT
>の値が倍精度浮動小数点数（将来のサポートが保証されないコンパイル時のオプション）で格納されていると、有効な精度は6より小さいかもしれません。
<TT
CLASS="TYPE"
>timestamp</TT
>の値は2000-01-01深夜を基準にした経過秒数として格納されます。
<TT
CLASS="TYPE"
>timestamp</TT
>の値が浮動小数点数として格納されていれば、2000-01-01から数年の範囲でマイクロ秒精度が得られますが、それより離脱すると精度は劣化します。
浮動小数点の日付時刻を使用すると、上で示した範囲より広い<TT
CLASS="TYPE"
>timestamp</TT
>の値（4713 BCから5874897 ADまで）を利用できます。
   </P
><P
>   
同じコンパイル時オプションは<TT
CLASS="TYPE"
>time</TT
>および<TT
CLASS="TYPE"
>interval</TT
>の値が浮動小数点数か、8バイト整数のいずれかによって格納されるかを決定します。
浮動小数点の場合、大きな<TT
CLASS="TYPE"
>interval</TT
>では間隔が増加する際に精度が落ちます。
   </P
></BLOCKQUOTE
></DIV
><P
><TT
CLASS="TYPE"
>time</TT
>型で8バイト整数が使用された場合には、<TT
CLASS="REPLACEABLE"
><I
>p</I
></TT
>は0から6までの範囲で使用可能です。
また、浮動小数点が使用される場合には0から10までが使用可能です。
   </P
><P
>   
<TT
CLASS="TYPE"
>interval</TT
>データ型には追加のオプションがあり、以下の１つの語句を使用して格納されるフィールドの集合を制約します。
</P><PRE
CLASS="LITERALLAYOUT"
>YEAR
MONTH
DAY
HOUR
MINUTE
SECOND
YEAR TO MONTH
DAY TO HOUR
DAY TO MINUTE
DAY TO SECOND
HOUR TO MINUTE
HOUR TO SECOND
MINUTE TO SECOND</PRE
><P>
<TT
CLASS="REPLACEABLE"
><I
>fields</I
></TT
>および<TT
CLASS="REPLACEABLE"
><I
>p</I
></TT
>が共に指定されると、精度は秒のみに適用されるので、<TT
CLASS="REPLACEABLE"
><I
>fields</I
></TT
>は<TT
CLASS="LITERAL"
>SECOND</TT
>を含まなければならないことに注意してください。
   </P
><P
><TT
CLASS="TYPE"
>time with time zone</TT
>は標準SQLで定義されていますが、その定義は、その有用性を疑問視することになりかねない特性を示しています。
ほとんどの場合、<TT
CLASS="TYPE"
>date</TT
>、<TT
CLASS="TYPE"
>time</TT
>、<TT
CLASS="TYPE"
>timestamp without time zone</TT
>、<TT
CLASS="TYPE"
>timestamp with time zone</TT
>の組み合わせで、すべてのアプリケーションで要求される日付/時刻機能すべてを提供しているはずです。
   </P
><P
><TT
CLASS="TYPE"
>abstime</TT
>と<TT
CLASS="TYPE"
>reltime</TT
>は精度の低いデータ型で、内部で使用されます。
アプリケーションでこれらの型の使用を避けてください。
これら内部型は今後のリリースで削除される可能性があります。
   </P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="DATATYPE-DATETIME-INPUT"
>8.5.1. 日付/時刻の入力</A
></H2
><P
>日付と時刻の入力は、ISO 8601、<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>互換、伝統的な<SPAN
CLASS="PRODUCTNAME"
>POSTGRES</SPAN
>、その他を含むほとんどの適正とみなされる書式を受け付けます。
一部の書式では日付の入力における日-月-年の順序が曖昧ですが、これらのフィールドの期待される順序を指定する方式が提供されています。
<A
HREF="runtime-config-client.html#GUC-DATESTYLE"
>DateStyle</A
>パラメータを<TT
CLASS="LITERAL"
>MDY</TT
>に設定すれば、月日年という順で解釈され、<TT
CLASS="LITERAL"
>DMY</TT
>に設定すれば日月年という順で、<TT
CLASS="LITERAL"
>YMD</TT
>に設定すれば年月日という順で解釈されます。
    </P
><P
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>は日付/時刻入力の取扱いにおいて標準<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>の要求よりも柔軟です。
日付/時刻の入力における厳密な構文解析規則と、月および週、そして時間帯を含む使用可能なテキストフィールドに関しては<A
HREF="datetime-appendix.html"
>付録B</A
>を参照してください。
    </P
><P
>日付や時刻リテラルの入力では、テキスト文字列のように、単一引用符で囲む必要があることを思い出してください。
詳細は<A
HREF="sql-syntax-lexical.html#SQL-SYNTAX-CONSTANTS-GENERIC"
>項4.1.2.7</A
>を参照してください。
<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>では下記の構文が要求されます。
</P><PRE
CLASS="SYNOPSIS"
><TT
CLASS="REPLACEABLE"
><I
>type</I
></TT
> [ (<TT
CLASS="REPLACEABLE"
><I
>p</I
></TT
>) ] '<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>'</PRE
><P>
ここで、<TT
CLASS="REPLACEABLE"
><I
>p</I
></TT
>は秒フィールドの小数点以下の桁数を与えるオプションの精度の指定です。
精度は<TT
CLASS="TYPE"
>time</TT
>、<TT
CLASS="TYPE"
>timestamp</TT
>および<TT
CLASS="TYPE"
>interval</TT
>型に対して設定できます。
値の許容範囲は既に説明しています。
定数指定において精度指定がない場合は、リテラル値の精度がデフォルトとして使われます。
    </P
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN6061"
>8.5.1.1. 日付</A
></H3
><P
><A
HREF="datatype-datetime.html#DATATYPE-DATETIME-DATE-TABLE"
>表8-10</A
>は<TT
CLASS="TYPE"
>date</TT
>型で入力可能なものの一部を示します。
    </P
><DIV
CLASS="TABLE"
><A
NAME="DATATYPE-DATETIME-DATE-TABLE"
></A
><P
><B
>表 8-10. 日付入力</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>例</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
>1999-01-08</TD
><TD
>ISO 8601。すべてのモードで1月8日になります（推奨書式）。</TD
></TR
><TR
><TD
>January 8, 1999</TD
><TD
>すべての<TT
CLASS="VARNAME"
>datestyle</TT
>入力モードにおいて曖昧さがありません。</TD
></TR
><TR
><TD
>1/8/1999</TD
><TD
><TT
CLASS="LITERAL"
>MDY</TT
>モードでは1月8日、<TT
CLASS="LITERAL"
>DMY</TT
>モードでは8月1日。</TD
></TR
><TR
><TD
>1/18/1999</TD
><TD
><TT
CLASS="LITERAL"
>MDY</TT
>モードでは1月18日、他のモードでは拒絶されます。</TD
></TR
><TR
><TD
>01/02/03</TD
><TD
><TT
CLASS="LITERAL"
>MDY</TT
>モードでは2003年1月2日、<TT
CLASS="LITERAL"
>DMY</TT
>モードでは2003年2月1日、<TT
CLASS="LITERAL"
>YMD</TT
>モードでは2001年2月3日。
         </TD
></TR
><TR
><TD
>1999-Jan-08</TD
><TD
>すべてのモードで1月8日になります。</TD
></TR
><TR
><TD
>Jan-08-1999</TD
><TD
>すべてのモードで1月8日になります。</TD
></TR
><TR
><TD
>08-Jan-1999</TD
><TD
>すべてのモードで1月8日になります。</TD
></TR
><TR
><TD
>99-Jan-08</TD
><TD
><TT
CLASS="LITERAL"
>YMD</TT
>モードで1月8日、他のモードではエラー。</TD
></TR
><TR
><TD
>08-Jan-99</TD
><TD
>1月8日。ただし<TT
CLASS="LITERAL"
>YMD</TT
>モードではエラー。</TD
></TR
><TR
><TD
>Jan-08-99</TD
><TD
>1月8日。ただし<TT
CLASS="LITERAL"
>YMD</TT
>モードではエラー。</TD
></TR
><TR
><TD
>19990108</TD
><TD
>ISO 8601。すべてのモードで1月8日になります。</TD
></TR
><TR
><TD
>990108</TD
><TD
>ISO 8601。すべてのモードで1月8日になります。</TD
></TR
><TR
><TD
>1999.008</TD
><TD
>年と年間通算日</TD
></TR
><TR
><TD
>J2451187</TD
><TD
>ユリウス日</TD
></TR
><TR
><TD
>January 8, 99 BC</TD
><TD
>西暦紀元前99年</TD
></TR
></TBODY
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN6134"
>8.5.1.2. 時刻</A
></H3
><P
>ある一日の時刻を表す型は<TT
CLASS="TYPE"
>time [(<TT
CLASS="REPLACEABLE"
><I
>p</I
></TT
>) ] without time zone</TT
>と<TT
CLASS="TYPE"
>time [ (<TT
CLASS="REPLACEABLE"
><I
>p</I
></TT
>) ] with time zone</TT
>です。
<TT
CLASS="TYPE"
>time</TT
>単独では<TT
CLASS="TYPE"
>time without time zone</TT
>と同じです。
     </P
><P
>これらの型への有効な入力は、時刻、その後にオプションで時間帯からなります。
（<A
HREF="datatype-datetime.html#DATATYPE-DATETIME-TIME-TABLE"
>表8-11</A
>と<A
HREF="datatype-datetime.html#DATATYPE-TIMEZONE-TABLE"
>表8-12</A
>を参照してください。）
<TT
CLASS="TYPE"
>time without time zone</TT
>への入力に時間帯が指定された場合、時間帯は警告なく無視されます。
また、日付を指定することもできますが、<TT
CLASS="LITERAL"
>America/New_York</TT
>のような夏時間規則を含む時間帯名を使用しているのでなければ、それは無視されます。
夏時間規則のある時間帯名の場合は、標準と夏時間のどちらを適用するかを決定できるように、日付の指定が必要です。
適切な時間帯オフセットは<TT
CLASS="TYPE"
>time with time zone</TT
>型の値に記録されています。
     </P
><DIV
CLASS="TABLE"
><A
NAME="DATATYPE-DATETIME-TIME-TABLE"
></A
><P
><B
>表 8-11. 時刻入力</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>例</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
>04:05:06.789</TT
></TD
><TD
>ISO 8601</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>04:05:06</TT
></TD
><TD
>ISO 8601</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>04:05</TT
></TD
><TD
>ISO 8601</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>040506</TT
></TD
><TD
>ISO 8601</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>04:05 AM</TT
></TD
><TD
>04:05と同じ。AMは値に影響を与えない。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>04:05 PM</TT
></TD
><TD
>16:05と同じ。時の入力は12以下でなければなりません。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>04:05:06.789-8</TT
></TD
><TD
>ISO 8601</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>04:05:06-08:00</TT
></TD
><TD
>ISO 8601</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>04:05-08:00</TT
></TD
><TD
>ISO 8601</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>040506-08</TT
></TD
><TD
>ISO 8601</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>04:05:06 PST</TT
></TD
><TD
>省略形による時間帯の指定。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>2003-04-12 04:05:06 America/New_York</TT
></TD
><TD
>名前による時間帯の指定。</TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="TABLE"
><A
NAME="DATATYPE-TIMEZONE-TABLE"
></A
><P
><B
>表 8-12. 時間帯入力</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>例</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
>PST</TT
></TD
><TD
>省略形（米国太平洋標準時間）</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>America/New_York</TT
></TD
><TD
>完全な時間帯名</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>PST8PDT</TT
></TD
><TD
>POSIX書式の時間帯指定</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>-8:00</TT
></TD
><TD
>ISO 8601。PST用のオフセット</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>-800</TT
></TD
><TD
>ISO 8601。PST用のオフセット</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>-8</TT
></TD
><TD
>ISO 8601。PST用のオフセット</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>zulu</TT
></TD
><TD
>UTC用の軍事用略記</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>z</TT
></TD
><TD
><TT
CLASS="LITERAL"
>zulu</TT
>の略記</TD
></TR
></TBODY
></TABLE
></DIV
><P
>時間帯の指定方法に関する詳細は<A
HREF="datatype-datetime.html#DATATYPE-TIMEZONES"
>項8.5.3</A
>を参照してください。
    </P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN6254"
>8.5.1.3. タイムスタンプ</A
></H3
><P
>タイムスタンプ型への有効な入力は、日付と時刻を連結し、さらにその後にオプションで時間帯、その後にオプションで<TT
CLASS="LITERAL"
>AD</TT
>もしくは<TT
CLASS="LITERAL"
>BC</TT
>からなります。
（他に<TT
CLASS="LITERAL"
>AD</TT
>/<TT
CLASS="LITERAL"
>BC</TT
>を時間帯の前に付ける方法もありますが、これは推奨される順序ではありません。）
したがって、

</P><PRE
CLASS="PROGRAMLISTING"
>1999-01-08 04:05:06</PRE
><P>
と
</P><PRE
CLASS="PROGRAMLISTING"
>1999-01-08 04:05:06 -8:00</PRE
><P>

は有効な値で、<ACRONYM
CLASS="ACRONYM"
>ISO</ACRONYM
> 8601に準拠しています。
また、広く使用されている
</P><PRE
CLASS="PROGRAMLISTING"
>January 8 04:05:06 1999 PST</PRE
><P>
という書式もサポートされます。
     </P
><P
>標準<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>では、<TT
CLASS="TYPE"
>timestamp without time zone</TT
>のリテラルと<TT
CLASS="TYPE"
>timestamp with time zone</TT
>のリテラルを、時刻の後の<SPAN
CLASS="QUOTE"
>"+"</SPAN
>もしくは<SPAN
CLASS="QUOTE"
>"-"</SPAN
>記号と時間帯補正の有無により区別します。
そのため、標準に従うと、

</P><PRE
CLASS="PROGRAMLISTING"
>TIMESTAMP '2004-10-19 10:23:54'</PRE
><P>

は<TT
CLASS="TYPE"
>timestamp without time zone</TT
>に、

</P><PRE
CLASS="PROGRAMLISTING"
>TIMESTAMP '2004-10-19 10:23:54+02'</PRE
><P>

は<TT
CLASS="TYPE"
>timestamp with time zone</TT
>になります。
<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>では、その型を決める前に文字列リテラルの内容を検証しません。
そのため上の例はいずれも<TT
CLASS="TYPE"
>timestamp without time zone</TT
>として扱います。
リテラルが確実に<TT
CLASS="TYPE"
>timestamp with time zone</TT
>として扱われるようにするには、例えば、</P><PRE
CLASS="PROGRAMLISTING"
>TIMESTAMP WITH TIME ZONE '2004-10-19 10:23:54+02'</PRE
><P>のように正しい明示的な型を指定してください。
<TT
CLASS="TYPE"
>timestamp without time zone</TT
>と決定済みのリテラルでは、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>は警告なく時間帯情報をすべて無視します。
つまり、結果の値は明示された入力値の日付/時刻フィールドから持ち込まれますが、時間帯の調整はなされません。
     </P
><P
><TT
CLASS="TYPE"
>timestamp with time zone</TT
>について内部に格納されている値は常にUTCです（協定世界時、歴史的にグリニッジ標準時<ACRONYM
CLASS="ACRONYM"
>GMT</ACRONYM
>として知られています）。
時間帯が明示的に指定された入力値は、その時間帯に適したオフセットを使用してUTCに変換されます。
入力文字列に時間帯が指定されていない場合は、システムの<A
HREF="runtime-config-client.html#GUC-TIMEZONE"
>TimeZone</A
>パラメータに示されている値が時間帯とみなされ、<TT
CLASS="VARNAME"
>timezone</TT
>時間帯用のオフセットを使用してUTCに変換されます。
     </P
><P
><TT
CLASS="TYPE"
>timestamp with time zone</TT
>の値が出力されると、この値はUTCから現行の<TT
CLASS="VARNAME"
>timezone</TT
>に変換され、その時間帯のローカル時間として表示されます。
他の時間帯での時間を表示するには、<TT
CLASS="VARNAME"
>timezone</TT
>を変更するか、あるいは<TT
CLASS="LITERAL"
>AT TIME ZONE</TT
>構文（<A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-ZONECONVERT"
>項9.9.3</A
> を参照）を使用します。
     </P
><P
><TT
CLASS="TYPE"
>timestamp without time zone</TT
>と<TT
CLASS="TYPE"
>timestamp with time zone</TT
>の間の変換では、通常<TT
CLASS="TYPE"
>timestamp without time zone</TT
>の値は<TT
CLASS="VARNAME"
>timezone</TT
>のローカル時間としてみなされる、または、指定されるものと想定されます。
<TT
CLASS="LITERAL"
>AT TIME ZONE</TT
>を使用する変換では、異なる時間帯を指定できます。
     </P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN6304"
>8.5.1.4. 特別な値</A
></H3
><P
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>では利便性のために、<A
HREF="datatype-datetime.html#DATATYPE-DATETIME-SPECIAL-TABLE"
>表8-13</A
>に示されているような特別な日付/時刻入力値をサポートしています。
<TT
CLASS="LITERAL"
>infinity</TT
>と<TT
CLASS="LITERAL"
>-infinity</TT
>の値は、特別にシステム内部で表現され、変更されずに表示されます。
他のものは、単に簡略化された表記で、読み込まれるときに通常の日付/時刻値に変換されます。
（特に<TT
CLASS="LITERAL"
>now</TT
>とその関連文字列は読み込まれるとすぐにその時点の値に変換されます。）
これらの値はすべて、SQLコマンドで定数として使う場合は、単一引用符でくくらなければなりません。
     </P
><DIV
CLASS="TABLE"
><A
NAME="DATATYPE-DATETIME-SPECIAL-TABLE"
></A
><P
><B
>表 8-13. 特別な日付/時刻定数</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>入力文字列</TH
><TH
>有効な型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
>epoch</TT
></TD
><TD
><TT
CLASS="TYPE"
>date</TT
>, <TT
CLASS="TYPE"
>timestamp</TT
></TD
><TD
>1970-01-01 00:00:00+00（Unixシステム時間におけるゼロ）</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>infinity</TT
></TD
><TD
><TT
CLASS="TYPE"
>date</TT
>, <TT
CLASS="TYPE"
>timestamp</TT
></TD
><TD
>他のすべてのタイムスタンプより将来</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>-infinity</TT
></TD
><TD
><TT
CLASS="TYPE"
>date</TT
>, <TT
CLASS="TYPE"
>timestamp</TT
></TD
><TD
>他のすべてのタイムスタンプより過去</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>now</TT
></TD
><TD
><TT
CLASS="TYPE"
>date</TT
>, <TT
CLASS="TYPE"
>time</TT
>, <TT
CLASS="TYPE"
>timestamp</TT
></TD
><TD
>現トランザクションの開始時刻</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>today</TT
></TD
><TD
><TT
CLASS="TYPE"
>date</TT
>, <TT
CLASS="TYPE"
>timestamp</TT
></TD
><TD
>今日の午前０時</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>tomorrow</TT
></TD
><TD
><TT
CLASS="TYPE"
>date</TT
>, <TT
CLASS="TYPE"
>timestamp</TT
></TD
><TD
>明日の午前０時</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>yesterday</TT
></TD
><TD
><TT
CLASS="TYPE"
>date</TT
>, <TT
CLASS="TYPE"
>timestamp</TT
></TD
><TD
>昨日の午前０時</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>allballs</TT
></TD
><TD
><TT
CLASS="TYPE"
>time</TT
></TD
><TD
>00:00:00.00 UTC</TD
></TR
></TBODY
></TABLE
></DIV
><P
><ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>互換の関数である、<TT
CLASS="LITERAL"
>CURRENT_DATE</TT
>、<TT
CLASS="LITERAL"
>CURRENT_TIME</TT
>、<TT
CLASS="LITERAL"
>CURRENT_TIMESTAMP</TT
>、<TT
CLASS="LITERAL"
>LOCALTIME</TT
>、<TT
CLASS="LITERAL"
>LOCALTIMESTAMP</TT
>も、対応するデータ型の現在の日付または時間の値を取得するために使用できます。
後の4つでは、オプションとして秒以下の精度指定が可能です。
（<A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT"
>項9.9.4</A
> を参照してください。）
これらはSQL関数であり、データ入力文字列として認識<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>されない</I
></SPAN
>ことに注意してください。
     </P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="DATATYPE-DATETIME-OUTPUT"
>8.5.2. 日付/時刻の出力</A
></H2
><P
>日付/時刻型の出力書式は、ISO 8601、<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>（Ingres）、伝統的な<SPAN
CLASS="PRODUCTNAME"
>POSTGRES</SPAN
>（Unix <SPAN
CLASS="APPLICATION"
>date</SPAN
>書式）またはGermanの４つのいずれかに設定できます。
デフォルトは<ACRONYM
CLASS="ACRONYM"
>ISO</ACRONYM
>書式です。
（標準<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>ではISO 8601書式の使用が定められています。
<SPAN
CLASS="QUOTE"
>"SQL"</SPAN
>という出力書式名は歴史的な事故です。）
<A
HREF="datatype-datetime.html#DATATYPE-DATETIME-OUTPUT-TABLE"
>表8-14</A
>に各出力書式の例を示します。
<TT
CLASS="TYPE"
>date</TT
>と<TT
CLASS="TYPE"
>time</TT
>の書式は、例にあるとおり、それぞれ日付と時刻の部分です。しかし、<SPAN
CLASS="PRODUCTNAME"
>POSTGRES</SPAN
>では<ACRONYM
CLASS="ACRONYM"
>ISO</ACRONYM
>書式の日付部分のみを出力します。(YMDやMDYの場合12-17-1997を返し、DMYの場合17-12-1997を返します。)
    </P
><DIV
CLASS="TABLE"
><A
NAME="DATATYPE-DATETIME-OUTPUT-TABLE"
></A
><P
><B
>表 8-14. 日付/時刻の出力形式</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>様式指定</TH
><TH
>説明</TH
><TH
>例</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
>ISO</TT
></TD
><TD
>ISO 8601, 標準SQL</TD
><TD
><TT
CLASS="LITERAL"
>1997-12-17 07:37:16-08</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>SQL</TT
></TD
><TD
>伝統的な様式</TD
><TD
><TT
CLASS="LITERAL"
>12/17/1997 07:37:16.00 PST</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>Postgres</TT
></TD
><TD
>独自の様式</TD
><TD
><TT
CLASS="LITERAL"
>Wed Dec 17 07:37:16 1997 PST</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>German</TT
></TD
><TD
>地域限定様式</TD
><TD
><TT
CLASS="LITERAL"
>17.12.1997 07:37:16.00 PST</TT
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>ISO 8601の仕様では日付と時刻を区切るために大文字の<TT
CLASS="LITERAL"
>T</TT
>を使用します。
<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>は入力ではこの書式を受け付けますが、上記のように出力では<TT
CLASS="LITERAL"
>T</TT
>ではなく空白を使用します。
これは読みやすさのため、そしてRFC3339や他のデータベースシステムとの整合性を保つためです。
     </P
></BLOCKQUOTE
></DIV
><P
><ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>とPOSTGRESでは、DMYフィールド順が指定された場合は月の前に日が現れます。
指定がなければ日の前に月が現れます。
（この設定が入力値の解釈にどう影響を与えるのかについては<A
HREF="datatype-datetime.html#DATATYPE-DATETIME-INPUT"
>項8.5.1</A
>を参考にしてください）。
<A
HREF="datatype-datetime.html#DATATYPE-DATETIME-OUTPUT2-TABLE"
>表8-15</A
>に例を示します。
    </P
><DIV
CLASS="TABLE"
><A
NAME="DATATYPE-DATETIME-OUTPUT2-TABLE"
></A
><P
><B
>表 8-15. 日付の順序の慣習</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
><TT
CLASS="VARNAME"
>datestyle</TT
>の設定</TH
><TH
>入力の順序</TH
><TH
>出力例</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
>SQL, DMY</TT
></TD
><TD
><TT
CLASS="REPLACEABLE"
><I
>day</I
></TT
>（日）/<TT
CLASS="REPLACEABLE"
><I
>month</I
></TT
>（月）/<TT
CLASS="REPLACEABLE"
><I
>year</I
></TT
>（年）</TD
><TD
><TT
CLASS="LITERAL"
>17/12/1997 15:37:16.00 CET</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>SQL, MDY</TT
></TD
><TD
><TT
CLASS="REPLACEABLE"
><I
>month</I
></TT
>（月）/<TT
CLASS="REPLACEABLE"
><I
>day</I
></TT
>（日）/<TT
CLASS="REPLACEABLE"
><I
>year</I
></TT
>（年）</TD
><TD
><TT
CLASS="LITERAL"
>12/17/1997 07:37:16.00 PST</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>Postgres, DMY</TT
></TD
><TD
><TT
CLASS="REPLACEABLE"
><I
>day</I
></TT
>（日）/<TT
CLASS="REPLACEABLE"
><I
>month</I
></TT
>（月）/<TT
CLASS="REPLACEABLE"
><I
>year</I
></TT
>（年）</TD
><TD
><TT
CLASS="LITERAL"
>Wed 17 Dec 07:37:16 1997 PST</TT
></TD
></TR
></TBODY
></TABLE
></DIV
><P
>ユーザは<TT
CLASS="COMMAND"
>SET DATESTYLE</TT
>コマンド、<TT
CLASS="FILENAME"
>postgresql.conf</TT
>構成ファイルの<A
HREF="runtime-config-client.html#GUC-DATESTYLE"
>DateStyle</A
>パラメータ、そしてサーバかクライアントの<TT
CLASS="ENVAR"
>PGDATESTYLE</TT
>環境変数を使用して、日付/時刻の様式を選択することができます。
    </P
><P
>日付/時刻出力のより柔軟な書式設定方法として、書式設定関数<CODE
CLASS="FUNCTION"
>to_char</CODE
>（<A
HREF="functions-formatting.html"
>項9.8</A
>を参照）を使用することもできます。
    </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="DATATYPE-TIMEZONES"
>8.5.3. 時間帯</A
></H2
><P
>時間帯および時間帯の取り決めは地球の幾何学的要素のみでなく政治的決定に影響されます。
世界にまたがる時間帯は1900年代に標準化されたようですが、特に夏時間規則の点で、勝手に変更する傾向が続いています。
<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>は歴史的な時間帯ルールについての情報に、広く使われているIANA時間帯データベースを使用します。
将来の時間は、ある与えられた時間帯に対する最新の既知のルールが、将来長きに渡りそのまま遵守が継続されるということを前提としています。
   </P
><P
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>は典型的な使用法については標準<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>への互換性に対し最大限の努力をしています。
しかし、標準<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>には、日付と時刻のデータ型と機能に関する混乱が見受けられます。
2つの明らかな問題点を以下に示します。

     <P
></P
></P><UL
><LI
><P
><TT
CLASS="TYPE"
>date</TT
>型にはそれに関連する時間帯を持てませんが、<TT
CLASS="TYPE"
>time</TT
>型にはあります。
現実の世界において、時間帯のオフセットが夏時間への切り替えにより年間を通じて変化することから、時刻と同様に日付もそれに結び付けられていないと意味がありません。
       </P
></LI
><LI
><P
>デフォルトの時間帯は<ACRONYM
CLASS="ACRONYM"
>UTC</ACRONYM
>からの整数定数オフセットとして指定されています。
したがって<ACRONYM
CLASS="ACRONYM"
>DST</ACRONYM
>（夏時間）への切り替えをまたいで日付/時刻演算を行う場合、夏時間を適用することは不可能です。
       </P
></LI
></UL
><P>
    </P
><P
>このような問題を解決するためには、時間帯を使用する際に日付と時刻の両方を保持できる日付/時刻データ型を使用することを勧めます。
<TT
CLASS="TYPE"
>time with time zone</TT
>型の使用はお勧め<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>しません</I
></SPAN
> 
（もっとも<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>では、旧式のアプリケーションや、標準<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>との互換性のために、<TT
CLASS="TYPE"
>time with time zone</TT
>型の使用をサポートしています）。
<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>は、日付または時刻のみを保持するデータ型のすべては使用中の時間帯であると前提しています。
    </P
><P
>すべての時間帯付きの日付と時刻は<ACRONYM
CLASS="ACRONYM"
>UTC</ACRONYM
>で内部的に保存されます。
これらはクライアントに表示される前に<A
HREF="runtime-config-client.html#GUC-TIMEZONE"
>TimeZone</A
>設定パラメータで指定された時間帯におけるローカル時間に変換されます。
    </P
><P
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>では、3つの形式で時間帯を指定することができます。
     <P
></P
></P><UL
><LI
><P
><TT
CLASS="LITERAL"
>America/New_York</TT
>などの完全な時間帯名称。
認識できる時間帯名称は<TT
CLASS="LITERAL"
>pg_timezone_names</TT
>ビューに列挙されています（<A
HREF="view-pg-timezone-names.html"
>項50.80</A
>を参照してください）。
<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>はこの目的のためによく使用されているIANA時間帯データを使用します。
したがって、多くの他のソフトウェアでも同じ名前が認識されます。
       </P
></LI
><LI
><P
><TT
CLASS="LITERAL"
>PST</TT
>などの時間帯省略形。
こうした指定は、単に特定のUTCからのオフセットを定義します。
一方、完全な時間帯名称では夏時間遷移規則群も組み込まれます。
認識可能な省略形は<TT
CLASS="LITERAL"
>pg_timezone_abbrevs</TT
>ビューに列挙されています（<A
HREF="view-pg-timezone-abbrevs.html"
>項50.79</A
>を参照してください）。
<A
HREF="runtime-config-client.html#GUC-TIMEZONE"
>TimeZone</A
>設定パラメータおよび<A
HREF="runtime-config-logging.html#GUC-LOG-TIMEZONE"
>log_timezone</A
>設定パラメータを時間帯省略形に設定することはできませんが、日付時刻型の入力値や<TT
CLASS="LITERAL"
>AT TIME ZONE</TT
>演算子に省略形を使用することができます。
       </P
></LI
><LI
><P
>時間帯名やその省略形に加え、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>は、<TT
CLASS="REPLACEABLE"
><I
>STD</I
></TT
><TT
CLASS="REPLACEABLE"
><I
>offset</I
></TT
>や<TT
CLASS="REPLACEABLE"
><I
>STD</I
></TT
><TT
CLASS="REPLACEABLE"
><I
>offset</I
></TT
><TT
CLASS="REPLACEABLE"
><I
>DST</I
></TT
>という形式のPOSIX様式の時間帯指定を受付けます。
ここで、<TT
CLASS="REPLACEABLE"
><I
>STD</I
></TT
>は時間帯省略形、<TT
CLASS="REPLACEABLE"
><I
>offset</I
></TT
>はUTCから西に数えた時間単位のオフセットです。
また、オプションで夏時間時間帯の省略形の<TT
CLASS="REPLACEABLE"
><I
>DST</I
></TT
>を指定すると、指定オフセットから1時間進むものとみなされます。
例えば、<TT
CLASS="LITERAL"
>EST5EDT</TT
>が認識済みの時間帯名でないとしても、受付けられ、合衆国東海岸時間と同じものとして動作します。
この構文では、時間帯の短縮は文字列、あるいは任意の文字列を山括弧(<TT
CLASS="LITERAL"
>&lt;&gt;</TT
>)で括ったもので指定できます。
夏時間帯の省略名があると、IANA時間帯データベースの<TT
CLASS="FILENAME"
>posixrules</TT
>項目で使用される夏時間変換規則と同じ規則に従って使用されるものとみなされます。
標準的な<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>インストレーションでは、<TT
CLASS="FILENAME"
>posixrules</TT
>は<TT
CLASS="LITERAL"
>US/Eastern</TT
>と同じです。
このためPOSIX書式の時間帯指定は米国の夏時間規則に従います。
必要に応じて<TT
CLASS="FILENAME"
>posixrules</TT
>ファイルを置き換えることで、この動作を調整することができます。
       </P
></LI
></UL
><P>

一言で言うと、これは省略形と正式名称との差異です。
省略形はUTCから固定したオフセットを表わすのに対して、多くの正式名称はローカルの夏時間規定を暗示するので、2つのUTCオフセットがあるかもしれません。
例えば<TT
CLASS="LITERAL"
>2014-06-04 12:00 America/New_York</TT
>はニューヨークの正午を示しますが、これはこの日について言えば東部夏時間(UTC-4)です。
つまり<TT
CLASS="LITERAL"
>2014-06-04 12:00 EDT</TT
>はこれと同時刻を示します。
しかし、<TT
CLASS="LITERAL"
>2014-06-04 12:00 EST</TT
>は、その日に夏時間が使用されていたかどうかに関わらず、東部標準時間(UTC-5)での正午を示します。
    </P
><P
>問題を更に複雑にしているのは、一部の管轄は同じ略号を使って、年によって異なるUTCオフセットを表していることです。
例えばモスクワでは<TT
CLASS="LITERAL"
>MSK</TT
>はある年ではUTC+3を意味しますが、別の年ではUTC+4を意味します。
<SPAN
CLASS="APPLICATION"
>PostgreSQL</SPAN
>ではそのような略号について、指定の日に何を意味していたか（あるいは最も最近にどういう意味だったか）に従って解釈します。
しかし、<TT
CLASS="LITERAL"
>EST</TT
>の例にあるように、必ずしもその日付における地方常用時を示しているとは限りません。
    </P
><P
>時間帯省略形の正当性を検査しないため、POSIX書式時間帯機能ではおかしな入力を警告なく受け付けてしまう可能性があることに注意すべきです。
例えば、<TT
CLASS="LITERAL"
>SET TIMEZONE TO FOOBAR0</TT
>でも動作します。
このとき、システムは事実上、UTCについての奇妙な省略形を使用する状態になります。
他にも、POSIX時間帯名称では正のオフセットがグリニッジの<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>西</I
></SPAN
>側で使用されるという問題には注意しなければなりません。
<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>は、他ではすべてISO-8601規約にしたがい、正の時間帯オフセットはグリニッジの<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>東</I
></SPAN
>としています。
    </P
><P
>すべての場合において、時間帯名や略号は大文字小文字の区別なく認識されます。
（これは<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の8.2より前のバージョンからの変更です。
以前は、文脈によって大文字小文字が区別される場合と、されない場合がありました。） 
    </P
><P
>時間帯名、省略形のどちらもサーバ内に組み込まれるわけではありません。
インストールディレクトリの<TT
CLASS="FILENAME"
>.../share/timezone/</TT
>および<TT
CLASS="FILENAME"
>.../share/timezonesets/</TT
>の下に保存される構成ファイルから取得されます（<A
HREF="datetime-config-files.html"
>項B.3</A
>を参照ください）。
    </P
><P
><A
HREF="runtime-config-client.html#GUC-TIMEZONE"
>TimeZone</A
>は<TT
CLASS="FILENAME"
>postgresql.conf</TT
>ファイルや<A
HREF="runtime-config.html"
>第19章</A
>で説明する他の標準的な方法で設定することができます。
以下に、いくつか特別な設定方法を示します。

     <P
></P
></P><UL
><LI
><P
><ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>コマンド<TT
CLASS="COMMAND"
>SET TIME ZONE</TT
>はセッションの時間帯を設定します。
これは<TT
CLASS="COMMAND"
>SET TIMEZONE TO</TT
>の別名ですが、SQL仕様の構文へのより高い互換性があります。
       </P
></LI
><LI
><P
><TT
CLASS="ENVAR"
>PGTZ</TT
>環境変数は、<SPAN
CLASS="APPLICATION"
>libpq</SPAN
>クライアントが接続時にサーバに<TT
CLASS="COMMAND"
>SET TIME ZONE</TT
>コマンドを送信するために用いられます。
       </P
></LI
></UL
><P>
    </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="DATATYPE-INTERVAL-INPUT"
>8.5.4. 時間間隔の入力</A
></H2
><P
>     
<TT
CLASS="TYPE"
>interval</TT
>値は以下の冗長な構文を使って記述されます。

</P><PRE
CLASS="SYNOPSIS"
>[<SPAN
CLASS="OPTIONAL"
>@</SPAN
>] <TT
CLASS="REPLACEABLE"
><I
>quantity</I
></TT
> <TT
CLASS="REPLACEABLE"
><I
>unit</I
></TT
> [<SPAN
CLASS="OPTIONAL"
><TT
CLASS="REPLACEABLE"
><I
>quantity</I
></TT
> <TT
CLASS="REPLACEABLE"
><I
>unit</I
></TT
>...</SPAN
>] [<SPAN
CLASS="OPTIONAL"
><TT
CLASS="REPLACEABLE"
><I
>direction</I
></TT
></SPAN
>]</PRE
><P>

ここで、<TT
CLASS="REPLACEABLE"
><I
>quantity</I
></TT
>は（符号付き）時間量、<TT
CLASS="REPLACEABLE"
><I
>unit</I
></TT
>（単位）は<TT
CLASS="LITERAL"
>microsecond</TT
>、<TT
CLASS="LITERAL"
>millisecond</TT
>、<TT
CLASS="LITERAL"
>second</TT
>（秒）、<TT
CLASS="LITERAL"
>minute</TT
>（分）、<TT
CLASS="LITERAL"
>hour</TT
>（時）、<TT
CLASS="LITERAL"
>day</TT
>（日）、<TT
CLASS="LITERAL"
>week</TT
>（週）、<TT
CLASS="LITERAL"
>month</TT
>（月）、<TT
CLASS="LITERAL"
>year</TT
>（年）、<TT
CLASS="LITERAL"
>decade</TT
>（10年単位）、<TT
CLASS="LITERAL"
>century</TT
>（100年単位）、<TT
CLASS="LITERAL"
>millennium</TT
>（1000年単位）あるいはこれらの単位の簡略形または複数形です。
<TT
CLASS="REPLACEABLE"
><I
>direction</I
></TT
>（方向）は<TT
CLASS="LITERAL"
>ago</TT
>もしくは空です。
アットマーク（<TT
CLASS="LITERAL"
>@</TT
>）はオプションで、付けても付けなくても構いません。
異なる単位における時間量は適切に符号を考慮して暗黙的に足されます。
<TT
CLASS="LITERAL"
>ago</TT
>はすべてのフィールドの正負を逆にします。
この構文はまた、<A
HREF="runtime-config-client.html#GUC-INTERVALSTYLE"
>IntervalStyle</A
>が<TT
CLASS="LITERAL"
>postgres_verbose</TT
>に設定されている場合に時間間隔の出力でも使用されます。
    </P
><P
>    
日、時、分、および秒の時間量は明示的に単位を指定しなくても構いません。
例えば、<TT
CLASS="LITERAL"
>'1 12:59:10'</TT
>は<TT
CLASS="LITERAL"
>'1 day 12 hours 59 min 10 sec'</TT
>（1日と12時間59分10秒）と解釈されます。
また年と月の組み合わせはダッシュを使って指定することができます。
例えば、<TT
CLASS="LITERAL"
>'200-10'</TT
>は<TT
CLASS="LITERAL"
>'200 years 10 months'</TT
>（200年と10か月）と解釈されます。
（実際のところ、標準SQLで許されている簡略形はこれらだけです。
そして<TT
CLASS="VARNAME"
>IntervalStyle</TT
>が<TT
CLASS="LITERAL"
>sql_standard</TT
>に設定されている場合には、これらが出力で使用されます。）
    </P
><P
>    
標準の4.4.3.2節の<SPAN
CLASS="QUOTE"
>"指定文字付書式"</SPAN
>または4.4.3.3節の<SPAN
CLASS="QUOTE"
>"代替書式"</SPAN
>のどちらかを使用して、時間間隔値はISO 8601時間間隔として書くこともできます。
指定文字付の書式は以下のようなものです。
</P><PRE
CLASS="SYNOPSIS"
>P <TT
CLASS="REPLACEABLE"
><I
>quantity</I
></TT
> <TT
CLASS="REPLACEABLE"
><I
>unit</I
></TT
> [<SPAN
CLASS="OPTIONAL"
> <TT
CLASS="REPLACEABLE"
><I
>quantity</I
></TT
> <TT
CLASS="REPLACEABLE"
><I
>unit</I
></TT
> ...</SPAN
>] [<SPAN
CLASS="OPTIONAL"
> T [<SPAN
CLASS="OPTIONAL"
> <TT
CLASS="REPLACEABLE"
><I
>quantity</I
></TT
> <TT
CLASS="REPLACEABLE"
><I
>unit</I
></TT
> ...</SPAN
>]</SPAN
>]</PRE
><P>
文字列は<TT
CLASS="LITERAL"
>P</TT
>で始まらなければならず、また、日と時間を区切る<TT
CLASS="LITERAL"
>T</TT
>を含めることができます。
利用可能な単位の省略形を<A
HREF="datatype-datetime.html#DATATYPE-INTERVAL-ISO8601-UNITS"
>表8-16</A
>に示します。
単位は省略しても構いませんし、任意の順番で指定できますが、1日より小さな単位は<TT
CLASS="LITERAL"
>T</TT
>の後に書かなければなりません。
特に<TT
CLASS="LITERAL"
>M</TT
>の意味は<TT
CLASS="LITERAL"
>T</TT
>の前にあるか後にあるかに依存します。
     </P
><DIV
CLASS="TABLE"
><A
NAME="DATATYPE-INTERVAL-ISO8601-UNITS"
></A
><P
><B
>表 8-16. ISO 8601における時間間隔単位の省略形</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>省略形</TH
><TH
>意味</TH
></TR
></THEAD
><TBODY
><TR
><TD
>Y</TD
><TD
>年</TD
></TR
><TR
><TD
>M</TD
><TD
>月（日付部分における）</TD
></TR
><TR
><TD
>W</TD
><TD
>週</TD
></TR
><TR
><TD
>D</TD
><TD
>日</TD
></TR
><TR
><TD
>H</TD
><TD
>時間</TD
></TR
><TR
><TD
>M</TD
><TD
>分（時刻部分における）</TD
></TR
><TR
><TD
>S</TD
><TD
>秒</TD
></TR
></TBODY
></TABLE
></DIV
><P
>     
別の書式を示します。
</P><PRE
CLASS="SYNOPSIS"
>P [<SPAN
CLASS="OPTIONAL"
> <TT
CLASS="REPLACEABLE"
><I
>years</I
></TT
>-<TT
CLASS="REPLACEABLE"
><I
>months</I
></TT
>-<TT
CLASS="REPLACEABLE"
><I
>days</I
></TT
> </SPAN
>] [<SPAN
CLASS="OPTIONAL"
> T <TT
CLASS="REPLACEABLE"
><I
>hours</I
></TT
>:<TT
CLASS="REPLACEABLE"
><I
>minutes</I
></TT
>:<TT
CLASS="REPLACEABLE"
><I
>seconds</I
></TT
> </SPAN
>]</PRE
><P>
      
上の代替書式では、文字列は<TT
CLASS="LITERAL"
>P</TT
>から始まらなければなりません。
そして、<TT
CLASS="LITERAL"
>T</TT
>は時間間隔の日付部分と時刻部分とを分割します。
値はISO 8601日付と同様の数字で指定されます。
    </P
><P
>    
<TT
CLASS="REPLACEABLE"
><I
>fields</I
></TT
>指定を使って時間間隔定数を記述する場合、または、<TT
CLASS="REPLACEABLE"
><I
>fields</I
></TT
>仕様で定義された時間間隔列に文字列を割り当てる場合、マークされていない時間量の解釈は<TT
CLASS="REPLACEABLE"
><I
>fields</I
></TT
>に依存します。
例えば<TT
CLASS="LITERAL"
>INTERVAL '1' YEAR</TT
>は1年と解釈され、一方で<TT
CLASS="LITERAL"
>INTERVAL '1'</TT
>は1秒と解釈されます。
同時に、<TT
CLASS="REPLACEABLE"
><I
>fields</I
></TT
>仕様によって許可される最下位フィールドの<SPAN
CLASS="QUOTE"
>"右側の"</SPAN
>フィールド値は警告なしに破棄されます。
例えば、<TT
CLASS="LITERAL"
>INTERVAL '1 day 2:03:04' HOUR TO MINUTE</TT
>と書くことで、二番目のフィールドは削除されますが、日付フィールドは削除されません。
    </P
><P
>    
標準<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>に従うと、時間間隔値のフィールドはすべて同じ符号を持たなければなりません。
このため、先頭の負の符号はすべてのフィールドに適用されます。
例えば時間間隔リテラル<TT
CLASS="LITERAL"
>'-1 2:03:04'</TT
>の負の符号は、日付部分にも時、分、秒部分にも適用されます。
<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>ではフィールドに異なる符号を持たせることができます。
また伝統的にテキスト形式表現における各フィールドは独立した符号を持つものとして扱われます。
このため、この例では時、分、秒部分は正であるとみなされます。
<TT
CLASS="VARNAME"
>IntervalStyle</TT
>が<TT
CLASS="LITERAL"
>sql_standard</TT
>に設定されている場合、先頭の符号はすべてのフィールドに適用されるものとみなされます（ただし他に符号がない場合のみです）。
さもなくば、伝統的な<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の解釈が使用されます。
あいまいさを防ぐために、負のフィールドがある場合には個別に明示的な符号を付けることを勧めます。
    </P
><P
>    
内部的には、<TT
CLASS="TYPE"
>interval</TT
>の値は月数、日数および秒数として格納されています。
ある月の日数は月によって変わりますし、夏時間が導入されていると1日が23時間であったり25時間であったりするからです。
月数と日数フィールドは整数ですが、秒数フィールドは小数を保管することができます。
時間間隔は通常定数列、もしくは<TT
CLASS="TYPE"
>timestamp</TT
>からの引き算で生成されますので、このように保存すればほとんどの場合うまく行きます。
<CODE
CLASS="FUNCTION"
>justify_days</CODE
>と<CODE
CLASS="FUNCTION"
>justify_hours</CODE
>関数で通常の範囲を越えた日にちと時刻を調整できます。
    </P
><P
>    
冗長な入力書式、および、より簡略な書式の一部のフィールドでは、フィールド値は小数部分を持つことができます。
例えば<TT
CLASS="LITERAL"
>'1.5 week'</TT
>や<TT
CLASS="LITERAL"
>'01:02:03.45'</TT
>です。
こうした入力は格納の際適切な月数、日数、秒数に変換されます。
これが月または日数が小数になる結果となる場合、小数部分は1月は30日、1日は24時間という変換規則を使用して、より低い順のフィールドに加えられます。
例えば<TT
CLASS="LITERAL"
>'1.5 month'</TT
>は1月と15日となります。
秒だけが出力において小数を示すことになります。
    </P
><P
>    
<A
HREF="datatype-datetime.html#DATATYPE-INTERVAL-INPUT-EXAMPLES"
>表8-17</A
>は有効な<TT
CLASS="TYPE"
>interval</TT
>入力のいくつかの例を示しています。
    </P
><DIV
CLASS="TABLE"
><A
NAME="DATATYPE-INTERVAL-INPUT-EXAMPLES"
></A
><P
><B
>表 8-17. 時間間隔入力</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>例</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
>1-2</TD
><TD
>標準SQL書式。1年2ヶ月</TD
></TR
><TR
><TD
>3 4:05:06</TD
><TD
>標準SQL書式。3日4時間5分6秒</TD
></TR
><TR
><TD
>1 year 2 months 3 days 4 hours 5 minutes 6 seconds</TD
><TD
>伝統的Postgres書式。1年2月3日4時間5分6秒</TD
></TR
><TR
><TD
>P1Y2M3DT4H5M6S</TD
><TD
>ISO 8601 <SPAN
CLASS="QUOTE"
>"指定文字付き書式"</SPAN
>。意味は上と同じ</TD
></TR
><TR
><TD
>P0001-02-03T04:05:06</TD
><TD
>ISO 8601 <SPAN
CLASS="QUOTE"
>"代替書式"</SPAN
>。意味は上と同じ</TD
></TR
></TBODY
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="DATATYPE-INTERVAL-OUTPUT"
>8.5.5. 時間間隔の出力</A
></H2
><P
>    
時間間隔型の出力書式は、<TT
CLASS="LITERAL"
>SET intervalstyle</TT
>コマンドを使用して、<TT
CLASS="LITERAL"
>sql_standard</TT
>、<TT
CLASS="LITERAL"
>postgres</TT
>、<TT
CLASS="LITERAL"
>postgres_verbose</TT
>または<TT
CLASS="LITERAL"
>iso_8601</TT
>の４つのうちの１つを設定できます。
デフォルトは<TT
CLASS="LITERAL"
>postgres</TT
>書式です。
<A
HREF="datatype-datetime.html#INTERVAL-STYLE-OUTPUT-TABLE"
>表8-18</A
>はそれぞれの出力形式を示した例です。
    </P
><P
>    
<TT
CLASS="LITERAL"
>sql_standard</TT
>形式は、時間間隔値が標準制約（構成要素に正負が混在していない年数と月数のみ、または日数と時間のみ）を満足する場合、時間間隔リテラル文字列に対し標準SQLに準拠する出力を作成します。
それ以外の場合、出力は、標準的な年数-月数のリテラル文字列の後に日数-時間のリテラル文字列が続いたものになり、正負混在した時間間隔のあいまいさを無くすために明示的な符号が付加されます。
    </P
><P
>    
<TT
CLASS="LITERAL"
>postgres</TT
>書式の出力は、<A
HREF="runtime-config-client.html#GUC-DATESTYLE"
>DateStyle</A
>パラメータが<TT
CLASS="LITERAL"
>ISO</TT
>に設定されたとき、8.4より前のリリースと一致します。
    </P
><P
>    
<TT
CLASS="LITERAL"
>postgres_verbose</TT
>書式の出力は、<A
HREF="runtime-config-client.html#GUC-DATESTYLE"
>DateStyle</A
>パラメータが<TT
CLASS="LITERAL"
>ISO</TT
>以外に設定されたとき、8.4より前のリリースと一致します。
    </P
><P
>    
<TT
CLASS="LITERAL"
>iso_8601</TT
>書式の出力はISO 8601 標準の4.4.3.2節に記述の<SPAN
CLASS="QUOTE"
>"format with designators（指名付き書式）"</SPAN
>に一致します。
    </P
><DIV
CLASS="TABLE"
><A
NAME="INTERVAL-STYLE-OUTPUT-TABLE"
></A
><P
><B
>表 8-18. 時間間隔出力形式の例</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><COL><THEAD
><TR
><TH
>形式指定</TH
><TH
>年-月時間間隔</TH
><TH
>日-時刻時間間隔</TH
><TH
>混在した時間間隔</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
>sql_standard</TT
></TD
><TD
>1-2</TD
><TD
>3 4:05:06</TD
><TD
>-1-2 +3 -4:05:06</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>postgres</TT
></TD
><TD
>1 year 2 mons</TD
><TD
>3 days 04:05:06</TD
><TD
>-1 year -2 mons +3 days -04:05:06</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>postgres_verbose</TT
></TD
><TD
>@ 1 year 2 mons</TD
><TD
>@ 3 days 4 hours 5 mins 6 secs</TD
><TD
>@ 1 year 2 mons -3 days 4 hours 5 mins 6 secs ago</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>iso_8601</TT
></TD
><TD
>P1Y2M</TD
><TD
>P3DT4H5M6S</TD
><TD
>P-1Y-2M3DT-4H-5M-6S</TD
></TR
></TBODY
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="datatype-binary.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>ホーム</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="datatype-boolean.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>バイナリ列データ型</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="datatype.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>論理値データ型</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>