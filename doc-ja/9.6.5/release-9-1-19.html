<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>リリース9.1.19</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 9.6.5文書"
HREF="index.html"><LINK
REL="UP"
TITLE="リリースノート"
HREF="release.html"><LINK
REL="PREVIOUS"
TITLE="リリース9.1.20"
HREF="release-9-1-20.html"><LINK
REL="NEXT"
TITLE="リリース9.1.18"
HREF="release-9-1-18.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=utf-8"><META
NAME="creation"
CONTENT="2017-10-17T11:51:21"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>PostgreSQL 9.6.5文書</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="リリース9.1.20"
HREF="release-9-1-20.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="release.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>付録 E. リリースノート</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="リリース9.1.18"
HREF="release-9-1-18.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="RELEASE-9-1-19"
>E.81. リリース9.1.19</A
></H1
><DIV
CLASS="FORMALPARA"
><P
><B
>リリース日: </B
>2015-10-08</P
></DIV
><P
>このリリースは9.1.18に対し、各種不具合を修正したものです。
9.1メジャーリリースにおける新機能については、<A
HREF="release-9-1.html"
>項E.100</A
>を参照してください。
  </P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN148890"
>E.81.1. バージョン9.1.19への移行</A
></H2
><P
>9.1.Xからの移行ではダンプ/リストアは不要です。
   </P
><P
>また、9.1.16よりも前のリリースからアップグレードする場合は、<A
HREF="release-9-1-16.html"
>項E.84</A
>を参照して下さい。
   </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN148895"
>E.81.2. 変更点</A
></H2
><P
></P
><UL
><LI
><P
>短すぎる<CODE
CLASS="FUNCTION"
>crypt()</CODE
>のソルトを検出して報告するように<TT
CLASS="FILENAME"
>contrib/pgcrypto</TT
>を修正しました。
(Josh Kupershmidt)
     </P
><P
>ある種の無効なソルト引数はサーバをクラッシュさせるか、わずかなバイト数のサーバメモリを露出させました。機密情報を露出するバイト列に在るように配置する攻撃の可能性は排除しませんが、ありそうにないと考えられます。
(CVE-2015-5288)
     </P
></LI
><LI
><P
>外側サブトランザクションに属するポータル（カーソル）がエラーになった後の、サブトランザクションのクリーンアップ処理を修正しました。
(Tom Lane, Michael Paquier)
     </P
><P
>外側サブトランザクションのカーソルで実行された関数が、内側サブトランザクションで作られたリレーションを参照することで、アサート失敗かクラッシュを引き起こすことがありました。
     </P
></LI
><LI
><P
>リレーションキャッシュ<SPAN
CLASS="QUOTE"
>"initファイル"</SPAN
>へのリレーションの書き込みを修正しました。
(Tom Lane)
     </P
><P
>直近のマイナーリリースでの修正の誤りにより、<TT
CLASS="STRUCTNAME"
>pg_trigger_tgrelid_tgname_index</TT
>をinitファイルから除外していました。
その後のセッションはこのことを検出して、initファイルが壊れているとみなして黙ってファイルを無視します。結果としてセッション開始時間が顕著に劣化しました。
本バグの修正に加えて、似たような将来の誤りが見つかりやすくなるように防止策をいくつか導入しました。
     </P
></LI
><LI
><P
>SPIクエリ結果に多数のタプルを挿入するときの O(N^2) の振る舞いを防止しました。
(Neil Conway)
     </P
></LI
><LI
><P
>読まれていない通知が多数あるときの<TT
CLASS="COMMAND"
>LISTEN</TT
>開始時間を改善しました。
(Matt Newell)
     </P
></LI
><LI
><P
>9.3時代に加わったリソース所有者ごとのロックキャッシュをより前のバージョンに適用しました。
(Jeff Janes)
     </P
><P
><SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>が多数のテーブルをダンプしようとするとき、性能を大幅に改善します。
     </P
></LI
><LI
><P
>SSL再ネゴシエーションをデフォルトで無効にしました。
(Michael Paquier, Andres Freund)
     </P
><P
>SSL再ネゴシエーションの使用は理論的には良い考えですが、OpenSSLライブラリに因るものと私たちのライブラリの使い方に因るものの両方で実際のところ多くのバグが見られました。
再ネゴシエーションは9.5以降では完全に取り除く予定です。古いバージョン系列では
<TT
CLASS="VARNAME"
>ssl_renegotiation_limit</TT
>のデフォルト値をゼロ（無効）に変更するだけとします。
     </P
></LI
><LI
><P
><TT
CLASS="LITERAL"
>*_freeze_max_age</TT
>パラメータの下限値を下げました。
(Andres Freund)
     </P
><P
>これは主として関連する振る舞いのテストの所要時間を短くするものですが、限られたディスク領域でインストールする際にも有益と思われます。
     </P
></LI
><LI
><P
>サーバクラッシュを防ぐため、<TT
CLASS="VARNAME"
>wal_buffers</TT
>の最大値を2GBに制限しました。
(Josh Berkus)
     </P
></LI
><LI
><P
><TT
CLASS="TYPE"
>numeric</TT
>値の掛け算における稀な内部オーバーフローを修正しました。
(Dean Rasheed)
     </P
></LI
><LI
><P
>レコード型、範囲型、<TT
CLASS="TYPE"
>json</TT
>、<TT
CLASS="TYPE"
>jsonb</TT
>、<TT
CLASS="TYPE"
>tsquery</TT
>、<TT
CLASS="TYPE"
>ltxtquery</TT
>、および、<TT
CLASS="TYPE"
>query_int</TT
>に含まれる起こりにくいスタックオーバーフローを予防しました。
(Noah Misch)
     </P
></LI
><LI
><P
>日付時刻の入力で<TT
CLASS="LITERAL"
>DOW</TT
>と<TT
CLASS="LITERAL"
>DOY</TT
>の扱いを修正しました。
(Greg Stark)
     </P
><P
>これらのトークンは日付時刻値では使えないはずですが、これまでは<SPAN
CLASS="QUOTE"
>"invalid input syntax"</SPAN
>でなく、意味の分からない内部エラーメッセージになっていました。
     </P
></LI
><LI
><P
>正規表現照合処理中における、問い合わせのキャンセルの検査を更に追加しました
(Tom Lane)
     </P
></LI
><LI
><P
>正規表現、<TT
CLASS="LITERAL"
>SIMILAR TO</TT
>、および、<TT
CLASS="LITERAL"
>LIKE</TT
>の照合に再帰深度の保護を加えました。
(Tom Lane)
     </P
><P
>ある種の検索パターンと低いスタック深度制限によりスタックオーバーランクラッシュを引き起こすことがありました。
     </P
></LI
><LI
><P
>正規表現の実行での無限ループの可能性を修正しました。
(Tom Lane)
     </P
><P
>一見ゼロ長文字列にマッチできそうで実際には後方参照のためにマッチしない検索パターンで、無限ループになるおそれがありました。
     </P
></LI
><LI
><P
>正規表現のコンパイルでメモリ不足による障害を修正しました。
(Andreas Seltenreich)
     </P
></LI
><LI
><P
>正規表現実行での稀なメモリリークを修正しました。
(Tom Lane)
     </P
></LI
><LI
><P
>トランザクションがアボートした際のロック解放処理における稀なメモリ不足時の障害を修正しました。
(Tom Lane)
     </P
></LI
><LI
><P
>小さい<TT
CLASS="VARNAME"
>work_mem</TT
>設定でタプルストアを使用するときに、<SPAN
CLASS="QUOTE"
>"unexpected out-of-memory situation during sort"</SPAN
>エラーになるのを修正しました。
(Tom Lane)
     </P
></LI
><LI
><P
><CODE
CLASS="FUNCTION"
>qsort</CODE
>での大変稀なスタックオーバーランを修正しました。
(Tom Lane)
     </P
></LI
><LI
><P
>大きな<TT
CLASS="VARNAME"
>work_mem</TT
>設定でハッシュジョインの際に<SPAN
CLASS="QUOTE"
>"invalid memory alloc request size"</SPAN
>エラーになるのを修正しました。
(Tomas Vondra, Tom Lane)
     </P
></LI
><LI
><P
>プランナに関するいくつかのバグを修正しました。
(Tom Lane)
     </P
><P
>これらの誤りは間違ったクエリプランを導き、不適切な結果やアサート有効ビルドにおけるアサート失敗、あるいは、
<SPAN
CLASS="QUOTE"
>"could not devise a query plan for the given query"</SPAN
>、
<SPAN
CLASS="QUOTE"
>"could not find pathkey item to sort"</SPAN
>、
<SPAN
CLASS="QUOTE"
>"plan should not reference subplan's variable"</SPAN
>、
<SPAN
CLASS="QUOTE"
>"failed to assign all NestLoopParams to plan nodes"</SPAN
>
などの奇妙なプランナエラーになりました。
問題を明らかにしたファズテストを行ったAndreas SeltenreichとPiotr Stefaniakに感謝しなければいけません。
     </P
></LI
><LI
><P
>あいまいパスコストの同点決勝ルールをサポート中の全バージョン系列に後方適用しました。
(Tom Lane)
     </P
><P
>本変更により、ちょうど同じ見積コストをもつ代替プランを選択するときにプラットフォーム固有の挙動を回避します。
     </P
></LI
><LI
><P
>スタンバイ昇格のトリガファイルがpostmaster起動時に確実に削除されるようにしました。
(Michael Paquier, Fujii Masao)
     </P
><P
>新たなスタンバイサーバを初期化するのに使われるデータベースバックアップにトリガファイルが在ったとき、望まない昇格が起きるのを防ぎます。
     </P
></LI
><LI
><P
>postmasterシャットダウンの際、<TT
CLASS="FILENAME"
>postmaster.pid</TT
>ファイルを削除する前に、確実にソケット毎のロックファイルが削除され、リッスンソケットが閉じられるようにしました。
(Tom Lane)
     </P
><P
>外部スクリプトが<TT
CLASS="LITERAL"
>pg_ctl stop</TT
>が戻ってすぐに新たなpostmasterを起動しようとする場合の、競合状態による失敗を防ぎます。
     </P
></LI
><LI
><P
>postmasterにおけるクラッシュリカバリ中のスタートアッププロセスのクラッシュの扱いを修正しました。
(Tom Lane)
     </P
><P
>クラッシュリカバリサイクルの中で、スタートアッププロセスがデータベース一貫性の復旧無しにクラッシュした場合、一般的に再クラッシュとなるだけの新たなスタートアッププロセスを起動しようとして無限ループをもたらしていました。
     </P
></LI
><LI
><P
>自動バキュームワーカにシグナルを送ろうとしてそのプロセスが既にいなくなっていた場合に<TT
CLASS="LITERAL"
>WARNING</TT
>を出さないようにしました。
また、そのようなシグナルに関連するログ冗長性を減らしました。
(Tom Lane)
     </P
></LI
><LI
><P
>サーバ時計の時刻が大幅に戻ったときに自動バキュームランチャーが過度に長く休止するのを防止しました。
(&Aacute;lvaro Herrera)
     </P
></LI
><LI
><P
>GINインデックスの挿入保留リストのクリーンアップがキャンセル要求により割り込みできることを確実にしました。
(Jeff Janes)
     </P
></LI
><LI
><P
>GINインデックスで全ゼロページを再利用可能にしました。
(Heikki Linnakangas)
     </P
><P
>そのようなページはクラッシュ後に取り残されるかもしれませんでした。
     </P
></LI
><LI
><P
>subtrans/multixactの切捨て処理で、<SPAN
CLASS="QUOTE"
>"apparent wraparound"</SPAN
>に関する警告となる以外には無害な境界条件エラーを修正しました
(Thomas Munro)
     </P
></LI
><LI
><P
><SPAN
CLASS="APPLICATION"
>PL/pgSQL</SPAN
>のエラーコンテキストメッセージにて、文の種類<TT
CLASS="COMMAND"
>CONTINUE</TT
>、<TT
CLASS="COMMAND"
>MOVE</TT
>の誤報告を修正しました。
(Pavel Stehule, Tom Lane)
     </P
></LI
><LI
><P
>非<ACRONYM
CLASS="ACRONYM"
>ASCII</ACRONYM
>のエラーメッセージ文面を正しく扱うように <SPAN
CLASS="APPLICATION"
>PL/Perl</SPAN
>を修正しました。
(Alex Hunsaker)
     </P
></LI
><LI
><P
><TT
CLASS="TYPE"
>record</TT
>結果の文字列表現を返すときの <SPAN
CLASS="APPLICATION"
>PL/Python</SPAN
>のクラッシュを修正しました。
(Tom Lane)
     </P
></LI
><LI
><P
><SPAN
CLASS="APPLICATION"
>PL/Tcl</SPAN
>にて<CODE
CLASS="FUNCTION"
>malloc()</CODE
>呼び出しの失敗チェックを怠っているいくつかの箇所を修正しました。
(Michael Paquier, &Aacute;lvaro Herrera)
     </P
></LI
><LI
><P
><TT
CLASS="FILENAME"
>contrib/isn</TT
>で、979で始まるISBN-13番号の出力を修正しました。
(Fabien Coelho)
     </P
><P
>（9790ではなく）979から始まるEANはISBNと見做せますが、それらは10桁形式ではなく、新しい13桁形式で出力されなければいけません。
     </P
></LI
><LI
><P
><SPAN
CLASS="APPLICATION"
>libpq</SPAN
>のメモリ不足状態の扱いを改善しました。
(Michael Paquier, Heikki Linnakangas)
     </P
></LI
><LI
><P
><SPAN
CLASS="APPLICATION"
>ecpg</SPAN
>において、メモリリークとメモリ不足チェックの欠落を修正しました。
(Michael Paquier)
     </P
></LI
><LI
><P
>数値出力のロケールを意識した書式整形について、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>のコードを修正しました。
(Tom Lane)
     </P
><P
><TT
CLASS="LITERAL"
>\pset numericlocale on</TT
> で実行される書式整形のコードは、べき指数を持つけれども小数点を持たない数値など、一部のまれなケースで誤っていました。
<TT
CLASS="TYPE"
>money</TT
>データ型の既にローカライズされた出力を壊すこともありました。
     </P
></LI
><LI
><P
>現在の接続が無いときの<TT
CLASS="COMMAND"
>\c</TT
>コマンドで<SPAN
CLASS="APPLICATION"
>psql</SPAN
>がクラッシュするのを防止しました。
(Noah Misch)
     </P
></LI
><LI
><P
><SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>のディレクトリ出力フォーマットにおいて、デフォルトの<SPAN
CLASS="APPLICATION"
>zlib</SPAN
>圧縮レベルの選択を修正しました。
(Andrew Dunstan)
     </P
></LI
><LI
><P
><ACRONYM
CLASS="ACRONYM"
>tar</ACRONYM
>形式出力での<SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>で作られる一時ファイルを全ユーザから読み取り可能にしないようにしました。
(Michael Paquier)
     </P
></LI
><LI
><P
><TT
CLASS="LITERAL"
>postgres</TT
>または<TT
CLASS="LITERAL"
>template1</TT
>データベースがデフォルトテーブルスペース以外にある場合に対応するように、<SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>と<SPAN
CLASS="APPLICATION"
>pg_upgrade</SPAN
>を修正しました。
(Marti Raudsepp, Bruce Momjian)
     </P
></LI
><LI
><P
>特定の権限タイプを持つには古すぎるサーバからダンプするときに、<SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>がオブジェクト権限を正常に扱うように修正しました。
(Tom Lane)
     </P
><P
>関数や手続き言語を7.3以前のサーバからダンプするとき、<SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>は所有者の付与できる権限を剥奪して、代わりに<TT
CLASS="LITERAL"
>PUBLIC</TT
>に全ての権限を与えるような<TT
CLASS="COMMAND"
>GRANT</TT
>/<TT
CLASS="COMMAND"
>REVOKE</TT
>コマンドを生成していました。
ここでの権限に含まれるのは<TT
CLASS="LITERAL"
>USAGE</TT
>と<TT
CLASS="LITERAL"
>EXECUTE</TT
>だけなので、これはセキュリティ問題ではありませんが、まったく驚くべき旧システム挙動の表現です。
この場合はデフォルト権限状態のままにするように修正しました。
     </P
></LI
><LI
><P
><SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>がシェル型をダンプするように修正しました。
(Tom Lane)
     </P
><P
>シェル型(未定義のデータ型)は大して有用ではありませんが、それでも<SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>はダンプすべきでした。
     </P
></LI
><LI
><P
><SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>とその他いくつかのクライアント側プログラムの、様々なちょっとしたメモリリークを修正しました。
(Michael Paquier)
     </P
></LI
><LI
><P
><ACRONYM
CLASS="ACRONYM"
>AIX</ACRONYM
>のネイティブアセンブラと互換性を持つように、PPCハードウェアむけのスピンロックのアセンブラコードを修正しました。
     </P
><P
><SPAN
CLASS="APPLICATION"
>gcc</SPAN
>が一般的になりつつあるネイティブアセンブラを使う構成である場合に、<SPAN
CLASS="APPLICATION"
>gcc</SPAN
>でのビルドができませんでした。
     </P
></LI
><LI
><P
><ACRONYM
CLASS="ACRONYM"
>AIX</ACRONYM
>で、単にそれが安全に使えるとみなすのでなく、<TT
CLASS="LITERAL"
>-qlonglong</TT
>コンパイラオプションのテストをします。
(Noah Misch)
     </P
></LI
><LI
><P
><ACRONYM
CLASS="ACRONYM"
>AIX</ACRONYM
>で、実行時に解決されるシンボルを許可する<TT
CLASS="LITERAL"
>-Wl,-brtllib</TT
>リンクオプションを使います。
(Noah Misch)
     </P
><P
>Perlでは5.8.0以降からこの機能に依存しています。
     </P
></LI
><LI
><P
>コンパイラバグのため、32bit <SPAN
CLASS="APPLICATION"
>xlc</SPAN
>でインライン関数展開を使わないようにしました。
(Noah Misch)
     </P
></LI
><LI
><P
>いくつかのSolarisバージョン上で、必要に応じて<CODE
CLASS="FUNCTION"
>sched_yield()</CODE
>のために<TT
CLASS="FILENAME"
>librt</TT
>を使用します。
(Oskari Saarenmaa)
     </P
></LI
><LI
><P
>Windowsの<TT
CLASS="FILENAME"
>install.bat</TT
>スクリプトが空白文字を含む対象ディレクトリ名を扱えるように修正しました。
(Heikki Linnakangas)
     </P
></LI
><LI
><P
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>バージョン番号の数値形式(<TT
CLASS="LITERAL"
>90405</TT
>など)を拡張モジュールのMakefileで変数<TT
CLASS="VARNAME"
>VERSION_NUM</TT
>として容易に利用可能にしました。
(Michael Paquier)
     </P
></LI
><LI
><P
>タイムゾーンデータファイルを、ケイマン諸島、フィジー、モルドバ、モロッコ、ノーフォーク島、北朝鮮、トルコ、ウルグアイの夏時間規則を変更した<SPAN
CLASS="APPLICATION"
>tzdata</SPAN
> release 2015gに更新しました。また、カナダ・ノーザンロッキーのための新しいタイムゾーン名<TT
CLASS="LITERAL"
>America/Fort_Nelson</TT
>が加わっています。
     </P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="release-9-1-20.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>ホーム</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="release-9-1-18.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>リリース9.1.20</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="release.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>リリース9.1.18</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>