<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>リリース9.1.5</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 9.6.5文書"
HREF="index.html"><LINK
REL="UP"
TITLE="リリースノート"
HREF="release.html"><LINK
REL="PREVIOUS"
TITLE="リリース9.1.6"
HREF="release-9-1-6.html"><LINK
REL="NEXT"
TITLE="リリース9.1.4"
HREF="release-9-1-4.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=utf-8"><META
NAME="creation"
CONTENT="2017-10-17T11:51:21"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>PostgreSQL 9.6.5文書</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="リリース9.1.6"
HREF="release-9-1-6.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="release.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>付録 E. リリースノート</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="リリース9.1.4"
HREF="release-9-1-4.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="RELEASE-9-1-5"
>E.95. リリース9.1.5</A
></H1
><DIV
CLASS="FORMALPARA"
><P
><B
>リリース日: </B
>2012-08-17</P
></DIV
><P
>このリリースは9.1.4に対し、各種不具合を修正したものです。
9.1メジャーリリースにおける新機能については<A
HREF="release-9-1.html"
>項E.100</A
>を参照してください。
  </P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN150883"
>E.95.1. バージョン9.1.5への移行</A
></H2
><P
>9.1.Xからの移行ではダンプ/リストアは不要です。
   </P
><P
>しかし9.1.4より前のバージョンからアップグレードする場合は、<A
HREF="release-9-1-4.html"
>項E.96</A
>を参照してください。
   </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN150888"
>E.95.2. 変更点</A
></H2
><P
></P
><UL
><LI
><P
>XML実体参照を介した外部ファイル/URLへのアクセスを防止します。(Noah Misch、Tom Lane)
     </P
><P
><CODE
CLASS="FUNCTION"
>xml_parse()</CODE
>は、XML値で参照されるDTDと実体参照を解決するために必要な外部ファイルやURLの入手を試みます。
これにより、権限を持たないデータベースユーザがデータベースサーバの権限でデータを入手することができてしまいました。
この外部データは直接ユーザには返されませんが、データが有効なXMLとして解析できなかった場合その一部がエラーメッセージの中に漏洩することがあり得ます。
またどのような場合であっても、ファイルが存在するかどうか検査できるだけでも攻撃者にとって有用になり得ます。(CVE-2012-3489)
     </P
></LI
><LI
><P
><TT
CLASS="FILENAME"
>contrib/xml2</TT
>の<CODE
CLASS="FUNCTION"
>xslt_process()</CODE
>を介した外部ファイル/URLへのアクセスを防止します。(Peter Eisentraut)
     </P
><P
><SPAN
CLASS="APPLICATION"
>libxslt</SPAN
>はスタイルシートコマンドを通してファイルとURLの両方を読み書きする機能を提供します。
これにより、権限を持たないデータベースユーザがデータベースサーバの権限でデータを読み書きすることができてしまいました。
<SPAN
CLASS="APPLICATION"
>libxslt</SPAN
>のセキュリティオプションを適切に使用することでこれを無効にします。(CVE-2012-3488)
     </P
><P
>また<CODE
CLASS="FUNCTION"
>xslt_process()</CODE
>の外部ファイル/URLからドキュメントとスタイルシートを取り込む機能を取り除きました。
これは文書化された<SPAN
CLASS="QUOTE"
>"機能"</SPAN
>でしたが、推奨されないものと長くみなされていました。
CVE-2012-3489に対する修正のためこの能力が壊れましたが、その修正を行うことは止め、単に取り除きました。
     </P
></LI
><LI
><P
>早すぎるbtreeインデックスページの回収を防止します。(Noah Misch)
     </P
><P
>読み取り専用トランザクションによるXIDの割り当てを省略できるようにした時、読み取り専用トランザクションがまだ参照している時に削除されたbtreeページを回収されてしまう可能性をもたらしました。
これは間違ったインデックス検索結果という結果になります。
時間に関する必要条件のため、こうしたエラーが実際に発生する可能性は非常に低いものでしたが、修正しなければなりません。
     </P
></LI
><LI
><P
>新しく作成された、またはリセットされたシーケンスに関するクラッシュに対する安全性を修正しました。(Tom Lane)
     </P
><P
><TT
CLASS="COMMAND"
>ALTER SEQUENCE</TT
>が新しく作成されたシーケンスまたはリセットされたシーケンスに対して実行された場合、その後<CODE
CLASS="FUNCTION"
>nextval()</CODE
>呼び出しが一度だけ行われ、そして、サーバがクラッシュすると、WAL再生はシーケンスを<CODE
CLASS="FUNCTION"
>nextval()</CODE
>が行われていないように見える状態にリストアします。
このため次の<CODE
CLASS="FUNCTION"
>nextval()</CODE
>呼び出しにより最初のシーケンス値が再び返されることになります。
シリアル列のシーケンス作成には<TT
CLASS="COMMAND"
>ALTER SEQUENCE OWNED BY</TT
>処理が含まれていますので、特にこれは<TT
CLASS="TYPE"
>serial</TT
>列で現れます。
     </P
></LI
><LI
><P
><TT
CLASS="LITERAL"
>enum</TT
>列値の比較における競合条件を修正しました。(Robert Haas、Tom Lane)
     </P
><P
>現在の問い合わせが始まってから追加された列挙値と合う場合に比較が失敗することがありました。
     </P
></LI
><LI
><P
>ホットスタンバイではない時に正確なエポックを報告するように<CODE
CLASS="FUNCTION"
>txid_current()</CODE
>を修正しました。(Heikki Linnakangas)
     </P
><P
>これは以前のマイナーリリースで導入されたリグレッションを修正します。
     </P
></LI
><LI
><P
>同期スタンバイとして不適切なレプリケーション接続を選択しないようにします。(Fujii Masao)
     </P
><P
>マスタが同期スタンバイとして<SPAN
CLASS="APPLICATION"
>pg_receivexlog</SPAN
>や<SPAN
CLASS="APPLICATION"
>pg_basebackup</SPAN
>などの仮想サーバを不適切に選択し、無限に待機してしまう可能性がありました。
     </P
></LI
><LI
><P
>マスタのトランザクションが多くの副トランザクションを持つ時のホットスタンバイの起動処理の不具合を修正しました。(Andres Freund)
     </P
><P
>この間違いは<SPAN
CLASS="QUOTE"
>"out-of-order XID insertion in KnownAssignedXids"</SPAN
>と報告される失敗をもたらします。
     </P
></LI
><LI
><P
><CODE
CLASS="FUNCTION"
>pg_start_backup()</CODE
>の後確実に<TT
CLASS="FILENAME"
>backup_label</TT
>ファイルをfsyncします。(Dave Kerr)
     </P
></LI
><LI
><P
>WAL送信処理プロセスにおけるタイムアウト処理を修正しました。(Tom Lane)
     </P
><P
>WAL送信処理バックグラウンドプロセスで<SPAN
CLASS="SYSTEMITEM"
>SIGALRM</SPAN
>ハンドラの設定を忘れていました。
この結果タイムアウトが発生する何らかの境界条件で永遠に待機してしまいます。
     </P
></LI
><LI
><P
>WAL書き込み処理によるそれぞれのバックグラウンド吐き出しの後にWAL送信処理を再開します。(Andres Freund、Simon Riggs)
     </P
><P
>これは、作業が非同期にコミットされるトランザクションのみを含む時のレプリケーション遅延を大きく減少します。
     </P
></LI
><LI
><P
>ディスク容量不足等I/O問題をよりよく処理するように<TT
CLASS="LITERAL"
>LISTEN</TT
>/<TT
CLASS="LITERAL"
>NOTIFY</TT
>を修正しました。(Tom Lane)
     </P
><P
>書き込みの失敗の後、以降すべての<TT
CLASS="LITERAL"
>NOTIFY</TT
>メッセージの送信試行は<SPAN
CLASS="QUOTE"
>"Could not read from file "pg_notify/<TT
CLASS="REPLACEABLE"
><I
>nnnn</I
></TT
>" at offset <TT
CLASS="REPLACEABLE"
><I
>nnnnn</I
></TT
>: Success"</SPAN
>のようなメッセージで失敗しました。
     </P
></LI
><LI
><P
>自動バキュームは直接ブロックされたプロセスによってのみ自動キャンセルさせることができます。
     </P
><P
>元々のコードでは一部の場合に一貫性がない動作を許していました。
具体的には<TT
CLASS="LITERAL"
>deadlock_timeout</TT
>猶予期間より短時間で自動バキュームはキャンセルされました。
     </P
></LI
><LI
><P
>自動バキュームのキャンセルについてのログ処理を改良しました。(Robert Haas)
     </P
></LI
><LI
><P
>サーバ起動後一番最初のログローテーションの間<TT
CLASS="LITERAL"
>log_truncate_on_rotation</TT
>が動作するようにログコレクタを修正しました。(Tom Lane)
     </P
></LI
><LI
><P
>入れ子状の集合操作（<TT
CLASS="LITERAL"
>UNION</TT
>/<TT
CLASS="LITERAL"
>INTERSECT</TT
>/<TT
CLASS="LITERAL"
>EXCEPT</TT
>）に付与される<TT
CLASS="LITERAL"
>WITH</TT
>を修正しました。(Tom Lane)
     </P
></LI
><LI
><P
>副問い合わせへの行全体の参照が余計な<TT
CLASS="LITERAL"
>GROUP BY</TT
>や<TT
CLASS="LITERAL"
>ORDER BY</TT
>列を含まないことを確実にしました。(Tom Lane)
     </P
></LI
><LI
><P
><TT
CLASS="LITERAL"
>ALTER TABLE ... ADD CONSTRAINT USING INDEX</TT
>時に生成される依存関係を修正しました。(Tom Lane)
     </P
><P
>このコマンドはインデックス用の冗長な<TT
CLASS="STRUCTNAME"
>pg_depend</TT
>項目を残しました。
これは後の操作、特にインデックス対象の列のいずれかに対する<TT
CLASS="LITERAL"
>ALTER TABLE ... ALTER COLUMN TYPE</TT
>を混乱させるかもしれませんでした。
     </P
></LI
><LI
><P
><TT
CLASS="COMMAND"
>REASSIGN OWNED</TT
>の拡張に対する動作を修正しました。(Alvaro Herrera)
     </P
></LI
><LI
><P
><TT
CLASS="COMMAND"
>CREATE TABLE</TT
>時の<TT
CLASS="LITERAL"
>CHECK</TT
>制約およびインデックス定義における行全体の参照の複製を許しません。(Tom Lane)
     </P
><P
>この状況は<TT
CLASS="LITERAL"
>LIKE</TT
>または<TT
CLASS="LITERAL"
>INHERITS</TT
>を持つ<TT
CLASS="COMMAND"
>CREATE TABLE</TT
>で発生することがあり得ます。
複製される行全体の変数は、新しいテーブルではなく元のテーブルの行型で正しくラベル付けされませんでした。
<TT
CLASS="LITERAL"
>LIKE</TT
>では、後で行型がよく分岐しますので、このような状況を拒絶する方が合理的のように思います。
<TT
CLASS="LITERAL"
>INHERITS</TT
>では理想的には、親のテーブルの行型への暗黙的な変換によって許可すべきですが、安全に以前のバージョンにパッチを充てるにはより多くの作業が必要です。
     </P
></LI
><LI
><P
><TT
CLASS="LITERAL"
>ARRAY(SELECT ...)</TT
>副問い合わせにおけるメモリリークを修正しました。(Heikki Linnakangas、Tom Lane)
     </P
></LI
><LI
><P
>演算子の選択性推定処理に正しい照合順序を渡すようにプランナを修正しました。(Tom Lane)
     </P
><P
>これまではコアの選択性推定関数では必要とされていませんでしたが、サードパーティ製のコードで必要とするかもしれません。
     </P
></LI
><LI
><P
>正規表現からの共通接頭辞の抽出を修正しました。(Tom Lane)
     </P
><P
>このコードでは<TT
CLASS="LITERAL"
>^(foo)?bar</TT
>などの修飾された括弧付きの副式で混乱してしまうことがあり得ました。
こうしたパターンの検索に対して不正確なインデックス最適化をもたらしました。
     </P
></LI
><LI
><P
><TT
CLASS="TYPE"
>interval</TT
>定数における、符号付き<TT
CLASS="REPLACEABLE"
><I
>hh</I
></TT
><TT
CLASS="LITERAL"
>:</TT
><TT
CLASS="REPLACEABLE"
><I
>mm</I
></TT
>、<TT
CLASS="REPLACEABLE"
><I
>hh</I
></TT
><TT
CLASS="LITERAL"
>:</TT
><TT
CLASS="REPLACEABLE"
><I
>mm</I
></TT
><TT
CLASS="LITERAL"
>:</TT
><TT
CLASS="REPLACEABLE"
><I
>ss</I
></TT
>フィールドの解析に関する不具合を修正しました。(Amit Kapila、Tom Lane)
     </P
></LI
><LI
><P
>部分的な<TT
CLASS="LITERAL"
>GROUP BY</TT
>リストを持つビューをより良く扱うように<SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>を修正しました。(Tom Lane)
     </P
><P
><TT
CLASS="LITERAL"
>GROUP BY</TT
>内に主キー列のみが列挙されているが、あたかもグループ化されているかのように他のテーブル列を使用するビューは、主キーに依存するものと印付けられます。
<SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>におけるこうした主キーへの依存に関する不適切な扱いの結果、順序の並びが悪い、良くてもリストア効率が悪い、最悪並行<SPAN
CLASS="APPLICATION"
>pg_restore</SPAN
>実行が完全に失敗する、ダンプになりました。
     </P
></LI
><LI
><P
>PL/Perlにおいて、SQL_ASCII符号化方式の時にUTF8フラグの設定を防ぎます。(Alex Hunsaker、Kyotaro Horiguchi、Alvaro Herrera)
     </P
></LI
><LI
><P
>PL/Pythonにおいて、PythonのUnicode文字列からサーバ符号化方式に変換する時にPythonの関数ではなくPostgresの符号化方式変換関数を使用します。(Jan Urbanski)
     </P
><P
>これは、特にPythonがPostgresがサポートするすべての符号化方式をサポートしていない場合の何らかの境界値問題を防止します。
注意すべき機能上の変更は、サーバ符号化方式がSQL_ASCIIの場合、文字列のUTF-8表現を得ることです。
これまでは文字列内のASCII以外の文字はエラーになりました。
     </P
></LI
><LI
><P
>PL/PythonにおいてPostgreSQL符号化方式とPython符号化方式との間の対応付けを修正しました。(Jan Urbanski)
     </P
></LI
><LI
><P
><TT
CLASS="FILENAME"
>contrib/xml2</TT
>の<CODE
CLASS="FUNCTION"
>xslt_process()</CODE
>においてエラーを適切に報告します。(Tom Lane)
     </P
></LI
><LI
><P
>時間帯データファイルを<SPAN
CLASS="APPLICATION"
>tzdata</SPAN
>リリース2012eに更新しました。
モロッコおよびトケラウにおける夏時間の変更が含まれます。
     </P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="release-9-1-6.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>ホーム</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="release-9-1-4.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>リリース9.1.6</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="release.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>リリース9.1.4</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>