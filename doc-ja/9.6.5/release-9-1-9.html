<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>リリース9.1.9</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 9.6.5文書"
HREF="index.html"><LINK
REL="UP"
TITLE="リリースノート"
HREF="release.html"><LINK
REL="PREVIOUS"
TITLE="リリース9.1.10"
HREF="release-9-1-10.html"><LINK
REL="NEXT"
TITLE="リリース9.1.8"
HREF="release-9-1-8.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=utf-8"><META
NAME="creation"
CONTENT="2017-10-17T11:51:21"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>PostgreSQL 9.6.5文書</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="リリース9.1.10"
HREF="release-9-1-10.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="release.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>付録 E. リリースノート</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="リリース9.1.8"
HREF="release-9-1-8.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="RELEASE-9-1-9"
>E.91. リリース9.1.9</A
></H1
><DIV
CLASS="FORMALPARA"
><P
><B
>リリース日: </B
>2013-04-04</P
></DIV
><P
>このリリースは9.1.8に対し、各種不具合を修正したものです。
9.1メジャーリリースにおける新機能については、<A
HREF="release-9-1.html"
>項E.100</A
>を参照してください。
  </P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN150324"
>E.91.1. バージョン9.1.9への移行</A
></H2
><P
>    9.1.Xからの移行ではダンプ/リストアは不要です。
   </P
><P
>しかし、このリリースではGiSTインデックスの管理についていくつかの不具合を修正しています。
このアップデートをインストールした後、以下に記述する条件の1つ以上に該当するGiSTインデックスすべてについて、<TT
CLASS="COMMAND"
>REINDEX</TT
>を実行することを推奨します。
   </P
><P
>しかしながら、9.1.6よりも前のバージョンからアップグレードする場合は、<A
HREF="release-9-1-6.html"
>項E.94</A
>を参照してください。
   </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN150331"
>E.91.2. 変更点</A
></H2
><P
></P
><UL
><LI
><P
>サーバのコマンド行スイッチについての安全でない解析を修正しました。(Mitsumasa Kondo、Kyotaro Horiguchi)
     </P
><P
><SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>-</TT
>"</SPAN
>で始まるデータベース名を含む接続要求に細工をすることで、例えその要求が最終的に拒絶された場合でも、サーバのデータディレクトリ内のファイルを損傷させる、あるいは破壊することが可能でした。(CVE-2013-1899)
     </P
></LI
><LI
><P
>OpenSSLの乱数の状態を、postmasterのそれぞれの子プロセスでリセットするようにしました。(Marko Kreen)
     </P
><P
><TT
CLASS="FILENAME"
>contrib/pgcrypto</TT
>関数によって生成された乱数が、他のデータベースユーザによって比較的推定しやすいという問題が、これにより回避されます。
この危険はpostmasterが<TT
CLASS="VARNAME"
>ssl</TT
> = <TT
CLASS="LITERAL"
>on</TT
>で構成されている時にのみ問題となりますが、ほとんどの接続ではSSL暗号化を利用していません。(CVE-2013-1900)
     </P
></LI
><LI
><P
>REPLICATION権限の検査で、認証されたユーザでなく、現在のユーザについて調べるようにしました。(Noah Misch)
     </P
><P
>この誤りを利用すると、権限のないデータベースユーザが<CODE
CLASS="FUNCTION"
>pg_start_backup()</CODE
>や<CODE
CLASS="FUNCTION"
>pg_stop_backup()</CODE
>を呼び出し、それにより定期的なバックアップの作成を妨害することが可能でした。(CVE-2013-1901)
     </P
></LI
><LI
><P
>GiSTインデックスで、<SPAN
CLASS="QUOTE"
>"fuzzy"</SPAN
>な幾何比較を使うのが適切でないときは、使わないようにしました。(Alexander Korotkov)
     </P
><P
>幾何データ型のコアでは<SPAN
CLASS="QUOTE"
>"fuzzy"</SPAN
>な同値性を利用して比較を行ないますが、<CODE
CLASS="FUNCTION"
>gist_box_same</CODE
>では正確な比較を行う必要があり、そうしなければ、それを利用するGiSTインデックスは一貫しないものになります。
このアップデートをインストールした後、<TT
CLASS="TYPE"
>box</TT
>、<TT
CLASS="TYPE"
>polygon</TT
>、<TT
CLASS="TYPE"
>circle</TT
>、<TT
CLASS="TYPE"
>point</TT
>型の列のすべてのGiSTインデックスについて<TT
CLASS="COMMAND"
>REINDEX</TT
>を実行してください。
これらはいずれも<CODE
CLASS="FUNCTION"
>gist_box_same</CODE
>を使っています。
     </P
></LI
><LI
><P
>可変長のデータ型、つまり<TT
CLASS="TYPE"
>text</TT
>、<TT
CLASS="TYPE"
>bytea</TT
>、<TT
CLASS="TYPE"
>bit</TT
>、<TT
CLASS="TYPE"
>numeric</TT
>型の列で<TT
CLASS="FILENAME"
>contrib/btree_gist</TT
>を使うGiSTインデックスについて誤った範囲の結合と不正なロジックを修正しました。(Tom Lane)
     </P
><P
>この誤りにより、存在するキーが検索で見つからないような一貫性のないインデックスが作成されたり、インデックスが無駄に大きくなることがありました。
このアップデートをインストールした後、そのようなインデックスについて<TT
CLASS="COMMAND"
>REINDEX</TT
>を実行することを推奨します。
     </P
></LI
><LI
><P
>複数列についてのインデックスで、GiSTページを分割するコードの不具合を修正しました。(Tom Lane)
     </P
><P
>この誤りにより、存在するキーが検索で見つからないような一貫性のないインデックスが作られることや、検索が非常に非効率になるインデックスが作られることがありました。
このアップデートをインストールした後、複数列についてのGiSTインデックスについて<TT
CLASS="COMMAND"
>REINDEX</TT
>を実行することを推奨します。
     </P
></LI
><LI
><P
><CODE
CLASS="FUNCTION"
>gist_point_consistent</CODE
>で曖昧さを一貫性のある方法で処理するようにしました。(Alexander Korotkov)
     </P
><P
><TT
CLASS="TYPE"
>point</TT
>型の列のGiSTインデックスについてのインデックススキャンは、シーケンシャルスキャンとは異なる結果になる場合がありました。
これは、<CODE
CLASS="FUNCTION"
>gist_point_consistent</CODE
>と演算子のコードで、厳密な比較をするか、曖昧な比較をするかについて不一致があったからです。
     </P
></LI
><LI
><P
>WAL再生におけるバッファのリークを修正しました。(Heikki Linnakangas)
     </P
><P
>この不具合により、再生中に<SPAN
CLASS="QUOTE"
>"incorrect local pin count"</SPAN
>のエラーが発生し、リカバリができなくなる場合がありました。
     </P
></LI
><LI
><P
><TT
CLASS="COMMAND"
>DELETE RETURNING</TT
>での競合条件を修正しました。(Tom Lane)
     </P
><P
>特定の条件下で、<TT
CLASS="COMMAND"
>DELETE RETURNING</TT
>は現在のプロセスがもはや確保していない共有バッファからデータをフェッチすることがありました。
その間に他のプロセスがそのバッファを変更した場合、ゴミの値が<TT
CLASS="LITERAL"
>RETURNING</TT
>の出力となったり、あるいはクラッシュすることもありました。
     </P
></LI
><LI
><P
>正規表現のコンパイルで無限ループになる可能性があるのを修正しました。(Tom Lane、Don Porter)
     </P
></LI
><LI
><P
>正規表現のコンパイル時にNULLポインタから参照先を取得する可能性があるのを修正しました。(Tom Lane)
     </P
></LI
><LI
><P
><CODE
CLASS="FUNCTION"
>to_char()</CODE
>で、それが適切な場合、ASCIIのみの大文字変換規則を利用するように修正しました。(Tom Lane)
     </P
><P
>これにより、ロケールに依存すべきでないいくつかのテンプレートのパターンにおける誤った動作が修正されます。
トルコ語のロケールで<SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>I</TT
>"</SPAN
>と<SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>i</TT
>"</SPAN
>が正しく処理されていませんでした。
     </P
></LI
><LI
><P
><TT
CLASS="LITERAL"
>1999-12-31 24:00:00</TT
>というタイムスタンプが理由もなく拒絶されていたのを修正しました。(Tom Lane)
     </P
></LI
><LI
><P
>単一のトランザクションが<TT
CLASS="COMMAND"
>UNLISTEN</TT
>を実行し、その後<TT
CLASS="COMMAND"
>LISTEN</TT
>を実行した場合のロジックの誤りを修正しました。(Tom Lane)
     </P
><P
>この場合、セッションは通知イベントを監視すべきですが、実際には全く監視しない状態になっていました。
     </P
></LI
><LI
><P
>他のビューから参照されているビューに列が追加された後、プランナがクラッシュする可能性があるのを修正しました。(Tom Lane)
     </P
></LI
><LI
><P
><SPAN
CLASS="QUOTE"
>"picksplit doesn't support secondary split"</SPAN
>という不必要なログメッセージを削除しました。(Josh Hansen、Tom Lane)
     </P
><P
>このメッセージは何らかのコードを期待して追加されたように思われますが、そのコードは書かれませんでした。
また、GiSTによる二次的分割のデフォルト処理は実際には非常に良いので、そのコードは今後も書かれないでしょう。
そのため、エンドユーザにブツブツ言うのをやめることにしました。
     </P
></LI
><LI
><P
>セッションの最後のいくつかのコミットとアボートの件数を統計情報コレクタに送信するのに失敗する可能性があるのを修正しました。(Tom Lane)
     </P
></LI
><LI
><P
>PL/Perlの<CODE
CLASS="FUNCTION"
>spi_prepare()</CODE
>関数のメモリリークを修正しました。(Alex Hunsaker、Tom Lane)
     </P
></LI
><LI
><P
><SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
>でデータベース名に<SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>=</TT
>"</SPAN
>が含まれるものを正しく処理できるよう修正しました。(Heikki Linnakangas)
     </P
></LI
><LI
><P
><SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>が不正な接続文字列が渡された時にクラッシュしないようにしました。(Heikki Linnakangas)
     </P
></LI
><LI
><P
><SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>と<SPAN
CLASS="APPLICATION"
>pg_upgrade</SPAN
>で不正なインデックスを無視するようにしました。(Michael Paquier、Bruce Momjian)
     </P
><P
>不正なインデックスをダンプするとリストア時に問題が発生する可能性があります。
例えば、ユニーク条件を満たさないテーブルのデータに対してユニーク条件を強制したためにインデックス作成に失敗したような場合です。
また、インデックスの作成が実際にはまだ進行中の場合もありますが、このときはDDLによる更新がまだコミットされていないと考えるのが適当でしょうから、<SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>がダンプする必要はありません。
<SPAN
CLASS="APPLICATION"
>pg_upgrade</SPAN
>は不正なインデックスでエラーを起こす代わりに、それをスキップするようになります。
     </P
></LI
><LI
><P
><SPAN
CLASS="APPLICATION"
>pg_basebackup</SPAN
>でテーブル空間をバックアップするとき、現在のサーババージョンのサブディレクトリだけを含めるようにしました。(Heikki Linnakangas)
     </P
></LI
><LI
><P
><SPAN
CLASS="APPLICATION"
>pg_basebackup</SPAN
>および<SPAN
CLASS="APPLICATION"
>pg_receivexlog</SPAN
>でサーバのバージョン確認をするようにしました。
これにより動作しないバージョンの組み合わせに対して、正しく失敗するようになります。(Heikki Linnakangas)
     </P
></LI
><LI
><P
><TT
CLASS="FILENAME"
>contrib/pg_trgm</TT
>の<CODE
CLASS="FUNCTION"
>similarity()</CODE
>関数が、トライグラムのない文字列について0を返すよう修正しました。(Tom Lane)
     </P
><P
>以前は内部でのゼロ割りにより<TT
CLASS="LITERAL"
>NaN</TT
>を返していました。
     </P
></LI
><LI
><P
>時間帯データファイルを<SPAN
CLASS="APPLICATION"
>tzdata</SPAN
>リリース2013bに更新しました。
チリ、ハイチ、モロッコ、パラグアイ、およびロシアのいくつかの地域での夏時間の変更が含まれます。
また、数多くの場所での歴史的な地域データの修正が含まれます。
     </P
><P
>また、時間帯の略称について、ロシアおよび他の地域での以下の最近の変更を反映しました。
<TT
CLASS="LITERAL"
>CHOT</TT
>、<TT
CLASS="LITERAL"
>GET</TT
>、<TT
CLASS="LITERAL"
>IRKT</TT
>、<TT
CLASS="LITERAL"
>KGT</TT
>、<TT
CLASS="LITERAL"
>KRAT</TT
>、<TT
CLASS="LITERAL"
>MAGT</TT
>、<TT
CLASS="LITERAL"
>MAWT</TT
>、<TT
CLASS="LITERAL"
>MSK</TT
>、<TT
CLASS="LITERAL"
>NOVT</TT
>、<TT
CLASS="LITERAL"
>OMST</TT
>、<TT
CLASS="LITERAL"
>TKT</TT
>、<TT
CLASS="LITERAL"
>VLAT</TT
>、<TT
CLASS="LITERAL"
>WST</TT
>、<TT
CLASS="LITERAL"
>YAKT</TT
>、<TT
CLASS="LITERAL"
>YEKT</TT
>については、それらの現在の意味に従います。
<TT
CLASS="LITERAL"
>VOLT</TT
> (Europe/Volgograd (ヨーロッパ/ヴォルゴグラード))および <TT
CLASS="LITERAL"
>MIST</TT
> (Antarctica/Macquarie (南極/マッコーリー島))をデフォルトの短縮名リストに追加しました。
     </P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="release-9-1-10.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>ホーム</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="release-9-1-8.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>リリース9.1.10</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="release.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>リリース9.1.8</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>