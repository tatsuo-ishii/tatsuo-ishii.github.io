<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>psql</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 9.6.5文書"
HREF="index.html"><LINK
REL="UP"
TITLE="PostgreSQLクライアントアプリケーション"
HREF="reference-client.html"><LINK
REL="PREVIOUS"
TITLE="pg_restore"
HREF="app-pgrestore.html"><LINK
REL="NEXT"
TITLE="reindexdb"
HREF="app-reindexdb.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=utf-8"><META
NAME="creation"
CONTENT="2017-10-17T11:51:21"></HEAD
><BODY
CLASS="REFENTRY"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>PostgreSQL 9.6.5文書</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="pg_restore"
HREF="app-pgrestore.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="reference-client.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="reindexdb"
HREF="app-reindexdb.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="APP-PSQL"
></A
><SPAN
CLASS="APPLICATION"
>psql</SPAN
></H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN98445"
></A
><H2
>名前</H2
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>&nbsp;--&nbsp;<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の対話的ターミナル
    </DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN98450"
></A
><H2
>概要</H2
><P
><TT
CLASS="COMMAND"
>psql</TT
> [<TT
CLASS="REPLACEABLE"
><I
>option</I
></TT
>...] [<TT
CLASS="REPLACEABLE"
><I
>dbname</I
></TT
>
    [<TT
CLASS="REPLACEABLE"
><I
>username</I
></TT
>]]</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN98459"
></A
><H2
>説明</H2
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>とは<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>のターミナル型フロントエンドです。
対話的に問い合わせを入力し、それを<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>に対して発行して、結果を確認することができます。
また、ファイルから入力を読み込むことも可能です。
さらに、スクリプトの記述を簡便化したり、様々なタスクを自動化したりする、いくつものメタコマンドとシェルに似た各種の機能を備えています。
    </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="R1-APP-PSQL-3"
></A
><H2
>オプション</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="OPTION"
>-a</TT
><BR><TT
CLASS="OPTION"
>--echo-all</TT
></DT
><DD
><P
>読み込んだ全ての空でない入力行を標準出力に表示します。
(これは対話式に読み込まれる行には適用されません。)
これは<TT
CLASS="VARNAME"
>ECHO</TT
>変数を<TT
CLASS="LITERAL"
>all</TT
>に設定するのと同じ意味を持ちます。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-A</TT
><BR><TT
CLASS="OPTION"
>--no-align</TT
></DT
><DD
><P
>位置揃えなしの出力モードに切り替えます
（デフォルトの出力モードは位置揃えありです）。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-b</TT
><BR><TT
CLASS="OPTION"
>--echo-errors</TT
></DT
><DD
><P
>失敗したSQLコマンドを標準エラー出力に出力します。
これは<TT
CLASS="VARNAME"
>ECHO</TT
>変数を<TT
CLASS="LITERAL"
>errors</TT
>に設定するのと同等です。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-c <TT
CLASS="REPLACEABLE"
><I
>command</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--command=<TT
CLASS="REPLACEABLE"
><I
>command</I
></TT
></TT
></DT
><DD
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>に対し、指定のコマンド文字列<TT
CLASS="REPLACEABLE"
><I
>command</I
></TT
>を実行するよう指示します。
このオプションは繰り返すことができ、また<TT
CLASS="OPTION"
>-f</TT
>オプションと任意の順序で組み合わせることができます。
<TT
CLASS="OPTION"
>-c</TT
>または<TT
CLASS="OPTION"
>-f</TT
>が指定されると、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>は標準入力からコマンドを読み取りません。
その代わりに、すべての<TT
CLASS="OPTION"
>-c</TT
>オプションおよび<TT
CLASS="OPTION"
>-f</TT
>オプションを順に処理した後、終了します。
      </P
><P
><TT
CLASS="REPLACEABLE"
><I
>command</I
></TT
>は、サーバで完全に解析可能な（つまり、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>特有の機能は含まない）コマンド文字列、もしくは、バックスラッシュコマンド1つである必要があります。
このため、<TT
CLASS="OPTION"
>-c</TT
>オプション内では<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>と<SPAN
CLASS="APPLICATION"
>psql</SPAN
>メタコマンドを混在させることはできません。
これらを同時に使用するには、<TT
CLASS="OPTION"
>-c</TT
>オプションを繰り返し利用するか、あるいはパイプを使って文字列を<SPAN
CLASS="APPLICATION"
>psql</SPAN
>に渡します。
例えば、
</P><PRE
CLASS="PROGRAMLISTING"
>psql -c '\x' -c 'SELECT * FROM foo;'</PRE
><P>
あるいは
</P><PRE
CLASS="PROGRAMLISTING"
>echo '\x \\ SELECT * FROM foo;' | psql</PRE
><P>
のようにします（<TT
CLASS="LITERAL"
>\\</TT
>はメタコマンドの区切り文字です）。
      </P
><P
><TT
CLASS="OPTION"
>-c</TT
>に渡される各<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>のコマンド文字列は、単一の問い合わせとしてサーバに送信されます。
このため、トランザクションを複数に分ける<TT
CLASS="COMMAND"
>BEGIN</TT
>/<TT
CLASS="COMMAND"
>COMMIT</TT
>コマンドが明示的に文字列内に含まれない限り、文字列内に複数の<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>コマンドが含まれていたとしても、サーバはそれを1つのトランザクションとして実行します。
また、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>は文字列内の最後の<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>コマンドの結果しか出力しません。
同じ文字列をファイル、あるいは<SPAN
CLASS="APPLICATION"
>psql</SPAN
>の標準入力として渡した場合、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>は各<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>コマンドを別々に送信しますので、この場合とは動作が異なります。
      </P
><P
>この動作のため、1つの<TT
CLASS="OPTION"
>-c</TT
>の文字列に2つ以上のコマンドを指定すると、予期しない結果をもたらすことがあります。
<TT
CLASS="OPTION"
>-c</TT
>のコマンドを繰り返し使うか、あるいは、上記のように<SPAN
CLASS="APPLICATION"
>echo</SPAN
>を使うか、以下の例のようにシェルのヒアドキュメントを使うことで、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>の標準入力に複数のコマンドを入力する方が良いでしょう。
</P><PRE
CLASS="PROGRAMLISTING"
>psql &lt;&lt;EOF
\x
SELECT * FROM foo;
EOF</PRE
><P>
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-d <TT
CLASS="REPLACEABLE"
><I
>dbname</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--dbname=<TT
CLASS="REPLACEABLE"
><I
>dbname</I
></TT
></TT
></DT
><DD
><P
>接続するデータベースの名前を指定します。
コマンドラインでオプション以外の最初の引数として<TT
CLASS="REPLACEABLE"
><I
>dbname</I
></TT
>を指定するのと同じ効力を持ちます。
      </P
><P
>このパラメータに<TT
CLASS="SYMBOL"
>=</TT
>記号が含まれる場合、または有効な<ACRONYM
CLASS="ACRONYM"
>URI</ACRONYM
>接頭辞(<TT
CLASS="LITERAL"
>postgresql://</TT
>または<TT
CLASS="LITERAL"
>postgres://</TT
>)から始まる場合<TT
CLASS="PARAMETER"
>conninfo</TT
>文字列として扱われます。
詳しくは<A
HREF="libpq-connect.html"
>項32.1</A
>を参照してください。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-e</TT
><BR><TT
CLASS="OPTION"
>--echo-queries</TT
></DT
><DD
><P
>サーバに送られるすべてのSQLコマンドを標準出力にも送ります。
<TT
CLASS="VARNAME"
>ECHO</TT
>変数を<TT
CLASS="LITERAL"
>queries</TT
>に設定するのと同じ効力を持ちます。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-E</TT
><BR><TT
CLASS="OPTION"
>--echo-hidden</TT
></DT
><DD
><P
><TT
CLASS="COMMAND"
>\d</TT
>やその他のバックスラッシュコマンドによって生成される実際の問い合わせを表示します。
これを使って、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>の内部動作を調べることができます。
これは変数<TT
CLASS="VARNAME"
>ECHO_HIDDEN</TT
>を<TT
CLASS="LITERAL"
>on</TT
>に設定するのと同じ効力を持ちます。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-f <TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--file=<TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
></TT
></DT
><DD
><P
>標準入力ではなく、ファイル<TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
>からコマンドを読み取ります。
このオプションは繰り返すことができ、また<TT
CLASS="OPTION"
>-c</TT
>オプションと任意の順序で組み合わせることができます。
<TT
CLASS="OPTION"
>-c</TT
>または<TT
CLASS="OPTION"
>-f</TT
>が指定されると、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>は標準入力からコマンドを読み取りません。
その代わりに、すべての<TT
CLASS="OPTION"
>-c</TT
>オプションおよび<TT
CLASS="OPTION"
>-f</TT
>オプションを順に処理した後、終了します。
その点を除けば、このオプションは<TT
CLASS="COMMAND"
>\i</TT
>メタコマンドとほぼ同等です。
      </P
><P
><TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
>に<TT
CLASS="LITERAL"
>-</TT
>（ハイフン）を指定すると、標準入力からEOFを示すもの、または<TT
CLASS="COMMAND"
>\q</TT
>メタコマンドまで読み取られます。
これは対話的入力をファイルからの入力と混在させるために使うことができます。
ただし、この場合、Readlineは使われないことに注意してください（<TT
CLASS="OPTION"
>-n</TT
>が指定された場合と同様です）。
      </P
><P
>このオプションを指定するのと、<TT
CLASS="LITERAL"
>psql &lt; <TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
></TT
>と入力するのでは、微妙に動作が異なります。
一般的には、両者とも期待通りの動作を行いますが、<TT
CLASS="LITERAL"
>-f</TT
>を使用した場合は、エラーメッセージに行番号を付けるなどいくつか便利な機能が有効になります。
また、このオプションを使用した場合、起動時のオーバーヘッドが減少する可能性が若干あります。
一方、シェルの入力リダイレクションを使用する方法では、（理論的には）全て手作業で入力した場合の出力とまったく同一な出力になることが保証されます。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-F <TT
CLASS="REPLACEABLE"
><I
>separator</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--field-separator=<TT
CLASS="REPLACEABLE"
><I
>separator</I
></TT
></TT
></DT
><DD
><P
><TT
CLASS="REPLACEABLE"
><I
>separator</I
></TT
>を位置揃えを行わない出力におけるフィールド区切り文字として使用します。
<TT
CLASS="COMMAND"
>\pset fieldsep</TT
>もしくは<TT
CLASS="COMMAND"
>\f</TT
>と同じ効力を持ちます。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-h <TT
CLASS="REPLACEABLE"
><I
>hostname</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--host=<TT
CLASS="REPLACEABLE"
><I
>hostname</I
></TT
></TT
></DT
><DD
><P
>サーバを実行しているマシンのホスト名を指定します。
この値がスラッシュから始まる場合、Unixドメインソケット用のディレクトリとして使用されます。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-H</TT
><BR><TT
CLASS="OPTION"
>--html</TT
></DT
><DD
><P
><ACRONYM
CLASS="ACRONYM"
>HTML</ACRONYM
>表形式を有効にします。
<TT
CLASS="LITERAL"
>\pset format html</TT
>もしくは<TT
CLASS="COMMAND"
>\H</TT
>コマンドと同じ効力を持ちます。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-l</TT
><BR><TT
CLASS="OPTION"
>--list</TT
></DT
><DD
><P
>利用可能な全てのデータベースを一覧表示し、終了します。
この他の接続に関連しないオプションは無視されます。
<TT
CLASS="COMMAND"
>\list</TT
>メタコマンドと似た効力を持ちます。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-L <TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--log-file=<TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
></TT
></DT
><DD
><P
>すべての問い合わせの出力を通常の出力先に出力し、さらにファイル<TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
>に書き出します。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-n</TT
><BR><TT
CLASS="OPTION"
>--no-readline</TT
></DT
><DD
><P
>行編集用の<SPAN
CLASS="APPLICATION"
>Readline</SPAN
>を使用しません。
またコマンド履歴も使用しません。
コピー＆ペースト時のタブ展開を無効にするために有用かもしれません。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-o <TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--output=<TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
></TT
></DT
><DD
><P
>全ての問い合わせの出力を<TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
>ファイルに書き込みます。
これは<TT
CLASS="COMMAND"
>\o</TT
>コマンドと同じ効力を持ちます。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-p <TT
CLASS="REPLACEABLE"
><I
>port</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--port=<TT
CLASS="REPLACEABLE"
><I
>port</I
></TT
></TT
></DT
><DD
><P
>サーバが接続監視を行っているTCPポートもしくはローカルUnixドメインソケットファイルの拡張子を指定します。
環境変数<TT
CLASS="ENVAR"
>PGPORT</TT
>の値、環境変数が設定されていない場合はコンパイル時に指定した値（通常は5432）がデフォルト値となります。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-P <TT
CLASS="REPLACEABLE"
><I
>assignment</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--pset=<TT
CLASS="REPLACEABLE"
><I
>assignment</I
></TT
></TT
></DT
><DD
><P
><TT
CLASS="COMMAND"
>\pset</TT
>形式により表示オプションを指定します。
ここでは空白ではなく等号を使って名前と値を区切っていることに注意してください。
たとえば、出力形式を<SPAN
CLASS="APPLICATION"
>LaTeX</SPAN
>にする場合、<TT
CLASS="LITERAL"
>-P format=latex</TT
>と入力します。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-q</TT
><BR><TT
CLASS="OPTION"
>--quiet</TT
></DT
><DD
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>がメッセージ出力なしで処理を行うように指示します。
デフォルトでは、ウェルカム（welcome）メッセージや各種の情報が表示されますが、
このオプションを使用した場合、これらのメッセージが表示されません。
<TT
CLASS="OPTION"
>-c</TT
>オプションと併用すると便利です。
これは変数<TT
CLASS="VARNAME"
>QUIET</TT
>を<TT
CLASS="LITERAL"
>on</TT
>に設定するのと同じ効力を持ちます。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-R <TT
CLASS="REPLACEABLE"
><I
>separator</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--record-separator=<TT
CLASS="REPLACEABLE"
><I
>separator</I
></TT
></TT
></DT
><DD
><P
><TT
CLASS="REPLACEABLE"
><I
>separator</I
></TT
>を位置揃えを行わない出力におけるレコード区切り文字として使用します。
これは<TT
CLASS="COMMAND"
>\pset recordsep</TT
>コマンドと同じです。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-s</TT
><BR><TT
CLASS="OPTION"
>--single-step</TT
></DT
><DD
><P
>シングルステップモードで実行します。
これは各コマンドがサーバに送信される前に、ユーザに対して実行するかキャンセルするかについて確認を求めることを意味します。
スクリプトのデバッグを行う時に使用してください。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-S</TT
><BR><TT
CLASS="OPTION"
>--single-line</TT
></DT
><DD
><P
>シングル行モードで実行します。このモードでは、セミコロンと同じように改行もSQLコマンドの終端として扱われます。
      </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>このモードはどうしてもこのような方式を使用したいユーザ向けに用意されたもので、必ずしも使用が推奨されるわけではありません。
特に、1行に<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>とメタコマンドを混在させる場合、経験の浅いユーザにとってその実行順番は必ずしもわかりやすいものではありません。
      </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="OPTION"
>-t</TT
><BR><TT
CLASS="OPTION"
>--tuples-only</TT
></DT
><DD
><P
>列名と結果の行数フッタなどの表示を無効にします。
これは、<TT
CLASS="COMMAND"
>\t</TT
>コマンドとまったく同じ効力を持ちます。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-T <TT
CLASS="REPLACEABLE"
><I
>table_options</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--table-attr=<TT
CLASS="REPLACEABLE"
><I
>table_options</I
></TT
></TT
></DT
><DD
><P
><ACRONYM
CLASS="ACRONYM"
>HTML</ACRONYM
>の<CODE
CLASS="SGMLTAG"
>table</CODE
>タグで使用されるオプションを指定します。
詳細は<TT
CLASS="COMMAND"
>\pset</TT
>を参照してください。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-U <TT
CLASS="REPLACEABLE"
><I
>username</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--username=<TT
CLASS="REPLACEABLE"
><I
>username</I
></TT
></TT
></DT
><DD
><P
>デフォルトのユーザではなく<TT
CLASS="REPLACEABLE"
><I
>username</I
></TT
>ユーザとしてデータベースに接続します
（当然、そうする権限を持っていなければなりません）。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-v <TT
CLASS="REPLACEABLE"
><I
>assignment</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--set=<TT
CLASS="REPLACEABLE"
><I
>assignment</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--variable=<TT
CLASS="REPLACEABLE"
><I
>assignment</I
></TT
></TT
></DT
><DD
><P
><TT
CLASS="COMMAND"
>\set</TT
>メタコマンドのように、変数の代入を行います。
値がある場合、コマンド行上では、名前と値を等号（=）で区切る必要があることに注意してください。
変数を未設定の状態にするには、等号を指定しないでください。
値が空の変数を設定するには、値を指定しないで等号のみ使用してください。
これらの代入は起動時の非常に早い段階で行われます。
そのため、内部で使用するために予約されている変数は後で上書きされる可能性があります。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-V</TT
><BR><TT
CLASS="OPTION"
>--version</TT
></DT
><DD
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>のバージョンを表示し、終了します。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-w</TT
><BR><TT
CLASS="OPTION"
>--no-password</TT
></DT
><DD
><P
>パスワードの入力を促しません。
サーバがパスワード認証を必要とし、かつ、<TT
CLASS="FILENAME"
>.pgpass</TT
>ファイルなどの他の方法が利用できない場合、接続試行は失敗します。
バッチジョブやスクリプトなどパスワードを入力するユーザが存在しない場合にこのオプションは有用かもしれません。
      </P
><P
>このオプションはセッション全体にわたって設定されたままであることに注意してください。
このため<TT
CLASS="COMMAND"
>\connect</TT
>メタコマンドの使用に関しても初期接続試行と同様に影響します。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-W</TT
><BR><TT
CLASS="OPTION"
>--password</TT
></DT
><DD
><P
>データベースに接続する前に、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>は強制的にパスワード入力を促します。
      </P
><P
>サーバがパスワード認証を要求する場合<SPAN
CLASS="APPLICATION"
>psql</SPAN
>は自動的にパスワード入力を促しますので、これが重要になることはありません。
しかし、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>は、サーバにパスワードが必要かどうかを判断するための接続試行を無駄に行います。
こうした余計な接続試行を防ぐために<TT
CLASS="OPTION"
>-W</TT
>の入力が有意となる場合もあります。
      </P
><P
>このオプションはセッション全体に対して設定されたままであることに注意してください。
このため初期接続試行と同様に<TT
CLASS="COMMAND"
>\connect</TT
>メタコマンドの使用にも影響を与えます。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-x</TT
><BR><TT
CLASS="OPTION"
>--expanded</TT
></DT
><DD
><P
>拡張テーブル形式モードを有効にします。
これは<TT
CLASS="COMMAND"
>\x</TT
>コマンドと同じです。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-X,</TT
><BR><TT
CLASS="OPTION"
>--no-psqlrc</TT
></DT
><DD
><P
>起動用ファイル（<TT
CLASS="FILENAME"
>psqlrc</TT
>ファイルおよびユーザ用の<TT
CLASS="FILENAME"
>~/.psqlrc</TT
>ファイルのどちらも）を読み込みません。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-z</TT
><BR><TT
CLASS="OPTION"
>--field-separator-zero</TT
></DT
><DD
><P
>位置揃えを行わない出力用のフィールド区切り文字をゼロバイトに設定します。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-0</TT
><BR><TT
CLASS="OPTION"
>--record-separator-zero</TT
></DT
><DD
><P
>位置揃えを行わない出力用のレコード区切り文字をゼロバイトに設定します。
これは例えば<TT
CLASS="LITERAL"
>xargs -0</TT
>と連携する時に有用です。
      </P
></DD
><DT
><TT
CLASS="OPTION"
>-1</TT
><BR><TT
CLASS="OPTION"
>--single-transaction</TT
></DT
><DD
><P
>このオプションは、1つ以上の<TT
CLASS="OPTION"
>-c</TT
>オプションや<TT
CLASS="OPTION"
>-f</TT
>オプションと組み合わせてのみ使うことができます。
これにより<SPAN
CLASS="APPLICATION"
>psql</SPAN
>は、最初のそのようなオプションの前に<TT
CLASS="COMMAND"
>BEGIN</TT
>コマンドを発行し、最後のオプションの後に<TT
CLASS="COMMAND"
>COMMIT</TT
>コマンドを発行するようになります。
そうすることで、全てのコマンドが単一のトランザクションに囲まれます。
これによりすべてのコマンドが成功して完了するか、変更がまったく行われないかのいずれかになります。
       </P
><P
>コマンド自体が<TT
CLASS="COMMAND"
>BEGIN</TT
>、<TT
CLASS="COMMAND"
>COMMIT</TT
>、<TT
CLASS="COMMAND"
>ROLLBACK</TT
>を含んでいる場合、このオプションは期待した効果を得ることができません。
また、個別のコマンドがトランザクションブロック内部で実行できない場合、このオプションを指定することで、そのトランザクション全体が失敗します。
       </P
></DD
><DT
><TT
CLASS="OPTION"
>-?</TT
><BR><TT
CLASS="OPTION"
>--help[=<TT
CLASS="REPLACEABLE"
><I
>topic</I
></TT
>]</TT
></DT
><DD
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>に関するヘルプを表示し、終了します。
オプションの<TT
CLASS="REPLACEABLE"
><I
>topic</I
></TT
>パラメータ（デフォルトは<TT
CLASS="LITERAL"
>options</TT
>）は<SPAN
CLASS="APPLICATION"
>psql</SPAN
>のどの部分を説明するかを選択します。
<TT
CLASS="LITERAL"
>commands</TT
>は<SPAN
CLASS="APPLICATION"
>psql</SPAN
>のバックスラッシュコマンドについて、<TT
CLASS="LITERAL"
>options</TT
>は<SPAN
CLASS="APPLICATION"
>psql</SPAN
>に渡すことができるコマンド行オプションについて、<TT
CLASS="LITERAL"
>variables</TT
>は<SPAN
CLASS="APPLICATION"
>psql</SPAN
>の設定変数についてのヘルプを表示します。
      </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN98871"
></A
><H2
>終了ステータス</H2
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>は、正常に終了した時には0を、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>にとって致命的なエラー（メモリ不足やファイルが見つからないなど）が発生した時には1を、セッションが対話式でない状態でサーバとの接続が不完全になった時には2を、<TT
CLASS="VARNAME"
>ON_ERROR_STOP</TT
>変数が設定されている状態でスクリプトでエラーが発生した時には3をシェルに返します。
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN98877"
></A
><H2
>使用方法</H2
><DIV
CLASS="REFSECT2"
><A
NAME="R2-APP-PSQL-CONNECTING"
></A
><H3
>データベースへの接続</H3
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>は<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の正式なクライアントアプリケーションです。
データベースに接続するには、接続するデータベース名、ホスト名、サーバのポート番号、接続する際に使用するユーザ名がわかっていなければなりません。
<SPAN
CLASS="APPLICATION"
>psql</SPAN
>では、それらをコマンドラインオプションで指定することができます。接続するデータベース名は<TT
CLASS="OPTION"
>-d</TT
>、ホスト名は<TT
CLASS="OPTION"
>-h</TT
>、サーバのポート番号は<TT
CLASS="OPTION"
>-p</TT
>、接続するユーザ名は<TT
CLASS="OPTION"
>-U</TT
>を使用してそれぞれ指定します。
オプションでない引数がある場合、それはデータベース名（データベース名が与えられている場合にはユーザ名）とみなされます。
これらのオプションは全て指定されている必要はありません。便利なデフォルト値があります。
ホスト名を省略した場合、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>はUnixドメインソケット経由でローカルホスト上のサーバに、Unixドメインソケットを持たないマシンでは<TT
CLASS="LITERAL"
>localhost</TT
>にTCP/IP経由で接続します。
デフォルトのポート番号はコンパイル時に設定されます。
データベースサーバは同じデフォルト値を使用するので、多くの場合、ポートは指定する必要はありません。
デフォルトのユーザ名とデータベース名は、OSのユーザ名です。
任意のユーザ名で全てのデータベースに接続できるわけではありません。
データベース管理者は、接続権限をユーザに知らせておかなければなりません。
    </P
><P
>デフォルトが完全には適用できない時は、入力の手間を省くために、環境変数<TT
CLASS="ENVAR"
>PGDATABASE</TT
>、<TT
CLASS="ENVAR"
>PGHOST</TT
>、<TT
CLASS="ENVAR"
>PGPORT</TT
>、<TT
CLASS="ENVAR"
>PGUSER</TT
>に適当な値を設定することもできます。
（この他の環境変数については、<A
HREF="libpq-envars.html"
>項32.14</A
>を参照してください。）
また、<TT
CLASS="FILENAME"
>~/.pgpass</TT
>ファイルを使用すれば、定常的なパスワードの入力を省略でき、便利です。
詳細は<A
HREF="libpq-pgpass.html"
>項32.15</A
>を参照してください。
    </P
><P
>他の接続パラメータの指定方法として<TT
CLASS="PARAMETER"
>conninfo</TT
>文字列または<ACRONYM
CLASS="ACRONYM"
>URI</ACRONYM
>があります。
これは、データベース名の代わりに使用されます。
この機構により、接続全体に関する非常に幅広い制御を行うことができます。
以下に例を示します。
</P><PRE
CLASS="PROGRAMLISTING"
>$ <KBD
CLASS="USERINPUT"
>psql "service=myservice sslmode=require"</KBD
>
$ <KBD
CLASS="USERINPUT"
>psql postgresql://dbmaster:5433/mydb?sslmode=require</KBD
></PRE
><P>
この方法では接続パラメータの検索に、<A
HREF="libpq-ldap.html"
>項32.17</A
>で説明する<ACRONYM
CLASS="ACRONYM"
>LDAP</ACRONYM
>を使用することもできます。
利用できる接続オプションのすべてについての詳細は、<A
HREF="libpq-connect.html#LIBPQ-PARAMKEYWORDS"
>項32.1.2</A
>を参照してください。
    </P
><P
>何らかの原因（権限がない、指定したホストでサーバが稼働していないなど）で接続ができなかった場合は、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>はエラーメッセージを表示し、終了します。
    </P
><P
>標準入力および標準出力の両方が端末である場合、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>はクライアントの符号化方式を<SPAN
CLASS="QUOTE"
>"auto"</SPAN
>に設定します。
これはロケール設定（Unixシステムでは環境変数<TT
CLASS="ENVAR"
>LC_CTYPE</TT
>）から適切なクライアント符号化方式を決定します。
想定した通りに動作しない場合、環境変数<TT
CLASS="ENVAR"
>PGCLIENTENCODING</TT
>を使用してクライアント符号化方式を上書きすることができます。
    </P
></DIV
><DIV
CLASS="REFSECT2"
><A
NAME="R2-APP-PSQL-4"
></A
><H3
>SQLコマンドの入力</H3
><P
>通常の操作において、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>は、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>が現在接続しているデータベース名の後に<TT
CLASS="LITERAL"
>=&gt;</TT
>の文字列が付いたプロンプトを表示します。
以下に例を示します。
</P><PRE
CLASS="PROGRAMLISTING"
>$ <KBD
CLASS="USERINPUT"
>psql testdb</KBD
>
psql (9.6.5)
Type "help" for help.

testdb=&gt;</PRE
><P>
    </P
><P
>プロンプトに対しユーザは<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>コマンドを入力することができます。
通常、入力された行はコマンド終了を意味するセミコロンに達した時点でサーバへと送信されます。
改行はコマンドの終了とはみなされません。
したがって、わかりやすくするために、コマンドは複数の行にわたって記述することができます。
コマンドが送信され問題なく実行されると、画面にコマンドの結果が表示されます。
    </P
><P
>また、コマンドが実行される度に、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>は<A
HREF="sql-listen.html"
>LISTEN</A
>と<A
HREF="sql-notify.html"
>NOTIFY</A
>によって生成された非同期通知イベントを検査します。
    </P
><P
>Cの形式のブロックコメントは、サーバに送信され、サーバによって取り除かれますが、SQL標準のコメントは<SPAN
CLASS="APPLICATION"
>psql</SPAN
>によって取り除かれます。
    </P
></DIV
><DIV
CLASS="REFSECT2"
><A
NAME="APP-PSQL-META-COMMANDS"
></A
><H3
>メタコマンド</H3
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>内で入力されたコマンドのうち、引用符で囲まれていないバックスラッシュで始まるものは、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>自身が実行する<SPAN
CLASS="APPLICATION"
>psql</SPAN
>のメタコマンドとして扱われます。
これらのコマンドを使うと、データベースを管理したりスクリプトを作成するにあたって、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>がより便利になります。
メタコマンドはよくスラッシュコマンド、またはバックスラッシュコマンドとも呼ばれます。
    </P
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>コマンドは、バックスラッシュ、コマンド本体、引数の順につなげた形式になっています。
引数とコマンド本体の間および引数と引数の間は、空白文字によって分割されています。
    </P
><P
>引数に空白を含める場合は単一引用符で囲みます。
単一引用符を引数に含める場合には、単一引用符で括られた文字列の中で、その単一引用符を2つ続けてください。
単一引用符で囲われた文字は、C言語と同じような置換の対象となります。
このような文字には、<TT
CLASS="LITERAL"
>\n</TT
>（改行）、<TT
CLASS="LITERAL"
>\t</TT
>（タブ）、<TT
CLASS="LITERAL"
>\b</TT
> (後退)、<TT
CLASS="LITERAL"
>\r</TT
>(復帰)、<TT
CLASS="LITERAL"
>\f</TT
> (改頁)、<TT
CLASS="LITERAL"
>\</TT
><TT
CLASS="REPLACEABLE"
><I
>digits</I
></TT
>（8進数で表された文字）、<TT
CLASS="LITERAL"
>\x</TT
><TT
CLASS="REPLACEABLE"
><I
>digits</I
></TT
>（16進数で表された文字）があります。
単一引用符で括られたテキスト内でその他の任意の文字の前にバックスラッシュを付けた場合は、その文字が何であろうとその一文字だけとして扱われます。
    </P
><P
>引数の中で逆引用符(<TT
CLASS="LITERAL"
>`</TT
>)で囲まれたテキストは、コマンドラインとして認識され、シェルに渡されます。
コマンドの結果（末尾の改行は削除されます）で逆引用符で囲まれたテキストを置き換えます。
    </P
><P
><A
HREF="app-psql.html#APP-PSQL-INTERPOLATION"
><I
><I
>SQL</I
>差し替え</I
></A
>に示すように、引数の中で引用符で囲まれていないコロン(<TT
CLASS="LITERAL"
>:</TT
>)の後に<SPAN
CLASS="APPLICATION"
>psql</SPAN
>変数名が存在する場合、そこは変数の値に置換されます。
    </P
><P
>コマンドには、引数として（テーブル名などの）<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>の識別子を取るものがあります。
これらの引数は次のような<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>の構文規則に従います。
引用符を伴わない文字は強制的に小文字になります。しかし、二重引用符（<TT
CLASS="LITERAL"
>"</TT
>）で囲まれると、大文字小文字変換が行われず、空白文字を識別子内に含めることができます。
さらに、二重引用符内では、連続する2つの二重引用符は1つの二重引用符とみなされます。
例えば、<TT
CLASS="LITERAL"
>FOO"BAR"BAZ</TT
>は<TT
CLASS="LITERAL"
>fooBARbaz</TT
>と解釈され、<TT
CLASS="LITERAL"
>"A weird"" name"</TT
>は<TT
CLASS="LITERAL"
>A weird" name</TT
>になります。
    </P
><P
>引数の解析は行末または引用符で囲まれていないもう1つのバックスラッシュが見つかると終了します。
引用符がないバックスラッシュは新しいメタコマンドの始まりと解釈されます。
<TT
CLASS="LITERAL"
>\\</TT
>（バックスラッシュ2つ）という特別な文字の並びは引数の終わりを意味するので、<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>コマンドが残されている場合は、その解析を続けます。
このように、<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>コマンドと<SPAN
CLASS="APPLICATION"
>psql</SPAN
>コマンドは1つの行に自由に混合して記述することができます。
しかし、あらゆる場合において、メタコマンドの引数は行をまたぐことはできません。
    </P
><P
>メタコマンドとして、以下のものが定義されています。

    <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="LITERAL"
>\a</TT
></DT
><DD
><P
>現在のテーブルの出力形式が「揃えない」になっていれば「揃える」に、
「揃える」になっていれば「揃えない」に設定します。
このコマンドは後方互換性を保持するためにあります。
より一般的な解決策は<TT
CLASS="COMMAND"
>\pset</TT
>を参照してください。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\c</TT
> または <TT
CLASS="LITERAL"
>\connect [ -reuse-previous=<TT
CLASS="REPLACEABLE"
><I
>on|off</I
></TT
> ] [ <TT
CLASS="REPLACEABLE"
><I
>dbname</I
></TT
> [ <TT
CLASS="REPLACEABLE"
><I
>username</I
></TT
> ] [ <TT
CLASS="REPLACEABLE"
><I
>host</I
></TT
> ] [ <TT
CLASS="REPLACEABLE"
><I
>port</I
></TT
> ] | <TT
CLASS="REPLACEABLE"
><I
>conninfo</I
></TT
> ]</TT
></DT
><DD
><P
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>サーバへの新規の接続を確立します。
接続のパラメータは、位置の構文、あるいは<TT
CLASS="REPLACEABLE"
><I
>conninfo</I
></TT
>接続文字列で指定することができます。
後者の詳細は<A
HREF="libpq-connect.html#LIBPQ-CONNSTRING"
>項32.1.1</A
>で説明します。
        </P
><P
>コマンドでデータベース名、ユーザ、ホストあるいはポートを省略した場合、新しい接続では以前の接続での値を再利用することができます。
デフォルトでは、<TT
CLASS="REPLACEABLE"
><I
>conninfo</I
></TT
>文字列を処理する場合を除き、以前の接続での値が再利用されます。
第一引数で<TT
CLASS="LITERAL"
>-reuse-previous=on</TT
>あるいは<TT
CLASS="LITERAL"
>-reuse-previous=off</TT
>を渡すことで、このデフォルトと異なる動作をさせることができます。
コマンドで特定のパラメータを指定せず、かつ再利用もしない場合は、<SPAN
CLASS="APPLICATION"
>libpq</SPAN
>のデフォルトが使用されます。
<TT
CLASS="REPLACEABLE"
><I
>dbname</I
></TT
>、<TT
CLASS="REPLACEABLE"
><I
>username</I
></TT
>、<TT
CLASS="REPLACEABLE"
><I
>host</I
></TT
>、<TT
CLASS="REPLACEABLE"
><I
>port</I
></TT
>のいずれについても<TT
CLASS="LITERAL"
>-</TT
>を指定するのは、パラメータを省略するのと同じになります。
        </P
><P
>新規接続に成功した場合、以前の接続は閉じられます。
接続の試行が（ユーザ名の間違いやアクセス拒否などの理由で）失敗した場合、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>が対話式モードである場合に限り、それまでの接続が保持されます。
非対話式スクリプトを実行している場合は、処理はエラーとなり、即座に停止します。
この実装の違いは、対話モードでは入力ミスに対するユーザの利便性を考慮し、非対話モードではスクリプトによって間違ったデータベースを操作することを防ぐための安全策を考慮した結果決められました。
        </P
><P
>例：
        </P
><PRE
CLASS="PROGRAMLISTING"
>=&gt; \c mydb myuser host.dom 6432
=&gt; \c service=foo
=&gt; \c "host=localhost port=5432 dbname=mydb connect_timeout=10 sslmode=disable"
=&gt; \c postgresql://tom@localhost/mydb?application_name=myapp</PRE
></DD
><DT
><TT
CLASS="LITERAL"
>\C [ <TT
CLASS="REPLACEABLE"
><I
>title</I
></TT
> ]</TT
></DT
><DD
><P
>問い合わせ結果として表示されるテーブルのタイトルの設定、または、タイトルの設定解除を行います。
このコマンドは、<TT
CLASS="LITERAL"
>\pset title <TT
CLASS="REPLACEABLE"
><I
>title</I
></TT
></TT
>と同じ効力を持ちます。
（このコマンド名は<SPAN
CLASS="QUOTE"
>"標題(caption)"</SPAN
>に由来します。
以前は<ACRONYM
CLASS="ACRONYM"
>HTML</ACRONYM
>のテーブルの標題を設定するためだけに使われていたためです。）
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\cd [ <TT
CLASS="REPLACEABLE"
><I
>directory</I
></TT
> ]</TT
></DT
><DD
><P
>現在の作業ディレクトリを<TT
CLASS="REPLACEABLE"
><I
>directory</I
></TT
>に変更します。
引数がない場合は、現在のユーザのホームディレクトリに変更します。
        </P
><DIV
CLASS="TIP"
><BLOCKQUOTE
CLASS="TIP"
><P
><B
>ティップ: </B
>現在の作業ディレクトリを表示するには、<TT
CLASS="LITERAL"
>\! pwd</TT
>を使用してください。
         </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="LITERAL"
>\conninfo</TT
></DT
><DD
><P
>現在のデータベース接続に関する情報を出力します。
        </P
></DD
><DT
><A
NAME="APP-PSQL-META-COMMANDS-COPY"
></A
><TT
CLASS="LITERAL"
>\copy { <TT
CLASS="REPLACEABLE"
><I
>table</I
></TT
> [ ( <TT
CLASS="REPLACEABLE"
><I
>column_list</I
></TT
> ) ] | ( <TT
CLASS="REPLACEABLE"
><I
>query</I
></TT
> ) }
        { <TT
CLASS="LITERAL"
>from</TT
> | <TT
CLASS="LITERAL"
>to</TT
> }
        { <TT
CLASS="REPLACEABLE"
><I
>'filename'</I
></TT
> | program <TT
CLASS="REPLACEABLE"
><I
>'command'</I
></TT
> | stdin | stdout | pstdin | pstdout }
        [ [ with ] ( <TT
CLASS="REPLACEABLE"
><I
>option</I
></TT
> [, ...] ) ]</TT
></DT
><DD
><P
>フロントエンド（クライアント）コピーを行います。
これは<A
HREF="sql-copy.html"
>COPY</A
> <ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>コマンドを実行する操作ですが、サーバで指定ファイルに対する読み込みまたは書き込みを行うのではなく、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>がファイルの読み書きや、サーバとローカルファイルシステム間のデータ送信を行います。
この場合、ファイルへのアクセス権限はサーバではなくローカルユーザのものを使用するので、SQLのスーパーユーザ権限は必要ありません。
        </P
><P
><TT
CLASS="LITERAL"
>program</TT
>が指定された場合、<TT
CLASS="REPLACEABLE"
><I
>command</I
></TT
>が<SPAN
CLASS="APPLICATION"
>psql</SPAN
>により実行され、<TT
CLASS="REPLACEABLE"
><I
>command</I
></TT
>から、または、<TT
CLASS="REPLACEABLE"
><I
>command</I
></TT
>へのデータはサーバとクライアント間を行き来します。
ここでも、実行権限はローカル側のユーザであり、サーバ側ではなく、SQLスーパーユーザ権限は必要とされません。
        </P
><P
><TT
CLASS="LITERAL"
>\copy ... from stdin</TT
>では、データ行は、コマンドの発行源と同じところから、<TT
CLASS="LITERAL"
>\.</TT
>を読み取るまで、あるいは、ストリームが<ACRONYM
CLASS="ACRONYM"
>EOF</ACRONYM
>に達するまで読み続けます。
このオプションは、SQLスクリプトファイルの内部でテーブルにデータを投入する場合に便利です。
<TT
CLASS="LITERAL"
>\copy ... to stdout</TT
>では、出力は<SPAN
CLASS="APPLICATION"
>psql</SPAN
>コマンドの出力と同じところに送られますが、<TT
CLASS="LITERAL"
>COPY <TT
CLASS="REPLACEABLE"
><I
>count</I
></TT
></TT
>コマンドのステータスは表示されません(これはデータ行と混同してしまうかもしれないからです)。
コマンドの入力元や<TT
CLASS="LITERAL"
>\o</TT
>オプションに関わらず、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>の標準入力や標準出力を読み書きするには、<TT
CLASS="LITERAL"
>from pstdin</TT
>あるいは<TT
CLASS="LITERAL"
>to pstdout</TT
>と書いてください。
        </P
><P
>このコマンドの構文は<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>の<A
HREF="sql-copy.html"
>COPY</A
>コマンドに似ています。
データの入力元と出力先以外のすべてのオプションは<A
HREF="sql-copy.html"
>COPY</A
>と同じです。
このため<TT
CLASS="COMMAND"
>\copy</TT
>コマンドには特別な解析規則が適用されていることに注意してください。
特に、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>の変数の置換規則やバックスラッシュエスケープは適用されません。
        </P
><DIV
CLASS="TIP"
><BLOCKQUOTE
CLASS="TIP"
><P
><B
>ティップ: </B
>この操作は<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>の<TT
CLASS="COMMAND"
>COPY</TT
>コマンドほど効率が良いわけではありません。
これは、全てのデータをクライアント/サーバ接続を通じてやり取りしなければならないからです。
データ量が多い時は<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>コマンドを使用する方が良いでしょう。
        </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="LITERAL"
>\copyright</TT
></DT
><DD
><P
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の著作権および配布条項を表示します。
        </P
></DD
><DT
><A
NAME="APP-PSQL-META-COMMANDS-CROSSTABVIEW"
></A
><TT
CLASS="LITERAL"
>\crosstabview [
            <TT
CLASS="REPLACEABLE"
><I
>colV</I
></TT
>
            [ <TT
CLASS="REPLACEABLE"
><I
>colH</I
></TT
>
            [ <TT
CLASS="REPLACEABLE"
><I
>colD</I
></TT
>
            [ <TT
CLASS="REPLACEABLE"
><I
>sortcolH</I
></TT
>
            ] ] ] ] </TT
></DT
><DD
><P
>問い合わせのバッファを実行し（<TT
CLASS="LITERAL"
>\g</TT
>と同様）、その結果をクロス表形式で表示します。
問い合わせは少なくとも3つの列を返す必要があります。
<TT
CLASS="REPLACEABLE"
><I
>colV</I
></TT
>で特定される出力列が縦方向のヘッダになり、<TT
CLASS="REPLACEABLE"
><I
>colH</I
></TT
>で特定される出力列が横方向のヘッダになります。
<TT
CLASS="REPLACEABLE"
><I
>colD</I
></TT
>は表内に表示される出力列を特定します。
オプションの<TT
CLASS="REPLACEABLE"
><I
>sortcolH</I
></TT
>で水平方向のヘッダをソートする列を指定できます。
        </P
><P
>それぞれの列の指定は、列番号（1から始まります）でも列名でも可能です。
列名については、通常のSQLの大文字小文字変換および引用の規則が適用されます。
省略した場合、<TT
CLASS="REPLACEABLE"
><I
>colV</I
></TT
>は列1、<TT
CLASS="REPLACEABLE"
><I
>colH</I
></TT
>は列2となります。
<TT
CLASS="REPLACEABLE"
><I
>colH</I
></TT
>は<TT
CLASS="REPLACEABLE"
><I
>colV</I
></TT
>とは異なるものでなければなりません。
<TT
CLASS="REPLACEABLE"
><I
>colD</I
></TT
>を指定しない場合、問い合わせの結果にはちょうど3つの列がなければならず、<TT
CLASS="REPLACEABLE"
><I
>colV</I
></TT
>でも<TT
CLASS="REPLACEABLE"
><I
>colH</I
></TT
>でもない列が<TT
CLASS="REPLACEABLE"
><I
>colD</I
></TT
>となります。
        </P
><P
>縦方向のヘッダは一番左の列に表示され、<TT
CLASS="REPLACEABLE"
><I
>colV</I
></TT
>の列にある値が問い合わせ結果と同じ順序で現れますが、重複するものは除かれます。
        </P
><P
>横方向のヘッダは1行目に表示され、<TT
CLASS="REPLACEABLE"
><I
>colH</I
></TT
>の列にある値が現れますが、重複するものは除かれます。
デフォルトでは、これらは問い合わせの結果と同じ順序で表示されます。
しかしオプションの<TT
CLASS="REPLACEABLE"
><I
>sortcolH</I
></TT
>引数が指定された場合は、<TT
CLASS="REPLACEABLE"
><I
>colH</I
></TT
>の値は対応する<TT
CLASS="REPLACEABLE"
><I
>sortcolH</I
></TT
>の値に従ってソートされて横方向のヘッダに現れますが、<TT
CLASS="REPLACEABLE"
><I
>sortcolH</I
></TT
>の列の値は整数値でなければなりません。
        </P
><P
>クロス表の内側では、<TT
CLASS="REPLACEABLE"
><I
>colH</I
></TT
>のそれぞれの個別値<TT
CLASS="LITERAL"
>x</TT
>と<TT
CLASS="REPLACEABLE"
><I
>colV</I
></TT
>のそれぞれの個別値<TT
CLASS="LITERAL"
>y</TT
>に対して、その交点<TT
CLASS="LITERAL"
>(x,y)</TT
>に位置するセルに、問い合わせの結果の<TT
CLASS="REPLACEABLE"
><I
>colH</I
></TT
>の値が<TT
CLASS="LITERAL"
>x</TT
>で<TT
CLASS="REPLACEABLE"
><I
>colV</I
></TT
>の値が<TT
CLASS="LITERAL"
>y</TT
>である行の<TT
CLASS="LITERAL"
>colD</TT
>列の値が現れます。
そのような行がなければ、セルは空欄になります。
そのような行が複数あると、エラーが報告されます。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\d[S+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>にマッチする各リレーション（テーブル、ビュー、マテリアライズドビュー、インデックス、シーケンス、外部テーブル）または複合型について、全ての列、列の型、テーブル空間（デフォルト以外を使用している場合）、<TT
CLASS="LITERAL"
>NOT NULL</TT
>やデフォルトなどの特別な属性を表示します。
関連付けられているインデックス、制約、ルールおよびトリガも表示されます。
外部テーブルでは関連する外部サーバも表示されます。
（<SPAN
CLASS="QUOTE"
>"パターンのマッチング"</SPAN
>については後述の<A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><I
>パターン</I
></A
>で定義されています。）
        </P
><P
>一部の種類のリレーションでは、<TT
CLASS="LITERAL"
>\d</TT
>は各列について追加の情報を表示します。
例えば、シーケンスでは列の値、インデックスではインデックス式、外部テーブルでは外部データラッパのオプションです。
        </P
><P
><TT
CLASS="LITERAL"
>\d+</TT
>というコマンド形式も同一ですが、より多くの情報を表示します。
こちらでは、テーブルの列に関連付けられたコメントやテーブルにOIDが存在するかどうか、リレーションがビューの場合はビューの定義、デフォルトと異なる<A
HREF="sql-altertable.html#SQL-CREATETABLE-REPLICA-IDENTITY"
>replica identity</A
>の設定も表示されます。
        </P
><P
>デフォルトではユーザが作成したオブジェクトのみが表示されます。
システムオブジェクトを含めるためには、パターンまたは<TT
CLASS="LITERAL"
>S</TT
>修飾子を付与してください。
        </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
><TT
CLASS="COMMAND"
>\d</TT
>が<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>引数なしで使用された場合は、<TT
CLASS="COMMAND"
>\dtvmsE</TT
>と同じ意味となり、可視である全てのテーブル、ビュー、マテリアライズドビュー、シーケンス、外部テーブルの一覧が表示されます。
これは純粋に利便性のためです。
        </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="LITERAL"
>\da[S] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>集約関数と、その戻り値のデータ型、演算対象となるデータ型の一覧を表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>が指定された場合、そのパターンに名前がマッチする集約のみが表示されます。
デフォルトではユーザが作成したオブジェクトのみが表示されます。
システムオブジェクトを含めるためには、パターンまたは<TT
CLASS="LITERAL"
>S</TT
>修飾子を付与してください。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\dA[+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>アクセスメソッドの一覧を表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>が指定された場合は、そのパターンにマッチする名前のアクセスメソッドのみが表示されます。
コマンド名の後に<TT
CLASS="LITERAL"
>+</TT
>が付加された場合は、各メソッドに関連付けられたハンドラ関数および説明も表示されます。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\db[+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>テーブル空間を一覧表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>が指定された場合、そのパターンに名前がマッチするテーブル空間のみが表示されます。
コマンド名に<TT
CLASS="LITERAL"
>+</TT
>が付与された場合、各テーブル空間に関連付けされたオプション、ディスク上のサイズ、権限、摘要についても表示します。

        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\dc[S+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>文字セット符号化方式間の変換の一覧を表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>が指定された場合、そのパターンに名前がマッチする変換のみが表示されます。
デフォルトではユーザが作成したオブジェクトのみが表示されます。
システムオブジェクトを含めるためには、パターンまたは<TT
CLASS="LITERAL"
>S</TT
>修飾子を付与してください。
コマンド名に<TT
CLASS="LITERAL"
>+</TT
>を付与すると、各オブジェクトに関連する説明を付けて表示します。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\dC[+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>型キャストの一覧を表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>が指定された場合、そのパターンに元データ型または変換先データ型がマッチするキャストのみが表示されます。
コマンド名に<TT
CLASS="LITERAL"
>+</TT
>を付与すると、各オブジェクトに関連する説明を付けて表示します。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\dd[S] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
><TT
CLASS="LITERAL"
>constraint</TT
>、<TT
CLASS="LITERAL"
>operator class</TT
>、<TT
CLASS="LITERAL"
>operator family</TT
>、<TT
CLASS="LITERAL"
>rule</TT
>、<TT
CLASS="LITERAL"
>trigger</TT
>という種類のオブジェクトについての説明を表示します。
他のコメントはすべて、これらのオブジェクト種類用の対応するバックスラッシュコマンドによって表示されます。
        </P
><P
><TT
CLASS="LITERAL"
>\dd</TT
>は<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>にマッチするオブジェクトの説明を表示します。
引数が指定されていない場合は、適切な種類の可視なオブジェクトの説明を表示します。
どちらの場合でも、一覧に表示されるのは説明を持つオブジェクトのみです
デフォルトではユーザが作成したオブジェクトのみが表示されます。
システムオブジェクトを含めるためには、パターンまたは<TT
CLASS="LITERAL"
>S</TT
>修飾子を付与してください。
        </P
><P
>オブジェクトの説明は<A
HREF="sql-comment.html"
>COMMENT</A
> <ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>コマンドを使用して作成することができます。
       </P
></DD
><DT
><TT
CLASS="LITERAL"
>\ddp [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>デフォルトのアクセス権限設定を一覧表示します。
組み込みのデフォルトから権限設定が変更されたロール（および適切ならばスキーマも）ごとに1項目示されます。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>が指定された場合、パターンにマッチするロール名またはスキーマ名の項目のみが表示されます。
        </P
><P
><A
HREF="sql-alterdefaultprivileges.html"
>ALTER DEFAULT PRIVILEGES</A
>コマンドを使用して、デフォルトのアクセス権限を設定します。
権限表示の意味は<A
HREF="sql-grant.html"
>GRANT</A
>で説明します。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\dD[S+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>ドメインを一覧表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>が指定されている場合は、パターンに名前がマッチするドメインのみが表示されます。
デフォルトではユーザが作成したオブジェクトのみが表示されます。
システムオブジェクトを含めるためには、パターンまたは<TT
CLASS="LITERAL"
>S</TT
>修飾子を付与してください。
コマンド名に<TT
CLASS="LITERAL"
>+</TT
>を付与すると、各オブジェクトに関連する権限と説明を付けて表示します。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\dE[S+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
><BR><TT
CLASS="LITERAL"
>\di[S+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
><BR><TT
CLASS="LITERAL"
>\dm[S+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
><BR><TT
CLASS="LITERAL"
>\ds[S+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
><BR><TT
CLASS="LITERAL"
>\dt[S+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
><BR><TT
CLASS="LITERAL"
>\dv[S+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>このコマンド群において、<TT
CLASS="LITERAL"
>E</TT
>、<TT
CLASS="LITERAL"
>i</TT
>、<TT
CLASS="LITERAL"
>m</TT
>、<TT
CLASS="LITERAL"
>s</TT
>、<TT
CLASS="LITERAL"
>t</TT
>、<TT
CLASS="LITERAL"
>v</TT
>という文字はそれぞれ、外部テーブル、インデックス、マテリアライズドビュー、シーケンス、テーブル、ビューを表します。
これらの種類のオブジェクトの一覧を表示するために、これらの文字の中の任意の文字またはすべてを任意の順番で指定することができます。
例えば、<TT
CLASS="LITERAL"
>\dit</TT
>はインデックスとテーブルを列挙します。
<TT
CLASS="LITERAL"
>+</TT
>がコマンド名に付与された場合、各オブジェクトは、もしあればディスク上の物理容量と関連する説明をつけて表示されます。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>が指定されている場合は、パターンに名称がマッチする項目のみが表示されます。
デフォルトでは、ユーザが作成したオブジェクトのみが表示されます。
システムオブジェクトを含めるためにはパターンまたは<TT
CLASS="LITERAL"
>S</TT
>修飾子を付与してください。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\des[+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>外部(foreign)サーバ（つまり<SPAN
CLASS="QUOTE"
>"external servers"</SPAN
>）を一覧表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>が指定されている場合は、名前がパターンにマッチするサーバのみが表示されます。
<TT
CLASS="LITERAL"
>\des+</TT
>構文が使用された場合、サーバのACL、型、バージョン、オプション、説明など各サーバの完全な説明が表示されます。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\det[+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>外部(foreign)テーブル（つまり<SPAN
CLASS="QUOTE"
>"external tables"</SPAN
>）を一覧表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>が指定された場合、パターンにテーブル名またはスキーマ名がマッチするもののみが表示されます。
<TT
CLASS="LITERAL"
>\det+</TT
>が使用された場合、汎用オプションと外部テーブルの説明も表示されます。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\deu[+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>ユーザマップ（つまり<SPAN
CLASS="QUOTE"
>"external users"</SPAN
>）を一覧表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>が指定されている場合は、名前がパターンにマッチするユーザのみが表示されます。
<TT
CLASS="LITERAL"
>\deu+</TT
>構文が使用された場合、各マップについて追加情報が表示されます。
        </P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
BORDER="1"
WIDTH="90%"
><TR
><TD
ALIGN="CENTER"
><B
>注意</B
></TD
></TR
><TR
><TD
ALIGN="LEFT"
><P
><TT
CLASS="LITERAL"
>\deu+</TT
>ではリモートユーザのユーザ名とパスワードも表示される可能性があります。
これらを外部に曝さないように注意しなければなりません。
        </P
></TD
></TR
></TABLE
></DIV
></DD
><DT
><TT
CLASS="LITERAL"
>\dew[+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>外部データラッパ（つまり<SPAN
CLASS="QUOTE"
>"external wrappers"</SPAN
>）を一覧表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>が指定されている場合、名前がパターンにマッチする外部データラッパのみが表示されます。
<TT
CLASS="LITERAL"
>\dew+</TT
>構文が使用された場合、外部データラッパのACL、オプションおよび説明も表示されます。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\df[antwS+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>関数とその結果のデータ型、引数のデータ型、および、<SPAN
CLASS="QUOTE"
>"agg"</SPAN
> (集約)、<SPAN
CLASS="QUOTE"
>"normal"</SPAN
>、<SPAN
CLASS="QUOTE"
>"trigger"</SPAN
>、<SPAN
CLASS="QUOTE"
>"window"</SPAN
>で分類される関数の種類の一覧を表示します。
特定種類の関数のみを表示させるには、対応する文字<TT
CLASS="LITERAL"
>a</TT
>、<TT
CLASS="LITERAL"
>n</TT
>、<TT
CLASS="LITERAL"
>t</TT
>、<TT
CLASS="LITERAL"
>w</TT
>をコマンドに付けて下さい。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>が指定されている場合は、そのパターンに名前がマッチする関数のみが表示されます。
デフォルトではユーザが作成したオブジェクトのみが表示されます。
システムオブジェクトを含めるためには、パターンまたは<TT
CLASS="LITERAL"
>S</TT
>修飾子を付与してください。
<TT
CLASS="LITERAL"
>\df+</TT
>構文が使われた場合、各関数の、揮発性、並列処理での安全性、所有者、セキュリティ分類、アクセス権限、言語、ソースコードや説明を含む付加的情報も表示されます。
        </P
><DIV
CLASS="TIP"
><BLOCKQUOTE
CLASS="TIP"
><P
><B
>ティップ: </B
>特定のデータ型を引数とする関数や特定のデータ型を返す関数を検索するには、ページャの検索機能を使用して<TT
CLASS="LITERAL"
>\df</TT
>の出力をスクロールしてください。
        </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="LITERAL"
>\dF[+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>全文検索設定を一覧表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>が指定された場合、このパターンにマッチする名前の設定のみが表示されます。
<TT
CLASS="LITERAL"
>\dF+</TT
>形式が使用された場合、使用される全文検索パーサや各パーサトークン型についての辞書リストなど各設定の完全な説明が表示されます。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\dFd[+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>全文検索辞書を一覧表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>が指定された場合、このパターンにマッチする名前の辞書のみが表示されます。
<TT
CLASS="LITERAL"
>\dFd+</TT
>形式が使用された場合、選択された辞書それぞれについて使用される全文検索テンプレートやオプション値など更なる情報が表示されます。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\dFp[+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>全文検索パーサを一覧表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>が指定された場合、このパターンにマッチする名前のパーサのみが表示されます。
<TT
CLASS="LITERAL"
>\dFp+</TT
>形式が使用された場合、使用される関数や認知されるトークン型のリストなど各パーサの完全な説明が表示されます。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\dFt[+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>テキスト検索テンプレートを一覧表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>が指定された場合、このパターンにマッチする名前のテンプレートのみが表示されます。
<TT
CLASS="LITERAL"
>\dFt+</TT
>形式が使用された場合、テンプレートそれぞれについて使用される関数名など更なる情報が表示されます。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\dg[S+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>データベースロールを一覧表示します。
(<SPAN
CLASS="QUOTE"
>"ユーザ"</SPAN
>と<SPAN
CLASS="QUOTE"
>"グループ"</SPAN
>という概念は<SPAN
CLASS="QUOTE"
>"ロール"</SPAN
>に統合されましたので、このコマンドは<TT
CLASS="LITERAL"
>\du</TT
>と同じものになりました。)
デフォルトでは、ユーザによって作成されたロールのみが表示されます。
システムロールを含めるには<TT
CLASS="LITERAL"
>S</TT
>修飾子を付与してください。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>が指定されている場合は、そのパターンに名前がマッチするロールのみが表示されます。
<TT
CLASS="LITERAL"
>\dg+</TT
>構文が使用された場合、ロールそれぞれについて更なる情報が表示されます。
現時点では各ロールのコメントが追加されます。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\dl</TT
></DT
><DD
><P
><TT
CLASS="COMMAND"
>\lo_list</TT
>の別名で、ラージオブジェクトの一覧を表示します。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\dL[S+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>手続き言語を一覧表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>を指定すると、パターンに名前がマッチする言語のみが表示されます。
デフォルトではユーザが作成した言語のみが表示されます。
システムオブジェクトを含めるためには、パターンまたは<TT
CLASS="LITERAL"
>S</TT
>修飾子を付与してください。
<TT
CLASS="LITERAL"
>+</TT
>をコマンド名に追加すると、呼び出しハンドラ、有効性検証関数、アクセス権限、システムオブジェクトか否かという情報を付けて各言語が表示されます。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\dn[S+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>スキーマ（名前空間）の一覧を表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>を指定すると、パターンに名前がマッチするスキーマのみが表示されます。
デフォルトではユーザが作成したオブジェクトのみが表示されます。
パターンまたは<TT
CLASS="LITERAL"
>S</TT
>修飾子を追加すると、システムオブジェクトが表示に追加されます。
コマンド名の後に<TT
CLASS="LITERAL"
>+</TT
>を付加すると、各オブジェクトに関連付けられている権限と説明が（存在すれば）表示されます。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\do[S+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>演算子と、その演算項目と結果の型を一覧表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>を指定すると、パターンに名前がマッチする演算子のみが表示されます。
デフォルトではユーザが作成したオブジェクトのみが表示されます。
システムオブジェクトを含めるためには、パターンまたは<TT
CLASS="LITERAL"
>S</TT
>修飾子を付与してください。
コマンド名に<TT
CLASS="LITERAL"
>+</TT
>を付加すると、各演算子についての追加情報が表示されますが、現在はその元になっている関数の名前だけです。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\dO[S+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>照合順序を一覧表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>を指定すると、パターンに名前がマッチする照合順序のみが表示されます。
デフォルトではユーザが作成したオブジェクトのみが表示されます。
システムオブジェクトを含めるためには、パターンまたは<TT
CLASS="LITERAL"
>S</TT
>修飾子を付与してください。
コマンド名の後に<TT
CLASS="LITERAL"
>+</TT
>を付加すると、各照合順序に関連付けられている説明が（存在すれば）表示されます。
現在のデータベースの符号化方式で使用できる照合順序のみが表示されることに注意してください。
このため同じインストレーションであってもデータベースによって結果が異なる可能性があります。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\dp [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>テーブル、ビュー、シーケンスを、関連付けられているアクセス権限とともに一覧表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>を指定すると、パターンに名前がマッチするテーブル、ビュー、シーケンスのみが表示されます。
        </P
><P
>アクセス権限の設定には<A
HREF="sql-grant.html"
>GRANT</A
>コマンドと<A
HREF="sql-revoke.html"
>REVOKE</A
>コマンドが使われます。
権限の表示に関する意味は<A
HREF="sql-grant.html"
>GRANT</A
>で説明します。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\drds [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>role-pattern</I
></TT
></A
> [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>database-pattern</I
></TT
></A
> ] ]</TT
></DT
><DD
><P
>定義済み設定に関する設定を一覧表示します。
これらの設定はロール固有、データベース固有、またはその両方です。
<TT
CLASS="LITERAL"
>role-pattern</TT
>および<TT
CLASS="LITERAL"
>database-pattern</TT
>はそれぞれ特定のロールやデータベースを選択するために使用します。
パターンが省略された場合、または<TT
CLASS="LITERAL"
>*</TT
>が指定された場合、ロール固有ではない、または、データベース固有ではない設定を含め、すべての設定を表示します。
        </P
><P
>ロール単位およびデータベース単位の設定を定義するには<A
HREF="sql-alterrole.html"
>ALTER ROLE</A
>および<A
HREF="sql-alterdatabase.html"
>ALTER DATABASE</A
>コマンドを使用します。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\dT[S+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>データ型を一覧表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>を指定すると、パターンにマッチする名前を持つ型のみを表示します。
<TT
CLASS="LITERAL"
>+</TT
>をコマンド名に付けると、型ごとに、型の内部名、サイズ、<TT
CLASS="TYPE"
>enum</TT
>型では許される値、関連する権限も表示されます。
デフォルトではユーザが作成したオブジェクトのみが表示されます。
システムオブジェクトを含めるためには、パターンまたは<TT
CLASS="LITERAL"
>S</TT
>修飾子を付与してください。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\du[S+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>データベースロールを一覧表示します。
(<SPAN
CLASS="QUOTE"
>"ユーザ"</SPAN
>と<SPAN
CLASS="QUOTE"
>"グループ"</SPAN
>という概念は<SPAN
CLASS="QUOTE"
>"ロール"</SPAN
>に統合されましたので、このコマンドは<TT
CLASS="LITERAL"
>\dg</TT
>と同じものになりました。)
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>が指定されている場合は、そのパターンに名前がマッチするロールのみが表示されます。
デフォルトでは、ユーザによって作成されたロールのみが表示されます。
システムロールを含めるには<TT
CLASS="LITERAL"
>S</TT
>修飾子を付与してください。
<TT
CLASS="LITERAL"
>\du+</TT
>構文が使用された場合、ロールそれぞれについて更なる情報が表示されます。
現時点では各ロールのコメントが追加されます。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\dx[+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>インストールされた拡張を一覧表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>を指定すると、パターンにマッチする名前の拡張のみを表示します。
<TT
CLASS="LITERAL"
>\dx+</TT
>形式が使用された場合、マッチする拡張それぞれについて拡張に属するすべてのオブジェクトが表示されます。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\dy[+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>イベントトリガを一覧表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>を指定すると、パターンにマッチする名前のイベントトリガのみを表示します。
<TT
CLASS="LITERAL"
>+</TT
>をコマンド名に追記すると、関連する説明を付けて各オブジェクトを表示します。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\e</TT
>または<TT
CLASS="LITERAL"
>\edit</TT
> <TT
CLASS="LITERAL"
> [<SPAN
CLASS="OPTIONAL"
> <TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
> </SPAN
>] [<SPAN
CLASS="OPTIONAL"
> <TT
CLASS="REPLACEABLE"
><I
>line_number</I
></TT
> </SPAN
>] </TT
></DT
><DD
><P
><TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
>が指定された場合、このファイルが編集されます。
エディタを終了した後、その内容は問い合わせバッファにコピーされます。
<TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
>がない場合、現在の問い合わせバッファが一時ファイルにコピーされ、同様に編集されます。
        </P
><P
>次に、新しい問い合わせバッファは、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>の通常の規則に従い、全体を1行として再解析されます
（このため、この方法では<SPAN
CLASS="QUOTE"
>"スクリプト"</SPAN
>を作成できません。
この目的のためには<TT
CLASS="COMMAND"
>\i</TT
>を使用してください）。
これは問い合わせの終端がセミコロンである（もしくは問い合わせがセミコロンを含む）場合、すぐに実行されることを意味しています。
セミコロンを含まない場合は、問い合わせバッファ内に保持されて入力を待ちます。
セミコロンまたは<TT
CLASS="LITERAL"
>\g</TT
>を入力して送信するか、<TT
CLASS="LITERAL"
>\r</TT
>を入力してキャンセルしてください。
        </P
><P
>行番号(line_number)が指定された場合、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>はファイルまたは問い合わせバッファ内の指定行にカーソルを位置づけます。
すべてが数字の引数が1つだけ指定された場合、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>はそれをファイル名ではなく行番号であるとみなすことに注意してください。
        </P
><DIV
CLASS="TIP"
><BLOCKQUOTE
CLASS="TIP"
><P
><B
>ティップ: </B
>使用するエディタを設定、カスタマイズする方法については<A
HREF="app-psql.html#APP-PSQL-ENVIRONMENT"
><I
>環境</I
></A
>を参照してください。
        </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="LITERAL"
>\echo <TT
CLASS="REPLACEABLE"
><I
>text</I
></TT
> [ ... ]</TT
></DT
><DD
><P
>引数を空白で区切り、標準出力に出力し、改行します。
スクリプトが出力するところどころに情報を記載する場合に有用です。
使用例を次に示します。
</P><PRE
CLASS="PROGRAMLISTING"
>=&gt; <KBD
CLASS="USERINPUT"
>\echo `date`</KBD
>
Tue Oct 26 21:40:57 CEST 1999</PRE
><P>
最初の引数が引用符で囲まれていない<TT
CLASS="LITERAL"
>-n</TT
>である場合、最後の改行は出力されません。
        </P
><DIV
CLASS="TIP"
><BLOCKQUOTE
CLASS="TIP"
><P
><B
>ティップ: </B
><TT
CLASS="COMMAND"
>\o</TT
>コマンドを使用して問い合わせの出力先を変更した場合、このコマンドではなく、<TT
CLASS="COMMAND"
>\qecho</TT
>を使用した方が良いかもしれません。
        </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="LITERAL"
>\ef [<SPAN
CLASS="OPTIONAL"
> <TT
CLASS="REPLACEABLE"
><I
>function_description</I
></TT
> [<SPAN
CLASS="OPTIONAL"
>  <TT
CLASS="REPLACEABLE"
><I
>line_number</I
></TT
> </SPAN
>] </SPAN
>] </TT
></DT
><DD
><P
>このコマンドは指定された関数の定義を<TT
CLASS="COMMAND"
>CREATE OR REPLACE FUNCTION</TT
>コマンド構文で取り出し、編集します。
編集は<TT
CLASS="LITERAL"
>\edit</TT
>と同様の方法で行われます。
エディタ終了後、更新されたコマンドは問い合わせバッファ内で待機しています。
セミコロンか<TT
CLASS="LITERAL"
>\g</TT
>を入力して送信するか、<TT
CLASS="LITERAL"
>\r</TT
>を入力して取り消すかしてください。
        </P
><P
>対象の関数は名前だけ、または、たとえば<TT
CLASS="LITERAL"
>foo(integer, text)</TT
>のように名前と引数で指定することができます。
同じ名前の関数が複数存在する場合、引数の型を指定しなければなりません。
        </P
><P
>関数が指定されなかった場合、空の<TT
CLASS="COMMAND"
>CREATE FUNCTION</TT
>のテンプレートが編集用に表示されます。
        </P
><P
>行番号が指定された場合、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>は関数本体における指定行にカーソルを移動します。
（関数本体は通常、ファイルの先頭から始まらないことに注意してください。）
        </P
><DIV
CLASS="TIP"
><BLOCKQUOTE
CLASS="TIP"
><P
><B
>ティップ: </B
>使用するエディタを設定、カスタマイズする方法については<A
HREF="app-psql.html#APP-PSQL-ENVIRONMENT"
><I
>環境</I
></A
>を参照してください。
        </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="LITERAL"
>\encoding [ <TT
CLASS="REPLACEABLE"
><I
>encoding</I
></TT
> ]</TT
></DT
><DD
><P
>クライアント側の文字セット符号化方式を設定します。
引数を指定しない場合、このコマンドは現在の符号化方式を表示します。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\errverbose</TT
></DT
><DD
><P
>最も最近のサーバのエラーメッセージを最大の冗長さ、つまり<TT
CLASS="VARNAME"
>VERBOSITY</TT
>が<TT
CLASS="LITERAL"
>verbose</TT
>に、そして<TT
CLASS="VARNAME"
>SHOW_CONTEXT</TT
>が<TT
CLASS="LITERAL"
>always</TT
>に設定されているかのようにして、繰り返します。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\ev [<SPAN
CLASS="OPTIONAL"
> <TT
CLASS="REPLACEABLE"
><I
>view_name</I
></TT
> [<SPAN
CLASS="OPTIONAL"
>  <TT
CLASS="REPLACEABLE"
><I
>line_number</I
></TT
> </SPAN
>] </SPAN
>] </TT
></DT
><DD
><P
>このコマンドは、指定したビューの定義を<TT
CLASS="COMMAND"
>CREATE OR REPLACE VIEW</TT
>コマンドの形式で取得して、編集します。
編集は<TT
CLASS="LITERAL"
>\edit</TT
>の場合と同じ方法で行われます。
エディタを終了した後、更新されたコマンドが問い合わせバッファで待っている状態になります。
送信するにはセミコロンあるいは<TT
CLASS="LITERAL"
>\g</TT
>を、キャンセルするには<TT
CLASS="LITERAL"
>\r</TT
>を入力してください。
        </P
><P
>ビューを指定しなかった場合は、空の<TT
CLASS="COMMAND"
>CREATE VIEW</TT
>テンプレートが編集用に提供されます。
        </P
><P
>行番号を指定した場合、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>はカーソルをビュー定義の指定した行に位置づけます。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\f [ <TT
CLASS="REPLACEABLE"
><I
>string</I
></TT
> ]</TT
></DT
><DD
><P
>位置揃えされていない問い合わせの出力用の、フィールドの区切り文字を設定します。
デフォルトは、縦棒（<SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>|</TT
>"</SPAN
>）です。
一般的な出力オプションの設定方法については、<TT
CLASS="COMMAND"
>\pset</TT
>を参照してください。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\g [ <TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
> ]</TT
><BR><TT
CLASS="LITERAL"
>\g [ |<TT
CLASS="REPLACEABLE"
><I
>command</I
></TT
> ]</TT
></DT
><DD
><P
>現在の問い合わせ入力バッファをサーバに送ります。
オプションを指定すれば、問い合わせ出力を<TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
>に格納したり、その出力をシェルコマンド<TT
CLASS="REPLACEABLE"
><I
>command</I
></TT
>にパイプで渡すこともできます。
問い合わせが成功しゼロ以上のタプルが返る場合にのみファイルまたはコマンドに書き出されます。
問い合わせが失敗する場合やデータを返さないSQLコマンドでは書き出されません。
        </P
><P
><TT
CLASS="LITERAL"
>\g</TT
>だけを指定した場合は、セミコロンと実質的に同じです。
<TT
CLASS="LITERAL"
>\g</TT
>に引数を指定した場合は、<TT
CLASS="LITERAL"
>\o</TT
>コマンドの<SPAN
CLASS="QUOTE"
>"一度限りの"</SPAN
>代替手段として使用できます。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\gexec</TT
></DT
><DD
><P
>現在の問い合わせ入力バッファをサーバに送信し、問い合わせの出力（あれば）の各行の各列をSQL文として実行します。
例えば、<TT
CLASS="STRUCTNAME"
>my_table</TT
>の各列にインデックスを作成するには次のようにします。
</P><PRE
CLASS="PROGRAMLISTING"
>=&gt; <KBD
CLASS="USERINPUT"
>SELECT format('create index on my_table(%I)', attname)</KBD
>
-&gt; <KBD
CLASS="USERINPUT"
>FROM pg_attribute</KBD
>
-&gt; <KBD
CLASS="USERINPUT"
>WHERE attrelid = 'my_table'::regclass AND attnum &gt; 0</KBD
>
-&gt; <KBD
CLASS="USERINPUT"
>ORDER BY attnum</KBD
>
-&gt; <KBD
CLASS="USERINPUT"
>\gexec</KBD
>
CREATE INDEX
CREATE INDEX
CREATE INDEX
CREATE INDEX</PRE
><P>
        </P
><P
>生成された問い合わせは行が返された順番で実行され、また2つ以上の列が返された場合は、各行の中で左から右に実行されます。
NULLのフィールドは無視されます。
生成された問い合わせは、そのままサーバに送信されて処理されるため、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>のメタコマンドとすることはできず、また<SPAN
CLASS="APPLICATION"
>psql</SPAN
>の変数の参照を含むこともできません。
個別の問い合わせで失敗した場合、残りの問い合わせの実行は<TT
CLASS="VARNAME"
>ON_ERROR_STOP</TT
>が設定されているのでなければ継続します。
個々の問い合わせの実行は<TT
CLASS="VARNAME"
>ECHO</TT
>の処理に従います。
（<TT
CLASS="COMMAND"
>\gexec</TT
>を使う場合、<TT
CLASS="VARNAME"
>ECHO</TT
>を<TT
CLASS="LITERAL"
>all</TT
>あるいは<TT
CLASS="LITERAL"
>queries</TT
>に設定することが推奨されることが多いでしょう。）
問い合わせのログ出力、シングルステップモード、時間表示(timing)、およびその他の問い合わせ実行に関する機能は、生成された各問い合わせにも適用されます。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\gset [ <TT
CLASS="REPLACEABLE"
><I
>prefix</I
></TT
> ]</TT
></DT
><DD
><P
>現在の問い合わせ入力バッファをサーバに送信し、問い合わせの出力を<SPAN
CLASS="APPLICATION"
>psql</SPAN
>変数（<A
HREF="app-psql.html#APP-PSQL-VARIABLES"
><I
>変数</I
></A
>参照）に格納します。
実行される問い合わせは正確に１行を返さなければなりません。
行の各列は、列と同じ名前を持つ別々の変数に格納されます。
例えば、以下のようになります。
</P><PRE
CLASS="PROGRAMLISTING"
>=&gt; <KBD
CLASS="USERINPUT"
>SELECT 'hello' AS var1, 10 AS var2</KBD
>
-&gt; <KBD
CLASS="USERINPUT"
>\gset</KBD
>
=&gt; <KBD
CLASS="USERINPUT"
>\echo :var1 :var2</KBD
>
hello 10</PRE
><P>
        </P
><P
><TT
CLASS="REPLACEABLE"
><I
>prefix</I
></TT
>を指定した場合、使用する変数の名前を作成する時にその文字列が問い合わせの列名の前に付けられ、次のようになります。
</P><PRE
CLASS="PROGRAMLISTING"
>=&gt; <KBD
CLASS="USERINPUT"
>SELECT 'hello' AS var1, 10 AS var2</KBD
>
-&gt; <KBD
CLASS="USERINPUT"
>\gset result_</KBD
>
=&gt; <KBD
CLASS="USERINPUT"
>\echo :result_var1 :result_var2</KBD
>
hello 10</PRE
><P>
        </P
><P
>列の結果がNULLである場合、対応する変数は設定されず未設定状態となります。
        </P
><P
>問い合わせが失敗、または１行を返さない場合、変数は変更されません。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\h</TT
>または<TT
CLASS="LITERAL"
>\help</TT
> <TT
CLASS="LITERAL"
>[ <TT
CLASS="REPLACEABLE"
><I
>command</I
></TT
> ]</TT
></DT
><DD
><P
>指定した<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>コマンドの構文に関するヘルプを表示します。
<TT
CLASS="REPLACEABLE"
><I
>command</I
></TT
>が指定されていない場合は、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>は構文ヘルプが存在する全てのコマンドの一覧を表示します。
<TT
CLASS="REPLACEABLE"
><I
>command</I
></TT
>をアスタリスク（<TT
CLASS="LITERAL"
>*</TT
>）にすると、全ての<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>コマンドの構文ヘルプが表示されます。
        </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>入力を簡単にするため、複数の単語からなるコマンドを引用符で囲む必要はありません。
<KBD
CLASS="USERINPUT"
>\help alter table</KBD
>と入力するだけで十分です。
        </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="LITERAL"
>\H</TT
>または<TT
CLASS="LITERAL"
>\html</TT
></DT
><DD
><P
><ACRONYM
CLASS="ACRONYM"
>HTML</ACRONYM
>問い合わせ出力形式を有効にします。
<ACRONYM
CLASS="ACRONYM"
>HTML</ACRONYM
>形式が有効になっている場合は、デフォルトの位置揃えされたテキスト形式に戻します。
このコマンドは互換性と簡便性のために存在します。
他の出力オプションについては、<TT
CLASS="COMMAND"
>\pset</TT
>を参照してください。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\i</TT
>または<TT
CLASS="LITERAL"
>\include</TT
> <TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
></DT
><DD
><P
><TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
>ファイルから入力を読み取り、キーボードから入力された場合と同じように実行します。
        </P
><P
><TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
>が<TT
CLASS="LITERAL"
>-</TT
>（ハイフン）の場合、EOFを示すもの、または<TT
CLASS="COMMAND"
>\q</TT
>メタコマンドが読まれるまで標準入力から読み込みます。
これは対話的な入力とファイルからの入力を混在させるために使うことができます。
Readlineと同じ挙動は、それが最も外部のレベルで動作している場合にのみ利用されることに注意してください。
        </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>読み取られた行を画面に表示させる場合は、<TT
CLASS="VARNAME"
>ECHO</TT
>変数を<TT
CLASS="LITERAL"
>all</TT
>に設定する必要があります。
        </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="LITERAL"
>\ir</TT
>または<TT
CLASS="LITERAL"
>\include_relative</TT
> <TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
></DT
><DD
><P
><TT
CLASS="LITERAL"
>\ir</TT
>コマンドは<TT
CLASS="LITERAL"
>\i</TT
>と似ていますが、相対ファイル名の解決方法が異なります。
対話モードで実行している場合は２つのコマンドの動作は同一です。
しかし、スクリプトから呼び出す場合、<TT
CLASS="LITERAL"
>\ir</TT
>は、現在の作業ディレクトリではなく、そのスクリプトの格納ディレクトリから見た相対ファイル名として解釈します。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\l[+]</TT
> または <TT
CLASS="LITERAL"
>\list[+] [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>サーバ内のデータベースについて、その名前、所有者、文字セット符号化方式、アクセス権限を一覧表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>を指定すると、パターンにマッチする名前を持つデータベースのみを表示します。
コマンド名に<TT
CLASS="LITERAL"
>+</TT
>を付けると、データベースのサイズ、デフォルトのテーブル空間、説明も表示します。
（サイズ情報は現在のユーザが接続可能なデータベースでのみ表示されます。）
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\lo_export <TT
CLASS="REPLACEABLE"
><I
>loid</I
></TT
> <TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
></TT
></DT
><DD
><P
>データベースから<ACRONYM
CLASS="ACRONYM"
>OID</ACRONYM
>が<TT
CLASS="REPLACEABLE"
><I
>loid</I
></TT
>であるラージオブジェクトを読み取り、<TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
>に書き出します。
これは<CODE
CLASS="FUNCTION"
>lo_export</CODE
>サーバ関数とは微妙に異なります。
<CODE
CLASS="FUNCTION"
>lo_export</CODE
>関数は、データベースサーバを実行しているユーザ権限で、サーバ上のファイルシステムに対して動作します。
        </P
><DIV
CLASS="TIP"
><BLOCKQUOTE
CLASS="TIP"
><P
><B
>ティップ: </B
>ラージオブジェクトの<ACRONYM
CLASS="ACRONYM"
>OID</ACRONYM
>を確認するには、<TT
CLASS="COMMAND"
>\lo_list</TT
>を使用してください。
        </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="LITERAL"
>\lo_import <TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
> [ <TT
CLASS="REPLACEABLE"
><I
>comment</I
></TT
> ]</TT
></DT
><DD
><P
>ファイルを<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>のラージオブジェクトに保存します。
オプションで、そのオブジェクトに指定したコメントを関連付けることができます。
下記に例を示します。
</P><PRE
CLASS="PROGRAMLISTING"
>foo=&gt; <KBD
CLASS="USERINPUT"
>\lo_import '/home/peter/pictures/photo.xcf' 'a picture of me'</KBD
>
lo_import 152801</PRE
><P>
上の応答は、指定したラージオブジェクトがオブジェクトID 152801として受け付けられたことを示します。
今後この新規作成されたラージオブジェクトにアクセスする場合に、この番号が使用できます。
可読性を高めるために、常に全てのオブジェクトに人間がわかるようなコメントを関連付けることが推奨されます。
<TT
CLASS="COMMAND"
>\lo_list</TT
>コマンドではOIDとコメントの両方が表示されます。
        </P
><P
>このコマンドは、ローカルなユーザによってローカルなファイルシステムに対して動作します。一方、サーバ側の<CODE
CLASS="FUNCTION"
>lo_import</CODE
>は、サーバのユーザによってサーバ上のファイルシステムに対して動作します。
このコマンドとサーバ側の<CODE
CLASS="FUNCTION"
>lo_import</CODE
>は、この点で微妙に異なっています。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\lo_list</TT
></DT
><DD
><P
>現在データベースに保存されている全ての<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>ラージオブジェクトの一覧を、そのオブジェクトに付けられたコメントと一緒に表示します。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\lo_unlink <TT
CLASS="REPLACEABLE"
><I
>loid</I
></TT
></TT
></DT
><DD
><P
><ACRONYM
CLASS="ACRONYM"
>OID</ACRONYM
>が<TT
CLASS="REPLACEABLE"
><I
>loid</I
></TT
>であるラージオブジェクトをデータベースから削除します。
        </P
><DIV
CLASS="TIP"
><BLOCKQUOTE
CLASS="TIP"
><P
><B
>ティップ: </B
>ラージオブジェクトの<ACRONYM
CLASS="ACRONYM"
>OID</ACRONYM
>を確認するには、<TT
CLASS="COMMAND"
>\lo_list</TT
>を使用してください。
        </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="LITERAL"
>\o</TT
>または<TT
CLASS="LITERAL"
>\out [ <TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
> ]</TT
><BR><TT
CLASS="LITERAL"
>\o</TT
>または<TT
CLASS="LITERAL"
>\out [ |<TT
CLASS="REPLACEABLE"
><I
>command</I
></TT
> ]</TT
></DT
><DD
><P
>以降の問い合わせの結果を、<TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
>で指定されたファイルに保存するか、またはシェルコマンド<TT
CLASS="REPLACEABLE"
><I
>command</I
></TT
>にパイプで渡すようにします。
引数がない場合、問い合わせの出力はリセットされて標準出力になります。
        </P
><P
><SPAN
CLASS="QUOTE"
>"問い合わせの結果"</SPAN
>には、全てのテーブル、コマンドの応答、データベースサーバからの注意メッセージだけでなく、データベースに問い合わせを行う（<TT
CLASS="COMMAND"
>\d</TT
>のような）各種バックスラッシュコマンドの出力が含まれます。ただし、エラーメッセージは含まれません。
        </P
><DIV
CLASS="TIP"
><BLOCKQUOTE
CLASS="TIP"
><P
><B
>ティップ: </B
>問い合わせの結果の間にテキストを挿入するには、<TT
CLASS="COMMAND"
>\qecho</TT
>を使用してください。
        </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="LITERAL"
>\p</TT
>または<TT
CLASS="LITERAL"
>\print</TT
></DT
><DD
><P
>現在の問い合わせバッファを標準出力に書き出します。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\password [ <TT
CLASS="REPLACEABLE"
><I
>username</I
></TT
> ]</TT
></DT
><DD
><P
>指定したユーザ（デフォルトは現在のユーザ）のパスワードを変更します。
このコマンドは、新しいパスワードを促し、暗号化して、それを<TT
CLASS="COMMAND"
>ALTER ROLE</TT
>コマンドとしてサーバに送信します。
これによりコマンド履歴やサーバログなどどこにも新しいパスワードが平文では残りません。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\prompt [ <TT
CLASS="REPLACEABLE"
><I
>text</I
></TT
> ] <TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
></TT
></DT
><DD
><P
>変数<TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
>に代入するテキストを入力するようにユーザを促します。
プロンプト<TT
CLASS="REPLACEABLE"
><I
>text</I
></TT
>をオプションで指定することができます。
（複数の単語をプロンプトで使用する場合はそのテキストを単一引用符でくくってください。）
        </P
><P
>デフォルトでは<TT
CLASS="LITERAL"
>\prompt</TT
>は入出力に端末を使用します。
しかし、<TT
CLASS="OPTION"
>-f</TT
>コマンドラインスイッチが使用されている場合、<TT
CLASS="LITERAL"
>\prompt</TT
>は標準入力、標準出力を使用します。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\pset [ <TT
CLASS="REPLACEABLE"
><I
>option</I
></TT
> [ <TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
> ] ]</TT
></DT
><DD
><P
>このコマンドは問い合わせ結果のテーブル出力に影響するオプションを設定します。
<TT
CLASS="REPLACEABLE"
><I
>option</I
></TT
>には、どのオプションを設定するのかを記述します。
<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>の意味は選択したオプションにより変わります。
以下のオプション別の説明の通り、オプションの中には<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>を省略することでトグルや設定解除を行うものがあります。
こうした動作の記載がなければ、<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>を省略すると、単に現在の設定値が表示されることになります。
        </P
><P
>何も引数をつけずに<TT
CLASS="COMMAND"
>\pset</TT
>を実行すると、すべての表示オプションの現在の状態を表示します。
        </P
><P
>以下は、表示の調整に関するオプションです。
        <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="LITERAL"
>border</TT
></DT
><DD
><P
><TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>は数値でなければなりません。
基本的には、この数字が大きくなればなるほど、表示するテーブルが持つ境界線は増えますが、詳細はそれぞれの出力形式に依存しています。
<ACRONYM
CLASS="ACRONYM"
>HTML</ACRONYM
>書式では、この値は直接<TT
CLASS="LITERAL"
>border=...</TT
>属性に反映されます。
他のほとんどの書式の場合は、0（境界線なし）、1（内側の境界線）、2（テーブル枠）という3つの数値のみ意味を持ち、2より大きな値は<TT
CLASS="LITERAL"
>border = 2</TT
>と同じとして扱われます。
<TT
CLASS="LITERAL"
>latex</TT
>および<TT
CLASS="LITERAL"
>latex-longtable</TT
>書式では、さらにデータ行の間に境界線を付ける、3という値をとることができます。
          </P
></DD
><DT
><TT
CLASS="LITERAL"
>columns</TT
></DT
><DD
><P
><TT
CLASS="LITERAL"
>wrapped</TT
>書式の対象幅を設定し、そして、ページャを必要とする、拡張自動モードにおける縦表示への切替えに十分な幅で出力するかどうかを決定する幅制限を設定します。
ゼロ（デフォルト）では、環境変数<TT
CLASS="ENVAR"
>COLUMNS</TT
>、もし<TT
CLASS="ENVAR"
>COLUMNS</TT
>が設定されていなければ、検出したスクリーンの幅、により対象幅が制御されます。
さらに<TT
CLASS="LITERAL"
>columns</TT
>がゼロの場合、<TT
CLASS="LITERAL"
>wrapped</TT
>書式はスクリーン出力にのみ影響を与えることになります。
<TT
CLASS="LITERAL"
>columns</TT
>が非ゼロの場合は、ファイルやパイプへの出力も同様に折り返されます。
          </P
></DD
><DT
><TT
CLASS="LITERAL"
>expanded</TT
> (または<TT
CLASS="LITERAL"
>x</TT
>)</DT
><DD
><P
><TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>を指定する場合は、拡張(expanded)モードを有効または無効にする<TT
CLASS="LITERAL"
>on</TT
>または<TT
CLASS="LITERAL"
>off</TT
>、あるいは<TT
CLASS="LITERAL"
>auto</TT
>のいずれかでなければなりません。
<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>を省略した場合、このコマンドは通常モードと拡張モードの設定をトグルします。
拡張モードを有効にした場合、問い合わせ結果は左に列名、右にデータという2つの列で出力されます。
このモードは、データが通常の<SPAN
CLASS="QUOTE"
>"水平(horizontal)"</SPAN
>モードによる画面表示に適していない場合に有用です。
自動(auto)設定の場合、問い合わせの出力が2列以上でかつ画面幅より広ければ拡張モードが使用され、そうでなければ通常モードが使用されます。
自動設定は位置揃え書式または折り返し書式でのみ有効です。
この他の書式では、常に拡張モードが無効の場合と同様に動作します。
          </P
></DD
><DT
><TT
CLASS="LITERAL"
>fieldsep</TT
></DT
><DD
><P
>位置揃えなしの出力書式で使用されるフィールド区切り文字を指定します。
これにより、例えばタブ区切り、カンマ区切りといった他プログラムに要求される形式を作成することができます。
タブをフィールド区切り文字として使用するには、<TT
CLASS="LITERAL"
>\pset fieldsep '\t'</TT
>と入力します。
デフォルトのフィールド区切り文字は<TT
CLASS="LITERAL"
>'|'</TT
>（縦棒）です。
          </P
></DD
><DT
><TT
CLASS="LITERAL"
>fieldsep_zero</TT
></DT
><DD
><P
>位置揃えなしの出力書式で使用されるフィールド区切り文字をゼロバイトに指定します。
          </P
></DD
><DT
><TT
CLASS="LITERAL"
>footer</TT
></DT
><DD
><P
><TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>を指定する場合、それぞれテーブルフッタの表示(<TT
CLASS="LITERAL"
>(<TT
CLASS="REPLACEABLE"
><I
>n</I
></TT
> rows)</TT
>数)を有効にする<TT
CLASS="LITERAL"
>on</TT
>または無効にする<TT
CLASS="LITERAL"
>off</TT
>のいずれかでなければなりません。
<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>を省略した場合、このコマンドはフッタの表示、非表示をトグルします。
          </P
></DD
><DT
><TT
CLASS="LITERAL"
>format</TT
></DT
><DD
><P
>出力形式を<TT
CLASS="LITERAL"
>unaligned</TT
>、<TT
CLASS="LITERAL"
>aligned</TT
>、<TT
CLASS="LITERAL"
>wrapped</TT
>、<TT
CLASS="LITERAL"
>html</TT
>、<TT
CLASS="LITERAL"
>asciidoc</TT
>、<TT
CLASS="LITERAL"
>latex</TT
> (<TT
CLASS="LITERAL"
>tabular</TT
>を使用)、<TT
CLASS="LITERAL"
>latex-longtable</TT
>または<TT
CLASS="LITERAL"
>troff-ms</TT
>.のいずれかに設定します。
一意に判別できる範囲で省略が可能です
（つまり、1文字でも十分であるということです）。
          </P
><P
><TT
CLASS="LITERAL"
>unaligned</TT
>書式は、表示行の1行に1つの行の全列を、現在有効なフィールド区切り文字で区切って書き出します。
これは他のプログラムに読み込ませることを目的とした出力(例えばタブ区切りやカンマ区切り書式)を生成する場合に有用です。
          </P
><P
><TT
CLASS="LITERAL"
>aligned</TT
>書式は、標準的で人間が読みやすいように、美しく整形されたテキスト出力です。
これがデフォルトです。
          </P
><P
><TT
CLASS="LITERAL"
>wrapped</TT
>書式は<TT
CLASS="LITERAL"
>aligned</TT
>と似ていますが、幅の広いデータ値を複数行に折り返して対象の列幅に合うように出力します。
対象の幅は<TT
CLASS="LITERAL"
>columns</TT
>オプションの項に記述されているように決定されます。
<SPAN
CLASS="APPLICATION"
>psql</SPAN
>は列ヘッダタイトルを折り返さないことに注意して下さい。
このため<TT
CLASS="LITERAL"
>wrapped</TT
>書式は列ヘッダに必要とする幅全体が対象より長い場合、<TT
CLASS="LITERAL"
>aligned</TT
>と動作が同じになります。
          </P
><P
><TT
CLASS="LITERAL"
>html</TT
>、<TT
CLASS="LITERAL"
>asciidoc</TT
>、<TT
CLASS="LITERAL"
>latex</TT
>、<TT
CLASS="LITERAL"
>latex-longtable</TT
>および<TT
CLASS="LITERAL"
>troff-ms</TT
>書式は対応するマークアップ言語を使用する文書内に含めることを目的とした表を出力します。
出力自体は完全な文書ではありません。
<ACRONYM
CLASS="ACRONYM"
>HTML</ACRONYM
>では必要性がないかもしれませんが、<SPAN
CLASS="APPLICATION"
>LaTeX</SPAN
>では完全な文書ラッパを持たせなければなりません。
<TT
CLASS="LITERAL"
>latex-longtable</TT
>では<SPAN
CLASS="APPLICATION"
>LaTeX</SPAN
>の<TT
CLASS="LITERAL"
>longtable</TT
>および<TT
CLASS="LITERAL"
>booktabs</TT
>パッケージも必要です。
          </P
></DD
><DT
><TT
CLASS="LITERAL"
>linestyle</TT
></DT
><DD
><P
>境界線の表示形式を<TT
CLASS="LITERAL"
>ascii</TT
>、<TT
CLASS="LITERAL"
>old-ascii</TT
>または<TT
CLASS="LITERAL"
>unicode</TT
>のいずれかに設定します。
一意になれば省略形が許されます。（つまり一文字で十分であることを意味します。）
デフォルトの設定は<TT
CLASS="LITERAL"
>ascii</TT
>です。
このオプションは<TT
CLASS="LITERAL"
>aligned</TT
>および<TT
CLASS="LITERAL"
>wrapped</TT
>出力書式のみで有効です。
          </P
><P
><TT
CLASS="LITERAL"
>ascii</TT
>形式は通常の<ACRONYM
CLASS="ACRONYM"
>ASCII</ACRONYM
>を使用します。
データ内の改行は右側余白に<TT
CLASS="LITERAL"
>+</TT
>を使用して表します。
<TT
CLASS="LITERAL"
>wrapped</TT
>書式で、改行文字のない行が2行にまたがるときは、先頭行の右側余白にドット(.)を表示し、次の行の左側余白にもドットを表示します。
          </P
><P
><TT
CLASS="LITERAL"
>old-ascii</TT
>形式は通常の<ACRONYM
CLASS="ACRONYM"
>ASCII</ACRONYM
>文字を使用して、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> 8.4以前で使用されていた方法で整形します。
データ内の改行は列区切りの左側に<TT
CLASS="LITERAL"
>:</TT
>記号を使用して表します。
データを改行文字なしに折り返す際には、列区切りの左側に<TT
CLASS="LITERAL"
>;</TT
>記号を使用して表します。
          </P
><P
><TT
CLASS="LITERAL"
>unicode</TT
>形式はUnicode矩形描画文字を使用します。
データ内の改行は右側の余白に復帰記号を使用して表します。
データを改行文字なしに折り返す際には、省略記号を先頭行の右側余白に表示し、次の行の左側余白にも表示します。
          </P
><P
><TT
CLASS="LITERAL"
>border</TT
>設定がゼロより大きい場合、<TT
CLASS="LITERAL"
>linestyle</TT
>オプションはまた、境界線を描画する文字も決定します。
通常の<ACRONYM
CLASS="ACRONYM"
>ASCII</ACRONYM
>文字はどのような場合でも動作しますが、Unicode文字が表示できる環境では、その方が見た目が良くなります。
          </P
></DD
><DT
><TT
CLASS="LITERAL"
>null</TT
></DT
><DD
><P
>null値の代わりに表示する文字列を設定します。
デフォルトでは何も表示しません。
そのため、よく空の文字列と間違うことがあります。
例えば<TT
CLASS="LITERAL"
>\pset null '(null)'</TT
>とする人もいます。
          </P
></DD
><DT
><TT
CLASS="LITERAL"
>numericlocale</TT
></DT
><DD
><P
><TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>を指定する場合、それぞれ10進数マーカの左に桁のくくりを分離するロケール固有の文字を表示する<TT
CLASS="LITERAL"
>on</TT
>または表示しない<TT
CLASS="LITERAL"
>off</TT
>のいずれかでなければなりません。
<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>を省略した場合、このコマンドは通常出力かロケール固有の数値出力かをトグルします。
          </P
></DD
><DT
><TT
CLASS="LITERAL"
>pager</TT
></DT
><DD
><P
>問い合わせおよび<SPAN
CLASS="APPLICATION"
>psql</SPAN
>のヘルプを出力する際の、ページャプログラムの使用を制御します。
環境変数<TT
CLASS="ENVAR"
>PAGER</TT
>が設定されている場合、出力は指定したプログラムにパイプで渡されます。
<TT
CLASS="ENVAR"
>PAGER</TT
>が設定されていない場合は、プラットフォーム依存のデフォルト（<TT
CLASS="FILENAME"
>more</TT
>など）が使用されます。
          </P
><P
><TT
CLASS="LITERAL"
>pager</TT
>オプションが<TT
CLASS="LITERAL"
>off</TT
>の場合、ページャプログラムは使用されません。
<TT
CLASS="LITERAL"
>pager</TT
>オプションが<TT
CLASS="LITERAL"
>on</TT
>の場合、ページャは適切な場合、つまり出力先が端末であり、その画面に収まらない場合に使用されます。
また<TT
CLASS="LITERAL"
>pager</TT
>オプションは<TT
CLASS="LITERAL"
>always</TT
>に設定することもできます。
こうすると画面に収まるかどうかに関わらずすべての端末出力でページャが使用されます。
<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>を指定しない<TT
CLASS="LITERAL"
>\pset pager</TT
>はページャの使用をトグルします。
          </P
></DD
><DT
><TT
CLASS="LITERAL"
>pager_min_lines</TT
></DT
><DD
><P
><TT
CLASS="LITERAL"
>pager_min_lines</TT
>がページ高より大きな数に設定されている場合、少なくともこれに設定されている行数の出力がなければ、ページャプログラムを呼び出しません。
デフォルトの設定は0です。
          </P
></DD
><DT
><TT
CLASS="LITERAL"
>recordsep</TT
></DT
><DD
><P
>位置揃えなしの出力書式で使用されるレコード（行）の区切り文字を指定します。
デフォルトは改行文字です。
          </P
></DD
><DT
><TT
CLASS="LITERAL"
>recordsep_zero</TT
></DT
><DD
><P
>位置揃えなしの出力書式で使用されるレコードの区切り文字をゼロバイトに指定します。
          </P
></DD
><DT
><TT
CLASS="LITERAL"
>tableattr</TT
> (または <TT
CLASS="LITERAL"
>T</TT
>)</DT
><DD
><P
><TT
CLASS="LITERAL"
>html</TT
>出力書式では、これは<CODE
CLASS="SGMLTAG"
>table</CODE
>タグ内に記述する属性を指定します。
これを使用して、例えば、<TT
CLASS="LITERAL"
>cellpadding</TT
>や<TT
CLASS="LITERAL"
>bgcolor</TT
>を指定することができます。
<TT
CLASS="LITERAL"
>border</TT
>属性は既に<TT
CLASS="LITERAL"
>\pset border</TT
>によって処理されているので、このコマンドで<TT
CLASS="LITERAL"
>border</TT
>を指定する必要はないでしょう。
<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>の指定がない場合、テーブル属性の設定は解除されます。
          </P
><P
><TT
CLASS="LITERAL"
>latex-longtable</TT
>書式では、これは
左揃えされたデータ型を含む各列の幅の比率を制御します。
空白文字で区切られた値のリスト、例えば<TT
CLASS="LITERAL"
>'0.2 0.2 0.6'</TT
>として指定します。
指定がない出力列は最後に指定された値を使用します。
          </P
></DD
><DT
><TT
CLASS="LITERAL"
>title</TT
> (または <TT
CLASS="LITERAL"
>C</TT
>)</DT
><DD
><P
>今後表示される全てのテーブル用にテーブルタイトルを設定します。
これは出力に説明のためのタグを付けたい場合に有用です。
<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>がない場合、タイトルの設定が解除されます。
          </P
></DD
><DT
><TT
CLASS="LITERAL"
>tuples_only</TT
> (または <TT
CLASS="LITERAL"
>t</TT
>)</DT
><DD
><P
><TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>を指定する場合、それぞれタプルのみの表示を有効にする、<TT
CLASS="LITERAL"
>on</TT
>または無効にする<TT
CLASS="LITERAL"
>off</TT
>のいずれかでなければなりません。
<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>を省略した場合、このコマンドはタプルのみの表示と通常表示をトグルします。
通常表示では列のヘッダ、タイトル、各種フッタなどのその他の情報が追加されます。
タプルのみのモードでは、テーブルの実データのみが表示されます。
          </P
></DD
><DT
><TT
CLASS="LITERAL"
>unicode_border_linestyle</TT
></DT
><DD
><P
><TT
CLASS="LITERAL"
>unicode</TT
>の線の形式の境界の形式を<TT
CLASS="LITERAL"
>single</TT
>または<TT
CLASS="LITERAL"
>double</TT
>のどちらかに設定します。
          </P
></DD
><DT
><TT
CLASS="LITERAL"
>unicode_column_linestyle</TT
></DT
><DD
><P
><TT
CLASS="LITERAL"
>unicode</TT
>の線の形式の列の形式を<TT
CLASS="LITERAL"
>single</TT
>または<TT
CLASS="LITERAL"
>double</TT
>のどちらかに設定します。
          </P
></DD
><DT
><TT
CLASS="LITERAL"
>unicode_header_linestyle</TT
></DT
><DD
><P
><TT
CLASS="LITERAL"
>unicode</TT
>の線の形式のヘッダの形式を<TT
CLASS="LITERAL"
>single</TT
>または<TT
CLASS="LITERAL"
>double</TT
>のどちらかに設定します。
          </P
></DD
></DL
></DIV
><P>
        </P
><P
><A
HREF="app-psql.html#APP-PSQL-EXAMPLES"
><I
>例</I
></A
>節に、これらの書式がどのように見えるかを示した図があります。
        </P
><DIV
CLASS="TIP"
><BLOCKQUOTE
CLASS="TIP"
><P
><B
>ティップ: </B
><TT
CLASS="COMMAND"
>\pset</TT
>には各種のショートカットコマンドがあります。
<TT
CLASS="COMMAND"
>\a</TT
>、<TT
CLASS="COMMAND"
>\C</TT
>、<TT
CLASS="COMMAND"
>\H</TT
>、<TT
CLASS="COMMAND"
>\t</TT
>、<TT
CLASS="COMMAND"
>\T</TT
>、<TT
CLASS="COMMAND"
>\x</TT
>を参照してください。
        </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="LITERAL"
>\q</TT
>または<TT
CLASS="LITERAL"
>\quit</TT
></DT
><DD
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>プログラムを終了します。
スクリプトファイルでは、そのスクリプトの実行のみが終了します。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\qecho <TT
CLASS="REPLACEABLE"
><I
>text</I
></TT
> [ ... ] </TT
></DT
><DD
><P
>このコマンドは、<TT
CLASS="COMMAND"
>\echo</TT
>と同じです。
ただし、出力が<TT
CLASS="COMMAND"
>\o</TT
>により設定された問い合わせ出力チャネルに書き出される点が異なります。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\r</TT
>または<TT
CLASS="LITERAL"
>\reset</TT
></DT
><DD
><P
>問い合わせバッファをリセット（クリア）します。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\s [ <TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
> ]</TT
></DT
><DD
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>のコマンドラインの履歴を<TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
>に出力します。
<TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
>が省略された場合、履歴は標準出力に書き出されます(適切であればページャを使います)。
このコマンドは、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>が<SPAN
CLASS="APPLICATION"
>Readline</SPAN
>サポートなしの状態でビルドされた場合は利用できません。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\set [ <TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
> [ <TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
> [ ... ] ] ]</TT
></DT
><DD
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>の変数<TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
>を<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>、または複数のvalueが与えられた場合はそれらを連結したものに設定します。
第一引数しか指定されない場合は、変数に空の値を設定されます。
変数を未設定とするには、<TT
CLASS="COMMAND"
>\unset</TT
>コマンドを使用してください。
        </P
><P
>引数をまったく取らない<TT
CLASS="COMMAND"
>\set</TT
>は、現在設定されている<SPAN
CLASS="APPLICATION"
>psql</SPAN
>変数すべての名前と値を表示します。
        </P
><P
>変数名には、文字、数字、アンダースコアを使用することができます。
詳細は、後述の<A
HREF="app-psql.html#APP-PSQL-VARIABLES"
><I
>変数</I
></A
>を参照してください。
変数名は大文字小文字を区別します。
        </P
><P
>必要ならば任意の変数に任意の値を設定できますが、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>はいくつかの変数を特別なものとして扱っています。
これらについては変数に関する節にて説明します。
        </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>このコマンドは<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>の<A
HREF="sql-set.html"
>SET</A
>コマンドとは関係ありません。
        </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="LITERAL"
>\setenv <TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
> [ <TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
> ]</TT
></DT
><DD
><P
>環境変数<TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
>を<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>に設定します。
<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>が与えられない場合は、その環境変数を未設定状態にします。
以下に例を示します。
</P><PRE
CLASS="PROGRAMLISTING"
>testdb=&gt; <KBD
CLASS="USERINPUT"
>\setenv PAGER less</KBD
>
testdb=&gt; <KBD
CLASS="USERINPUT"
>\setenv LESS -imx4F</KBD
></PRE
><P></P
></DD
><DT
><TT
CLASS="LITERAL"
>\sf[+] <TT
CLASS="REPLACEABLE"
><I
>function_description</I
></TT
> </TT
></DT
><DD
><P
>このコマンドは、<TT
CLASS="COMMAND"
>CREATE OR REPLACE FUNCTION</TT
>コマンドの形式で、指定された関数の定義を抽出し表示します。
この定義は、<TT
CLASS="COMMAND"
>\o</TT
>で設定された現在の問い合わせ出力チャネルに出力されます。
        </P
><P
>対象の関数は、名前だけまたは、例えば<TT
CLASS="LITERAL"
>foo(integer, text)</TT
>のように名前と引数で指定することができます。
同じ名前の関数が複数存在する場合は、引数の型を指定しなければなりません。
        </P
><P
>コマンド名に<TT
CLASS="LITERAL"
>+</TT
>を付けると、出力行に関数本体の先頭行を1行目と数える行番号が付けられます。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\sv[+] <TT
CLASS="REPLACEABLE"
><I
>view_name</I
></TT
> </TT
></DT
><DD
><P
>このコマンドは、指定したビューの定義を<TT
CLASS="COMMAND"
>CREATE OR REPLACE VIEW</TT
>コマンドの形式で取得して表示します。
定義は現在の問い合わせの出力チャネルに表示されます。
これは<TT
CLASS="COMMAND"
>\o</TT
>で設定できます。
         </P
><P
>コマンド名の後に<TT
CLASS="LITERAL"
>+</TT
>が付加された場合は、出力行に1から番号が付けられます。
         </P
></DD
><DT
><TT
CLASS="LITERAL"
>\t</TT
></DT
><DD
><P
>出力列名ヘッダと行数フッタの表示を切り替えます。
このコマンドは<TT
CLASS="LITERAL"
>\pset tuples_only</TT
>と同じで、簡便性のために用意されています。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\T <TT
CLASS="REPLACEABLE"
><I
>table_options</I
></TT
></TT
></DT
><DD
><P
><ACRONYM
CLASS="ACRONYM"
>HTML</ACRONYM
>出力書式における<CODE
CLASS="SGMLTAG"
>table</CODE
>タグ内部に記述する属性を指定します。
このコマンドは<TT
CLASS="LITERAL"
>\pset tableattr <TT
CLASS="REPLACEABLE"
><I
>table_options</I
></TT
></TT
>と同じ効力を持ちます。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\timing [ <TT
CLASS="REPLACEABLE"
><I
>on</I
></TT
> | <TT
CLASS="REPLACEABLE"
><I
>off</I
></TT
> ]</TT
></DT
><DD
><P
>パラメータがない場合、各SQL文にかかる時間（ミリ秒単位）の表示の有無を切り替えます。
パラメータがある場合、指定した通りに設定します。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\unset <TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
></TT
></DT
><DD
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>変数<TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
>を未設定状態にします（削除します）。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\w</TT
>または<TT
CLASS="LITERAL"
>\write</TT
> <TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
><BR><TT
CLASS="LITERAL"
>\w</TT
>または<TT
CLASS="LITERAL"
>\write</TT
> <TT
CLASS="LITERAL"
>|</TT
><TT
CLASS="REPLACEABLE"
><I
>command</I
></TT
></DT
><DD
><P
>現在の問い合わせバッファを、<TT
CLASS="REPLACEABLE"
><I
>filename</I
></TT
>ファイルに出力するか、もしくは、シェルコマンド<TT
CLASS="REPLACEABLE"
><I
>command</I
></TT
>にパイプで渡します。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\watch [ <TT
CLASS="REPLACEABLE"
><I
>seconds</I
></TT
> ]</TT
></DT
><DD
><P
>中断するか問い合わせが失敗するまで、現在の問い合わせバッファを繰り返し（<TT
CLASS="LITERAL"
>\g</TT
>と同じように）実行します。
実行の間に指定秒数(デフォルトは2)の休止が入ります。
各問い合わせの結果には、<TT
CLASS="LITERAL"
>\pset title</TT
>の文字列（あれば）、問い合わせ開始時の時刻、および遅延間隔を含むヘッダとともに表示されます。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\x [ <TT
CLASS="REPLACEABLE"
><I
>on</I
></TT
> | <TT
CLASS="REPLACEABLE"
><I
>off</I
></TT
> | <TT
CLASS="REPLACEABLE"
><I
>auto</I
></TT
> ]</TT
></DT
><DD
><P
>拡張テーブル形式モードを設定またはトグルします。
従って、このコマンドは<TT
CLASS="LITERAL"
>\pset expanded</TT
>と同じ効力を持ちます。
       </P
></DD
><DT
><TT
CLASS="LITERAL"
>\z [ <A
HREF="app-psql.html#APP-PSQL-PATTERNS"
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></A
> ]</TT
></DT
><DD
><P
>テーブル、ビュー、シーケンスを、関連付けられているアクセス権限とともに一覧表示します。
<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>を指定すると、パターンに名前がマッチするテーブル、ビュー、シーケンスのみが表示されます。
        </P
><P
>これは<TT
CLASS="COMMAND"
>\dp</TT
>（<SPAN
CLASS="QUOTE"
>"権限の表示（display privileges）"</SPAN
>）の別名です。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\! [ <TT
CLASS="REPLACEABLE"
><I
>command</I
></TT
> ]</TT
></DT
><DD
><P
>別のシェルを起動するか、もしくは、シェルコマンド<TT
CLASS="REPLACEABLE"
><I
>command</I
></TT
>を実行します。
引数はこれ以上解釈されず、そのままシェルに渡されます。
特に、変数置換規則やバックスラッシュエスケープは適用されません。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>\? [ <TT
CLASS="REPLACEABLE"
><I
>topic</I
></TT
> ]</TT
></DT
><DD
><P
>ヘルプ情報を表示します。
オプションの<TT
CLASS="REPLACEABLE"
><I
>topic</I
></TT
>パラメータ（デフォルトは<TT
CLASS="LITERAL"
>commands</TT
>）は<SPAN
CLASS="APPLICATION"
>psql</SPAN
>のどの部分を説明するかを選択します。
<TT
CLASS="LITERAL"
>commands</TT
>は<SPAN
CLASS="APPLICATION"
>psql</SPAN
>のバックスラッシュコマンドについて、<TT
CLASS="LITERAL"
>options</TT
>は<SPAN
CLASS="APPLICATION"
>psql</SPAN
>に渡すことができるコマンド行オプションについて、<TT
CLASS="LITERAL"
>variables</TT
>は<SPAN
CLASS="APPLICATION"
>psql</SPAN
>の設定変数についてのヘルプを表示します。
        </P
></DD
></DL
></DIV
><P>
  </P
><DIV
CLASS="REFSECT3"
><A
NAME="APP-PSQL-PATTERNS"
></A
><H4
>パターン</H4
><P
>各種<TT
CLASS="LITERAL"
>\d</TT
>コマンドでは、<TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>パラメータを渡して、表示するオブジェクト名を指定することができます。
最も単純な場合では、パターンが正確にオブジェクト名に一致します。
パターン内の文字は、SQLの名前と同様、通常小文字に変換されます。
例えば<TT
CLASS="LITERAL"
>\dt FOO</TT
>は<TT
CLASS="LITERAL"
>foo</TT
>という名前のテーブルを表示します。
SQLの名前と同様、パターンを二重引用符で括ることで小文字への変換が取り止められます。
二重引用符自体をパターン内に含めなければならない場合、二重引用符で括った文字列の中で二重引用符を二重に記載してください。
これもSQLの引用符付き識別子の規則に従ったものです。
例えば、<TT
CLASS="LITERAL"
>\dt "FOO""BAR"</TT
>は<TT
CLASS="LITERAL"
>FOO"BAR</TT
>という名前のテーブルを表示します（<TT
CLASS="LITERAL"
>foo"bar</TT
>ではありません）。
SQLの名前と異なり、パターンの一部を二重引用符で括ることができます。
例えば、<TT
CLASS="LITERAL"
>\dt FOO"FOO"BAR</TT
>は<TT
CLASS="LITERAL"
>fooFOObar</TT
>という名前のテーブルを表示します。
  </P
><P
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
>パラメータが完全に省略されている場合、<TT
CLASS="LITERAL"
>\d</TT
>コマンドは現在のスキーマ検索パス内で可視のオブジェクトを全て表示します。
これは<TT
CLASS="LITERAL"
>*</TT
>というパターンを使用することと同じです。
(オブジェクトを含むスキーマが検索パス上にあり、同じ種類かつ同じ名前のオブジェクトが検索パス上それより前に存在しない場合、そのオブジェクトは<I
CLASS="FIRSTTERM"
>可視</I
>であるといいます。
これは明示的なスキーマ修飾がない名前でオブジェクトを参照できるということと同じです。)
可視か否かに関わらずデータベース内の全てのオブジェクトを表示するには、<TT
CLASS="LITERAL"
>*.*</TT
>というパターンを使用します。
  </P
><P
>パターン内部では、<TT
CLASS="LITERAL"
>*</TT
>は（0文字を含む）任意の文字の並びにマッチし、<TT
CLASS="LITERAL"
>?</TT
>は任意の1文字にマッチします。
（この記法はUnixシェルのファイル名パターンと似ています。）
例えば、<TT
CLASS="LITERAL"
>\dt int*</TT
>は、<TT
CLASS="LITERAL"
>int</TT
>から始まる名前を持つテーブルを表示します。
しかし、二重引用符の中では、<TT
CLASS="LITERAL"
>*</TT
>と<TT
CLASS="LITERAL"
>?</TT
>はその特別な意味を失い、文字そのものにマッチします。
  </P
><P
>ドット(<TT
CLASS="LITERAL"
>.</TT
>)を含むパターンは、スキーマ名にオブジェクト名が続くパターンとして解釈されます。
例えば、<TT
CLASS="LITERAL"
>\dt foo*.*bar*</TT
>は、スキーマ名が<TT
CLASS="LITERAL"
>foo</TT
>で始まるスキーマ内のテーブル名が<TT
CLASS="LITERAL"
>bar</TT
>を含むテーブルを全て表示します。
ドットがない場合、パターンは現行のスキーマ検索パス内で可視的なオブジェクトのみにマッチします。
ここでも、二重引用符で括られた文字列内のドットは特別な意味を失い、文字そのものにマッチすることになります。
  </P
><P
>上級者は文字クラス(例えば任意の数にマッチする<TT
CLASS="LITERAL"
>[0-9]</TT
>)などの正規表現を使用することができます。
ほぼすべての正規表現の特殊文字は<A
HREF="functions-matching.html#FUNCTIONS-POSIX-REGEXP"
>項9.7.3</A
>の規定通りに動作しますが、上述のように<TT
CLASS="LITERAL"
>.</TT
>が区切り文字となる点、<TT
CLASS="LITERAL"
>*</TT
>は正規表現の<TT
CLASS="LITERAL"
>.*</TT
>になる点、<TT
CLASS="LITERAL"
>?</TT
>が<TT
CLASS="LITERAL"
>.</TT
>になる点、<TT
CLASS="LITERAL"
>$</TT
>がそのまま扱われる点は例外です。
<TT
CLASS="LITERAL"
>.</TT
>の代わりに<TT
CLASS="LITERAL"
>?</TT
>と、<TT
CLASS="LITERAL"
><TT
CLASS="REPLACEABLE"
><I
>R</I
></TT
>*</TT
>の代わりに<TT
CLASS="LITERAL"
>(<TT
CLASS="REPLACEABLE"
><I
>R</I
></TT
>+|)</TT
>と、<TT
CLASS="LITERAL"
><TT
CLASS="REPLACEABLE"
><I
>R</I
></TT
>?</TT
>の代わりに<TT
CLASS="LITERAL"
>(<TT
CLASS="REPLACEABLE"
><I
>R</I
></TT
>|)</TT
>と記述することで、これらのパターン文字を模擬することができます。
通常の正規表現の解釈と異なり、パターンは常に名前全体にマッチするため、<TT
CLASS="LITERAL"
>$</TT
>を正規表現文字として扱う必要はありません。
（言い替えると、<TT
CLASS="LITERAL"
>$</TT
>は自動的にパターンに追加されます。）
パターンの適用位置を決められない場合は、<TT
CLASS="LITERAL"
>*</TT
>を先頭や末尾に記載してください。
二重引用符の内側では、正規表現の特殊文字はその意味を失い、文字そのものにマッチすることになる点に注意してください。
また、正規表現の特殊文字は、演算子名のパターン（つまり<TT
CLASS="LITERAL"
>\do</TT
>の引数）では文字そのものにマッチします。
  </P
></DIV
></DIV
><DIV
CLASS="REFSECT2"
><A
NAME="AEN100308"
></A
><H3
>高度な機能</H3
><DIV
CLASS="REFSECT3"
><A
NAME="APP-PSQL-VARIABLES"
></A
><H4
>変数</H4
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>は一般的なUnixコマンドシェルに似た変数の置換機能を提供します。
変数とは名前と値の組み合わせです。
値として任意の長さの任意の文字列を使用できます。
名前は文字(非ラテン文字を含む)、数字、アンダースコアから構成されなければなりません。
    </P
><P
>変数を設定するには、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>の<TT
CLASS="COMMAND"
>\set</TT
>メタコマンドを以下のように使用します。
</P><PRE
CLASS="PROGRAMLISTING"
>testdb=&gt; <KBD
CLASS="USERINPUT"
>\set foo bar</KBD
></PRE
><P>
この例では、変数<TT
CLASS="LITERAL"
>foo</TT
>を<TT
CLASS="LITERAL"
>bar</TT
>という値に設定しています。
変数の内容を取り出すには、以下のように変数名の前にコロンを付けます。
</P><PRE
CLASS="PROGRAMLISTING"
>testdb=&gt; <KBD
CLASS="USERINPUT"
>\echo :foo</KBD
>
bar</PRE
><P>
これは通常のSQLコマンド内とメタコマンド内の両方で動作します。
後述の<A
HREF="app-psql.html#APP-PSQL-INTERPOLATION"
><I
><I
>SQL</I
>差し替え</I
></A
>で詳しく説明します。
    </P
><P
>第二引数なしで<TT
CLASS="COMMAND"
>\set</TT
>を呼び出すと、空文字列を値として持つ変数が設定されます。
変数を未設定状態にする(つまり削除する)ためには、<TT
CLASS="COMMAND"
>\unset</TT
>コマンドを使用してください。
すべての変数の値を表示するためには、引数なしで<TT
CLASS="COMMAND"
>\set</TT
>を呼び出してください。
    </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
><TT
CLASS="COMMAND"
>\set</TT
>の引数は他のコマンドと同じ置換規則に従います。
このため、<TT
CLASS="LITERAL"
>\set :foo 'something'</TT
>のような参照を作成して、<SPAN
CLASS="PRODUCTNAME"
>Perl</SPAN
>における<SPAN
CLASS="QUOTE"
>"ソフトリンク"</SPAN
>や<SPAN
CLASS="PRODUCTNAME"
><ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
></SPAN
>における<SPAN
CLASS="QUOTE"
>"可変変数"</SPAN
>に当たるものを得られます。
しかし、残念ながら（あるいは幸運にも）、このような構成をうまく使用する方法はありません。
一方、<TT
CLASS="LITERAL"
>\set bar :foo</TT
>のようにして変数をコピーするのは、完全に有効な方法です。
    </P
></BLOCKQUOTE
></DIV
><P
>これらの変数の多くは、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>に特別扱いされています。
これらは、変数の値を変更することにより、実行時に変更可能なオプションの設定を表現します。
また<SPAN
CLASS="APPLICATION"
>psql</SPAN
>の変更可能な状態を表現しているものもあります。
これらの変数を別の目的で使用することもできますが、即座にプログラムの動作がおかしくなる可能性があるため、推奨されません。
慣習上、特別視される変数の名前はすべてASCII大文字（と数字とアンダースコア）からなります。
将来的な互換性を最大限考慮するために、自分で作成した変数にはこのような変数名を使用しないでください。
以下に特別に取り扱われる変数の一覧を示します。
   </P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="VARNAME"
>AUTOCOMMIT</TT
>
       </DT
><DD
><P
>この変数の値が<TT
CLASS="LITERAL"
>on</TT
>の場合（これがデフォルトです）、各SQLコマンドの実行が成功すると、自動的にコミットされます。
コミットを延期するには、<TT
CLASS="COMMAND"
>BEGIN</TT
>もしくはSQLの<TT
CLASS="COMMAND"
>START TRANSACTION</TT
>コマンドを入力する必要があります。
値が<TT
CLASS="LITERAL"
>off</TT
>もしくは未設定の場合、明示的に<TT
CLASS="COMMAND"
>COMMIT</TT
>もしくは<TT
CLASS="COMMAND"
>END</TT
>を発行するまで、SQLコマンドはコミットされません。
自動コミット無効モードでは、トランザクションブロック以外でコマンドが発行されると、そのコマンドを実行する前に、自動的に<TT
CLASS="COMMAND"
>BEGIN</TT
>コマンドが発行されます（ただし、そのコマンド自体が<TT
CLASS="COMMAND"
>BEGIN</TT
>コマンドやその他のトランザクション制御コマンドである場合、トランザクションブロック内で実行することができないコマンド（<TT
CLASS="COMMAND"
>VACUUM</TT
>など）である場合は除きます）
        </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>自動コミット無効モードでは、<TT
CLASS="COMMAND"
>ABORT</TT
>や<TT
CLASS="COMMAND"
>ROLLBACK</TT
>を発行して、明示的に失敗したトランザクションを放棄しなければなりません。
また、コミットせずにセッションを終了した場合は、作業が失われてしまうので注意してください。
        </P
></BLOCKQUOTE
></DIV
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>は、伝統的に自動コミット有効モードで動作していましたが、自動コミット無効モードの方がよりSQLの仕様に近いものです。
自動コミット無効モードは、システム全体に対する<TT
CLASS="FILENAME"
>psqlrc</TT
>ファイル、もしくは、個人用の<TT
CLASS="FILENAME"
>.psqlrc</TT
>ファイルで設定すれば実現できます。
        </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="VARNAME"
>COMP_KEYWORD_CASE</TT
></DT
><DD
><P
>SQLキーワードを補完する時に大文字小文字のどちらを使用するかを決定します。
<TT
CLASS="LITERAL"
>lower</TT
>または<TT
CLASS="LITERAL"
>upper</TT
>が設定された場合、補完された単語はそれぞれ小文字または大文字になります。
<TT
CLASS="LITERAL"
>preserve-lower</TT
>または<TT
CLASS="LITERAL"
>preserve-upper</TT
>（デフォルト）が設定された場合、
補完された単語は入力済みの文字の大文字小文字を引き継ぎますが、何も入力されていない場合はそれぞれ小文字または大文字に補完されます。
        </P
></DD
><DT
><TT
CLASS="VARNAME"
>DBNAME</TT
></DT
><DD
><P
>現在接続しているデータベース名です。
この変数は（プログラム起動時も含め）データベースに接続する度に設定されますが、これを未設定にすることもできます。
        </P
></DD
><DT
><TT
CLASS="VARNAME"
>ECHO</TT
></DT
><DD
><P
><TT
CLASS="LITERAL"
>all</TT
>に設定された場合、空でない全ての入力行は、標準出力に書き出されます。
(これは対話式に読み込まれる行には適用されません。)
この動作をプログラム起動時に設定するには、<TT
CLASS="OPTION"
>-a</TT
>スイッチを使用してください。
<TT
CLASS="LITERAL"
>queries</TT
>に設定された場合、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>は各問い合わせがサーバに送信されるときに表示します。
これに対応するオプションは<TT
CLASS="OPTION"
>-e</TT
>です。
<TT
CLASS="LITERAL"
>errors</TT
>に設定された場合、失敗した問い合わせのみが標準エラー出力に出力されます。
これに対応するオプションは<TT
CLASS="OPTION"
>-b</TT
>です。
設定されていないか、<TT
CLASS="LITERAL"
>none</TT
>（または上に示した以外の任意の値）に設定された場合、どの問い合わせも表示されません。
        </P
></DD
><DT
><TT
CLASS="VARNAME"
>ECHO_HIDDEN</TT
></DT
><DD
><P
>この変数が<TT
CLASS="LITERAL"
>on</TT
>に設定されている場合、バックスラッシュコマンドがデータベースに問い合わせを行う時、最初にその問い合わせが表示されます。
この機能は、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>内部動作について調べたり、自作プログラム内で同様の関数機能を用意したりするのに役立つでしょう。
（この動作をプログラム起動時に選択するには<TT
CLASS="OPTION"
>-E</TT
>スイッチを使用してください）。
この変数を<TT
CLASS="LITERAL"
>noexec</TT
>という値に設定した場合、問い合わせは実際にサーバに送信、実行されずに、単に表示されるだけになります。
        </P
></DD
><DT
><TT
CLASS="VARNAME"
>ENCODING</TT
></DT
><DD
><P
>現在のクライアント側の文字セット符号化方式です。
        </P
></DD
><DT
><TT
CLASS="VARNAME"
>FETCH_COUNT</TT
></DT
><DD
><P
>この変数が0より大きな整数値に設定されている場合、<TT
CLASS="COMMAND"
>SELECT</TT
>問い合わせの結果は、指定した行数の集合として取り出され、表示されます。
デフォルトの動作では、表示する前にすべての結果が取り出されます。
したがって、結果セットの大きさに関係なくメモリの使用量が限定されます。
この機能を有効とする場合に100から1000までの値がよく使用されます。
この機能を使用する際には、既に一部の行が表示されている場合、問い合わせが失敗する可能性があることに注意してください。
        </P
><DIV
CLASS="TIP"
><BLOCKQUOTE
CLASS="TIP"
><P
><B
>ティップ: </B
>任意の出力書式でこの機能を使用することができますが、デフォルトの<TT
CLASS="LITERAL"
>aligned</TT
>書式は適していません。
<TT
CLASS="VARNAME"
>FETCH_COUNT</TT
>行のグループそれぞれが別々に整形されてしまい、行のグループによって列幅が異なることになるためです。
他の出力書式は適切に動作します。
        </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="VARNAME"
>HISTCONTROL</TT
></DT
><DD
><P
>この変数を<TT
CLASS="LITERAL"
>ignorespace</TT
>に設定した場合、空白文字から始まる行は履歴リストには入りません。
<TT
CLASS="LITERAL"
>ignoredups</TT
>に設定した場合、直前の履歴と同じ行は履歴リストに入りません。
<TT
CLASS="LITERAL"
>ignoreboth</TT
>に設定した場合は、上記の2つを組み合わせたものになります。
この変数を設定しない場合、または<TT
CLASS="LITERAL"
>none</TT
>に設定した場合（または上記以外の値を設定する場合）は、対話モードで読まれる全ての行が履歴リストに保存されます。
        </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>この機能は<SPAN
CLASS="APPLICATION"
>Bash</SPAN
>の機能を真似たものです。
        </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="VARNAME"
>HISTFILE</TT
></DT
><DD
><P
>履歴を格納するために使用されるファイルの名前です。
デフォルトは<TT
CLASS="FILENAME"
>~/.psql_history</TT
>です。
例えば、<TT
CLASS="FILENAME"
>~/.psqlrc</TT
>で以下を記述すると、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>はデータベース毎に分けて履歴を管理します。
</P><PRE
CLASS="PROGRAMLISTING"
>\set HISTFILE ~/.psql_history- :DBNAME</PRE
><P>
        </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>この機能は<SPAN
CLASS="APPLICATION"
>Bash</SPAN
>の機能を真似たものです。
        </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="VARNAME"
>HISTSIZE</TT
></DT
><DD
><P
>コマンド履歴に保存するコマンド数です。
デフォルト値は500です。
        </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>この機能は<SPAN
CLASS="APPLICATION"
>Bash</SPAN
>の機能を真似たものです。
        </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="VARNAME"
>HOST</TT
></DT
><DD
><P
>接続中のデータベースサーバホストです。
この変数は（プログラム起動時も含め）データベースに接続する度に設定されますが、未設定にすることもできます。
        </P
></DD
><DT
><TT
CLASS="VARNAME"
>IGNOREEOF</TT
></DT
><DD
><P
>この変数を未設定にすると、対話式セッションに<ACRONYM
CLASS="ACRONYM"
>EOF</ACRONYM
>文字（通常<B
CLASS="KEYCAP"
>Control</B
>+<B
CLASS="KEYCAP"
>D</B
>）が送信された時、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>が終了します。
数値を設定すると、指定された数だけ、送信された<ACRONYM
CLASS="ACRONYM"
>EOF</ACRONYM
>文字を無視してから終了します。
数値以外を設定した場合は、デフォルトの10になります。
        </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>この機能は<SPAN
CLASS="APPLICATION"
>Bash</SPAN
>の機能を真似たものです。
        </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="VARNAME"
>LASTOID</TT
></DT
><DD
><P
><TT
CLASS="COMMAND"
>INSERT</TT
>や<TT
CLASS="COMMAND"
>\lo_insert</TT
>コマンドによって返された、最後に影響を受けたOIDの値です。
この変数は、次の<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>コマンドの結果が表示されるまでの間のみ保証されています。
        </P
></DD
><DT
><TT
CLASS="VARNAME"
>ON_ERROR_ROLLBACK</TT
>
       </DT
><DD
><P
><TT
CLASS="LITERAL"
>on</TT
>に設定されている場合、トランザクションブロック内である文がエラーとなった時に、そのエラーは無視され、トランザクションは継続します。
<TT
CLASS="LITERAL"
>interactive</TT
>に設定されている場合、対話式セッション内の場合にのみエラーは無視されます。スクリプトファイルを読み込んでいる場合は無視されません。
設定されていないか、または<TT
CLASS="LITERAL"
>off</TT
>に設定されている場合、トランザクションブロック内の文がエラーになると、トランザクション全体をアボートします。
エラーロールバックのモードは、トランザクションブロック内で各コマンドの実行直前に暗黙的な<TT
CLASS="COMMAND"
>SAVEPOINT</TT
>を行い、コマンドが失敗した時にこのセーブポイントにロールバックすることで実現されています。
        </P
></DD
><DT
><TT
CLASS="VARNAME"
>ON_ERROR_STOP</TT
></DT
><DD
><P
>デフォルトではエラーの後もコマンド処理は続行されます。
この変数が<TT
CLASS="LITERAL"
>on</TT
>に設定されていると、代わりに即座に停止します。
対話モードでは<SPAN
CLASS="APPLICATION"
>psql</SPAN
>はコマンドプロンプトに戻ります。
これ以外では<SPAN
CLASS="APPLICATION"
>psql</SPAN
>は終了し、エラーコード1を返す致命的エラー条件と区別できるように、エラーコード3を返します。
どちらの場合でも、現在実行中のスクリプト（トップレベルのスクリプト、もしあれば関連性を持つ他のスクリプトすべて）は即座に終了します。
トップレベルのコマンド文字列が複数のSQLコマンドを含む場合、その時点のコマンドで処理は終了します。
        </P
></DD
><DT
><TT
CLASS="VARNAME"
>PORT</TT
></DT
><DD
><P
>接続中のデータベースサーバのポートです。
この変数は（プログラム起動時も含め）データベースに接続する度に設定されますが、未設定にすることもできます。
        </P
></DD
><DT
><TT
CLASS="VARNAME"
>PROMPT1</TT
><BR><TT
CLASS="VARNAME"
>PROMPT2</TT
><BR><TT
CLASS="VARNAME"
>PROMPT3</TT
></DT
><DD
><P
>これらの変数は、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>が発行するプロンプトの見た目を指定します。
後述の<A
HREF="app-psql.html#APP-PSQL-PROMPTING"
><I
>プロンプト</I
></A
>を参照してください。
        </P
></DD
><DT
><TT
CLASS="VARNAME"
>QUIET</TT
></DT
><DD
><P
>この変数を<TT
CLASS="LITERAL"
>on</TT
>に設定することはコマンドラインオプション<TT
CLASS="OPTION"
>-q</TT
>と同じ効力を持ちます。
対話式モードではあまり役立ちません。
        </P
></DD
><DT
><TT
CLASS="VARNAME"
>SHOW_CONTEXT</TT
></DT
><DD
><P
>この変数は値<TT
CLASS="LITERAL"
>never</TT
>、<TT
CLASS="LITERAL"
>errors</TT
>、あるいは<TT
CLASS="LITERAL"
>always</TT
>に設定することができ、<TT
CLASS="LITERAL"
>CONTEXT</TT
>フィールドがサーバからのメッセージに表示されるかどうかを制御します。
デフォルトは<TT
CLASS="LITERAL"
>errors</TT
>です（CONTEXTはエラーメッセージ内では表示されますが、注意や警告メッセージでは表示されません）。
この設定は<TT
CLASS="VARNAME"
>VERBOSITY</TT
>が<TT
CLASS="LITERAL"
>terse</TT
>に設定されている場合は効果がありません。
（<TT
CLASS="COMMAND"
>\errverbose</TT
>も参照してください。こちらは受け取ったばかりのエラーについて、冗長なメッセージが必要なときに使えます。）
        </P
></DD
><DT
><TT
CLASS="VARNAME"
>SINGLELINE</TT
></DT
><DD
><P
>この変数を<TT
CLASS="LITERAL"
>on</TT
>に設定することはコマンドラインオプション<TT
CLASS="OPTION"
>-S</TT
>と同じ効力を持ちます。
        </P
></DD
><DT
><TT
CLASS="VARNAME"
>SINGLESTEP</TT
></DT
><DD
><P
>この変数を<TT
CLASS="LITERAL"
>on</TT
>に設定することはコマンドラインオプション<TT
CLASS="OPTION"
>-s</TT
>と同じ効力を持ちます。
        </P
></DD
><DT
><TT
CLASS="VARNAME"
>USER</TT
></DT
><DD
><P
>接続中のデータベースユーザです。
この変数は（プログラム起動時も含め）データベースに接続する度に設定されますが、未設定にすることもできます。
        </P
></DD
><DT
><TT
CLASS="VARNAME"
>VERBOSITY</TT
></DT
><DD
><P
>この変数を<TT
CLASS="LITERAL"
>default</TT
>、<TT
CLASS="LITERAL"
>verbose</TT
>、<TT
CLASS="LITERAL"
>terse</TT
>のいずれかに設定することで、エラー報告の冗長性を制御できます。
（<TT
CLASS="COMMAND"
>\errverbose</TT
>も参照してください。こちらは受け取ったばかりのエラーについて、冗長なメッセージが必要なときに使えます。）
        </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT3"
><A
NAME="APP-PSQL-INTERPOLATION"
></A
><H4
><ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>差し替え</H4
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>の変数には、通常の<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>文やメタコマンドの引数の中で使用（<SPAN
CLASS="QUOTE"
>"差し替え：interpolate"</SPAN
>）できるという重要な機能があります。
さらに<SPAN
CLASS="APPLICATION"
>psql</SPAN
>は、
SQLリテラルと識別子として使用される変数の値が適切に引用符付けされていることを保証する機能を提供します。
引用符付けをまったく行わずに差し替えるための構文は、変数名の前にコロン(<TT
CLASS="LITERAL"
>:</TT
>)を付けることです。
以下に例を示します。
</P><PRE
CLASS="PROGRAMLISTING"
>testdb=&gt; <KBD
CLASS="USERINPUT"
>\set foo 'my_table'</KBD
>
testdb=&gt; <KBD
CLASS="USERINPUT"
>SELECT * FROM :foo;</KBD
></PRE
><P>
この例では、問い合わせは<TT
CLASS="LITERAL"
>my_table</TT
>テーブルに対して行われます。
これが安全ではない場合があることに注意して下さい。
変数の値はそのままコピーされるので、対応のとれていない引用符やバックスラッシュコマンドさえも含めることができます。
挿入した場所で変数が展開された時に、確実に正しい意味になるようにしなければなりません。
    </P
><P
>値がSQLリテラルや識別子内で使用される場合、それが引用符付けされるように調整することがもっとも安全です。
SQLリテラルとして変数値を引用符付けするためには、コロンの後に変数名を単一引用符で括って記述してください。
SQL識別子として値を引用符付けするためには、コロン後に変数名を二重引用符で括って記述してください。
これらの式は正しく引用符と変数値内に埋め込まれた特殊文字を扱います。
前の例は以下のように記述することでより安全になります。
</P><PRE
CLASS="PROGRAMLISTING"
>testdb=&gt; <KBD
CLASS="USERINPUT"
>\set foo 'my_table'</KBD
>
testdb=&gt; <KBD
CLASS="USERINPUT"
>SELECT * FROM :"foo";</KBD
></PRE
><P>
    </P
><P
>変数差し替えは、引用符付けされた<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>リテラルと識別子の中では行われません。
したがって<TT
CLASS="LITERAL"
>':foo'</TT
>などの式は、変数の値から引用符付けしたリテラルを生成するようには動作しません。
(値の中に埋め込まれた引用符を正しく取り扱えませんので、もし動作したとしたら安全ではありません。)
    </P
><P
>この機能の有効な利用方法の例は、ファイルの内容をテーブル列にコピーする場合も利用することができます。
その際は、ファイルをまず変数に読み込み、引用符付けした文字列として変数名を差し替えます。
</P><PRE
CLASS="PROGRAMLISTING"
>testdb=&gt; <KBD
CLASS="USERINPUT"
>\set content `cat my_file.txt`</KBD
>
testdb=&gt; <KBD
CLASS="USERINPUT"
>INSERT INTO my_table VALUES (:'content');</KBD
></PRE
><P>
(<TT
CLASS="FILENAME"
>my_file.txt</TT
>にNULバイトが含まれている場合、これはうまく動作しないことに注意してください。
<SPAN
CLASS="APPLICATION"
>psql</SPAN
>は変数値内に埋め込まれたNULバイトをサポートしません。)
    </P
><P
>コロン（:）もSQLコマンド内で正規に使用できますので、
指定した変数が現在設定されていない場合、差し替え時の見かけの置換(<TT
CLASS="LITERAL"
>:name</TT
>、<TT
CLASS="LITERAL"
>:'name'</TT
>、<TT
CLASS="LITERAL"
>:"name"</TT
>)は行われません。
コロンをバックスラッシュでエスケープすれば、常に差し替えから保護することができます。
    </P
><P
>変数用のコロン構文は、<SPAN
CLASS="APPLICATION"
>ECPG</SPAN
>のような組み込みの問い合わせ言語用の標準<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>として規定されています。
配列の一部の切り出し、および型キャスト用のコロン構文は<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の拡張であり、標準での使用方法と競合することがあります。
SQLリテラルまたは識別子として変数の値をエスケープさせる引用符付きコロン構文は<SPAN
CLASS="APPLICATION"
>psql</SPAN
>の拡張です。
    </P
></DIV
><DIV
CLASS="REFSECT3"
><A
NAME="APP-PSQL-PROMPTING"
></A
><H4
>プロンプト</H4
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>が発行するプロンプトは好みに応じてカスタマイズできます。
<TT
CLASS="VARNAME"
>PROMPT1</TT
>、<TT
CLASS="VARNAME"
>PROMPT2</TT
>、<TT
CLASS="VARNAME"
>PROMPT3</TT
>という3つの変数はプロンプトの表示内容を示す文字列や特別なエスケープシーケンスを持ちます。
プロンプト1は<SPAN
CLASS="APPLICATION"
>psql</SPAN
>が新しいコマンドを受け付ける際に発行される通常のプロンプトです。
プロンプト2は、例えばコマンドがセミコロンで終わっていない、または、引用符が閉じていないなど、コマンドの入力中にさらなる入力が期待される際に発行されます。
プロンプト3は<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>の<TT
CLASS="COMMAND"
>COPY FROM STDIN</TT
>コマンドを実行中で、端末上で行の値の入力が必要な際に発行されます。
    </P
><P
>選択されたプロンプト変数の値はそのまま文字として表示されます。
ただし、パーセント（<TT
CLASS="LITERAL"
>%</TT
>）が含まれる場合は例外です。
この場合は、次の文字に従って、特定のテキストに置換されます。
置換対象として定義されているのは次のものです。

    <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="LITERAL"
>%M</TT
></DT
><DD
><P
>データベースサーバの（ドメイン名付きの）完全なホスト名です。その接続がUnixドメインソケットの場合は<TT
CLASS="LITERAL"
>[local]</TT
>となります。
ただし、Unixドメインソケットがコンパイル時に設定したデフォルトの場所に存在しない場合は、<TT
CLASS="LITERAL"
>[local:<TT
CLASS="REPLACEABLE"
><I
>/dir/name</I
></TT
>]</TT
>となります。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>%m</TT
></DT
><DD
><P
>最初のドット以降を省略したデータベースサーバのホスト名です。その接続がUnixドメインソケットの場合は<TT
CLASS="LITERAL"
>[local]</TT
>となります。
         </P
></DD
><DT
><TT
CLASS="LITERAL"
>%&gt;</TT
></DT
><DD
><P
>データベースサーバが監視するポート番号です。</P
></DD
><DT
><TT
CLASS="LITERAL"
>%n</TT
></DT
><DD
><P
>データベースセッションユーザの名前です
（この値の展開結果は、<TT
CLASS="COMMAND"
>SET SESSION AUTHORIZATION</TT
>コマンドの実行によってデータベースセッション中に変わることがあります）。
         </P
></DD
><DT
><TT
CLASS="LITERAL"
>%/</TT
></DT
><DD
><P
>接続中のデータベース名です。</P
></DD
><DT
><TT
CLASS="LITERAL"
>%~</TT
></DT
><DD
><P
>デフォルトデータベースの場合に<TT
CLASS="LITERAL"
>~</TT
>（チルダ）が出力される点を除いて、<TT
CLASS="LITERAL"
>%/</TT
>と同じです。</P
></DD
><DT
><TT
CLASS="LITERAL"
>%#</TT
></DT
><DD
><P
>セッションユーザがデータベーススーパーユーザである場合は<TT
CLASS="LITERAL"
>#</TT
>、それ以外の場合は<TT
CLASS="LITERAL"
>&gt;</TT
>となります
（この値の展開結果は、<TT
CLASS="COMMAND"
>SET SESSION AUTHORIZATION</TT
>コマンドの実行によってデータベースセッション中に変わることがあります）。
         </P
></DD
><DT
><TT
CLASS="LITERAL"
>%p</TT
></DT
><DD
><P
>現在接続しているバックエンドのプロセスIDです。</P
></DD
><DT
><TT
CLASS="LITERAL"
>%R</TT
></DT
><DD
><P
>プロンプト1の場合、通常は<TT
CLASS="LITERAL"
>=</TT
>ですが、シングル行モードでは<TT
CLASS="LITERAL"
>^</TT
>、また、データベースとの接続が切れたセッションでは<TT
CLASS="LITERAL"
>!</TT
>になります（<TT
CLASS="COMMAND"
>\connect</TT
>が失敗した場合に発生します）。
プロンプト2の場合、<TT
CLASS="LITERAL"
>%R</TT
>は、なぜ<SPAN
CLASS="APPLICATION"
>psql</SPAN
>がさらなる入力を要求しているかによって決まる文字に置き換えられます。
これは、単にコマンドがまだ終了していない場合は<TT
CLASS="LITERAL"
>-</TT
>ですが、<TT
CLASS="LITERAL"
>/* ... */</TT
>のコメントがまだ終了していない場合は<TT
CLASS="LITERAL"
>*</TT
>、引用符付きの文字列が終了していない場合は単一引用符、引用符付きの識別子が終了していない場合は二重引用符、ドル引用文字列が終了していない場合はドル記号、そして閉じられていない左括弧がある場合は<TT
CLASS="LITERAL"
>(</TT
>となります。
プロンプト3の場合、<TT
CLASS="LITERAL"
>%R</TT
>に対しては何も表示されません。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>%x</TT
></DT
><DD
><P
>トランザクションの状態です。
トランザクションブロックの外にいる場合は空文字列に、トランザクションブロックの中にいる場合は<TT
CLASS="LITERAL"
>*</TT
>に、失敗したトランザクションブロックの中にいる場合は<TT
CLASS="LITERAL"
>!</TT
>に、（接続されていないなど）トランザクションの状態が不定の場合は<TT
CLASS="LITERAL"
>?</TT
>になります。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>%l</TT
></DT
><DD
><P
>現在の文の内部での行番号で、<TT
CLASS="LITERAL"
>1</TT
>から始まります。
         </P
></DD
><DT
><TT
CLASS="LITERAL"
>%</TT
><TT
CLASS="REPLACEABLE"
><I
>digits</I
></TT
></DT
><DD
><P
>指定された8進の数値コードの文字に置換されます。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>%:</TT
><TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
><TT
CLASS="LITERAL"
>:</TT
></DT
><DD
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>の変数<TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
>の値です。
詳細は<A
HREF="app-psql.html#APP-PSQL-VARIABLES"
><I
>変数</I
></A
>を参照してください。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>%`</TT
><TT
CLASS="REPLACEABLE"
><I
>command</I
></TT
><TT
CLASS="LITERAL"
>`</TT
></DT
><DD
><P
>通常の<SPAN
CLASS="QUOTE"
>"逆引用符"</SPAN
>による置き換えと同様で、<TT
CLASS="REPLACEABLE"
><I
>command</I
></TT
>の出力です。
        </P
></DD
><DT
><TT
CLASS="LITERAL"
>%[</TT
> ... <TT
CLASS="LITERAL"
>%]</TT
></DT
><DD
><P
>プロンプトには端末制御文字を含めることができます。
具体的には、色、背景、プロンプトテキストの様式の変更、端末ウィンドウのタイトルの変更などが指定できます。
<SPAN
CLASS="APPLICATION"
>Readline</SPAN
>の行編集機能を適切に動作させるためには、印字されない制御文字を<TT
CLASS="LITERAL"
>%[</TT
>と<TT
CLASS="LITERAL"
>%]</TT
>で囲んで、不可視であることを明示しなければなりません。
この記号の組み合わせはプロンプト内に複数記述することができます。
以下に例を示します。
</P><PRE
CLASS="PROGRAMLISTING"
>testdb=&gt; \set PROMPT1 '%[%033[1;33;40m%]%n@%/%R%[%033[0m%]%# '</PRE
><P>
これにより、VT100互換のカラー端末では、太字フォントで（<TT
CLASS="LITERAL"
>1;</TT
>）、黒地に黄色の（<TT
CLASS="LITERAL"
>33;40</TT
>）プロンプトが表示されます。
        </P
></DD
></DL
></DIV
><P>

プロンプトにパーセント記号を入れる場合は、<TT
CLASS="LITERAL"
>%%</TT
>と記述してください。
デフォルトのプロンプトは、プロンプト1と2が<TT
CLASS="LITERAL"
>'%/%R%# '</TT
>、プロンプト3が<TT
CLASS="LITERAL"
>'&gt;&gt; '</TT
>です。
    </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>この機能は<SPAN
CLASS="APPLICATION"
>tcsh</SPAN
>の機能を真似たものです。
    </P
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="REFSECT3"
><A
NAME="AEN100733"
></A
><H4
>コマンドライン編集</H4
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>は行内編集や繰り返し入力が簡便になるように<SPAN
CLASS="APPLICATION"
>Readline</SPAN
>ライブラリをサポートしています。
コマンド履歴は、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>の終了時に自動的に保存され、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>の起動時に再読み込みされます。
タブによる補完もサポートされていますが、<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>のパーサとしてコマンドを解釈して判断してくれるわけではありません。
タブによる補完によって生成される問い合わせは他のSQLコマンド、例えば<TT
CLASS="LITERAL"
>SET TRANSACTION ISOLATION LEVEL</TT
>と干渉することもあります。
タブによる補完を何らかの事情により使用したくなければ、ホームディレクトリ内の<TT
CLASS="FILENAME"
>.inputrc</TT
>というファイルに以下のように書き込むことで無効にできます。
</P><PRE
CLASS="PROGRAMLISTING"
>$if psql
set disable-completion on
$endif</PRE
><P>
（これは<SPAN
CLASS="APPLICATION"
>psql</SPAN
>の機能ではなく、<SPAN
CLASS="APPLICATION"
>Readline</SPAN
>の機能です。
詳細については<SPAN
CLASS="APPLICATION"
>Readline</SPAN
>のドキュメントを参照してください）。
    </P
></DIV
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="APP-PSQL-ENVIRONMENT"
></A
><H2
>環境</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="ENVAR"
>COLUMNS</TT
></DT
><DD
><P
><TT
CLASS="LITERAL"
>\pset columns</TT
>がゼロの場合、<TT
CLASS="LITERAL"
>wrapped</TT
>書式の幅、および、幅の広い出力がページャを必要とするかどうかを決める幅を制御します。
また自動拡張モードでは縦書式に切り替えるべきかどうかを制御します。
     </P
></DD
><DT
><TT
CLASS="ENVAR"
>PAGER</TT
></DT
><DD
><P
>問い合わせ結果が画面に入り切らない場合、このコマンドによって結果をパイプします。
一般的に指定される値は、<TT
CLASS="LITERAL"
>more</TT
>、または<TT
CLASS="LITERAL"
>less</TT
>です。
デフォルトはプラットフォームによって異なります。
ページャの使用を無効にするには<TT
CLASS="ENVAR"
>PAGER</TT
>を空にするか、<TT
CLASS="COMMAND"
>\pset</TT
>コマンドのページャ関連のオプションを使用します。
     </P
></DD
><DT
><TT
CLASS="ENVAR"
>PGDATABASE</TT
><BR><TT
CLASS="ENVAR"
>PGHOST</TT
><BR><TT
CLASS="ENVAR"
>PGPORT</TT
><BR><TT
CLASS="ENVAR"
>PGUSER</TT
></DT
><DD
><P
>デフォルトの接続パラメータです（<A
HREF="libpq-envars.html"
>項32.14</A
>を参照）。
     </P
></DD
><DT
><TT
CLASS="ENVAR"
>PSQL_EDITOR</TT
><BR><TT
CLASS="ENVAR"
>EDITOR</TT
><BR><TT
CLASS="ENVAR"
>VISUAL</TT
></DT
><DD
><P
><TT
CLASS="COMMAND"
>\e</TT
>コマンド、<TT
CLASS="COMMAND"
>\ef</TT
>コマンド、<TT
CLASS="COMMAND"
>\ev</TT
>コマンドで使用されるエディタです。
変数はこの順に検索され、設定された最初のものが使用されます。
     </P
><P
>組み込みのデフォルトエディタは、Unixシステムでは<TT
CLASS="FILENAME"
>vi</TT
>、Windowsシステムでは<TT
CLASS="FILENAME"
>notepad.exe</TT
>です。
     </P
></DD
><DT
><TT
CLASS="ENVAR"
>PSQL_EDITOR_LINENUMBER_ARG</TT
></DT
><DD
><P
><TT
CLASS="COMMAND"
>\e</TT
>、<TT
CLASS="COMMAND"
>\ef</TT
>または<TT
CLASS="COMMAND"
>\ev</TT
>が行番号引数を付けて使用された場合、この変数は、ユーザのエディタに開始行番号を渡すために使用されるコマンドライン引数を指定します。
<SPAN
CLASS="PRODUCTNAME"
>Emacs</SPAN
>または<SPAN
CLASS="PRODUCTNAME"
>vi</SPAN
>のようなエディタでは、これはプラス(+)記号です。
オプション名と行番号の間に空白文字が必要な場合は、変数の値の最後に空白文字を含めてください。
以下に例を示します。
</P><PRE
CLASS="PROGRAMLISTING"
>PSQL_EDITOR_LINENUMBER_ARG='+'
PSQL_EDITOR_LINENUMBER_ARG='--line '</PRE
><P>
     </P
><P
>Unixシステム上のデフォルトは<TT
CLASS="LITERAL"
>+</TT
>です。
（デフォルトのエディタ<TT
CLASS="FILENAME"
>vi</TT
>に対応するものですが、他のよく使われる多くのエディタでも役に立ちます。）
一方Windowsシステムではデフォルトはありません。
     </P
></DD
><DT
><TT
CLASS="ENVAR"
>PSQL_HISTORY</TT
></DT
><DD
><P
>コマンド履歴ファイルの場所を指定します。
チルダ（<TT
CLASS="LITERAL"
>~</TT
>）展開が行われます。
     </P
></DD
><DT
><TT
CLASS="ENVAR"
>PSQLRC</TT
></DT
><DD
><P
>ユーザの<TT
CLASS="FILENAME"
>.psqlrc</TT
>ファイルの場所を指定します。
チルダ（<TT
CLASS="LITERAL"
>~</TT
>）展開が行われます。
     </P
></DD
><DT
><TT
CLASS="ENVAR"
>SHELL</TT
></DT
><DD
><P
><TT
CLASS="COMMAND"
>\!</TT
>コマンドが実行するコマンドです。
     </P
></DD
><DT
><TT
CLASS="ENVAR"
>TMPDIR</TT
></DT
><DD
><P
>一時ファイルを格納するディレクトリです。
デフォルトは<TT
CLASS="FILENAME"
>/tmp</TT
>です。
     </P
></DD
></DL
></DIV
><P
>このユーティリティは、他のほとんどの<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>ユーティリティと同様、<SPAN
CLASS="APPLICATION"
>libpq</SPAN
>でサポートされる環境変数を使用します（<A
HREF="libpq-envars.html"
>項32.14</A
>を参照してください）。
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN100836"
></A
><H2
>ファイル</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="FILENAME"
>psqlrc</TT
> and <TT
CLASS="FILENAME"
>~/.psqlrc</TT
></DT
><DD
><P
><TT
CLASS="OPTION"
>-X</TT
>オプションが渡されない場合、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>は、データベースに接続した後、通常のコマンドを受け付け始める前に、システム全体用の開始ファイル(<TT
CLASS="FILENAME"
>psqlrc</TT
>)のコマンドを、続いてユーザ用の開始ファイル(<TT
CLASS="FILENAME"
>~/.psqlrc</TT
>)のコマンドを読み込み、実行しようとします。
これらのファイルは、<TT
CLASS="COMMAND"
>\set</TT
>や<TT
CLASS="COMMAND"
>SET</TT
>コマンドを使用して、好みに応じたクライアントやサーバを設定するために使用することができます。
    </P
><P
>システム全体の開始ファイルは<TT
CLASS="FILENAME"
>psqlrc</TT
>という名前で、インストレーションの<SPAN
CLASS="QUOTE"
>"システム設定"</SPAN
>ディレクトリの中で探されます。
このディレクトリを特定するには<TT
CLASS="LITERAL"
>pg_config --sysconfdir</TT
>を実行するのが最も確実です。
デフォルトでは、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の実行ファイルを含むディレクトリからの相対パスで<TT
CLASS="FILENAME"
>../etc/</TT
>になります。
このディレクトリの名前は環境変数<TT
CLASS="ENVAR"
>PGSYSCONFDIR</TT
>を使って明示的に設定することができます。
    </P
><P
>ユーザ用の開始ファイルは<TT
CLASS="FILENAME"
>.psqlrc</TT
>という名前で、実行しているユーザのホームディレクトリの中で探されます。
Windowsではそのような概念がないので、個人用の開始ファイルは<TT
CLASS="FILENAME"
>%APPDATA%\postgresql\psqlrc.conf</TT
>という名前になります。
ユーザ用の開始ファイルは環境変数<TT
CLASS="ENVAR"
>PSQLRC</TT
>で明示的に設定することができます。
    </P
><P
>システム全体用の開始ファイルとユーザ用の開始ファイルに、例えば、<TT
CLASS="FILENAME"
>~/.psqlrc-9.2</TT
>や<TT
CLASS="FILENAME"
>~/.psqlrc-9.2.5</TT
>のように、ハイフン記号と<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>のメジャーリリース番号またはマイナーリリース番号をファイル名に付加することで、特定バージョンの<SPAN
CLASS="APPLICATION"
>psql</SPAN
>向けのファイルとすることができます。
マッチするバージョンのファイルはバージョン指定のないファイルよりも優先して読み込まれます。
    </P
></DD
><DT
><TT
CLASS="FILENAME"
>.psql_history</TT
></DT
><DD
><P
>コマンドライン履歴はファイル<TT
CLASS="FILENAME"
>~/.psql_history</TT
>、Windowsの場合は<TT
CLASS="FILENAME"
>%APPDATA%\postgresql\psql_history</TT
>に格納されます。
    </P
><P
>履歴ファイルの場所は環境変数<TT
CLASS="ENVAR"
>PSQL_HISTORY</TT
>を介して明示的に設定することができます。
    </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN100876"
></A
><H2
>注釈</H2
><P
></P
><UL
><LI
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>は、同じまたはより古いメジャーバージョンのサーバと稼働させることが最善です。
特にバックスラッシュコマンドは、サーバが<SPAN
CLASS="APPLICATION"
>psql</SPAN
>自身のバージョンより新しいと失敗しやすくなります。
<TT
CLASS="LITERAL"
>\d</TT
>系列のバックスラッシュコマンドは7.4までさかのぼるバージョンのサーバで動作するはずですが、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>自身よりもサーバが新しい場合は、必ずしもそうではありません。
SQLコマンドの実行ならびに問い合わせ結果の表示といった一般的な機能はより新しいメジャーバージョンのサーバとでも動作するはずですが、すべての場合において保証することはできません。
      </P
><P
>メジャーバージョンが異なる複数のサーバとの接続のために<SPAN
CLASS="APPLICATION"
>psql</SPAN
>を使用したいのであれば、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>の最新版を使用することを勧めます。
他の方法として、各メジャーバージョンの<SPAN
CLASS="APPLICATION"
>psql</SPAN
>のコピーを保持し、確実にそれぞれのサーバに対応するバージョンを使用することができます。
しかし実際には、この複雑さを追加することは必要ではないはずです。
      </P
></LI
><LI
><P
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の9.6より前では、<TT
CLASS="OPTION"
>-c</TT
>オプションが<TT
CLASS="OPTION"
>-X</TT
> (<TT
CLASS="OPTION"
>--no-psqlrc</TT
>)を暗示しましたが、現在ではそうなっていません。
      </P
></LI
><LI
><P
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の8.4より前では、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>で1文字のバックスラッシュコマンドの最初の引数をコマンドの直後に空白文字を挟むことなく記述できました。
現在では何らかの空白が必要になっています。
      </P
></LI
></UL
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN100899"
></A
><H2
>Windowsユーザ向けの注意</H2
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>は<SPAN
CLASS="QUOTE"
>"コンソールアプリケーション"</SPAN
>としてコンパイルされます。
Windowsのコンソールウィンドウは、システムの他の部分とは異なる符号化方式を使用しているので、<SPAN
CLASS="APPLICATION"
>psql</SPAN
>で8ビット文字を使用する時には特別な配慮が必要です。
<SPAN
CLASS="APPLICATION"
>psql</SPAN
>は、コンソール用コードページとして問題があることを検出すると、起動時に警告を発します。
コンソール用コードページを変更するためには、以下の2つが必要です。

   <P
></P
></P><UL
><LI
><P
><KBD
CLASS="USERINPUT"
>cmd.exe /c chcp 1252</KBD
>と入力して、コードページを設定します
（1252はドイツ圏における適切なコードページです。システムに合わせて変更してください）。
Cygwinを使用しているのであれば、このコマンドを<TT
CLASS="FILENAME"
>/etc/profile</TT
>に追加してください。
     </P
></LI
><LI
><P
>コンソール用フォントを<TT
CLASS="LITERAL"
>Lucida Console</TT
>に設定してください。
ラスタフォントは、ANSIコードページでは正しく動作しないためです。
     </P
></LI
></UL
><P></P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="APP-PSQL-EXAMPLES"
></A
><H2
>例</H2
><P
>最初に、複数行にわたるコマンドの入力例を示します。
プロンプトの変化に注意してください。
</P><PRE
CLASS="PROGRAMLISTING"
>testdb=&gt; <KBD
CLASS="USERINPUT"
>CREATE TABLE my_table (</KBD
>
testdb(&gt; <KBD
CLASS="USERINPUT"
> first integer not null default 0,</KBD
>
testdb(&gt; <KBD
CLASS="USERINPUT"
> second text)</KBD
>
testdb-&gt; <KBD
CLASS="USERINPUT"
>;</KBD
>
CREATE TABLE</PRE
><P>
さて、ここでテーブル定義を再度確認してみます。
</P><PRE
CLASS="PROGRAMLISTING"
>testdb=&gt; <KBD
CLASS="USERINPUT"
>\d my_table</KBD
>
             Table "my_table"
 Attribute |  Type   |      Modifier
-----------+---------+--------------------
 first     | integer | not null default 0
 second    | text    |&#13;</PRE
><P>
次に、プロンプトをもっと面白いものに変更してみます。
</P><PRE
CLASS="PROGRAMLISTING"
>testdb=&gt; <KBD
CLASS="USERINPUT"
>\set PROMPT1 '%n@%m %~%R%# '</KBD
>
peter@localhost testdb=&gt;</PRE
><P>
テーブルにデータを入力したものと考えてください。データを見る場合は次のようにします。
</P><PRE
CLASS="PROGRAMLISTING"
>peter@localhost testdb=&gt; SELECT * FROM my_table;
 first | second
-------+--------
     1 | one
     2 | two
     3 | three
     4 | four
(4 rows)&#13;</PRE
><P>
<TT
CLASS="COMMAND"
>\pset</TT
>コマンドを使って、このテーブルの表示を違うタイプに変更することができます。
</P><PRE
CLASS="PROGRAMLISTING"
>peter@localhost testdb=&gt; <KBD
CLASS="USERINPUT"
>\pset border 2</KBD
>
Border style is 2.
peter@localhost testdb=&gt; <KBD
CLASS="USERINPUT"
>SELECT * FROM my_table;</KBD
>
+-------+--------+
| first | second |
+-------+--------+
|     1 | one    |
|     2 | two    |
|     3 | three  |
|     4 | four   |
+-------+--------+
(4 rows)

peter@localhost testdb=&gt; <KBD
CLASS="USERINPUT"
>\pset border 0</KBD
>
Border style is 0.
peter@localhost testdb=&gt; <KBD
CLASS="USERINPUT"
>SELECT * FROM my_table;</KBD
>
first second
----- ------
    1 one
    2 two
    3 three
    4 four
(4 rows)

peter@localhost testdb=&gt; <KBD
CLASS="USERINPUT"
>\pset border 1</KBD
>
Border style is 1.
peter@localhost testdb=&gt; <KBD
CLASS="USERINPUT"
>\pset format unaligned</KBD
>
Output format is unaligned.
peter@localhost testdb=&gt; <KBD
CLASS="USERINPUT"
>\pset fieldsep ","</KBD
>
Field separator is ",".
peter@localhost testdb=&gt; <KBD
CLASS="USERINPUT"
>\pset tuples_only</KBD
>
Showing only tuples.
peter@localhost testdb=&gt; <KBD
CLASS="USERINPUT"
>SELECT second, first FROM my_table;</KBD
>
one,1
two,2
three,3
four,4</PRE
><P>
その他の方法として、短縮されたコマンドを使用してみます。
</P><PRE
CLASS="PROGRAMLISTING"
>peter@localhost testdb=&gt; <KBD
CLASS="USERINPUT"
>\a \t \x</KBD
>
Output format is aligned.
Tuples only is off.
Expanded display is on.
peter@localhost testdb=&gt; <KBD
CLASS="USERINPUT"
>SELECT * FROM my_table;</KBD
>
-[ RECORD 1 ]-
first  | 1
second | one
-[ RECORD 2 ]-
first  | 2
second | two
-[ RECORD 3 ]-
first  | 3
second | three
-[ RECORD 4 ]-
first  | 4
second | four</PRE
><P></P
><P
>問い合わせの結果が適していれば、以下のように<TT
CLASS="COMMAND"
>\crosstabview</TT
>コマンドを使用してクロス表形式で表示することができます。
</P><PRE
CLASS="PROGRAMLISTING"
>testdb=&gt; <KBD
CLASS="USERINPUT"
>SELECT first, second, first &gt; 2 AS gt2 FROM my_table;</KBD
>
 first | second | gt2 
-------+--------+-----
     1 | one    | f
     2 | two    | f
     3 | three  | t
     4 | four   | t
(4 rows)

testdb=&gt; <KBD
CLASS="USERINPUT"
>\crosstabview first second</KBD
>
 first | one | two | three | four 
-------+-----+-----+-------+------
     1 | f   |     |       | 
     2 |     | f   |       | 
     3 |     |     | t     | 
     4 |     |     |       | t
(4 rows)</PRE
><P>

この2つ目の例では、掛け算の表を、行は逆順にソートし、列はそれとは別に昇順に示しています。
</P><PRE
CLASS="PROGRAMLISTING"
>testdb=&gt; <KBD
CLASS="USERINPUT"
>SELECT t1.first as "A", t2.first+100 AS "B", t1.first*(t2.first+100) as "AxB",</KBD
>
testdb(&gt; <KBD
CLASS="USERINPUT"
>row_number() over(order by t2.first) AS ord</KBD
>
testdb(&gt; <KBD
CLASS="USERINPUT"
>FROM my_table t1 CROSS JOIN my_table t2 ORDER BY 1 DESC</KBD
>
testdb(&gt; <KBD
CLASS="USERINPUT"
>\crosstabview "A" "B" "AxB" ord</KBD
>
 A | 101 | 102 | 103 | 104 
---+-----+-----+-----+-----
 4 | 404 | 408 | 412 | 416
 3 | 303 | 306 | 309 | 312
 2 | 202 | 204 | 206 | 208
 1 | 101 | 102 | 103 | 104
(4 rows)</PRE
><P>&#13;</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="app-pgrestore.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>ホーム</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="app-reindexdb.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>pg_restore</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="reference-client.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><SPAN
CLASS="APPLICATION"
>reindexdb</SPAN
></TD
></TR
></TABLE
></DIV
></BODY
></HTML
>