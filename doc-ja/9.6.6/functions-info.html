<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>システム情報関数</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 9.6.5文書"
HREF="index.html"><LINK
REL="UP"
TITLE="関数と演算子"
HREF="functions.html"><LINK
REL="PREVIOUS"
TITLE="集合を返す関数"
HREF="functions-srf.html"><LINK
REL="NEXT"
TITLE="システム管理関数"
HREF="functions-admin.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=utf-8"><META
NAME="creation"
CONTENT="2018-02-10T07:29:51"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>PostgreSQL 9.6.5文書</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="集合を返す関数"
HREF="functions-srf.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="functions.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>第 9章関数と演算子</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="システム管理関数"
HREF="functions-admin.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="FUNCTIONS-INFO"
>9.25. システム情報関数</A
></H1
><P
><A
HREF="functions-info.html#FUNCTIONS-INFO-SESSION-TABLE"
>表9-59</A
>に、セッションおよびシステムの情報を抽出する関数を示します。
  </P
><P
>本節で列挙されている関数のほかに、同様にシステム情報を提供する統計システムに関連した数多くの関数があります。
<A
HREF="monitoring-stats.html#MONITORING-STATS-VIEWS"
>項28.2.2</A
>にさらに情報があります。
  </P
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-INFO-SESSION-TABLE"
></A
><P
><B
>表 9-59. セッション情報関数</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>名前</TH
><TH
>戻り型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>current_catalog</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>現在のデータベースの名前（SQL標準では<SPAN
CLASS="QUOTE"
>"カタログ"</SPAN
>と呼ばれる）</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>current_database()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>現在のデータベースの名前</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>current_query()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>クライアントから提示された、現在実行中問い合わせのテキスト（複数の文を含むことあり）</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>current_role</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
><CODE
CLASS="FUNCTION"
>current_user</CODE
>と同等</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>current_schema</CODE
>[()]</TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>現在のスキーマの名前</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>current_schemas(<TT
CLASS="TYPE"
>boolean</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>name[]</TT
></TD
><TD
>検索パス内のスキーマの名前、オプションにより暗黙的なスキーマも含める</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>current_user</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>現在の処理実施コンテキストのユーザ名</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>inet_client_addr()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>inet</TT
></TD
><TD
>リモート接続のアドレス</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>inet_client_port()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>int</TT
></TD
><TD
>リモート接続のポート</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>inet_server_addr()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>inet</TT
></TD
><TD
>ローカル接続のアドレス</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>inet_server_port()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>int</TT
></TD
><TD
>ローカル接続のポート</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_backend_pid()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>int</TT
></TD
><TD
>        現在のセッションに結びついたサーバプロセスのプロセスID
       </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_blocking_pids(<TT
CLASS="TYPE"
>int</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>int[]</TT
></TD
><TD
>指定のサーバプロセスIDをブロックしているプロセスID</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_conf_load_time()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>設定を読み込んだ時刻</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_my_temp_schema()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>oid</TT
></TD
><TD
>セッションの一時スキーマのOID、なければ0</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_is_other_temp_schema(<TT
CLASS="TYPE"
>oid</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>スキーマが他のセッションの一時スキーマかどうか？</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_listening_channels()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>setof text</TT
></TD
><TD
>今のセッションにおいて現在待ち受け中のチャンネル名</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_notification_queue_usage()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>double</TT
></TD
><TD
>非同期通知キューのうち、現在占められている割合（0から1まで）</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_postmaster_start_time()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>サーバの起動時刻</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_trigger_depth()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>int</TT
></TD
><TD
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>のトリガの現在の入れ子の深さ (直接的であれ間接的であれ、トリガ内部から呼ばれていなければ0を返す)</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>session_user</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>セッションのユーザ名</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>user</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
><CODE
CLASS="FUNCTION"
>current_user</CODE
>と等価</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>version()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>バージョン情報。機械読み取り可能なバージョンについては<A
HREF="runtime-config-preset.html#GUC-SERVER-VERSION-NUM"
>server_version_num</A
>を参照。</TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
><CODE
CLASS="FUNCTION"
>current_catalog</CODE
>、<CODE
CLASS="FUNCTION"
>current_role</CODE
>、<CODE
CLASS="FUNCTION"
>current_schema</CODE
>、<CODE
CLASS="FUNCTION"
>current_user</CODE
>、<CODE
CLASS="FUNCTION"
>session_user</CODE
>および<CODE
CLASS="FUNCTION"
>user</CODE
>は<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>において特殊な構文上の地位を持っており、最後に括弧を付けずに呼び出さなければなりません。
（PostgreSQLでは<CODE
CLASS="FUNCTION"
>current_schema</CODE
>の場合括弧を使用することができますが、他は使えません。）
    </P
></BLOCKQUOTE
></DIV
><P
><CODE
CLASS="FUNCTION"
>session_user</CODE
>は、通常、現在のデータベース接続を開始したユーザです。しかし、スーパーユーザはこの設定を<A
HREF="sql-set-session-authorization.html"
>SET SESSION AUTHORIZATION</A
>を使用して変更することができます。
<CODE
CLASS="FUNCTION"
>current_user</CODE
>は、権限の検査に適用されるユーザ識別子です。
通常はセッションユーザと同じですが、<A
HREF="sql-set-role.html"
>SET ROLE</A
>を使用して変更可能です。
<TT
CLASS="LITERAL"
>SECURITY DEFINER</TT
>属性を持つ関数の実行中にも変わります。
Unix用語で言うと、セッションユーザは<SPAN
CLASS="QUOTE"
>"実ユーザ"</SPAN
>で、現在のユーザは<SPAN
CLASS="QUOTE"
>"実効ユーザ"</SPAN
>です。
<CODE
CLASS="FUNCTION"
>current_role</CODE
>と<CODE
CLASS="FUNCTION"
>user</CODE
>は<CODE
CLASS="FUNCTION"
>current_user</CODE
>の同義語です。
（標準SQLでは<CODE
CLASS="FUNCTION"
>current_role</CODE
>と<CODE
CLASS="FUNCTION"
>current_user</CODE
>を区別していますが、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>ではユーザとロールを1種類のエンティティに統合しているため、両者に区別はありません。）
   </P
><P
><CODE
CLASS="FUNCTION"
>current_schema</CODE
>関数は、検索パスの最初にあるスキーマ名（もしくは、検索パスが空の場合はNULL値）を返します。
これは、対象スキーマを指定せずに作成される、すべてのテーブルまたは他の名前付きオブジェクトに使用されるスキーマです。
また、<CODE
CLASS="FUNCTION"
>current_schemas(boolean)</CODE
> は、検索パスに存在する全てのスキーマ名の配列を返します。
booleanオプションにより、<TT
CLASS="LITERAL"
>pg_catalog</TT
>のような暗黙的に含まれているシステムスキーマを、結果の検索パスに含めるかどうかを指定します。
   </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>検索パスは、実行時に変更することができます。
使用するコマンドは以下の通りです。
</P><PRE
CLASS="PROGRAMLISTING"
>SET search_path TO <TT
CLASS="REPLACEABLE"
><I
>schema</I
></TT
> [<SPAN
CLASS="OPTIONAL"
>, <TT
CLASS="REPLACEABLE"
><I
>schema</I
></TT
>, ...</SPAN
>]</PRE
><P>
    </P
></BLOCKQUOTE
></DIV
><P
><CODE
CLASS="FUNCTION"
>inet_client_addr</CODE
>は現在のクライアントのIPアドレスを返し、<CODE
CLASS="FUNCTION"
>inet_client_port</CODE
>はそのポート番号を返します。
<CODE
CLASS="FUNCTION"
>inet_server_addr</CODE
>は、現在の接続を受け付けたサーバのIPアドレスを返し、<CODE
CLASS="FUNCTION"
>inet_server_port</CODE
>はそのポート番号を返します。
これら全ての関数は接続がUnixドメインソケット経由の場合NULLを返します。
   </P
><P
><CODE
CLASS="FUNCTION"
>pg_blocking_pids</CODE
>は指定のプロセスIDのサーバプロセスをブロックしているセッションのプロセスIDの配列を返します。
指定のサーバプロセスが存在しない、あるいはそれがブロックされていないときは空の配列を返します。
あるサーバプロセスが別のサーバプロセスをブロックするのは、ブロックされるプロセスのロック要求と競合するロックを保持している場合（ハードブロック）、あるいは、ブロックされるプロセスのロック要求と競合するロックを待っていて、かつロック待ちキュー内でより前方にいる場合（ソフトロック）です。
パラレルクエリーを使っている場合、実際のロックを子ワーカプロセスが保持または待っている場合であっても、この結果には必ずクライアントから可視のプロセスID（つまり、<CODE
CLASS="FUNCTION"
>pg_backend_pid</CODE
>の結果）が示されます。
そのような仕様なので、この結果には重複するPIDが含まれることもあります。
また、プリペアドのトランザクションが競合するロックを保持している場合、この関数の結果ではプロセスIDがゼロとして示されることにも注意して下さい。
この関数はロックマネージャの共有状態に短時間、排他的アクセスをする必要があるため、それを頻繁に呼び出すとデータベースのパフォーマンスに多少、影響するかもしれません。
   </P
><P
><CODE
CLASS="FUNCTION"
>pg_conf_load_time</CODE
>はサーバの設定ファイルが最後に読み込まれた時の<TT
CLASS="TYPE"
>timestamp with time zone</TT
>を返します。
（現在のセッションがそのときに活動中だった場合、これはそのセッション自身が設定ファイルを再読み込みした時刻になるため、その結果はセッションによって少し異なるかもしれません。
それ以外の場合は、postmasterプロセスが設定ファイルを再読み込みした時刻になります。）
   </P
><P
><CODE
CLASS="FUNCTION"
>pg_my_temp_schema</CODE
>は、現在のセッションの一時スキーマのOIDを返します。（一時テーブルをまだ１つも作成しておらず）存在しなければゼロを返します。
<CODE
CLASS="FUNCTION"
>pg_is_other_temp_schema</CODE
>は、指定したOIDが他のセッションの一時スキーマのOIDであれば、真を返します。
（例えば、他のセッションの一時テーブルをカタログ表示から除外したい場合などで有用です。）
   </P
><P
><CODE
CLASS="FUNCTION"
>pg_listening_channels</CODE
>は現在のセッションが監視している非同期通知チャネルの名前の集合を返します。
<CODE
CLASS="FUNCTION"
>pg_notification_queue_usage</CODE
>は通知用に利用可能な全領域のうち、処理待ちになっている通知によって現在占められている割合を0から1の範囲の<TT
CLASS="TYPE"
>double</TT
>として返します。
詳しくは<A
HREF="sql-listen.html"
>LISTEN</A
>および<A
HREF="sql-notify.html"
>NOTIFY</A
>を参照して下さい。
   </P
><P
><CODE
CLASS="FUNCTION"
>pg_postmaster_start_time</CODE
>は、サーバが起動したときの<TT
CLASS="TYPE"
>timestamp with time zone</TT
>を返します。
   </P
><P
><CODE
CLASS="FUNCTION"
>version</CODE
>関数は<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>サーバのバージョンを記述した文字列を返します。
この情報は<A
HREF="runtime-config-preset.html#GUC-SERVER-VERSION"
>server_version</A
>でも取得できますし、機械読み取り可能なバージョンは<A
HREF="runtime-config-preset.html#GUC-SERVER-VERSION-NUM"
>server_version_num</A
>で取得できます。
ソフトウェア開発者はテキスト版の結果を解析するのではなく、<TT
CLASS="LITERAL"
>server_version_num</TT
>（バージョン8.2以降で利用可能）あるいは<A
HREF="libpq-status.html#LIBPQ-PQSERVERVERSION"
><I
CLASS="TERM"
>      <CODE
CLASS="FUNCTION"
>PQserverVersion</CODE
>
      
     </I
></A
>を利用すべきです。
   </P
><P
><A
HREF="functions-info.html#FUNCTIONS-INFO-ACCESS-TABLE"
>表9-60</A
>に列挙した関数を使用して、ユーザはオブジェクトのアクセス権限をプログラムから問い合わせることができます。
権限についての詳細は、<A
HREF="ddl-priv.html"
>項5.6</A
>を参照してください。
  </P
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-INFO-ACCESS-TABLE"
></A
><P
><B
>表 9-60. アクセス権限照会関数</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>名前</TH
><TH
>戻り型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_any_column_privilege</CODE
>(<TT
CLASS="PARAMETER"
>user</TT
>,
                                  <TT
CLASS="PARAMETER"
>table</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>ユーザがテーブルのどれか１つの列に対して権限を所有しているか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_any_column_privilege</CODE
>(<TT
CLASS="PARAMETER"
>table</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>現在のユーザがテーブルのどれか１つの列に対して権限を所有しているか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_column_privilege</CODE
>(<TT
CLASS="PARAMETER"
>user</TT
>,
                                  <TT
CLASS="PARAMETER"
>table</TT
>,
                                  <TT
CLASS="PARAMETER"
>column</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>ユーザに列に対する権限があるか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_column_privilege</CODE
>(<TT
CLASS="PARAMETER"
>table</TT
>,
                                  <TT
CLASS="PARAMETER"
>column</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>現在のユーザに列に対する権限があるか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_database_privilege</CODE
>(<TT
CLASS="PARAMETER"
>user</TT
>,
                                  <TT
CLASS="PARAMETER"
>database</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>ユーザにデータベースに対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_database_privilege</CODE
>(<TT
CLASS="PARAMETER"
>database</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>現在のユーザにデータベースに対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_foreign_data_wrapper_privilege</CODE
>(<TT
CLASS="PARAMETER"
>user</TT
>,
                                  <TT
CLASS="PARAMETER"
>fdw</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>ユーザに外部データラッパに対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_foreign_data_wrapper_privilege</CODE
>(<TT
CLASS="PARAMETER"
>fdw</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>現在のユーザに外部データラッパに対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_function_privilege</CODE
>(<TT
CLASS="PARAMETER"
>user</TT
>,
                                  <TT
CLASS="PARAMETER"
>function</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>ユーザに関数に対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_function_privilege</CODE
>(<TT
CLASS="PARAMETER"
>function</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>現在のユーザに関数に対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_language_privilege</CODE
>(<TT
CLASS="PARAMETER"
>user</TT
>,
                                  <TT
CLASS="PARAMETER"
>language</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>ユーザに言語に対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_language_privilege</CODE
>(<TT
CLASS="PARAMETER"
>language</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>現在のユーザに言語に対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_schema_privilege</CODE
>(<TT
CLASS="PARAMETER"
>user</TT
>,
                                  <TT
CLASS="PARAMETER"
>schema</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>ユーザにスキーマに対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_schema_privilege</CODE
>(<TT
CLASS="PARAMETER"
>schema</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>現在のユーザにスキーマに対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_sequence_privilege</CODE
>(<TT
CLASS="PARAMETER"
>user</TT
>,
                                  <TT
CLASS="PARAMETER"
>sequence</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>ユーザにシーケンスに対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_sequence_privilege</CODE
>(<TT
CLASS="PARAMETER"
>sequence</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>現在のユーザにシーケンスに対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_server_privilege</CODE
>(<TT
CLASS="PARAMETER"
>user</TT
>,
                                  <TT
CLASS="PARAMETER"
>server</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>ユーザに外部サーバに対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_server_privilege</CODE
>(<TT
CLASS="PARAMETER"
>server</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>現在のユーザに外部サーバに対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_table_privilege</CODE
>(<TT
CLASS="PARAMETER"
>user</TT
>,
                                  <TT
CLASS="PARAMETER"
>table</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>ユーザにテーブルに対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_table_privilege</CODE
>(<TT
CLASS="PARAMETER"
>table</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>現在のユーザにテーブルに対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_tablespace_privilege</CODE
>(<TT
CLASS="PARAMETER"
>user</TT
>,
                                  <TT
CLASS="PARAMETER"
>tablespace</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>ユーザにテーブル空間に対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_tablespace_privilege</CODE
>(<TT
CLASS="PARAMETER"
>tablespace</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>現在のユーザにテーブル空間に対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_type_privilege</CODE
>(<TT
CLASS="PARAMETER"
>user</TT
>,
                                  <TT
CLASS="PARAMETER"
>type</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>ユーザに型に対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>has_type_privilege</CODE
>(<TT
CLASS="PARAMETER"
>type</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>現在のユーザに型に対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_has_role</CODE
>(<TT
CLASS="PARAMETER"
>user</TT
>,
                                  <TT
CLASS="PARAMETER"
>role</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>ユーザにロールに対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_has_role</CODE
>(<TT
CLASS="PARAMETER"
>role</TT
>,
                                  <TT
CLASS="PARAMETER"
>privilege</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>現在のユーザにロールに対する権限があるのか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>row_security_active</CODE
>(<TT
CLASS="PARAMETER"
>table</TT
>)</TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>現在のユーザに有効なテーブルの行単位セキュリティがあるのか</TD
></TR
></TBODY
></TABLE
></DIV
><P
><CODE
CLASS="FUNCTION"
>has_table_privilege</CODE
>はユーザが特定の方法でテーブルにアクセス可能かどうかを検査します。
ユーザは名前、OID(<TT
CLASS="LITERAL"
>pg_authid.oid</TT
>)、もしくは擬似的なPUBLICロールを意味する<TT
CLASS="LITERAL"
>public</TT
>で指定できます。省略された場合は<CODE
CLASS="FUNCTION"
>current_user</CODE
>が使われます。
テーブルは名前もしくはOIDで指定可能です。
（従って、実際には<CODE
CLASS="FUNCTION"
>has_table_privilege</CODE
>の６つの変形があり、引数の数と型で区別されます。）
名前を指定する場合、必要であればスキーマ修飾できます。
対象とするアクセス権限の種類はテキスト文字列で指定され、それは、<TT
CLASS="LITERAL"
>SELECT</TT
>、<TT
CLASS="LITERAL"
>INSERT</TT
>、<TT
CLASS="LITERAL"
>UPDATE</TT
>、<TT
CLASS="LITERAL"
>DELETE</TT
>、<TT
CLASS="LITERAL"
>TRUNCATE</TT
>、<TT
CLASS="LITERAL"
>REFERENCES</TT
>、または<TT
CLASS="LITERAL"
>TRIGGER</TT
>のどれかである必要があります。
オプションとして、権限がGRANTオプションにより付与されているかどうかの権限の検査するため、<TT
CLASS="LITERAL"
>WITH GRANT OPTION</TT
>を付加することができます。
更に、複数の権限の種類をコンマで区切って列挙可能です。この場合、結果は列挙された権限の１つでも存在すれば<TT
CLASS="LITERAL"
>真</TT
>となります。
（権限文字列の大文字小文字は重要ではありません。余分な空白は権限名と権限名の間にはあっても良いですが、権限名の途中にはあってはいけません。）
例を示します。

</P><PRE
CLASS="PROGRAMLISTING"
>SELECT has_table_privilege('myschema.mytable', 'select');
SELECT has_table_privilege('joe', 'mytable', 'INSERT, SELECT WITH GRANT OPTION');</PRE
><P>
   </P
><P
><CODE
CLASS="FUNCTION"
>has_sequence_privilege</CODE
>はユーザが特定の方法でシーケンスにアクセス可能かどうかを検査します。
取り得る引数は<CODE
CLASS="FUNCTION"
>has_table_privilege</CODE
>に対するものと類似しています。
対象とする権限の種類は<TT
CLASS="LITERAL"
>USAGE</TT
>、<TT
CLASS="LITERAL"
>SELECT</TT
>または<TT
CLASS="LITERAL"
>UPDATE</TT
>のいずれかである必要があります。
   </P
><P
><CODE
CLASS="FUNCTION"
>has_any_column_privilege</CODE
>はユーザが特定の方法でテーブルのどれか１つの列にアクセス可能かどうかを検査します。
取り得る引数は<CODE
CLASS="FUNCTION"
>has_table_privilege</CODE
>に対するものと類似していますが、対象とする権限の種類が<TT
CLASS="LITERAL"
>SELECT</TT
>、<TT
CLASS="LITERAL"
>INSERT</TT
>、<TT
CLASS="LITERAL"
>UPDATE</TT
>、または<TT
CLASS="LITERAL"
>REFERENCES</TT
>の組み合わせである必要がある点を除きます。
テーブル単位でこれらの権限を所有することは、テーブルのそれぞれの列に対し暗黙的にそれらの権限を与えることになるため、<CODE
CLASS="FUNCTION"
>has_table_privilege</CODE
>が<TT
CLASS="LITERAL"
>真</TT
>を返す場合は、同一の引数に対して<CODE
CLASS="FUNCTION"
>has_any_column_privilege</CODE
>は常に<TT
CLASS="LITERAL"
>真</TT
>を返すということに注意して下さい。
しかし、少なくとも一つの列に対し権限の列単位の許可がある場合にも<CODE
CLASS="FUNCTION"
>has_any_column_privilege</CODE
>は成功します。
   </P
><P
><CODE
CLASS="FUNCTION"
>has_column_privilege</CODE
>はユーザが特定の方法でテーブルのある列にもアクセス可能かどうかを検査します。
取り得る引数は<CODE
CLASS="FUNCTION"
>has_table_privilege</CODE
>と類似していますが、名前または属性番号のいずれかで列の指定が追加されます。
対象とするアクセス権限の種類は<TT
CLASS="LITERAL"
>SELECT</TT
>、<TT
CLASS="LITERAL"
>INSERT</TT
>、<TT
CLASS="LITERAL"
>UPDATE</TT
>、または<TT
CLASS="LITERAL"
>REFERENCES</TT
>の組み合わせでなければなりません。
テーブル単位のこれらの権限を所有することは、テーブルのそれぞれの列に対し暗黙的にそれら権限を与えることに注意してください。
   </P
><P
><CODE
CLASS="FUNCTION"
>has_database_privilege</CODE
>関数は、ユーザが特定の方法でデータベースにアクセス可能かどうかを検査します。
取り得る引数は、<CODE
CLASS="FUNCTION"
>has_table_privilege</CODE
>に類似しています。
対象とするアクセス権限の種類は<TT
CLASS="LITERAL"
>CREATE</TT
>、<TT
CLASS="LITERAL"
>CONNECT</TT
>、<TT
CLASS="LITERAL"
>TEMPORARY</TT
>、または<TT
CLASS="LITERAL"
>TEMP</TT
>（<TT
CLASS="LITERAL"
>TEMPORARY</TT
>と同じ）の組み合わせである必要があります。
   </P
><P
><CODE
CLASS="FUNCTION"
>has_function_privilege</CODE
>関数は、ユーザが特定の方法で関数にアクセス可能かどうかを検査します。
取り得る引数は<CODE
CLASS="FUNCTION"
>has_table_privilege</CODE
>と同じです。
関数をOIDではなくテキスト文字列で指定する場合、<TT
CLASS="TYPE"
>regprocedure</TT
> データ型（<A
HREF="datatype-oid.html"
>項8.18</A
>を参照）と同じ入力が可能です。
対象とするアクセス権限の種類は<TT
CLASS="LITERAL"
>EXECUTE</TT
>である必要があります。
以下に例を示します。
</P><PRE
CLASS="PROGRAMLISTING"
>SELECT has_function_privilege('joeuser', 'myfunc(int, text)', 'execute');</PRE
><P>
   </P
><P
><CODE
CLASS="FUNCTION"
>has_foreign_data_wrapper_privilege</CODE
>関数は、ユーザが特定の方法で外部データラッパーにアクセス可能かどうかを検査します。
取り得る引数は<CODE
CLASS="FUNCTION"
>has_table_privilege</CODE
>と同じです。
対象とするアクセス権限の種類は<TT
CLASS="LITERAL"
>USAGE</TT
>である必要があります。
   </P
><P
><CODE
CLASS="FUNCTION"
>has_language_privilege</CODE
>関数は、ユーザが特定の方法で手続き言語にアクセス可能かどうかを検査します。
取り得る引数は、<CODE
CLASS="FUNCTION"
>has_table_privilege</CODE
>に類似しています。
対象とするアクセス権限の種類は<TT
CLASS="LITERAL"
>USAGE</TT
>である必要があります。
   </P
><P
><CODE
CLASS="FUNCTION"
>has_schema_privilege</CODE
>関数は、ユーザが特定の方法でスキーマにアクセス可能かどうかを検査します。
取り得る引数は、<CODE
CLASS="FUNCTION"
>has_table_privilege</CODE
>に類似しています。
対象とするアクセス権限の種類は、<TT
CLASS="LITERAL"
>CREATE</TT
>もしくは<TT
CLASS="LITERAL"
>USAGE</TT
>の組み合わせである必要があります。
   </P
><P
><CODE
CLASS="FUNCTION"
>has_server_privilege</CODE
>はユーザが特定の方法で外部サーバにアクセスできるかどうかを検査します。
取り得る引数は<CODE
CLASS="FUNCTION"
>has_table_privilege</CODE
>に類似しています。
対象とするアクセス権限の種類は<TT
CLASS="LITERAL"
>USAGE</TT
>である必要があります。
   </P
><P
><CODE
CLASS="FUNCTION"
>has_tablespace_privilege</CODE
>関数は、ユーザが特定の方法でテーブル空間にアクセス可能かどうかを検査します。
取り得る引数は、<CODE
CLASS="FUNCTION"
>has_table_privilege</CODE
>に類似しています。
対象とするアクセス権限の種類は、<TT
CLASS="LITERAL"
>CREATE</TT
>である必要があります。
   </P
><P
><CODE
CLASS="FUNCTION"
>has_type_privilege</CODE
>は、ユーザが型に特定の方法でアクセス可能かどうかを検査します。
取り得る引数は<CODE
CLASS="FUNCTION"
>has_table_privilege</CODE
>に類似しています。
型をOIDではなくテキスト文字列で指定する場合、可能な入力は<TT
CLASS="TYPE"
>regtype</TT
>データ型に対するものと同じです（<A
HREF="datatype-oid.html"
>項8.18</A
>参照）。
対象とするアクセス権限の種類は<TT
CLASS="LITERAL"
>USAGE</TT
>である必要があります。
   </P
><P
><CODE
CLASS="FUNCTION"
>pg_has_role</CODE
>は、ユーザが特定の方法でロールにアクセスできるかどうかを検査します。
取り得る引数については、<TT
CLASS="LITERAL"
>public</TT
>がユーザ名として使用不可であることを除き、<CODE
CLASS="FUNCTION"
>has_table_privilege</CODE
>と類似しています。
対象とするアクセス権限の種類は、 <TT
CLASS="LITERAL"
>MEMBER</TT
>、<TT
CLASS="LITERAL"
>USAGE</TT
>の組み合わせである必要があります。
<TT
CLASS="LITERAL"
>MEMBER</TT
>は、ロールの直接または間接メンバ資格（つまり、<TT
CLASS="COMMAND"
>SET ROLE</TT
>を行う権限）を表します。一方、<TT
CLASS="LITERAL"
>USAGE</TT
>は、そのロール権限が<TT
CLASS="COMMAND"
>SET ROLE</TT
>をしなくてもすぐに利用できることを表します。
   </P
><P
><CODE
CLASS="FUNCTION"
>row_security_active</CODE
>は<CODE
CLASS="FUNCTION"
>current_user</CODE
>と現在の環境において、指定のテーブルで行単位セキュリティが有効かどうかを検査します。
テーブルは名前またはOIDで指定できます。
   </P
><P
><A
HREF="functions-info.html#FUNCTIONS-INFO-SCHEMA-TABLE"
>表9-61</A
>に、特定のオブジェクトが、現行スキーマの検索パスにおいて<I
CLASS="FIRSTTERM"
>可視</I
>かどうかを判別する関数を示します。
例えば、あるテーブルを含むスキーマが検索パス内に存在し、検索パス内の前方に同じ名前のテーブルがない場合、そのテーブルは可視であると言います。
つまり、これは、テーブルが明示的なスキーマ修飾なしで名前によって参照可能であるということです。
全ての可視テーブルの名前を列挙するには以下のようにします。
</P><PRE
CLASS="PROGRAMLISTING"
>SELECT relname FROM pg_class WHERE pg_table_is_visible(oid);</PRE
><P>
  </P
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-INFO-SCHEMA-TABLE"
></A
><P
><B
>表 9-61. スキーマ可視性照会関数</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>名前</TH
><TH
>戻り型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_collation_is_visible(<TT
CLASS="PARAMETER"
>collation_oid</TT
>)</CODE
></TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>照合順序が検索パスにおいて可視かどうか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_conversion_is_visible(<TT
CLASS="PARAMETER"
>conversion_oid</TT
>)</CODE
></TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>変換が検索パスにおいて可視かどうか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_function_is_visible(<TT
CLASS="PARAMETER"
>function_oid</TT
>)</CODE
></TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>関数が検索パスにおいて可視であるか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_opclass_is_visible(<TT
CLASS="PARAMETER"
>opclass_oid</TT
>)</CODE
></TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>演算子クラスが検索パスにおいて可視であるか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_operator_is_visible(<TT
CLASS="PARAMETER"
>operator_oid</TT
>)</CODE
></TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>演算子が検索パスにおいて可視であるか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_opfamily_is_visible(<TT
CLASS="PARAMETER"
>opclass_oid</TT
>)</CODE
></TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>演算子族が検索パスにおいて可視であるか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_table_is_visible(<TT
CLASS="PARAMETER"
>table_oid</TT
>)</CODE
></TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>テーブルが検索パスにおいて可視かどうか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_ts_config_is_visible(<TT
CLASS="PARAMETER"
>config_oid</TT
>)</CODE
></TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>テキスト検索設定が検索パスにおいて可視かどうか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_ts_dict_is_visible(<TT
CLASS="PARAMETER"
>dict_oid</TT
>)</CODE
></TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>テキスト検索辞書が検索パスにおいて可視かどうか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_ts_parser_is_visible(<TT
CLASS="PARAMETER"
>parser_oid</TT
>)</CODE
></TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>テキスト検索パーサが検索パスにおいて可視かどうか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_ts_template_is_visible(<TT
CLASS="PARAMETER"
>template_oid</TT
>)</CODE
></TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>テキスト検索テンプレートが検索パスにおいて可視かどうか</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_type_is_visible(<TT
CLASS="PARAMETER"
>type_oid</TT
>)</CODE
></TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>型（またはドメイン）が検索パスにおいて可視かどうか</TD
></TR
></TBODY
></TABLE
></DIV
><P
>それぞれの関数はデータベースオブジェクトの１つの型に対して可視性の検査を行います。
<CODE
CLASS="FUNCTION"
>pg_table_is_visible</CODE
>がビュー、マテリアライズドビュー、インデックス、シーケンス、外部テーブルに対しても使用できること、<CODE
CLASS="FUNCTION"
>pg_type_is_visible</CODE
>がドメインに対しても使用できることに注意してください。
関数および演算子では、パスの前方に同じ名前かつ同じ<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>引数のデータ型</I
></SPAN
>を持つオブジェクトが存在しなければ、検索パス内のオブジェクトは可視です。
演算子クラスでは、名前と関連するインデックスアクセスメソッドが考慮されます。
   </P
><P
>これらの関数は全て、検査するオブジェクトを識別するために、オブジェクトのOIDを必要とします。
オブジェクトを名前でテストする場合、OID別名型（<TT
CLASS="TYPE"
>regclass</TT
>、<TT
CLASS="TYPE"
>regtype</TT
>、<TT
CLASS="TYPE"
>regprocedure</TT
>、<TT
CLASS="TYPE"
>regoperator</TT
>、<TT
CLASS="TYPE"
>regconfig</TT
>、または<TT
CLASS="TYPE"
>regdictionary</TT
>）を使用すると便利です。
例えば、以下のようにします。
</P><PRE
CLASS="PROGRAMLISTING"
>SELECT pg_type_is_visible('myschema.widget'::regtype);</PRE
><P>
ただし、このようなやり方でスキーマ修飾されていない型名をテストしても、あまり意味がないことに注意してください。名前が認識されれば、それは必ず可視ということになります。
   </P
><P
><A
HREF="functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE"
>表9-62</A
>に、システムカタログから情報を抽出する関数を列挙します。
  </P
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-INFO-CATALOG-TABLE"
></A
><P
><B
>表 9-62. システムカタログ情報関数</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>名前</TH
><TH
>戻り型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>format_type(<TT
CLASS="PARAMETER"
>type_oid</TT
>, <TT
CLASS="PARAMETER"
>typemod</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>データ型のSQL名を取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_get_constraintdef(<TT
CLASS="PARAMETER"
>constraint_oid</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>制約の定義を取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_get_constraintdef(<TT
CLASS="PARAMETER"
>constraint_oid</TT
>, <TT
CLASS="PARAMETER"
>pretty_bool</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>制約の定義を取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_get_expr(<TT
CLASS="PARAMETER"
>pg_node_tree</TT
>, <TT
CLASS="PARAMETER"
>relation_oid</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>式中のすべてのVarが２番目のパラメータによって指定されるリレーションを参照すると仮定して、式の内部形式を逆コンパイル</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_get_expr(<TT
CLASS="PARAMETER"
>pg_node_tree</TT
>, <TT
CLASS="PARAMETER"
>relation_oid</TT
>, <TT
CLASS="PARAMETER"
>pretty_bool</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>式中のすべてのVarが２番目のパラメータによって指定されるリレーションを参照すると仮定して、式の内部形式を逆コンパイル</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_get_functiondef(<TT
CLASS="PARAMETER"
>func_oid</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>関数定義の取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_get_function_arguments(<TT
CLASS="PARAMETER"
>func_oid</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>関数定義の引数リスト（デフォルト値付き）を取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_get_function_identity_arguments(<TT
CLASS="PARAMETER"
>func_oid</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>関数を特定するための引数リスト（デフォルト値なし）を取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_get_function_result(<TT
CLASS="PARAMETER"
>func_oid</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>関数に対する<TT
CLASS="LITERAL"
>RETURNS</TT
>句の取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_get_indexdef(<TT
CLASS="PARAMETER"
>index_oid</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>インデックスに対する<TT
CLASS="COMMAND"
>CREATE INDEX</TT
>コマンドの取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_get_indexdef(<TT
CLASS="PARAMETER"
>index_oid</TT
>, <TT
CLASS="PARAMETER"
>column_no</TT
>, <TT
CLASS="PARAMETER"
>pretty_bool</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>インデックスに対する<TT
CLASS="COMMAND"
>CREATE INDEX</TT
>コマンドの取得、または<TT
CLASS="PARAMETER"
>column_no</TT
>が非ゼロの場合は、１つのインデックス列のみの定義の取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_get_keywords()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>setof record</TT
></TD
><TD
>SQLキーワードとそれらの種類のリストを取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_get_ruledef(<TT
CLASS="PARAMETER"
>rule_oid</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>ルールに対する<TT
CLASS="COMMAND"
>CREATE RULE</TT
>コマンドを取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_get_ruledef(<TT
CLASS="PARAMETER"
>rule_oid</TT
>, <TT
CLASS="PARAMETER"
>pretty_bool</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>ルールに対する<TT
CLASS="COMMAND"
>CREATE RULE</TT
>コマンドを取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_get_serial_sequence(<TT
CLASS="PARAMETER"
>table_name</TT
>, <TT
CLASS="PARAMETER"
>column_name</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
><TT
CLASS="TYPE"
>serial</TT
>、<TT
CLASS="TYPE"
>smallserial</TT
>、または<TT
CLASS="TYPE"
>bigserial</TT
>列が使用するシーケンス名の取得</TD
></TR
><TR
><TD
><CODE
CLASS="FUNCTION"
>pg_get_triggerdef</CODE
>(<TT
CLASS="PARAMETER"
>trigger_oid</TT
>)</TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>トリガに対する<TT
CLASS="COMMAND"
>CREATE [ CONSTRAINT ] TRIGGER</TT
>コマンドの取得</TD
></TR
><TR
><TD
><CODE
CLASS="FUNCTION"
>pg_get_triggerdef</CODE
>(<TT
CLASS="PARAMETER"
>trigger_oid</TT
>, <TT
CLASS="PARAMETER"
>pretty_bool</TT
>)</TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>トリガに対する<TT
CLASS="COMMAND"
>CREATE [ CONSTRAINT ] TRIGGER</TT
>コマンドの取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_get_userbyid(<TT
CLASS="PARAMETER"
>role_oid</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>与えられたOIDでロール名を取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_get_viewdef(<TT
CLASS="PARAMETER"
>view_name</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>ビューまたはマテリアライズドビューの元になる<TT
CLASS="COMMAND"
>SELECT</TT
>コマンドを取得（<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>廃止予定</I
></SPAN
>）</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_get_viewdef(<TT
CLASS="PARAMETER"
>view_name</TT
>, <TT
CLASS="PARAMETER"
>pretty_bool</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>ビューまたはマテリアライズドビューの元になる<TT
CLASS="COMMAND"
>SELECT</TT
>コマンドを取得（<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>廃止予定</I
></SPAN
>）</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_get_viewdef(<TT
CLASS="PARAMETER"
>view_oid</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>ビューまたはマテリアライズドビューの元になる<TT
CLASS="COMMAND"
>SELECT</TT
>コマンドを取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_get_viewdef(<TT
CLASS="PARAMETER"
>view_oid</TT
>, <TT
CLASS="PARAMETER"
>pretty_bool</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>ビューまたはマテリアライズドビューの元になる<TT
CLASS="COMMAND"
>SELECT</TT
>コマンドを取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_get_viewdef(<TT
CLASS="PARAMETER"
>view_oid</TT
>, <TT
CLASS="PARAMETER"
>wrap_column_int</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>ビューまたはマテリアライズドビューの元になる<TT
CLASS="COMMAND"
>SELECT</TT
>コマンドを取得。
       フィールドを含む行は指定された列数で折り返され、成形された表示が行われます。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_index_column_has_property(<TT
CLASS="PARAMETER"
>index_oid</TT
>, <TT
CLASS="PARAMETER"
>column_no</TT
>, <TT
CLASS="PARAMETER"
>prop_name</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>インデックス列が指定の属性を持っているかどうか検査する</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_index_has_property(<TT
CLASS="PARAMETER"
>index_oid</TT
>, <TT
CLASS="PARAMETER"
>prop_name</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>インデックスが指定の属性を持っているかどうか検査する</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_indexam_has_property(<TT
CLASS="PARAMETER"
>am_oid</TT
>, <TT
CLASS="PARAMETER"
>prop_name</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>インデックスアクセスメソッドが指定の属性を持っているかどうか検査する</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_options_to_table(<TT
CLASS="PARAMETER"
>reloptions</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>setof record</TT
></TD
><TD
>格納オプションの名前/値のペアのセットを取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_tablespace_databases(<TT
CLASS="PARAMETER"
>tablespace_oid</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>setof oid</TT
></TD
><TD
>テーブル空間内にオブジェクトを所有するデータベースOID集合を取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_tablespace_location(<TT
CLASS="PARAMETER"
>tablespace_oid</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>指定したテーブル空間が実際に配置されているファイルシステム上のパスを取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_typeof(<TT
CLASS="PARAMETER"
>any</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>regtype</TT
></TD
><TD
>指定した値のデータ型を取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>collation for (<TT
CLASS="PARAMETER"
>any</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>引数の照合順序を取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>to_regclass(<TT
CLASS="PARAMETER"
>rel_name</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>regclass</TT
></TD
><TD
>指定のリレーションのOIDを取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>to_regproc(<TT
CLASS="PARAMETER"
>func_name</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>regproc</TT
></TD
><TD
>指定の関数のOIDを取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>to_regprocedure(<TT
CLASS="PARAMETER"
>func_name</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>regprocedure</TT
></TD
><TD
>指定の関数のOIDを取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>to_regoper(<TT
CLASS="PARAMETER"
>operator_name</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>regoper</TT
></TD
><TD
>指定の演算子のOIDを取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>to_regoperator(<TT
CLASS="PARAMETER"
>operator_name</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>regoperator</TT
></TD
><TD
>指定の演算子のOIDを取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>to_regtype(<TT
CLASS="PARAMETER"
>type_name</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>regtype</TT
></TD
><TD
>指定の型のOIDを取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>to_regnamespace(<TT
CLASS="PARAMETER"
>schema_name</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>regnamespace</TT
></TD
><TD
>指定のスキーマのOIDを取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>to_regrole(<TT
CLASS="PARAMETER"
>role_name</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>regrole</TT
></TD
><TD
>指定のロールのOIDを取得</TD
></TR
></TBODY
></TABLE
></DIV
><P
>関数<CODE
CLASS="FUNCTION"
>format_type</CODE
>は、自身の型OIDと場合により型修飾子によって特定されるデータ型のSQL名を返します。
特定の修飾子が既知でなければ型修飾子にNULLを渡します。
  </P
><P
>関数<CODE
CLASS="FUNCTION"
>pg_get_keywords</CODE
>は、サーバが認識したSQLキーワードを記述するレコードの集合を返します。
<TT
CLASS="STRUCTFIELD"
>word</TT
>列にはキーワードが含まれます。
<TT
CLASS="STRUCTFIELD"
>catcode</TT
>列は種類コードで、<TT
CLASS="LITERAL"
>U</TT
>は未予約(unreserved)、<TT
CLASS="LITERAL"
>C</TT
>は列名(column)、<TT
CLASS="LITERAL"
>T</TT
>は型名(type)または関数名、<TT
CLASS="LITERAL"
>R</TT
>は予約語(reserved)です。
<TT
CLASS="STRUCTFIELD"
>catdesc</TT
>列は種類を記述する文字列を含み、現地語化されている場合もあります。
  </P
><P
><CODE
CLASS="FUNCTION"
>pg_get_constraintdef</CODE
>、<CODE
CLASS="FUNCTION"
>pg_get_indexdef</CODE
>、<CODE
CLASS="FUNCTION"
>pg_get_ruledef</CODE
>、および<CODE
CLASS="FUNCTION"
>pg_get_triggerdef</CODE
>はそれぞれ、制約、インデックス、ルール、もしくはトリガに対する作成コマンドを再構築します。
（これはコマンドの元々のテキストではなく、逆コンパイルにより再構築されたテキストであることに注意してください。）
<CODE
CLASS="FUNCTION"
>pg_get_expr</CODE
>は、列のデフォルト値のような個々の式の内部形式を逆コンパイルします。
システムカタログの内容を試験するときに便利です。
式がVarを含んでいるかもしれない場合、２番目のパラメータとして参照する関連（リレーション）のOIDを指定します。Varがないと期待されるならゼロで充分です。
<CODE
CLASS="FUNCTION"
>pg_get_viewdef</CODE
> はビューを定義する<TT
CLASS="COMMAND"
>SELECT</TT
>問い合わせを再構築します。
これらの関数のほとんどは２つの異形があり、そのうちの１つはオプションとして結果を<SPAN
CLASS="QUOTE"
>"見やすく表示"</SPAN
>します。
見やすく表示された書式はより読みやすい半面、デフォルトの書式の方が今後のバージョンの<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>でも同様に解釈することができそうです。ダンプを目的とする場合は、見やすく表示する出力を使用しないでください。
見やすい表示用のパラメータに<TT
CLASS="LITERAL"
>false</TT
>を渡すことで、このパラメータをまったく持たない種類の結果と同一の結果を生成します。
  </P
><P
><CODE
CLASS="FUNCTION"
>pg_get_functiondef</CODE
>は、関数の完全な<TT
CLASS="COMMAND"
>CREATE OR REPLACE FUNCTION</TT
>文を返します。
<CODE
CLASS="FUNCTION"
>pg_get_function_arguments</CODE
>は、<TT
CLASS="COMMAND"
>CREATE FUNCTION</TT
>の中に出現しなければならない形式で、引数リストを返します。
<CODE
CLASS="FUNCTION"
>pg_get_function_result</CODE
>は同様、その関数の適切な<TT
CLASS="LITERAL"
>RETURNS</TT
>句を返します。
<CODE
CLASS="FUNCTION"
>pg_get_function_identity_arguments</CODE
>は、例えば<TT
CLASS="COMMAND"
>ALTER FUNCTION</TT
>の中に出現しなければならない形式で、関数を特定するのに必要な引数リストを返します。
この形式はデフォルト値を省略します。
  </P
><P
><CODE
CLASS="FUNCTION"
>pg_get_serial_sequence</CODE
>は、列に関連したシーケンスの名前を返します。もし、列に関連したシーケンスが存在しなければ、NULLを返します。
最初の入力パラメータはテーブル名です。スキーマを付けることもできます。２番目のパラメータは列名です。
最初のパラメータは普通スキーマとテーブルですので、二重引用符付の識別子としては解釈されません。つまり、デフォルトで小文字に変換されます。一方２番目のパラメータは単なる列名であり、二重引用符付として解釈され、その大文字小文字は保持されます。
この関数は、シーケンス関数に渡すことができるよう適切な書式で値を返します（<A
HREF="functions-sequence.html"
>項9.16</A
>を参照）。
この関連付けは<TT
CLASS="COMMAND"
>ALTER SEQUENCE OWNED BY</TT
>により変更、削除することができます。
（この関数はおそらく<CODE
CLASS="FUNCTION"
>pg_get_owned_sequence</CODE
>と呼ばれるべきでした。現在の名前は、通常は<TT
CLASS="TYPE"
>serial</TT
>や<TT
CLASS="TYPE"
>bigserial</TT
>列で使われることからきています。）
  </P
><P
><CODE
CLASS="FUNCTION"
>pg_get_userbyid</CODE
>はそのOIDで与えられたロールの名前を抽出します。
  </P
><P
><CODE
CLASS="FUNCTION"
>pg_index_column_has_property</CODE
>、<CODE
CLASS="FUNCTION"
>pg_index_has_property</CODE
>、<CODE
CLASS="FUNCTION"
>pg_indexam_has_property</CODE
>は指定のインデックス列、インデックス、あるいはインデックスアクセスメソッドが、指定の属性を所有しているかどうかを返します。
属性名が不明の場合、属性がその特定のオブジェクトに当てはまらない場合、OIDや列番号が有効なオブジェクトを特定できない場合は<TT
CLASS="LITERAL"
>NULL</TT
>が返されます。
列の属性については<A
HREF="functions-info.html#FUNCTIONS-INFO-INDEX-COLUMN-PROPS"
>表9-63</A
>、インデックスの属性については<A
HREF="functions-info.html#FUNCTIONS-INFO-INDEX-PROPS"
>表9-64</A
>、アクセスメソッドの属性については<A
HREF="functions-info.html#FUNCTIONS-INFO-INDEXAM-PROPS"
>表9-65</A
>を参照して下さい。
（拡張のアクセスメソッドはそのインデックスについて追加の属性名を定義できることに注意して下さい。）
  </P
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-INFO-INDEX-COLUMN-PROPS"
></A
><P
><B
>表 9-63. インデックス列の属性</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>名前</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
>asc</TT
></TD
><TD
>前方スキャンで列は昇順にソートされるか
      </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>desc</TT
></TD
><TD
>前方スキャンで列は降順にソートされるか
      </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>nulls_first</TT
></TD
><TD
>前方スキャンで列はNULLを先頭にしてソートするか
      </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>nulls_last</TT
></TD
><TD
>前方スキャンで列はNULLを最後にしてソートするか
      </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>orderable</TT
></TD
><TD
>列は定義済みのソート順を所有しているか
      </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>distance_orderable</TT
></TD
><TD
>列は<SPAN
CLASS="QUOTE"
>"距離"</SPAN
>の演算子の順序に従ってスキャンできるか、例えば<TT
CLASS="LITERAL"
>ORDER BY col &lt;-&gt; 定数</TT
>など
      </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>returnable</TT
></TD
><TD
>列の値をインデックスオンリースキャンで返すことができるか
      </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>search_array</TT
></TD
><TD
>列は<TT
CLASS="LITERAL"
>col = ANY(array)</TT
>の検索をネイティブにサポートしているか
      </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>search_nulls</TT
></TD
><TD
>列は<TT
CLASS="LITERAL"
>IS NULL</TT
>および<TT
CLASS="LITERAL"
>IS NOT NULL</TT
>の検索をサポートしているか
      </TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-INFO-INDEX-PROPS"
></A
><P
><B
>表 9-64. インデックスの属性</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>名前</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
>clusterable</TT
></TD
><TD
>インデックスを<TT
CLASS="LITERAL"
>CLUSTER</TT
>コマンドで使うことができるか
      </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>index_scan</TT
></TD
><TD
>インデックスは通常の（ビットマップでない）スキャンをサポートしているか
      </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>bitmap_scan</TT
></TD
><TD
>インデックスはビットマップスキャンをサポートしているか
      </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>backward_scan</TT
></TD
><TD
>インデックスを逆方向にスキャンできるか
      </TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-INFO-INDEXAM-PROPS"
></A
><P
><B
>表 9-65. インデックスアクセスメソッドの属性</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>名前</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
>can_order</TT
></TD
><TD
>アクセスメソッドは<TT
CLASS="LITERAL"
>CREATE INDEX</TT
>において<TT
CLASS="LITERAL"
>ASC</TT
>、<TT
CLASS="LITERAL"
>DESC</TT
>および関連するキーワードをサポートしているか
      </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>can_unique</TT
></TD
><TD
>アクセスメソッドは一意インデックスをサポートしているか
      </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>can_multi_col</TT
></TD
><TD
>アクセスメソッドは複数列にまたがるインデックスをサポートしているか
      </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>can_exclude</TT
></TD
><TD
>アクセスメソッドは除外制約をサポートしているか
      </TD
></TR
></TBODY
></TABLE
></DIV
><P
><CODE
CLASS="FUNCTION"
>pg_options_to_table</CODE
>は、<TT
CLASS="STRUCTNAME"
>pg_class</TT
>.<TT
CLASS="STRUCTFIELD"
>reloptions</TT
>または<TT
CLASS="STRUCTNAME"
>pg_attribute</TT
>.<TT
CLASS="STRUCTFIELD"
>attoptions</TT
>が渡されたときに、格納オプションの名前と値のペア(<TT
CLASS="REPLACEABLE"
><I
>option_name</I
></TT
>/<TT
CLASS="REPLACEABLE"
><I
>option_value</I
></TT
>)の集合を返します。
  </P
><P
><CODE
CLASS="FUNCTION"
>pg_tablespace_databases</CODE
>によりテーブル空間を調べることができ
ます。
これは、そのテーブル空間内に格納されたオブジェクトを持つデータベースのOIDの集合を返します。
この関数が何らかの行を返した場合、このテーブル空間は空ではなく、削除することがで
きません。
テーブル空間内に格納された特定のオブジェクトを表示するためには、<CODE
CLASS="FUNCTION"
>pg_tablespace_databases</CODE
>で識別されたデータベースに接続し、その<TT
CLASS="STRUCTNAME"
>pg_class</TT
>カタログに問い合わせを行う必要があります。
  </P
><P
><CODE
CLASS="FUNCTION"
>pg_typeof</CODE
>は、渡される値のデータ型のOIDを返します。
これはトラブル解決作業、または動的にSQL問い合わせを生成するのに便利です。
この関数は、OID型の別名である<TT
CLASS="TYPE"
>regtype</TT
>を返すものとして宣言されます（<A
HREF="datatype-oid.html"
>項8.18</A
>を参照）。つまり、比較が目的ならOIDと同一ですが、型名として表示されます。
以下に例をあげます。
</P><PRE
CLASS="PROGRAMLISTING"
>SELECT pg_typeof(33);

 pg_typeof 
-----------
 integer
(1 row)

SELECT typlen FROM pg_type WHERE oid = pg_typeof(33);
 typlen 
--------
      4
(1 row)</PRE
><P>
  </P
><P
><TT
CLASS="LITERAL"
>collation for</TT
>式は、それに渡された値の照合順序を返します。
例を示します。
</P><PRE
CLASS="PROGRAMLISTING"
>SELECT collation for (description) FROM pg_description LIMIT 1;
 pg_collation_for 
------------------
 "default"
(1 row)

SELECT collation for ('foo' COLLATE "de_DE");
 pg_collation_for 
------------------
 "de_DE"
(1 row)</PRE
><P>
値には引用符が付けられ、またはスキーマ修飾されることがあります。
もし引数の式から何も照合順序が得られなかった場合、NULLが返されます。
もし引数が照合順序をサポートしないデータ型だった場合、エラーとなります。
  </P
><P
><CODE
CLASS="FUNCTION"
>to_regclass</CODE
>、<CODE
CLASS="FUNCTION"
>to_regproc</CODE
>、<CODE
CLASS="FUNCTION"
>to_regprocedure</CODE
>、<CODE
CLASS="FUNCTION"
>to_regoper</CODE
>、<CODE
CLASS="FUNCTION"
>to_regoperator</CODE
>、<CODE
CLASS="FUNCTION"
>to_regtype</CODE
>、<CODE
CLASS="FUNCTION"
>to_regnamespace</CODE
>、<CODE
CLASS="FUNCTION"
>to_regrole</CODE
>関数はリレーション、関数、演算子、型、スキーマ、ロールの名前（<TT
CLASS="TYPE"
>text</TT
>として渡されます）をそれぞれ<TT
CLASS="TYPE"
>regclass</TT
>、<TT
CLASS="TYPE"
>regproc</TT
>、<TT
CLASS="TYPE"
>regprocedure</TT
>、<TT
CLASS="TYPE"
>regoper</TT
>、<TT
CLASS="TYPE"
>regoperator</TT
>、<TT
CLASS="TYPE"
>regtype</TT
>、<TT
CLASS="TYPE"
>regnamespace</TT
>、<TT
CLASS="TYPE"
>regrole</TT
>型のオブジェクトに変換します。
数値OIDを受け付けず、名前が見つからない(もしくは、<CODE
CLASS="FUNCTION"
>to_regproc</CODE
>と<CODE
CLASS="FUNCTION"
>to_regoper</CODE
>では、与えられた名前が複数のオブジェクトに一致する)場合にはエラーを発生するのではなくnullを返すという点で、これらの関数はテキストからのキャストとは異なります。
  </P
><P
><A
HREF="functions-info.html#FUNCTIONS-INFO-OBJECT-TABLE"
>表9-66</A
>にデータベースオブジェクトの識別とアドレスに関連する関数を示します。
  </P
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-INFO-OBJECT-TABLE"
></A
><P
><B
>表 9-66. オブジェクト情報とアドレスの関数</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>名前</TH
><TH
>戻り型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_describe_object(<TT
CLASS="PARAMETER"
>catalog_id</TT
>, <TT
CLASS="PARAMETER"
>object_id</TT
>, <TT
CLASS="PARAMETER"
>object_sub_id</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>データベースオブジェクトの説明の取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_identify_object(<TT
CLASS="PARAMETER"
>catalog_id</TT
> <TT
CLASS="TYPE"
>oid</TT
>, <TT
CLASS="PARAMETER"
>object_id</TT
> <TT
CLASS="TYPE"
>oid</TT
>, <TT
CLASS="PARAMETER"
>object_sub_id</TT
> <TT
CLASS="TYPE"
>integer</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="PARAMETER"
>type</TT
> <TT
CLASS="TYPE"
>text</TT
>, <TT
CLASS="PARAMETER"
>schema</TT
> <TT
CLASS="TYPE"
>text</TT
>, <TT
CLASS="PARAMETER"
>name</TT
> <TT
CLASS="TYPE"
>text</TT
>, <TT
CLASS="PARAMETER"
>identity</TT
> <TT
CLASS="TYPE"
>text</TT
></TD
><TD
>データベースオブジェクトの識別の取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_identify_object_as_address(<TT
CLASS="PARAMETER"
>catalog_id</TT
> <TT
CLASS="TYPE"
>oid</TT
>, <TT
CLASS="PARAMETER"
>object_id</TT
> <TT
CLASS="TYPE"
>oid</TT
>, <TT
CLASS="PARAMETER"
>object_sub_id</TT
> <TT
CLASS="TYPE"
>integer</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="PARAMETER"
>type</TT
> <TT
CLASS="TYPE"
>text</TT
>, <TT
CLASS="PARAMETER"
>name</TT
> <TT
CLASS="TYPE"
>text[]</TT
>, <TT
CLASS="PARAMETER"
>args</TT
> <TT
CLASS="TYPE"
>text[]</TT
></TD
><TD
>データベースオブジェクトのアドレスの外部表現を取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_get_object_address(<TT
CLASS="PARAMETER"
>type</TT
> <TT
CLASS="TYPE"
>text</TT
>, <TT
CLASS="PARAMETER"
>name</TT
> <TT
CLASS="TYPE"
>text[]</TT
>, <TT
CLASS="PARAMETER"
>args</TT
> <TT
CLASS="TYPE"
>text[]</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="PARAMETER"
>catalog_id</TT
> <TT
CLASS="TYPE"
>oid</TT
>, <TT
CLASS="PARAMETER"
>object_id</TT
> <TT
CLASS="TYPE"
>oid</TT
>, <TT
CLASS="PARAMETER"
>object_sub_id</TT
> <TT
CLASS="TYPE"
>int32</TT
></TD
><TD
>データベースオブジェクトのアドレスの外部表現から、アドレスを取得</TD
></TR
></TBODY
></TABLE
></DIV
><P
><CODE
CLASS="FUNCTION"
>pg_describe_object</CODE
>はカタログOID、オブジェクトOID、もしくはサブオブジェクトOID（0のこともある）で指定されたデータベースオブジェクトのテキストによる説明を返します。
この説明はサーバの設定に依存しますが、人が読んでわかる、そして翻訳も可能になることを目的としたのもです。
これは<TT
CLASS="STRUCTNAME"
>pg_depend</TT
>カタログに格納されたオブジェクトの識別判断の際に有用です。
  </P
><P
><CODE
CLASS="FUNCTION"
>pg_identify_object</CODE
>はカタログOID、オブジェクトOID、そしてサブオブジェクトID（0のこともある）により指定されるデータベースオブジェクトを一意に特定するために十分な情報を含む行を返します。
この情報は機械による読み取りを目的としており、決して翻訳されません。
<TT
CLASS="PARAMETER"
>type</TT
>はデータベースオブジェクトの型を識別するものです。
<TT
CLASS="PARAMETER"
>schema</TT
>はオブジェクトが所属するスキーマの名前ですが、スキーマに所属しないオブジェクト型の場合は<TT
CLASS="LITERAL"
>NULL</TT
>になります。
<TT
CLASS="PARAMETER"
>name</TT
>は（必要なら引用符で括った）オブジェクトの名前ですが、（適切ならスキーマ名と合わせて）オブジェクトの一意識別子として使用できる場合にのみ指定し、それ以外の場合は<TT
CLASS="LITERAL"
>NULL</TT
>にします。
<TT
CLASS="PARAMETER"
>identity</TT
>は完全なオブジェクトの識別で、オブジェクトの型に依存した正確なフォーマットを持っています。
フォーマット内の各部分はスキーマ修飾されており、必要に応じて引用符で括られます。
  </P
><P
><CODE
CLASS="FUNCTION"
>pg_identify_object_as_address</CODE
>はカタログOID、オブジェクトOID、そしてサブオブジェクトID（0のこともある）により指定されるデータベースオブジェクトを一意に特定するために充分な情報を含む行を返します。
返される情報は現在のサーバに依存しません。
つまり、他のサーバで全く同じ名前を付けられたオブジェクトを識別するために使うことができます。
<TT
CLASS="PARAMETER"
>type</TT
>はデータベースオブジェクトの型を識別するものです。
<TT
CLASS="PARAMETER"
>name</TT
>と<TT
CLASS="PARAMETER"
>args</TT
>は文字列の配列で、それらが組み合わされてオブジェクトへの参照を構成します。
これらの3つの列は、オブジェクトの内部アドレスを取得するために<CODE
CLASS="FUNCTION"
>pg_get_object_address</CODE
>に渡すことができます。
この関数は<CODE
CLASS="FUNCTION"
>pg_get_object_address</CODE
>の逆関数です。
  </P
><P
><CODE
CLASS="FUNCTION"
>pg_get_object_address</CODE
>は、型、オブジェクト名および引数の配列で指定されたデータベースオブジェクトを一意に特定するために十分な情報を含む行を返します。
返される値は、<TT
CLASS="STRUCTNAME"
>pg_depend</TT
>などのシステムカタログで使用されるもので、<CODE
CLASS="FUNCTION"
>pg_identify_object</CODE
>や<CODE
CLASS="FUNCTION"
>pg_describe_object</CODE
>など他のシステム関数に渡すことができます。
<TT
CLASS="PARAMETER"
>catalog_id</TT
>はオブジェクトを含むシステムカタログのOIDです。
<TT
CLASS="PARAMETER"
>object_id</TT
>はオブジェクト自体のOIDです。
<TT
CLASS="PARAMETER"
>object_sub_id</TT
>はオブジェクトのサブID、なければ0です。
この関数は<CODE
CLASS="FUNCTION"
>pg_identify_object_as_address</CODE
>の逆関数です。
  </P
><P
><A
HREF="functions-info.html#FUNCTIONS-INFO-COMMENT-TABLE"
>表9-67</A
>に示される関数は、<A
HREF="sql-comment.html"
>COMMENT</A
>コマンドによって以前に保存されたコメントを抽出します。
指定されたパラメータに対するコメントが存在しない場合、NULL値が返されます。
   </P
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-INFO-COMMENT-TABLE"
></A
><P
><B
>表 9-67. コメント情報関数</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>名前</TH
><TH
>戻り型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>col_description(<TT
CLASS="PARAMETER"
>table_oid</TT
>, <TT
CLASS="PARAMETER"
>column_number</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>テーブル列のコメントを取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>obj_description(<TT
CLASS="PARAMETER"
>object_oid</TT
>, <TT
CLASS="PARAMETER"
>catalog_name</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>データベースオブジェクトのコメントを取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>obj_description(<TT
CLASS="PARAMETER"
>object_oid</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>データベースオブジェクトのコメントを取得（<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>廃止予定</I
></SPAN
>）</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>shobj_description(<TT
CLASS="PARAMETER"
>object_oid</TT
>, <TT
CLASS="PARAMETER"
>catalog_name</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>共有データベースオブジェクトのコメントを取得</TD
></TR
></TBODY
></TABLE
></DIV
><P
><CODE
CLASS="FUNCTION"
>col_description()</CODE
>関数は、テーブルのOIDとその列番号で指定されるテーブルの列のコメントを返します。
（<CODE
CLASS="FUNCTION"
>obj_description()</CODE
>関数は、テーブル列自体がOIDを所有していませんので、テーブル列に対して使用することはできません。）
   </P
><P
><CODE
CLASS="FUNCTION"
>obj_description()</CODE
>関数の２つのパラメータを取る形式はそのOIDと保有しているシステムカタログの名前で指定されたデータベースオブジェクトのコメントを返します。
例えば、<TT
CLASS="LITERAL"
>obj_description(123456,'pg_class')</TT
>はOID 123456を持つテーブルのコメントを抽出します。
<CODE
CLASS="FUNCTION"
>obj_description()</CODE
>関数の単一パラメータ形式はオブジェクトのOIDのみ必要とします。
異なったシステムカタログに渡ってOIDが一意である保証はないことから廃止予定です。従って、間違ったコメントが返ることがあります。
   </P
><P
><CODE
CLASS="FUNCTION"
>shobj_description</CODE
>は、共有オブジェクトのコメント取得のために使用されることを除いて、<CODE
CLASS="FUNCTION"
>obj_description</CODE
>と同じように使用されます。
一部のシステムカタログは、各クラスタ内のデータベース全体に対して大域的です。これらのコメントも同様に大域的に格納されます。
   </P
><P
><A
HREF="functions-info.html#FUNCTIONS-TXID-SNAPSHOT"
>表9-68</A
>で示される関数はサーバトランザクション情報をエクスポートできる形式で提供します。
これら関数の主な使用目的は２つのスナップショット間でどちらのトランザクションがコミットされたのかを特定するためです。
   </P
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-TXID-SNAPSHOT"
></A
><P
><B
>表 9-68. トランザクションIDとスナップショット</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>名前</TH
><TH
>戻り型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>txid_current()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>現在のトランザクションIDの取得、現在のトランザクションにIDがなければ新規に割り当てる</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>txid_current_snapshot()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>txid_snapshot</TT
></TD
><TD
>現在のスナップショットの取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>txid_snapshot_xip(<TT
CLASS="PARAMETER"
>txid_snapshot</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>setof bigint</TT
></TD
><TD
>スナップショットにある進行中のトランザクションIDの取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>txid_snapshot_xmax(<TT
CLASS="PARAMETER"
>txid_snapshot</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>スナップショットの<TT
CLASS="LITERAL"
>xmax</TT
>の取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>txid_snapshot_xmin(<TT
CLASS="PARAMETER"
>txid_snapshot</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>スナップショットの<TT
CLASS="LITERAL"
>xmin</TT
>の取得</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>txid_visible_in_snapshot(<TT
CLASS="PARAMETER"
>bigint</TT
>, <TT
CLASS="PARAMETER"
>txid_snapshot</TT
>)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>スナップショットにあるトランザクションIDは可視か？（サブトランザクションIDで使用しないこと）</TD
></TR
></TBODY
></TABLE
></DIV
><P
>内部トランザクションID型（<TT
CLASS="TYPE"
>xid</TT
>）は32ビット幅なので40億トランザクション毎にラップします。
とは言っても、これらの関数は<SPAN
CLASS="QUOTE"
>"epoch"</SPAN
>カウンタにより拡張された64ビット形式をエクスポートするため、インストレーションの生涯にわたってラップしないでしょう。
これらの関数で使用されるデータ型、<TT
CLASS="TYPE"
>txid_snapshot</TT
>はある特定の時間におけるトランザクションIDの可視性に関する情報を格納します。
構成要素は<A
HREF="functions-info.html#FUNCTIONS-TXID-SNAPSHOT-PARTS"
>表9-69</A
>に記載されています。
   </P
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-TXID-SNAPSHOT-PARTS"
></A
><P
><B
>表 9-69. スナップショット構成要素</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>名前</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="TYPE"
>xmin</TT
></TD
><TD
>現在実行中で最も早いトランザクションID（txid）。
これより早い全てのトランザクションはコミットされて可視となっているか、またはロールバックされて消滅している。
       </TD
></TR
><TR
><TD
><TT
CLASS="TYPE"
>xmax</TT
></TD
><TD
>まだ割り当てられていない最初のtxid。
これと等しいかより大きい全てのtxidはスナップショットの時点で未開始であり、従って不可視。
       </TD
></TR
><TR
><TD
><TT
CLASS="TYPE"
>xip_list</TT
></TD
><TD
>スナップショット時の実行中のtxid。
リストは<TT
CLASS="LITERAL"
>xmin</TT
>と<TT
CLASS="LITERAL"
>xmax</TT
>間の実行中のtxidのみを含む。
<TT
CLASS="LITERAL"
>xmax</TT
>より高位で実行中のtxidが存在することもある。
<TT
CLASS="LITERAL"
>xmin &lt;= txid &lt; xmax</TT
>であり、このリストにないtxidはスナップショット時に既に完了しており、従って、コミット状態によって、可視か消滅かのいずれか。
リストには副トランザクションのtxidは含まれない。
       </TD
></TR
></TBODY
></TABLE
></DIV
><P
><TT
CLASS="TYPE"
>txid_snapshot</TT
>のテキスト表現は<TT
CLASS="LITERAL"
><TT
CLASS="REPLACEABLE"
><I
>xmin</I
></TT
>:<TT
CLASS="REPLACEABLE"
><I
>xmax</I
></TT
>:<TT
CLASS="REPLACEABLE"
><I
>xip_list</I
></TT
></TT
>です。
例えば、<TT
CLASS="LITERAL"
>10:20:10,14,15</TT
>は<TT
CLASS="LITERAL"
>xmin=10, xmax=20, xip_list=10, 14, 15</TT
>を意味します。
   </P
><P
><A
HREF="functions-info.html#FUNCTIONS-COMMIT-TIMESTAMP"
>表9-70</A
>に示す関数は、コミット済みのトランザクションに関する情報を提供します。
これらの関数は主に、トランザクションがいつコミットされたかについての情報を提供します。
これらは、設定オプション<A
HREF="runtime-config-replication.html#GUC-TRACK-COMMIT-TIMESTAMP"
>track_commit_timestamp</A
>が有効な時にのみ、しかもそれが有効にされた後にコミットされたトランザクションについてのみ有意なデータを提供します。
   </P
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-COMMIT-TIMESTAMP"
></A
><P
><B
>表 9-70. コミットされたトランザクションの情報</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>名前</TH
><TH
>戻り型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
>        
        <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_xact_commit_timestamp(<TT
CLASS="PARAMETER"
>xid</TT
>)</CODE
></TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>トランザクションのコミットのタイムスタンプを取得</TD
></TR
><TR
><TD
>        
        <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_last_committed_xact()</CODE
></TT
>
       </TD
><TD
><TT
CLASS="PARAMETER"
>xid</TT
> <TT
CLASS="TYPE"
>xid</TT
>, <TT
CLASS="PARAMETER"
>timestamp</TT
> <TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>最後にコミットされたトランザクションのトランザクションIDとコミットのタイムスタンプを取得</TD
></TR
></TBODY
></TABLE
></DIV
><P
><A
HREF="functions-info.html#FUNCTIONS-CONTROLDATA"
>表9-71</A
>に示す関数は、カタログのバージョンなどといった<TT
CLASS="COMMAND"
>initdb</TT
>の実行時に初期化される情報を表示します。
それらはまた、先行書き込みログとチェックポイント処理についての情報も示します。
この情報はクラスタ全体に渡るもので、どれか１つのデータベースに特有のものではありません。
それらは<A
HREF="app-pgcontroldata.html"
><SPAN
CLASS="APPLICATION"
>pg_controldata</SPAN
></A
>と同じ情報源から、ほぼ同じ情報を提供しますが、<ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>関数により適した形式になります。
   </P
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-CONTROLDATA"
></A
><P
><B
>表 9-71. 制御データ関数</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>名前</TH
><TH
>戻り値型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
>        
        <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_control_checkpoint()</CODE
></TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>record</TT
></TD
><TD
>現在のチェックポイントの状態に関する情報を返す
       </TD
></TR
><TR
><TD
>        
        <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_control_system()</CODE
></TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>record</TT
></TD
><TD
>現在の制御ファイルの状態に関する情報を返す
       </TD
></TR
><TR
><TD
>        
        <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_control_init()</CODE
></TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>record</TT
></TD
><TD
>クラスタの初期化状態に関する情報を返す
       </TD
></TR
><TR
><TD
>        
        <TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_control_recovery()</CODE
></TT
>
       </TD
><TD
><TT
CLASS="TYPE"
>record</TT
></TD
><TD
>リカバリの状態に関する情報を返す
       </TD
></TR
></TBODY
></TABLE
></DIV
><P
><CODE
CLASS="FUNCTION"
>pg_control_checkpoint</CODE
>は<A
HREF="functions-info.html#FUNCTIONS-PG-CONTROL-CHECKPOINT"
>表9-72</A
>に示すレコードを返します。
   </P
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-PG-CONTROL-CHECKPOINT"
></A
><P
><B
>表 9-72. <CODE
CLASS="FUNCTION"
>pg_control_checkpoint</CODE
>の列</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>列名</TH
><TH
>データ型</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
>checkpoint_location</TT
></TD
><TD
><TT
CLASS="TYPE"
>pg_lsn</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>prior_location</TT
></TD
><TD
><TT
CLASS="TYPE"
>pg_lsn</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>redo_location</TT
></TD
><TD
><TT
CLASS="TYPE"
>pg_lsn</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>redo_wal_file</TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>timeline_id</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>prev_timeline_id</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>full_page_writes</TT
></TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>next_xid</TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>next_oid</TT
></TD
><TD
><TT
CLASS="TYPE"
>oid</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>next_multixact_id</TT
></TD
><TD
><TT
CLASS="TYPE"
>xid</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>next_multi_offset</TT
></TD
><TD
><TT
CLASS="TYPE"
>xid</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>oldest_xid</TT
></TD
><TD
><TT
CLASS="TYPE"
>xid</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>oldest_xid_dbid</TT
></TD
><TD
><TT
CLASS="TYPE"
>oid</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>oldest_active_xid</TT
></TD
><TD
><TT
CLASS="TYPE"
>xid</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>oldest_multi_xid</TT
></TD
><TD
><TT
CLASS="TYPE"
>xid</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>oldest_multi_dbid</TT
></TD
><TD
><TT
CLASS="TYPE"
>oid</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>oldest_commit_ts_xid</TT
></TD
><TD
><TT
CLASS="TYPE"
>xid</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>newest_commit_ts_xid</TT
></TD
><TD
><TT
CLASS="TYPE"
>xid</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>checkpoint_time</TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
></TR
></TBODY
></TABLE
></DIV
><P
><CODE
CLASS="FUNCTION"
>pg_control_system</CODE
>は<A
HREF="functions-info.html#FUNCTIONS-PG-CONTROL-SYSTEM"
>表9-73</A
>に示すレコードを返します。
   </P
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-PG-CONTROL-SYSTEM"
></A
><P
><B
>表 9-73. <CODE
CLASS="FUNCTION"
>pg_control_system</CODE
>の列</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>列名</TH
><TH
>データ型</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
>pg_control_version</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>catalog_version_no</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>system_identifier</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>pg_control_last_modified</TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
></TR
></TBODY
></TABLE
></DIV
><P
><CODE
CLASS="FUNCTION"
>pg_control_init</CODE
>は<A
HREF="functions-info.html#FUNCTIONS-PG-CONTROL-INIT"
>表9-74</A
>に示すレコードを返します。
   </P
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-PG-CONTROL-INIT"
></A
><P
><B
>表 9-74. <CODE
CLASS="FUNCTION"
>pg_control_init</CODE
>の列</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>列名</TH
><TH
>データ型</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
>max_data_alignment</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>database_block_size</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>blocks_per_segment</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>wal_block_size</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>bytes_per_wal_segment</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>max_identifier_length</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>max_index_columns</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>max_toast_chunk_size</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>large_object_chunk_size</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>bigint_timestamps</TT
></TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>float4_pass_by_value</TT
></TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>float8_pass_by_value</TT
></TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>data_page_checksum_version</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
></TR
></TBODY
></TABLE
></DIV
><P
><CODE
CLASS="FUNCTION"
>pg_control_recovery</CODE
>は<A
HREF="functions-info.html#FUNCTIONS-PG-CONTROL-RECOVERY"
>表9-75</A
>に示すレコードを返します。
   </P
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-PG-CONTROL-RECOVERY"
></A
><P
><B
>表 9-75. <CODE
CLASS="FUNCTION"
>pg_control_recovery</CODE
>の列</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>列名</TH
><TH
>データ型</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
>min_recovery_end_location</TT
></TD
><TD
><TT
CLASS="TYPE"
>pg_lsn</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>min_recovery_end_timeline</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>backup_start_location</TT
></TD
><TD
><TT
CLASS="TYPE"
>pg_lsn</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>backup_end_location</TT
></TD
><TD
><TT
CLASS="TYPE"
>pg_lsn</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>end_of_backup_record_required</TT
></TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
></TR
></TBODY
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="functions-srf.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>ホーム</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="functions-admin.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>集合を返す関数</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="functions.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>システム管理関数</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>