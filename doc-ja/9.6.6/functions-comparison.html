<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>比較関数および演算子</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 9.6.5文書"
HREF="index.html"><LINK
REL="UP"
TITLE="関数と演算子"
HREF="functions.html"><LINK
REL="PREVIOUS"
TITLE="論理演算子"
HREF="functions-logical.html"><LINK
REL="NEXT"
TITLE="算術関数と演算子"
HREF="functions-math.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=utf-8"><META
NAME="creation"
CONTENT="2018-02-10T07:29:51"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>PostgreSQL 9.6.5文書</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="論理演算子"
HREF="functions-logical.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="functions.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>第 9章関数と演算子</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="算術関数と演算子"
HREF="functions-math.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="FUNCTIONS-COMPARISON"
>9.2. 比較関数および演算子</A
></H1
><P
><A
HREF="functions-comparison.html#FUNCTIONS-COMPARISON-OP-TABLE"
>表9-1</A
>に示すように、通常の比較演算子が使用可能です。
   </P
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-COMPARISON-OP-TABLE"
></A
><P
><B
>表 9-1. 比較演算子</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>演算子</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
> <TT
CLASS="LITERAL"
>&lt;</TT
> </TD
><TD
>小なり</TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>&gt;</TT
> </TD
><TD
>大なり</TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>&lt;=</TT
> </TD
><TD
>等しいかそれ以下</TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>&gt;=</TT
> </TD
><TD
>等しいかそれ以上</TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>=</TT
> </TD
><TD
>等しい</TD
></TR
><TR
><TD
> <TT
CLASS="LITERAL"
>&lt;&gt;</TT
> または <TT
CLASS="LITERAL"
>!=</TT
> </TD
><TD
>等しくない</TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
><TT
CLASS="LITERAL"
>!=</TT
>演算子は構文解析で<TT
CLASS="LITERAL"
>&lt;&gt;</TT
>に変換されます。
<TT
CLASS="LITERAL"
>!=</TT
>演算子と<TT
CLASS="LITERAL"
>&lt;&gt;</TT
>演算子に異なる処理を行わせる実装はできません。
    </P
></BLOCKQUOTE
></DIV
><P
>比較演算子は関連性のある全てのデータ型で使用できます。
全ての比較演算子は二項演算子で、<TT
CLASS="TYPE"
>boolean</TT
>型の値を返します。<TT
CLASS="LITERAL"
>1 &lt; 2 &lt; 3</TT
>のような式は（ブール値と<TT
CLASS="LITERAL"
>3</TT
>を比較する<TT
CLASS="LITERAL"
>&lt;</TT
>演算子がないので）無効です。
   </P
><P
><A
HREF="functions-comparison.html#FUNCTIONS-COMPARISON-PRED-TABLE"
>表9-2</A
>に示すように、比較の述語がいくつかあります。
これらは演算子と同様に振る舞いますが、標準SQLによって強制される特別の構文があります。
   </P
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-COMPARISON-PRED-TABLE"
></A
><P
><B
>表 9-2. 比較述語</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>述語</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
> <TT
CLASS="REPLACEABLE"
><I
>a</I
></TT
> <TT
CLASS="LITERAL"
>BETWEEN</TT
> <TT
CLASS="REPLACEABLE"
><I
>x</I
></TT
> <TT
CLASS="LITERAL"
>AND</TT
> <TT
CLASS="REPLACEABLE"
><I
>y</I
></TT
> </TD
><TD
>間にある</TD
></TR
><TR
><TD
> <TT
CLASS="REPLACEABLE"
><I
>a</I
></TT
> <TT
CLASS="LITERAL"
>NOT BETWEEN</TT
> <TT
CLASS="REPLACEABLE"
><I
>x</I
></TT
> <TT
CLASS="LITERAL"
>AND</TT
> <TT
CLASS="REPLACEABLE"
><I
>y</I
></TT
> </TD
><TD
>間にない</TD
></TR
><TR
><TD
> <TT
CLASS="REPLACEABLE"
><I
>a</I
></TT
> <TT
CLASS="LITERAL"
>BETWEEN SYMMETRIC</TT
> <TT
CLASS="REPLACEABLE"
><I
>x</I
></TT
> <TT
CLASS="LITERAL"
>AND</TT
> <TT
CLASS="REPLACEABLE"
><I
>y</I
></TT
> </TD
><TD
>間にある（比較値をソートする）</TD
></TR
><TR
><TD
> <TT
CLASS="REPLACEABLE"
><I
>a</I
></TT
> <TT
CLASS="LITERAL"
>NOT BETWEEN SYMMETRIC</TT
> <TT
CLASS="REPLACEABLE"
><I
>x</I
></TT
> <TT
CLASS="LITERAL"
>AND</TT
> <TT
CLASS="REPLACEABLE"
><I
>y</I
></TT
> </TD
><TD
>間にない（比較値をソートする）</TD
></TR
><TR
><TD
> <TT
CLASS="REPLACEABLE"
><I
>a</I
></TT
> <TT
CLASS="LITERAL"
>IS DISTINCT FROM</TT
> <TT
CLASS="REPLACEABLE"
><I
>b</I
></TT
> </TD
><TD
>等しくない（NULLは通常の値と同様に扱う）</TD
></TR
><TR
><TD
><TT
CLASS="REPLACEABLE"
><I
>a</I
></TT
> <TT
CLASS="LITERAL"
>IS NOT DISTINCT FROM</TT
> <TT
CLASS="REPLACEABLE"
><I
>b</I
></TT
></TD
><TD
>等しい（NULLは通常の値と同様に扱う）</TD
></TR
><TR
><TD
> <TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> <TT
CLASS="LITERAL"
>IS NULL</TT
> </TD
><TD
>NULLである</TD
></TR
><TR
><TD
> <TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> <TT
CLASS="LITERAL"
>IS NOT NULL</TT
> </TD
><TD
>NULLでない</TD
></TR
><TR
><TD
> <TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> <TT
CLASS="LITERAL"
>ISNULL</TT
> </TD
><TD
>NULLである（非標準の構文）</TD
></TR
><TR
><TD
> <TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> <TT
CLASS="LITERAL"
>NOTNULL</TT
> </TD
><TD
>NULLでない（非標準の構文）</TD
></TR
><TR
><TD
> <TT
CLASS="REPLACEABLE"
><I
>boolean_expression</I
></TT
> <TT
CLASS="LITERAL"
>IS TRUE</TT
> </TD
><TD
>真である</TD
></TR
><TR
><TD
> <TT
CLASS="REPLACEABLE"
><I
>boolean_expression</I
></TT
> <TT
CLASS="LITERAL"
>IS NOT TRUE</TT
> </TD
><TD
>偽あるいは不明である</TD
></TR
><TR
><TD
> <TT
CLASS="REPLACEABLE"
><I
>boolean_expression</I
></TT
> <TT
CLASS="LITERAL"
>IS FALSE</TT
> </TD
><TD
>偽である</TD
></TR
><TR
><TD
> <TT
CLASS="REPLACEABLE"
><I
>boolean_expression</I
></TT
> <TT
CLASS="LITERAL"
>IS NOT FALSE</TT
> </TD
><TD
>真あるいは不明である</TD
></TR
><TR
><TD
> <TT
CLASS="REPLACEABLE"
><I
>boolean_expression</I
></TT
> <TT
CLASS="LITERAL"
>IS UNKNOWN</TT
> </TD
><TD
>不明である</TD
></TR
><TR
><TD
> <TT
CLASS="REPLACEABLE"
><I
>boolean_expression</I
></TT
> <TT
CLASS="LITERAL"
>IS NOT UNKNOWN</TT
> </TD
><TD
>真あるいは偽である</TD
></TR
></TBODY
></TABLE
></DIV
><P
>    
<TT
CLASS="TOKEN"
>BETWEEN</TT
>述語は範囲の検査を次のように単純にします。
</P><PRE
CLASS="SYNOPSIS"
><TT
CLASS="REPLACEABLE"
><I
>a</I
></TT
> BETWEEN <TT
CLASS="REPLACEABLE"
><I
>x</I
></TT
> AND <TT
CLASS="REPLACEABLE"
><I
>y</I
></TT
></PRE
><P>
は
</P><PRE
CLASS="SYNOPSIS"
><TT
CLASS="REPLACEABLE"
><I
>a</I
></TT
> &gt;= <TT
CLASS="REPLACEABLE"
><I
>x</I
></TT
> AND <TT
CLASS="REPLACEABLE"
><I
>a</I
></TT
> &lt;= <TT
CLASS="REPLACEABLE"
><I
>y</I
></TT
></PRE
><P>
と同じです。
<TT
CLASS="TOKEN"
>BETWEEN</TT
>は範囲内に含まれるとして終点値を扱うことに注意してください。
<TT
CLASS="LITERAL"
>NOT BETWEEN</TT
>はその反対の比較をします（指定した値は包括しません）。
</P><PRE
CLASS="SYNOPSIS"
><TT
CLASS="REPLACEABLE"
><I
>a</I
></TT
> NOT BETWEEN <TT
CLASS="REPLACEABLE"
><I
>x</I
></TT
> AND <TT
CLASS="REPLACEABLE"
><I
>y</I
></TT
></PRE
><P>
は
</P><PRE
CLASS="SYNOPSIS"
><TT
CLASS="REPLACEABLE"
><I
>a</I
></TT
> &lt; <TT
CLASS="REPLACEABLE"
><I
>x</I
></TT
> OR <TT
CLASS="REPLACEABLE"
><I
>a</I
></TT
> &gt; <TT
CLASS="REPLACEABLE"
><I
>y</I
></TT
></PRE
><P>
と同一です。
    
<TT
CLASS="LITERAL"
>BETWEEN SYMMETRIC</TT
>は、<TT
CLASS="LITERAL"
>AND</TT
>の左側の引数が右側の引数より小さいか、もしくは等しいという必要性が無い点を除き<TT
CLASS="LITERAL"
>BETWEEN</TT
>と同様です。
この条件を満たしていない場合、2つの引数は自動的に交換されますので、常に空ではない範囲となります。
   </P
><P
>    
    
入力のどちらかがNULLの場合、通常の比較演算子は真や偽ではなく（<SPAN
CLASS="QUOTE"
>"不明"</SPAN
>を意味する）nullを生成します。
例えば<TT
CLASS="LITERAL"
>7 = NULL</TT
>はnullになります。<TT
CLASS="LITERAL"
>7 &lt;&gt; NULL</TT
>も同様です。
この動作が適切でない場合は、<TT
CLASS="LITERAL"
>IS [<SPAN
CLASS="OPTIONAL"
> NOT </SPAN
>] DISTINCT FROM</TT
>述語を使用してください。
</P><PRE
CLASS="SYNOPSIS"
><TT
CLASS="REPLACEABLE"
><I
>a</I
></TT
> IS DISTINCT FROM <TT
CLASS="REPLACEABLE"
><I
>b</I
></TT
>
<TT
CLASS="REPLACEABLE"
><I
>a</I
></TT
> IS NOT DISTINCT FROM <TT
CLASS="REPLACEABLE"
><I
>b</I
></TT
></PRE
><P>
非NULLの入力では、<TT
CLASS="LITERAL"
>IS DISTINCT FROM</TT
>は<TT
CLASS="LITERAL"
>&lt;&gt;</TT
>演算子と同じです。
しかし、入力がどちらもNULLの場合、これは偽を返し、片方の入力のみがNULLの場合は真を返します。
同様に、<TT
CLASS="LITERAL"
>IS NOT DISTINCT FROM</TT
>は非NULL入力では<TT
CLASS="LITERAL"
>=</TT
>と同じですが、両方の入力がNULLであれば真を、片方のみがNULLの場合は偽を返します。
このように、これらの述語はNULLを<SPAN
CLASS="QUOTE"
>"不明な値"</SPAN
>ではなく、通常の値かのように動作します。
   </P
><P
>    
    
    
    
値がNULLかNULLでないかを検証するには次の述語を使います。
</P><PRE
CLASS="SYNOPSIS"
><TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> IS NULL
<TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> IS NOT NULL</PRE
><P>
あるいは、これと同等の、非標準の述語も使えます。
</P><PRE
CLASS="SYNOPSIS"
><TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> ISNULL
<TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> NOTNULL</PRE
><P>
    
   </P
><P
><TT
CLASS="LITERAL"
>NULL</TT
>と<TT
CLASS="LITERAL"
>NULL</TT
>とは<SPAN
CLASS="QUOTE"
>"等しい"</SPAN
>関係にはありませんので、<TT
CLASS="LITERAL"
><TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> = NULL</TT
>と記述しては<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>いけません</I
></SPAN
>
（NULL値は不明の値を表しているため、不明な値同士が同じかどうかは識別できません）。
   </P
><DIV
CLASS="TIP"
><BLOCKQUOTE
CLASS="TIP"
><P
><B
>ティップ: </B
>アプリケーションによっては、<TT
CLASS="LITERAL"
><TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> = NULL</TT
>が、<TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
>がNULL値と評価されるのであれば真を返すことを期待することがあります。
こうしたアプリケーションは標準SQLに従うように改修することを強く推奨します。
しかし、それができなければ<A
HREF="runtime-config-compatible.html#GUC-TRANSFORM-NULL-EQUALS"
>transform_null_equals</A
>を使用することで対応することができます。
これを有効にした場合、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>は<TT
CLASS="LITERAL"
>x = NULL</TT
>句を<TT
CLASS="LITERAL"
>x IS NULL</TT
>に変換します。
   </P
></BLOCKQUOTE
></DIV
><P
><TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
>が行値の場合、行式自体がNULLまたは、行のフィールドすべてがNULLの場合に<TT
CLASS="LITERAL"
>IS NULL</TT
>は真となります。
一方<TT
CLASS="LITERAL"
>IS NOT NULL</TT
>は、行式自体が非NULLかつ、行のフィールドすべてが非NULLの場合に真となります。
この動作により、<TT
CLASS="LITERAL"
>IS NULL</TT
>および<TT
CLASS="LITERAL"
>IS NOT NULL</TT
>は行値評価式に対し常に反対の結果を返すわけではありません。
特に、NULLと非NULLの値の両方を含む行値式はどちらの試験でも偽を返します。
場合によっては、<TT
CLASS="REPLACEABLE"
><I
>row</I
></TT
> <TT
CLASS="LITERAL"
>IS DISTINCT FROM NULL</TT
>あるいは<TT
CLASS="REPLACEABLE"
><I
>row</I
></TT
> <TT
CLASS="LITERAL"
>IS NOT DISTINCT FROM NULL</TT
>と記述する方が望ましいことがあるでしょう。
これらは単に行全体の値がNULLかどうかを検査し、行のフィールドについての追加的検査を全く行わないからです。
   </P
><P
>    
    
    
    
    
    
論理値も次の述語で検証できます。
</P><PRE
CLASS="SYNOPSIS"
><TT
CLASS="REPLACEABLE"
><I
>boolean_expression</I
></TT
> IS TRUE
<TT
CLASS="REPLACEABLE"
><I
>boolean_expression</I
></TT
> IS NOT TRUE
<TT
CLASS="REPLACEABLE"
><I
>boolean_expression</I
></TT
> IS FALSE
<TT
CLASS="REPLACEABLE"
><I
>boolean_expression</I
></TT
> IS NOT FALSE
<TT
CLASS="REPLACEABLE"
><I
>boolean_expression</I
></TT
> IS UNKNOWN
<TT
CLASS="REPLACEABLE"
><I
>boolean_expression</I
></TT
> IS NOT UNKNOWN</PRE
><P>
これらは、常に真か偽を返し、演算項目がNULLであってもNULL値を返すことはありません。
NULL値が入力されると、<SPAN
CLASS="QUOTE"
>"不明"</SPAN
>という論理値として扱われます。
<TT
CLASS="LITERAL"
>IS UNKNOWN</TT
>と<TT
CLASS="LITERAL"
>IS NOT UNKNOWN</TT
>が、入力式が論理値型でなければならないという点を除き、それぞれ実質的に<TT
CLASS="LITERAL"
>IS NULL</TT
>と<TT
CLASS="LITERAL"
>IS NOT NULL</TT
>と同じであることに注意してください。
   </P
><P
><A
HREF="functions-comparison.html#FUNCTIONS-COMPARISON-FUNC-TABLE"
>表9-3</A
>に示すように、比較に関連した関数がいくつか使用可能です。
   </P
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-COMPARISON-FUNC-TABLE"
></A
><P
><B
>表 9-3. 比較関数</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><COL><THEAD
><TR
><TH
>関数</TH
><TH
>説明</TH
><TH
>例</TH
><TH
>例の結果</TH
></TR
></THEAD
><TBODY
><TR
><TD
>         
         <TT
CLASS="LITERAL"
>num_nonnulls(VARIADIC "any")</TT
>
       </TD
><TD
>非NULLの引数の個数を返す</TD
><TD
><TT
CLASS="LITERAL"
>num_nonnulls(1, NULL, 2)</TT
></TD
><TD
><TT
CLASS="LITERAL"
>2</TT
></TD
></TR
><TR
><TD
>         
         <TT
CLASS="LITERAL"
>num_nulls(VARIADIC "any")</TT
>
       </TD
><TD
>NULLの引数の個数を返す</TD
><TD
><TT
CLASS="LITERAL"
>num_nulls(1, NULL, 2)</TT
></TD
><TD
><TT
CLASS="LITERAL"
>1</TT
></TD
></TR
></TBODY
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="functions-logical.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>ホーム</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="functions-math.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>論理演算子</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="functions.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>算術関数と演算子</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>