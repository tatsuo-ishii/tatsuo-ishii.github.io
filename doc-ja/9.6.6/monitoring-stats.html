<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>統計情報コレクタ</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 9.6.5文書"
HREF="index.html"><LINK
REL="UP"
TITLE="データベース活動状況の監視"
HREF="monitoring.html"><LINK
REL="PREVIOUS"
TITLE="標準的なUnixツール"
HREF="monitoring-ps.html"><LINK
REL="NEXT"
TITLE="ロックの表示"
HREF="monitoring-locks.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=utf-8"><META
NAME="creation"
CONTENT="2018-02-10T07:29:51"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>PostgreSQL 9.6.5文書</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="標準的なUnixツール"
HREF="monitoring-ps.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="monitoring.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>第 28章データベース活動状況の監視</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="ロックの表示"
HREF="monitoring-locks.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="MONITORING-STATS"
>28.2. 統計情報コレクタ</A
></H1
><P
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の<I
CLASS="FIRSTTERM"
>統計情報コレクタ</I
>はサーバの活動状況に関する情報を収集し、報告するサブシステムです。
現在、コレクタはテーブルとインデックスへのアクセスをディスクブロックおよび個々の行単位で数えることができます。
またこれは、各テーブル内の総行数、および、各テーブルでのバキュームやアナライズの実施情報を追跡します。
また、ユーザ定義関数の呼ばれた回数、それぞれの消費した総時間をカウントします。
  </P
><P
>また、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>は他のサーバプロセスによって現在実行されている正確なコマンドなど現在システム内で起きていること、またシステム内にどんな他の接続が存在するかということについての動的情報を正確に報告する機能を持ちます。
これはコレクタプロセスから独立している機能です。
  </P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="MONITORING-STATS-SETUP"
>28.2.1. 統計情報収集のための設定</A
></H2
><P
>統計情報の収集によって問い合わせの実行に少しオーバーヘッドが加わりますので、システムは情報を収集するようにもしないようにも設定することができます。
これは通常は<TT
CLASS="FILENAME"
>postgresql.conf</TT
>内で設定される、設定パラメータによって制御されます
（設定パラメータの設定についての詳細は<A
HREF="runtime-config.html"
>第19章</A
>を参照してください）。
  </P
><P
><A
HREF="runtime-config-statistics.html#GUC-TRACK-ACTIVITIES"
>track_activities</A
>パラメータにより、すべてのサーバプロセスで現在実行されているコマンドを監視することができます。
  </P
><P
><A
HREF="runtime-config-statistics.html#GUC-TRACK-COUNTS"
>track_counts</A
>パラメータは、テーブルおよびインデックスアクセスに関する統計情報を収集するかどうか制御します。
  </P
><P
><A
HREF="runtime-config-statistics.html#GUC-TRACK-FUNCTIONS"
>track_functions</A
>パラメータは、ユーザ定義関数の使用状況を追跡するかどうかを指定できます。
  </P
><P
><A
HREF="runtime-config-statistics.html#GUC-TRACK-IO-TIMING"
>track_io_timing</A
>パラメータは、ブロック読み取りおよび書き込み回数の監視するかどうかを指定できます。
  </P
><P
>通常、これらの変数は全てのサーバプロセスに適用できるように<TT
CLASS="FILENAME"
>postgresql.conf</TT
>内で設定されます。
しかし、<A
HREF="sql-set.html"
>SET</A
>コマンドを使用して、個別のセッションで有効または無効にできます。
（一般ユーザがその活動を管理者に隠すことを防止するために、スーパーユーザのみが<TT
CLASS="COMMAND"
>SET</TT
>を使用してこれらのパラメータを変更できます。）
  </P
><P
>統計情報コレクタは収集した情報を他の<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>プロセスに一時ファイルを介して送信します。
これらのファイルは<A
HREF="runtime-config-statistics.html#GUC-STATS-TEMP-DIRECTORY"
>stats_temp_directory</A
>で指名されたディレクトリ、デフォルトは<TT
CLASS="FILENAME"
>pg_stat_tmp</TT
>内に格納されます。
性能を向上させるために、<TT
CLASS="VARNAME"
>stats_temp_directory</TT
>をRAMベースのファイルシステムを指し示すようにして、物理的なI/O要求を減らすことができます。
サーバが正しくシャットダウンした際は、統計情報がサーバの再起動を跨がって保持されるように、統計情報データの永続的なコピーが<TT
CLASS="FILENAME"
>pg_stat</TT
>サブディレクトリに格納されます。
サーバ起動時にリカバリが実施される場合(例えば、即時シャットダウンやサーバクラッシュ、ポイントインタイムリカバリ)、統計カウンタをすべてリセットします。
  </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="MONITORING-STATS-VIEWS"
>28.2.2. 統計情報の表示</A
></H2
><P
>システムの現在の状態を表示するために、いくつかの定義済みのビューがあり、<A
HREF="monitoring-stats.html#MONITORING-STATS-DYNAMIC-VIEWS-TABLE"
>表28-1</A
>に一覧されています。
また、統計情報の収集結果を表示するために、他にもいくつかのビューがあり、<A
HREF="monitoring-stats.html#MONITORING-STATS-VIEWS-TABLE"
>表28-2</A
>に一覧されています。
他にも、<A
HREF="monitoring-stats.html#MONITORING-STATS-FUNCTIONS"
>項28.2.3</A
>で説明する、基礎的な統計情報関数を使用した独自のビューを構築することもできます。
  </P
><P
>この統計情報を使用して、収集されるデータを監視する場合、この情報は即座に更新されないことを認識することが重要です。
個別のサーバプロセスは、待機状態になる直前に、新しい統計情報に関する数をコレクタに送信します。
ですので、実行中の問い合わせやトランザクションは表示上の総和には影響を与えません。
また、コレクタ自体もおよそ<TT
CLASS="VARNAME"
>PGSTAT_STAT_INTERVAL</TT
>（サーバ構築時に変更しない限り500 ms）ミリ秒に一度新しい報告を出力します。
ですので、表示上の情報は実際の活動から遅れて表示されます。
しかし、<TT
CLASS="VARNAME"
>track_activities</TT
>で収集される現在の問い合わせの情報は常に最新です。
  </P
><P
>この他の重要なポイントは、いつサーバプロセスが統計情報を表示するように尋ねられるかです。
サーバプロセスは、まずコレクタによって発行された最も最近の報告を取り出します。
そして、現在のトランザクションが終わるまで、全ての統計情報ビューと関数においてこのスナップショットを使用し続けます。
ですから、現在のトランザクションを続けている間、統計情報は一定の情報を示します。
同様に、全セッションの現在の問い合わせに関する情報も、そうした情報がトランザクションで最初に要求された時に収集され、そのトランザクションの間同じ情報が表示されます。
これはバグではなく、特徴です。
なぜなら、これにより、知らない間に値が変更することを考慮することなく、統計情報に対して複数の問い合わせを実行し、その結果を相関することができるからです。
しかし、各問い合わせで新しい結果を取り出したい場合は、確実にトランザクションブロックの外側でその問い合わせを行ってください。
他にも<CODE
CLASS="FUNCTION"
>pg_stat_clear_snapshot</CODE
>()を呼び出すこともできます。
これは現在のトランザクションの統計情報スナップショットを（もしあれば）破棄します。
次に統計情報を使用する場合に新しいスナップショットを取り出すことになります。
  </P
><P
>トランザクションからは、<TT
CLASS="STRUCTNAME"
>pg_stat_xact_all_tables</TT
>、<TT
CLASS="STRUCTNAME"
>pg_stat_xact_sys_tables</TT
>、<TT
CLASS="STRUCTNAME"
>pg_stat_xact_user_tables</TT
>、<TT
CLASS="STRUCTNAME"
>pg_stat_xact_user_functions</TT
>、およびこれらのビューの元となっている関数を通じて、自身の統計情報(まだコレクタに送られていない)も参照することができます。
   これらの数値はトランザクション中に継続的に更新されていくため上記の様な(静的な情報を示す)振る舞いとはなりません。
  </P
><DIV
CLASS="TABLE"
><A
NAME="MONITORING-STATS-DYNAMIC-VIEWS-TABLE"
></A
><P
><B
>表 28-1. 動的統計情報ビュー</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>ビュー名</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
>       <TT
CLASS="STRUCTNAME"
>pg_stat_activity</TT
>
       
      </TD
><TD
>サーバ当たり１行の形式で、状態や現在の問い合わせ等のプロセスの現在の活動状況に関連した情報を表示します。
詳細については<A
HREF="monitoring-stats.html#PG-STAT-ACTIVITY-VIEW"
>pg_stat_activity</A
>を参照してください。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_stat_replication</TT
></TD
><TD
>WAL送信プロセス毎に１行の形式で、送信サーバが接続したスタンバイサーバへのレプリケーションに関する統計情報を表示します。
詳細については<A
HREF="monitoring-stats.html#PG-STAT-REPLICATION-VIEW"
>pg_stat_replication</A
>を参照して下さい。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_stat_wal_receiver</TT
></TD
><TD
>１行の形式で、受信サーバが接続したサーバからWALレシーバに関する統計情報を表示します。
詳細については<A
HREF="monitoring-stats.html#PG-STAT-WAL-RECEIVER-VIEW"
>pg_stat_wal_receiver</A
>を参照してください。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_stat_ssl</TT
></TD
><TD
>接続（通常およびレプリケーション）あたり1行の形式で、接続に使われるSSLの情報を表示します。
詳しくは<A
HREF="monitoring-stats.html#PG-STAT-SSL-VIEW"
>pg_stat_ssl</A
>を参照して下さい。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_stat_progress_vacuum</TT
></TD
><TD
>VACUUMを実行している（自動バキュームワーカプロセスを含んだ）それぞれのバックエンドごとに１行の形で、現在の進捗を示します。
<A
HREF="progress-reporting.html#VACUUM-PROGRESS-REPORTING"
>項28.4.1</A
>を参照してください。
      </TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="TABLE"
><A
NAME="MONITORING-STATS-VIEWS-TABLE"
></A
><P
><B
>表 28-2. 収集済み統計情報ビュー</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>ビュー名</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_stat_archiver</TT
></TD
><TD
>WALアーカイバプロセスの活動状況に関する統計情報を１行のみで表示します
詳細については<A
HREF="monitoring-stats.html#PG-STAT-ARCHIVER-VIEW"
>pg_stat_archiver</A
>を参照してください。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_stat_bgwriter</TT
></TD
><TD
>バックグラウンドライタプロセスの活動状況に関する統計情報を１行のみで表示します。
詳細については<A
HREF="monitoring-stats.html#PG-STAT-BGWRITER-VIEW"
>pg_stat_bgwriter</A
>を参照してください。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_stat_database</TT
></TD
><TD
>データベース当たり１行の形で、データベース全体の情報を表示します。
詳細については<A
HREF="monitoring-stats.html#PG-STAT-DATABASE-VIEW"
>pg_stat_database</A
>を参照してください。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_stat_database_conflicts</TT
></TD
><TD
>データベース毎に１行の形式で、スタンバイサーバにおける復旧との競合のためにキャンセルされた問い合わせについてのデータベース全体の統計情報を表示します。
詳細については<A
HREF="monitoring-stats.html#PG-STAT-DATABASE-CONFLICTS-VIEW"
>pg_stat_database_conflicts</A
>を参照して下さい。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_stat_all_tables</TT
></TD
><TD
>現在のデータベースの各テーブルごとに１行の形で、特定のテーブルへのアクセスに関する統計情報を示します。
詳細については<A
HREF="monitoring-stats.html#PG-STAT-ALL-TABLES-VIEW"
>pg_stat_all_tables</A
>を参照してください。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_stat_sys_tables</TT
></TD
><TD
>システムテーブルのみが表示される点を除き、<TT
CLASS="STRUCTNAME"
>pg_stat_all_tables</TT
>と同じです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_stat_user_tables</TT
></TD
><TD
>ユーザテーブルのみが表示される点を除き、<TT
CLASS="STRUCTNAME"
>pg_stat_all_tables</TT
>と同じです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_stat_xact_all_tables</TT
></TD
><TD
><TT
CLASS="STRUCTNAME"
>pg_stat_all_tables</TT
>と似ていますが、現在のトランザクションにて実施された処理結果をカウントします。(数値が見える時点では、これらの数値は<TT
CLASS="STRUCTNAME"
>pg_stat_all_tables</TT
>と関連するビューに含まれて<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>いません</I
></SPAN
>。)
このビューでは、有効行数、無効行数、およびバキュームやアナライズの活動は表示しません。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_stat_xact_sys_tables</TT
></TD
><TD
>      システムテーブルのみが表示される点を除き、<TT
CLASS="STRUCTNAME"
>pg_stat_xact_all_tables</TT
>と同じです。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_stat_xact_user_tables</TT
></TD
><TD
>      ユーザテーブルのみが表示される点を除き、<TT
CLASS="STRUCTNAME"
>pg_stat_xact_all_tables</TT
>と同じです。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_stat_all_indexes</TT
></TD
><TD
>現在のデータベースのインデックスごとに１行の形で、特定のインデックスへのアクセスに関する統計情報を示します。
詳細については<A
HREF="monitoring-stats.html#PG-STAT-ALL-INDEXES-VIEW"
>pg_stat_all_indexes</A
>を参照してください。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_stat_sys_indexes</TT
></TD
><TD
>システムテーブルのインデックスのみが表示される点を除き、<TT
CLASS="STRUCTNAME"
>pg_stat_all_indexes</TT
>と同じです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_stat_user_indexes</TT
></TD
><TD
>ユーザテーブルのインデックスのみが表示される点を除き、<TT
CLASS="STRUCTNAME"
>pg_stat_all_indexes</TT
>と同じです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_statio_all_tables</TT
></TD
><TD
>現在のデータベース内のテーブルごとに１行の形で、特定のテーブルに対するI/Oに関する統計情報を示します。
詳細については<A
HREF="monitoring-stats.html#PG-STATIO-ALL-TABLES-VIEW"
>pg_statio_all_tables</A
>を参照してください。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_statio_sys_tables</TT
></TD
><TD
>システムテーブルのみが表示される点を除き、<TT
CLASS="STRUCTNAME"
>pg_statio_all_tables</TT
>と同じです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_statio_user_tables</TT
></TD
><TD
>ユーザテーブルのみが表示される点を除き、<TT
CLASS="STRUCTNAME"
>pg_statio_all_tables</TT
>と同じです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_statio_all_indexes</TT
></TD
><TD
>現在のデータベース内のインデックスごとに１行の形で、特定のインデックスに対するI/Oに関する統計情報を示します。
詳細については<A
HREF="monitoring-stats.html#PG-STATIO-ALL-INDEXES-VIEW"
>pg_statio_all_indexes</A
>を示します。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_statio_sys_indexes</TT
></TD
><TD
>システムテーブルのインデックスのみが表示される点を除き、<TT
CLASS="STRUCTNAME"
>pg_statio_all_indexes</TT
> と同じです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_statio_user_indexes</TT
></TD
><TD
>ユーザテーブルのインデックスのみが表示される点を除き、<TT
CLASS="STRUCTNAME"
>pg_statio_all_indexes</TT
>と同じです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_statio_all_sequences</TT
></TD
><TD
>現在のデータベース内のシーケンスごとに１行の形で、特定のシーケンスに対するI/Oに関する統計情報を示します。
詳細については<A
HREF="monitoring-stats.html#PG-STATIO-ALL-SEQUENCES-VIEW"
>pg_statio_all_sequences</A
>を参照してください。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_statio_sys_sequences</TT
></TD
><TD
>システムシーケンスのみが表示される点を除き、<TT
CLASS="STRUCTNAME"
>pg_statio_all_sequences</TT
>と同じです
（現時点では、システムシーケンスは定義されていませんので、このビューは常に空です）。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_statio_user_sequences</TT
></TD
><TD
>ユーザシーケンスのみが表示される点を除き、<TT
CLASS="STRUCTNAME"
>pg_statio_all_sequences</TT
>と同じです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_stat_user_functions</TT
></TD
><TD
>追跡された関数ごとに１行の形で、関数の実行に関する統計情報を示します。
詳細については<A
HREF="monitoring-stats.html#PG-STAT-USER-FUNCTIONS-VIEW"
>pg_stat_user_functions</A
>を参照してください。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTNAME"
>pg_stat_xact_user_functions</TT
></TD
><TD
><TT
CLASS="STRUCTNAME"
>pg_stat_user_functions</TT
>と似ていますが、現在のトランザクション中に呼び出されたものだけをカウントします。
(数値が見える時点では、これらの数値は<TT
CLASS="STRUCTNAME"
>pg_stat_user_functions</TT
>に含まれて<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>いません</I
></SPAN
>。)
      </TD
></TR
></TBODY
></TABLE
></DIV
><P
>インデックス単位の統計情報は、どのインデックスが使用され、どの程度効果があるのかを評価する際に、特に有用です。
  </P
><P
><TT
CLASS="STRUCTNAME"
>pg_statio_</TT
>ビューは主に、バッファキャッシュの効率を評価する際に有用です。
実ディスク読み取りの数がバッファヒットの数よりもかなり少ないのであれば、そのキャッシュはカーネル呼び出しを行うことなく、ほとんどの読み取り要求を満足させています。
しかし、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>バッファキャッシュに存在しないデータはカーネルのI/Oキャッシュにある可能性があり、そのため、物理的な読み取りを行うことなく取り出される可能性があるという<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>のディスクI/Oの取り扱いのため、これらの統計情報は、完全な論拠を提供しません。
<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>のI/O動作に関するより詳細な情報を入手したいのであれば、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>統計情報コレクタとカーネルのI/Oの取り扱いの監視を行うオペレーティングシステムユーティリティを組み合わせることを勧めます。
  </P
><DIV
CLASS="TABLE"
><A
NAME="PG-STAT-ACTIVITY-VIEW"
></A
><P
><B
>表 28-3. <TT
CLASS="STRUCTNAME"
>pg_stat_activity</TT
>ビュー</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>列</TH
><TH
>型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>datid</TT
></TD
><TD
><TT
CLASS="TYPE"
>oid</TT
></TD
><TD
>バックエンドが接続するデータベースのOIDです。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>datname</TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>バックエンドが接続するデータベースの名前です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>pid</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
><TD
>バックエンドのプロセスIDです。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>usesysid</TT
></TD
><TD
><TT
CLASS="TYPE"
>oid</TT
></TD
><TD
>バックエンドにログインしたユーザの識別子です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>usename</TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>バックエンドに接続したユーザの名前です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>application_name</TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>バックエンドに接続したアプリケーションの名前です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>client_addr</TT
></TD
><TD
><TT
CLASS="TYPE"
>inet</TT
></TD
><TD
>バックエンドに接続したクライアントのIPアドレスです。
このフィールドがNULLである場合、これはクライアントがサーバマシン上のUnixソケット経由で接続されたか、自動バキュームなど内部処理であることを示します。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>client_hostname</TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
><TT
CLASS="STRUCTFIELD"
>client_addr</TT
>の逆引き検索により報告された、接続クライアントのホスト名です。
IP接続、かつ<A
HREF="runtime-config-logging.html#GUC-LOG-HOSTNAME"
>log_hostname</A
>が有効である場合にのみこのフィールドは非NULLになります。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>client_port</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
><TD
>クライアントがバックエンドとの通信に使用するTCPポート、もしUnixソケットを使用する場合は<TT
CLASS="LITERAL"
>-1</TT
>です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>backend_start</TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>プロセスが開始、つまりクライアントがサーバに接続した時刻です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>xact_start</TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>プロセスの現在のトランザクションが開始した時刻です。
活動中のトランザクションがない場合はNULLです。
現在の問い合わせがトランザクションの先頭である場合、この列は<TT
CLASS="STRUCTFIELD"
>query_start</TT
>列と同じです。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>query_start</TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>現在有効な問い合わせが開始した時刻です。
もし<TT
CLASS="STRUCTFIELD"
>state</TT
>が<TT
CLASS="LITERAL"
>active</TT
>でない場合は直前の問い合わせが開始した時刻です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>state_change</TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
><TT
CLASS="STRUCTFIELD"
>state</TT
>の最終変更時刻です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>wait_event_type</TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>値が取りえる場合はバックエンドが待機しているイベントの型。
さもなければNULLとなります。
以下のいずれかの値を取ることができます。
       <P
></P
><UL
><LI
><P
><TT
CLASS="LITERAL"
>LWLockNamed</TT
>: バックエンドは、特定の名前が付けられた軽量ロックを待っています。
このようなそれぞれのロックは、共有メモリ内の特定のデータ構造を保護します。
<TT
CLASS="LITERAL"
>wait_event</TT
>は軽量ロックの名称を含みます。
         </P
></LI
><LI
><P
><TT
CLASS="LITERAL"
>LWLockTranche</TT
>: バックエンドは、関連する軽量ロックのグループの１つを待っています。
グループ内の全てのロックは、同様の関数を実行します。
<TT
CLASS="LITERAL"
>wait_event</TT
>は、そのグループ内のロックの共通な用途を識別します。
         </P
></LI
><LI
><P
><TT
CLASS="LITERAL"
>Lock</TT
>: バックエンドは重量ロックを待っています。
ロックマネージャロックや単にロックとしても知られている重量ロックは、主にテーブルのようなSQLで可視なオブジェクトを保護します。
しかし、それらはリレーション拡張のような、なんらかの内部操作のために相互排他的に確保するためにも使用されます。
<TT
CLASS="LITERAL"
>wait_event</TT
>は、待たせているロックの型を識別します。
         </P
></LI
><LI
><P
><TT
CLASS="LITERAL"
>BufferPin</TT
>: サーバプロセスは、ほかのどのプロセスもデータバッファを調べることができない期間に、データバッファにアクセスするために待機しています。
バッファピン待機は、他のプロセスが該当のバッファから最後に読み込んだデータのオープンカーソルを保持している場合に長引かされることがあります。
         </P
></LI
></UL
>
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>wait_event</TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>バックエンドが現在待機している場合は待機イベント名、その他はNULL。
詳細は<A
HREF="monitoring-stats.html#WAIT-EVENT-TABLE"
>表28-4</A
>を参照してください。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>state</TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>現在のバックエンドの総体的な状態です。
以下のいずれかの値を取ることができます。
       <P
></P
><UL
><LI
><P
>           <TT
CLASS="LITERAL"
>active</TT
>: バックエンドは問い合わせを実行中です。
          </P
></LI
><LI
><P
>           <TT
CLASS="LITERAL"
>idle</TT
>: バックエンドは新しいクライアントからのコマンドを待機しています。
          </P
></LI
><LI
><P
>           <TT
CLASS="LITERAL"
>idle in transaction</TT
>: バックエンドはトランザクションの内部にいますが、現在実行中の問い合わせがありません。
          </P
></LI
><LI
><P
>           <TT
CLASS="LITERAL"
>idle in transaction (aborted)</TT
>: この状態は<TT
CLASS="LITERAL"
>idle in transaction</TT
>と似ていますが、トランザクション内のある文がエラーになっている点が異なります。
          </P
></LI
><LI
><P
>           <TT
CLASS="LITERAL"
>fastpath function call</TT
>: バックエンドは近道関数を実行中です。
          </P
></LI
><LI
><P
>           <TT
CLASS="LITERAL"
>disabled</TT
>: この状態は、このバックエンドで<A
HREF="runtime-config-statistics.html#GUC-TRACK-ACTIVITIES"
>track_activities</A
>が無効である場合に報告されます。
          </P
></LI
></UL
>
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>backend_xid</TT
></TD
><TD
><TT
CLASS="TYPE"
>xid</TT
></TD
><TD
>もしあれば、このバックエンドの最上位のトランザクション識別子。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>backend_xmin</TT
></TD
><TD
><TT
CLASS="TYPE"
>xid</TT
></TD
><TD
>現在のバックエンドの<TT
CLASS="LITERAL"
>xmin</TT
>。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>query</TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>バックエンドの最も最近の問い合わせテキストです。
<TT
CLASS="STRUCTFIELD"
>state</TT
>が<TT
CLASS="LITERAL"
>active</TT
>の場合、現在実行中の問い合わせを意味します。
その他のすべての状態では、実行済みの最後の問い合わせを示します。
     </TD
></TR
></TBODY
></TABLE
></DIV
><P
><TT
CLASS="STRUCTNAME"
>pg_stat_activity</TT
>はサーバプロセス毎に、そのプロセスの現在の活動に関連する情報を表示する１行を持ちます。
  </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
><TT
CLASS="STRUCTFIELD"
>wait_event</TT
>と<TT
CLASS="STRUCTFIELD"
>state</TT
>列は独立しています。
バックエンドが<TT
CLASS="LITERAL"
>active</TT
>状態である場合、いくつかのイベントでは<TT
CLASS="LITERAL"
>waiting</TT
>かもしれませんし、そうでないかもしれません。
状態が<TT
CLASS="LITERAL"
>active</TT
>であり、<TT
CLASS="STRUCTFIELD"
>wait_event</TT
>がNULLでない場合、問い合わせは実行中ですが、システム内のどこかでブロックされていることを意味します。 
   </P
></BLOCKQUOTE
></DIV
><DIV
CLASS="TABLE"
><A
NAME="WAIT-EVENT-TABLE"
></A
><P
><B
>表 28-4. <TT
CLASS="STRUCTNAME"
>wait_event</TT
>の説明</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>待機イベント型</TH
><TH
>待機イベント名</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
ROWSPAN="42"
><TT
CLASS="LITERAL"
>LWLockNamed</TT
></TD
><TD
><TT
CLASS="LITERAL"
>ShmemIndexLock</TT
></TD
><TD
>共有メモリ内に領域を発見する、もしくは割り当てるのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>OidGenLock</TT
></TD
><TD
>OIDを割り当て、または付与するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>XidGenLock</TT
></TD
><TD
>トランザクションIDを割り当て、または付与するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>ProcArrayLock</TT
></TD
><TD
>トランザクションの終了にてスナップショットを取得、またはトランザクションIDを消去するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>SInvalReadLock</TT
></TD
><TD
>共有無効化キュー内のメッセージを検索、もしくは削除するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>SInvalWriteLock</TT
></TD
><TD
>共有無効化キュー内のメッセージを追加するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>WALBufMappingLock</TT
></TD
><TD
>WALバッファ内のページの置き換えを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>WALWriteLock</TT
></TD
><TD
>WALバッファがディスクに書き込まれるのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>ControlFileLock</TT
></TD
><TD
>制御ファイルの読み込みもしくは更新、または新しいWALファイルの作成を待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>CheckpointLock</TT
></TD
><TD
>チェックポイントを処理することを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>CLogControlLock</TT
></TD
><TD
>トランザクションの状態を読み込み、または更新するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>SubtransControlLock</TT
></TD
><TD
>サブトランザクション情報の読み込み、または更新するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>MultiXactGenLock</TT
></TD
><TD
>共有マルチトランザクション状態の読み込み、または更新するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>MultiXactOffsetControlLock</TT
></TD
><TD
>マルチトランザクションオフセットマッピングの読み込み、または更新するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>MultiXactMemberControlLock</TT
></TD
><TD
>マルチトランザクションメンバーマッピングの読み込み、または更新するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>RelCacheInitLock</TT
></TD
><TD
>リレーションキャッシュ初期化ファイルの読み込み、または書き込みするのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>CheckpointerCommLock</TT
></TD
><TD
>fsyncリクエストを管理するために待機しています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>TwoPhaseStateLock</TT
></TD
><TD
>プリペアードトランザクションの状態を読み込み、または更新するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>TablespaceCreateLock</TT
></TD
><TD
>テーブルスペースの作成、または削除するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>BtreeVacuumLock</TT
></TD
><TD
>B-Treeインデックスのバキュームに関連した情報の読み込み、または更新するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>AddinShmemInitLock</TT
></TD
><TD
>共有メモリの領域確保を管理するために待機しています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>AutovacuumLock</TT
></TD
><TD
>自動バキュームワーカの現在の状態を更新、または読み込むために待機している自動バキュームワーカまたはランチャ。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>AutovacuumScheduleLock</TT
></TD
><TD
>バキューム対象として選定されたテーブルが、まだバキューム処理が必要であることを確認するために待っています。
         </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>SyncScanLock</TT
></TD
><TD
>同期スキャンのためにテーブル上のスキャン開始位置を取得するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>RelationMappingLock</TT
></TD
><TD
>ファイルノードマッピングへカタログを格納するために使用される、リレーションマップファイルを更新するのを待っています。
         </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>AsyncCtlLock</TT
></TD
><TD
>共有通知状態の読み込み、または更新するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>AsyncQueueLock</TT
></TD
><TD
>通知メッセージの読み込み、または更新するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>SerializableXactHashLock</TT
></TD
><TD
>シリアライザブルトランザクションに関する情報を検索、または格納するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>SerializableFinishedListLock</TT
></TD
><TD
>完了したシリアライザブルトランザクションの一覧へアクセスするのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>SerializablePredicateLockListLock</TT
></TD
><TD
>シリアライザブルトランザクションによって保持されたロックの一覧への操作を処理するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>OldSerXidLock</TT
></TD
><TD
>衝突しているシリアライザブルトランザクションの読み込み、または記録するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>SyncRepLock</TT
></TD
><TD
>同期レプリカに関する情報の読み込み、または更新のために待機しています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>BackgroundWorkerLock</TT
></TD
><TD
>バックグラウンドワーカ状態の読み込み、または更新するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>DynamicSharedMemoryControlLock</TT
></TD
><TD
>動的共有メモリ状態の読み込み、または更新するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>AutoFileLock</TT
></TD
><TD
><TT
CLASS="FILENAME"
>postgresql.auto.conf</TT
>ファイルの更新するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>ReplicationSlotAllocationLock</TT
></TD
><TD
>レプリケーションスロットの割り当て、または解放するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>ReplicationSlotControlLock</TT
></TD
><TD
>レプリケーションスロット状態の読み込み、または更新するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>CommitTsControlLock</TT
></TD
><TD
>トランザクションコミットタイムスタンプの読み込み、または更新するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>CommitTsLock</TT
></TD
><TD
>トランザクションタイムスタンプのために設定された最新の値を読み込み、または更新するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>ReplicationOriginLock</TT
></TD
><TD
>レプリケーションオリジンのセットアップ、削除、または使用を待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>MultiXactTruncationLock</TT
></TD
><TD
>マルチトランザクション情報の読み込み、またはトランケートを行うのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>OldSnapshotTimeMapLock</TT
></TD
><TD
>古いスナップショット制御情報の読み込み、または更新するのを待っています。</TD
></TR
><TR
><TD
ROWSPAN="16"
><TT
CLASS="LITERAL"
>LWLockTranche</TT
></TD
><TD
><TT
CLASS="LITERAL"
>clog</TT
></TD
><TD
>clog（トランザクション状態）バッファのI/Oを待機しています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>commit_timestamp</TT
></TD
><TD
>コミットタイムスタンプバッファのI/Oを待機しています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>subtrans</TT
></TD
><TD
>サブトランザクションバッファのI/Oを待機しています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>multixact_offset</TT
></TD
><TD
>マルチトランザクションオフセットバッファのI/Oを待機しています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>multixact_member</TT
></TD
><TD
>マルチトランザクションメンバーバッファのI/Oを待機しています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>async</TT
></TD
><TD
>非同期（通知）バッファのI/Oを待機しています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>oldserxid</TT
></TD
><TD
>oldserxidバッファのI/Oを待機しています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>wal_insert</TT
></TD
><TD
>メモリバッファにWALを挿入するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>buffer_content</TT
></TD
><TD
>メモリ内のデータページを読み込み、または書き込むのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>buffer_io</TT
></TD
><TD
>データページのI/Oを待機しています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>replication_origin</TT
></TD
><TD
>レプリケーション進捗の読み込み、または更新するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>replication_slot_io</TT
></TD
><TD
>レプリケーションスロットのI/Oを待機しています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>proc</TT
></TD
><TD
>ファストパスロック情報の読み込み、または更新するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>buffer_mapping</TT
></TD
><TD
>データブロックをバッファプール内のバッファと関連付けるのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>lock_manager</TT
></TD
><TD
>バックエンドのロックの追加、もしくは検査するのを待っています。
         または、（並列問い合わせによって使用される）ロッキンググループへ加わる、または抜けるのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>predicate_lock_manager</TT
></TD
><TD
>述語ロック情報の追加、もしくは検査するのを待っています。</TD
></TR
><TR
><TD
ROWSPAN="10"
><TT
CLASS="LITERAL"
>Lock</TT
></TD
><TD
><TT
CLASS="LITERAL"
>relation</TT
></TD
><TD
>リレーション上のロックを獲得するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>extend</TT
></TD
><TD
>リレーションを拡張するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>page</TT
></TD
><TD
>リレーションのページ上のロックを獲得するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>tuple</TT
></TD
><TD
>タプル上のロックを獲得するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>transactionid</TT
></TD
><TD
>トランザクションが終了するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>virtualxid</TT
></TD
><TD
>仮想xidロックを獲得するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>speculative token</TT
></TD
><TD
>推論的挿入ロックを獲得するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>object</TT
></TD
><TD
>非リレーションデータベースオブジェクト上のロックを獲得するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>userlock</TT
></TD
><TD
>ユーザロックを獲得するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>advisory</TT
></TD
><TD
>助言ユーザロックを獲得するのを待っています。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>BufferPin</TT
></TD
><TD
><TT
CLASS="LITERAL"
>BufferPin</TT
></TD
><TD
>バッファ上のピンを獲得するのを待っています。</TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>拡張によって登録されたトランシェのために、名称が拡張によって指定され、それが<TT
CLASS="STRUCTFIELD"
>wait_event</TT
>として表示されます。
ユーザが（動的共有メモリ内に割り当てを持つことにより）バックエンドの一つの中で、そのトランシェを登録することが非常にあると考えられ、その場合は他のバックエンドはその情報を持たないことから、このような場合には<TT
CLASS="LITERAL"
>extension</TT
>を表示します。
    </P
></BLOCKQUOTE
></DIV
><P
>以下に、待機イベントが表示される例を示します。

</P><PRE
CLASS="PROGRAMLISTING"
>SELECT pid, wait_event_type, wait_event FROM pg_stat_activity WHERE wait_event is NOT NULL;
 pid  | wait_event_type |  wait_event
------+-----------------+---------------
 2540 | Lock            | relation
 6644 | LWLockNamed     | ProcArrayLock
(2 rows)</PRE
><P>
   </P
><DIV
CLASS="TABLE"
><A
NAME="PG-STAT-REPLICATION-VIEW"
></A
><P
><B
>表 28-5. <TT
CLASS="STRUCTNAME"
>pg_stat_replication</TT
>ビュー</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>列</TH
><TH
>型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>pid</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
><TD
>WAL送信プロセスのプロセスIDです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>usesysid</TT
></TD
><TD
><TT
CLASS="TYPE"
>oid</TT
></TD
><TD
>WAL送信プロセスにログインしたユーザのOIDです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>usename</TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>WAL送信プロセスにログインしたユーザの名前です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>application_name</TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>WAL送信処理に接続したアプリケーションの名前です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>client_addr</TT
></TD
><TD
><TT
CLASS="TYPE"
>inet</TT
></TD
><TD
>WAL送信処理に接続したクライアントのIPアドレスです。
このフィールドがNULLの場合、クライアントがサーバマシン上のUnixソケット経由で接続したことを示します。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>client_hostname</TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
><TT
CLASS="STRUCTFIELD"
>client_addr</TT
>のDNS逆引き検索により報告された、接続クライアントのホスト名です。
IP接続、かつ<A
HREF="runtime-config-logging.html#GUC-LOG-HOSTNAME"
>log_hostname</A
>が有効である場合にのみこのフィールドは非NULLになります。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>client_port</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
><TD
>クライアントがWAL送信処理との通信に使用するTCPポート番号、もしUnixソケットを使用する場合は<TT
CLASS="LITERAL"
>-1</TT
>です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>backend_start</TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>プロセスが開始、つまりクライアントがWAL送信処理に接続した時刻です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>backend_xmin</TT
></TD
><TD
><TT
CLASS="TYPE"
>xid</TT
></TD
><TD
><A
HREF="runtime-config-replication.html#GUC-HOT-STANDBY-FEEDBACK"
>hot_standby_feedback</A
>により報告されたこのスタンバイの<TT
CLASS="LITERAL"
>xmin</TT
>です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>state</TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>現在のWAL送信処理の状態です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>sent_location</TT
></TD
><TD
><TT
CLASS="TYPE"
>pg_lsn</TT
></TD
><TD
>現在のWAL送信処理の状態です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>write_location</TT
></TD
><TD
><TT
CLASS="TYPE"
>pg_lsn</TT
></TD
><TD
>スタンバイサーバによってディスクに書き出された最後のトランザクションログ位置です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>flush_location</TT
></TD
><TD
><TT
CLASS="TYPE"
>pg_lsn</TT
></TD
><TD
>スタンバイサーバによってディスクに吐き出された最後のトランザクションログ位置です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>replay_location</TT
></TD
><TD
><TT
CLASS="TYPE"
>pg_lsn</TT
></TD
><TD
>スタンバイサーバ上のデータベースに再生された最後のトランザクションログ位置です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>sync_priority</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
><TD
>このスタンバイサーバが同期スタンバイとして選択される優先度です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>sync_state</TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>スタンバイサーバの同期状態です。</TD
></TR
></TBODY
></TABLE
></DIV
><P
><TT
CLASS="STRUCTNAME"
>pg_stat_replication</TT
>ビューには、WAL送信プロセス毎に、送信処理に接続したスタンバイサーバへのレプリケーションに関する統計情報を示す１行を保持します。
直接接続されたサーバのみが一覧表示されます。
下流のスタンバイサーバに関する情報はありません。
  </P
><DIV
CLASS="TABLE"
><A
NAME="PG-STAT-WAL-RECEIVER-VIEW"
></A
><P
><B
>表 28-6. <TT
CLASS="STRUCTNAME"
>pg_stat_wal_receiver</TT
>ビュー</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>列</TH
><TH
>型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>pid</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
><TD
>WALレシーバプロセスのプロセスID</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>status</TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>WALレシーバプロセスの活動状態</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>receive_start_lsn</TT
></TD
><TD
><TT
CLASS="TYPE"
>pg_lsn</TT
></TD
><TD
>WALレシーバが開始された時に使われるトランザクションログの最初の位置</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>receive_start_tli</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
><TD
>WALレシーバが開始された時に使われる初期タイムライン番号</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>received_lsn</TT
></TD
><TD
><TT
CLASS="TYPE"
>pg_lsn</TT
></TD
><TD
>すでに受信し、ディスクにフラッシュされたトランザクションログの最新位置。
     この列の初期値は、WALレシーバが開始された時に使用される、最初のログ位置です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>received_tli</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
><TD
>受信済みでディスクにフラッシュされたトランザクションログの最新位置のタイムライン番号。
この列の初期値は、WALレシーバが開始された時に使用される、最初のログ位置のタイムライン番号です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>last_msg_send_time</TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>オリジンWALセンダから受信した最新メッセージの送信時間</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>last_msg_receipt_time</TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>オリジンWALセンダから受信した最新メッセージの受信時間</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>latest_end_lsn</TT
></TD
><TD
><TT
CLASS="TYPE"
>pg_lsn</TT
></TD
><TD
>オリジンWALセンダへ報告された最新のトランザクションログ位置</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>latest_end_time</TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>オリジンWALセンダへ最新のトランザクションログ位置が報告された時間</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>slot_name</TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>WALレシーバによって使用されたレプリケーションスロット名</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>conninfo</TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>セキュリティに重要な値が難読化された文字列を含む、WALレシーバによって使用された接続文字列。
     </TD
></TR
></TBODY
></TABLE
></DIV
><P
><TT
CLASS="STRUCTNAME"
>pg_stat_wal_receiver</TT
>ビューは、１行のみの形式で、受信サーバが接続したサーバからWALレシーバに関する統計情報を表示します。
  </P
><DIV
CLASS="TABLE"
><A
NAME="PG-STAT-SSL-VIEW"
></A
><P
><B
>表 28-7. <TT
CLASS="STRUCTNAME"
>pg_stat_ssl</TT
>ビュー</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>列</TH
><TH
>型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>pid</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
><TD
>バックエンドプロセスまたはWAL送信プロセスのプロセスIDです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>ssl</TT
></TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>この接続でSSLが使用されていれば真になります。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>version</TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>使用されているSSLのバージョン、この接続でSSLが使用されていなければNULLになります。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>cipher</TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>使用されているSSL暗号の名前、この接続でSSLが使用されていなければNULLになります。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>bits</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
><TD
>使用されている暗号アルゴリズムのビット数、この接続でSSLが使用されていなければNULLになります。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>compression</TT
></TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>SSL圧縮が使用されていれば真、使用されていなければ偽、この接続でSSLが使用されていなければNULLになります。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>clientdn</TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>使用されているクライアント証明書の識別名(DN)フィールド、クライアント証明書が提供されなかった場合、およびこの接続でSSLが使用されていない場合はNULLになります。
このフィールドは、DNフィールドが<TT
CLASS="SYMBOL"
>NAMEDATALEN</TT
>（標準ビルドでは64文字）より長いと切り詰められます。
     </TD
></TR
></TBODY
></TABLE
></DIV
><P
><TT
CLASS="STRUCTNAME"
>pg_stat_ssl</TT
>ビューは、バックエンドプロセスおよびWAL送信プロセスごとに1行を保持し、接続上でのSSLの使用に関する統計情報を示します。
<TT
CLASS="STRUCTNAME"
>pg_stat_activity</TT
>または<TT
CLASS="STRUCTNAME"
>pg_stat_replication</TT
>と<TT
CLASS="STRUCTFIELD"
>pid</TT
>列で結合することで、接続に関するより詳細な情報を取得することができます。
  </P
><DIV
CLASS="TABLE"
><A
NAME="PG-STAT-ARCHIVER-VIEW"
></A
><P
><B
>表 28-8. <TT
CLASS="STRUCTNAME"
>pg_stat_archiver</TT
>ビュー</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>列</TH
><TH
>型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>archived_count</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>アーカイブに成功したWALファイルの数</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>last_archived_wal</TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>アーカイブに成功した最後のWALファイルの名前</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>last_archived_time</TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>最後に成功したアーカイブ操作の時刻</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>failed_count</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>WALファイルのアーカイブに失敗した回数</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>last_failed_wal</TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>最後にアーカイブ操作に失敗したWALファイルの名前</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>last_failed_time</TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>最後にアーカイブ操作に失敗した時刻</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>stats_reset</TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>この統計が最後にリセットされた時刻</TD
></TR
></TBODY
></TABLE
></DIV
><P
><TT
CLASS="STRUCTNAME"
>pg_stat_archiver</TT
>は常に、クラスタのアーカイバプロセスに関するデータを含む１つの行を持ちます。
  </P
><DIV
CLASS="TABLE"
><A
NAME="PG-STAT-BGWRITER-VIEW"
></A
><P
><B
>表 28-9. <TT
CLASS="STRUCTNAME"
>pg_stat_bgwriter</TT
>ビュー</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>列</TH
><TH
>型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>checkpoints_timed</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>これまでに実行された、スケジュールされたチェックポイントの個数です。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>checkpoints_req</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>これまでに実行された、要求されたチェックポイントの個数です。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>checkpoint_write_time</TT
></TD
><TD
><TT
CLASS="TYPE"
>double precision</TT
></TD
><TD
>チェックポイント処理におけるディスクにファイルを書き出す部分に費やされた、ミリ秒単位の総時間です。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>checkpoint_sync_time</TT
></TD
><TD
><TT
CLASS="TYPE"
>double precision</TT
></TD
><TD
>チェックポイント処理におけるディスクにファイルを同期する部分に費やされた、ミリ秒単位の総時間です。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>buffers_checkpoint</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>チェックポイント期間に書き出されたバッファ数です。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>buffers_clean</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>バックグラウンドライタにより書き出されたバッファ数です。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>maxwritten_clean</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>バックグラウンドライタが書き出したバッファ数が多過ぎたために、整理用スキャンを停止した回数です。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>buffers_backend</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>バックエンドにより直接書き出されたバッファ数です。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>buffers_backend_fsync</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>バックエンドが独自に<CODE
CLASS="FUNCTION"
>fsync</CODE
>呼び出しを実行しなければならなかった回数です。
（通常は、バックエンドが独自に書き込んだ場合であっても、バックグラウンドライタがこれらを扱います。）
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>buffers_alloc</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>割当られたバッファ数です。
      </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>stats_reset</TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>これらの統計情報がリセットされた最終時刻です。
      </TD
></TR
></TBODY
></TABLE
></DIV
><P
><TT
CLASS="STRUCTNAME"
>pg_stat_bgwriter</TT
>ビューは常に、クラスタのグローバルデータに関する１つの行を持ちます。
  </P
><DIV
CLASS="TABLE"
><A
NAME="PG-STAT-DATABASE-VIEW"
></A
><P
><B
>表 28-10. <TT
CLASS="STRUCTNAME"
>pg_stat_database</TT
>ビュー</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>列</TH
><TH
>型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>datid</TT
></TD
><TD
><TT
CLASS="TYPE"
>oid</TT
></TD
><TD
>データベースのOIDです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>datname</TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>データベースの名前です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>numbackends</TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
><TD
>現在データベースに接続しているバックエンドの個数です。
これは、このビューの中で、現在の状態を反映した値を返す唯一の列です。
他の列はすべて、最後にリセットされてから累積された値を返します。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>xact_commit</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>このデータベースの中でコミットされたトランザクション数です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>xact_rollback</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>このデータベースの中でロールバックされたトランザクション数です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>blks_read</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>データベース内で読み取られたディスクブロック数です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>blks_hit</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>バッファキャッシュに既にあることが分かっているために読み取りが不要だったディスクブロック数です（これにはPostgreSQLのバッファキャッシュにおけるヒットのみが含まれ、オペレーティングシステムのファイルシステムキャッシュは含まれません）。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>tup_returned</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>データベース内の問い合わせで返された行数です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>tup_fetched</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>データベース内の問い合わせで取り出された行数です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>tup_inserted</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>データベース内の問い合わせで挿入された行数です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>tup_updated</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>データベース内の問い合わせで更新された行数です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>tup_deleted</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>データベース内の問い合わせで削除された行数です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>conflicts</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>データベース内のリカバリで競合したためキャンセルされた問い合わせ数です。
（競合はスタンバイサーバ上でのみ起こります。詳細については<A
HREF="monitoring-stats.html#PG-STAT-DATABASE-CONFLICTS-VIEW"
>pg_stat_database_conflicts</A
>を参照してください。）
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>temp_files</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>データベース内の問い合わせによって書き出された一時ファイルの個数です。
一時ファイルが作成された理由（ソート処理やハッシュ処理）や<A
HREF="runtime-config-logging.html#GUC-LOG-TEMP-FILES"
>log_temp_files</A
>の設定に関わらず、すべての一時ファイルが計上されます。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>temp_bytes</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>データベース内の問い合わせによって一時ファイルに書き出されたデータ量です。
一時ファイルが作成された理由や<A
HREF="runtime-config-logging.html#GUC-LOG-TEMP-FILES"
>log_temp_files</A
>の設定に関わらず、すべての一時ファイルが計上されます。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>deadlocks</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>データベース内で検知されたデッドロック数です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>blk_read_time</TT
></TD
><TD
><TT
CLASS="TYPE"
>double precision</TT
></TD
><TD
>データベース内でバックエンドによりデータファイルブロックの読み取りに費やされた、ミリ秒単位の時間です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>blk_write_time</TT
></TD
><TD
><TT
CLASS="TYPE"
>double precision</TT
></TD
><TD
>データベース内でバックエンドによりデータファイルブロックの書き出しに費やされた、ミリ秒単位の時間です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>stats_reset</TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>統計情報がリセットされた最終時刻です。
     </TD
></TR
></TBODY
></TABLE
></DIV
><P
><TT
CLASS="STRUCTNAME"
>pg_stat_database</TT
>には、クラスタ内のデータベース毎にデータベース全体の統計情報を示す１行が含まれます。
  </P
><DIV
CLASS="TABLE"
><A
NAME="PG-STAT-DATABASE-CONFLICTS-VIEW"
></A
><P
><B
>表 28-11. <TT
CLASS="STRUCTNAME"
>pg_stat_database_conflicts</TT
>ビュー</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>列</TH
><TH
>型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>datid</TT
></TD
><TD
><TT
CLASS="TYPE"
>oid</TT
></TD
><TD
>データベースのOIDです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>datname</TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>データベースの名前です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>confl_tablespace</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>データベースにおいて、削除されたテーブル空間のためにキャンセルされた問い合わせの個数です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>confl_lock</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>データベースにおいて、ロック時間切れのためにキャンセルされた問い合わせの個数です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>confl_snapshot</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>データベースにおいて、古いスナップショットのためにキャンセルされた問い合わせの個数です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>confl_bufferpin</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>データベースにおいて、ピンが付いたバッファのためにキャンセルされた問い合わせの個数です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>confl_deadlock</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>データベースにおいて、デッドロックのためにキャンセルされた問い合わせの個数です。</TD
></TR
></TBODY
></TABLE
></DIV
><P
><TT
CLASS="STRUCTNAME"
>pg_stat_database_conflicts</TT
>ビューは、データベース毎に１行を保持し、スタンバイサーバでのリカバリと競合するためにキャンセルされた問い合わせに関するデータベース全体の統計情報を示します。
マスタサーバでは競合は発生しませんので、スタンバイサーバ上の情報のみが保持されます。
  </P
><DIV
CLASS="TABLE"
><A
NAME="PG-STAT-ALL-TABLES-VIEW"
></A
><P
><B
>表 28-12. <TT
CLASS="STRUCTNAME"
>pg_stat_all_tables</TT
>ビュー</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>列</TH
><TH
>型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>relid</TT
></TD
><TD
><TT
CLASS="TYPE"
>oid</TT
></TD
><TD
>テーブルのOIDです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>schemaname</TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>テーブルが存在するスキーマの名前です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>relname</TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>テーブルの名前です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>seq_scan</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>テーブル上で初期化されたシーケンシャルスキャンの個数です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>seq_tup_read</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>シーケンシャルスキャンによって取り出された有効行の個数です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>idx_scan</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>テーブル上で初期化されたインデックススキャンの個数です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>idx_tup_fetch</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>インデックススキャンによって取り出された有効行の個数です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>n_tup_ins</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>挿入された行数です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>n_tup_upd</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>更新された行数です。（HOT更新された行数を含みます）</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>n_tup_del</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>削除された行数です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>n_tup_hot_upd</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>HOT更新（つまりインデックスの更新を別途必要としない）された行数です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>n_live_tup</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>有効行の推定値です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>n_dead_tup</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>不要行の推定値です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>n_mod_since_analyze</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>このテーブルが最後に解析されてから変更された行の推定値</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>last_vacuum</TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>テーブルが手作業でバキュームされた最終時刻です（<TT
CLASS="COMMAND"
>VACUUM FULL</TT
>は含まれません）。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>last_autovacuum</TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>自動バキュームデーモンによりテーブルがバキュームされた最終時刻です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>last_analyze</TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>テーブルが手作業で解析された最終時刻です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>last_autoanalyze</TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>自動バキュームデーモンによりテーブルが解析された最終時刻です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>vacuum_count</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>テーブルが手作業でバキュームされた回数です。（<TT
CLASS="COMMAND"
>VACUUM FULL</TT
>は含まれません）。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>autovacuum_count</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>テーブルが自動バキュームデーモンによりバキュームされた回数です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>analyze_count</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>テーブルが手作業で解析された回数です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>autoanalyze_count</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>テーブルが自動バキュームデーモンによって解析された回数です。</TD
></TR
></TBODY
></TABLE
></DIV
><P
><TT
CLASS="STRUCTNAME"
>pg_stat_all_tables</TT
>ビューは現在のデータベース内のテーブル（TOASTテーブルを含む）毎に１行の形式で、特定のテーブルへのアクセスに関する統計情報を表示します。
<TT
CLASS="STRUCTNAME"
>pg_stat_user_tables</TT
>および<TT
CLASS="STRUCTNAME"
>pg_stat_sys_tables</TT
>ビューにも同じ情報が含まれますが、それぞれユーザテーブルとシステムテーブルのみにフィルタされています。
  </P
><DIV
CLASS="TABLE"
><A
NAME="PG-STAT-ALL-INDEXES-VIEW"
></A
><P
><B
>表 28-13. <TT
CLASS="STRUCTNAME"
>pg_stat_all_indexes</TT
>ビュー</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>列</TH
><TH
>型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>relid</TT
></TD
><TD
><TT
CLASS="TYPE"
>oid</TT
></TD
><TD
>インデックス対象のテーブルのOIDです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>indexrelid</TT
></TD
><TD
><TT
CLASS="TYPE"
>oid</TT
></TD
><TD
>インデックスのOIDです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>schemaname</TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>インデックスが存在するスキーマの名前です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>relname</TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>インデックス対象のテーブルの名前です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>indexrelname</TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>インデックスの名前です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>idx_scan</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>インデックスに対して初期化されたインデックススキャンの個数です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>idx_tup_read</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>インデックスに対するスキャンにより返されたインデックス項目の個数です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>idx_tup_fetch</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>インデックスを使用する単純なインデックススキャンによって取り出された有効テーブル行数です。
     </TD
></TR
></TBODY
></TABLE
></DIV
><P
><TT
CLASS="STRUCTNAME"
>pg_stat_all_indexes</TT
>ビューは、現在のデータベース内のインデックス毎に、特定のインデックスへのアクセスに関する統計情報を示す１行を保持します。
<TT
CLASS="STRUCTNAME"
>pg_stat_user_indexes</TT
>と<TT
CLASS="STRUCTNAME"
>pg_stat_sys_indexes</TT
>も同じ情報を保持しますが、ユーザ向けのインデックスとシステム向けのインデックスに対する行のみを保持するようにフィルタ処理されています。
  </P
><P
>単純なインデックススキャン、<SPAN
CLASS="QUOTE"
>"ビットマップ"</SPAN
>インデックススキャン、あるいはオプティマイザによりインデックスが使用されることがあります。
ビットマップスキャンでは、複数のインデックスの出力をANDやOR規則で組み合わせることができます。
このため、ビットマップスキャンが使用される場合、特定インデックスと個々のヒープ行の取り出しとを関連づけることが困難です。
したがってビットマップスキャンでは、使用したインデックスの<TT
CLASS="STRUCTNAME"
>pg_stat_all_indexes</TT
>.<TT
CLASS="STRUCTFIELD"
>idx_tup_read</TT
>個数を増やし、そのテーブルの<TT
CLASS="STRUCTNAME"
>pg_stat_all_tables</TT
>.<TT
CLASS="STRUCTFIELD"
>idx_tup_fetch</TT
>個数を増やしますが、<TT
CLASS="STRUCTNAME"
>pg_stat_all_indexes</TT
>.<TT
CLASS="STRUCTFIELD"
>idx_tup_fetch</TT
>を変更しません。
オプティマイザもインデックスにアクセスし、提供された定数値がオプティマイザの統計情報に記録された範囲の外側にあるときに、それを検査します。
これはオプティマイザの統計情報が古いかもしれないからです。
  </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
><TT
CLASS="STRUCTFIELD"
>idx_tup_read</TT
>と<TT
CLASS="STRUCTFIELD"
>idx_tup_fetch</TT
>個数は、ビットマップスキャンがまったく使用されていない場合でも異なります。
<TT
CLASS="STRUCTFIELD"
>idx_tup_read</TT
>はインデックスから取り出したインデックス項目を計上し、<TT
CLASS="STRUCTFIELD"
>idx_tup_fetch</TT
>はテーブルから取り出した有効行を計上するからです。
インデックスを用いて不要行やまだコミットされていない行が取り出された場合やインデックスオンリースキャン法によりヒープの取り出しが回避された場合に、後者は減少します。
   </P
></BLOCKQUOTE
></DIV
><DIV
CLASS="TABLE"
><A
NAME="PG-STATIO-ALL-TABLES-VIEW"
></A
><P
><B
>表 28-14. <TT
CLASS="STRUCTNAME"
>pg_statio_all_tables</TT
>ビュー</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>列</TH
><TH
>型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>relid</TT
></TD
><TD
><TT
CLASS="TYPE"
>oid</TT
></TD
><TD
>テーブルのOIDです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>schemaname</TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>テーブルが存在するスキーマの名前です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>relname</TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>テーブルの名前です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>heap_blks_read</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>テーブルから読み取られたディスクブロック数です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>heap_blks_hit</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>テーブル内のバッファヒット数です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>idx_blks_read</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>テーブル上のすべてのインデックスから読み取られたディスクブロック数です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>idx_blks_hit</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>テーブル上のすべてのインデックス内のバッファヒット数です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>toast_blks_read</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>テーブルのTOASTテーブル（もしあれば）から読み取られたディスクブロック数です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>toast_blks_hit</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>テーブルのTOASTテーブル（もしあれば）におけるバッファヒット数です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>tidx_blks_read</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>テーブルのTOASTテーブルのインデックス（もしあれば）から読み取られたディスクブロック数です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>tidx_blks_hit</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>テーブルのTOASTテーブルのインデックス（もしあれば）におけるバッファヒット数です。</TD
></TR
></TBODY
></TABLE
></DIV
><P
><TT
CLASS="STRUCTNAME"
>pg_statio_all_tables</TT
>ビューは現在のデータベース内のテーブル（TOASTテーブルを含む）ごとに、特定のテーブルのI/Oに関する統計情報を示す１行を保持します。
<TT
CLASS="STRUCTNAME"
>pg_statio_user_tables</TT
>と<TT
CLASS="STRUCTNAME"
>pg_statio_sys_tables</TT
>には同じ情報が保持されますが、ユーザテーブルとシステムテーブルに関する行のみを持つようにフィルタ処理がなされています。
  </P
><DIV
CLASS="TABLE"
><A
NAME="PG-STATIO-ALL-INDEXES-VIEW"
></A
><P
><B
>表 28-15. <TT
CLASS="STRUCTNAME"
>pg_statio_all_indexes</TT
>ビュー</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>列</TH
><TH
>型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>relid</TT
></TD
><TD
><TT
CLASS="TYPE"
>oid</TT
></TD
><TD
>このインデックスに対応するテーブルのOIDです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>indexrelid</TT
></TD
><TD
><TT
CLASS="TYPE"
>oid</TT
></TD
><TD
>インデックスのOIDです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>schemaname</TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>インデックスが存在するスキーマの名前です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>relname</TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>このインデックスに対応するテーブルの名前です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>indexrelname</TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>インデックスの名前です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>idx_blks_read</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>インデックスから読み取られたディスクブロック数です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>idx_blks_hit</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>インデックスにおけるバッファヒット数です。</TD
></TR
></TBODY
></TABLE
></DIV
><P
><TT
CLASS="STRUCTNAME"
>pg_statio_all_indexes</TT
>ビューは、現在のデータベース内のインデックス毎に、特定のインデックスへのI/Oに関する統計情報を持つ１行を保持します。
<TT
CLASS="STRUCTNAME"
>pg_statio_user_indexes</TT
>と<TT
CLASS="STRUCTNAME"
>pg_statio_sys_indexes</TT
>も同じ情報を保持しますが、それぞれユーザ向けのインデックスとシステム向けのインデックスに対する行のみを保持するようにフィルタ処理されています。
  </P
><DIV
CLASS="TABLE"
><A
NAME="PG-STATIO-ALL-SEQUENCES-VIEW"
></A
><P
><B
>表 28-16. <TT
CLASS="STRUCTNAME"
>pg_statio_all_sequences</TT
>ビュー</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>列</TH
><TH
>型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>relid</TT
></TD
><TD
><TT
CLASS="TYPE"
>oid</TT
></TD
><TD
>シーケンスのOIDです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>schemaname</TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>シーケンスが存在するスキーマの名前です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>relname</TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>シーケンスの名前です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>blks_read</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>シーケンスから読み取られたディスクブロック数です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>blks_hit</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>シーケンスにおけるバッファヒット数です。</TD
></TR
></TBODY
></TABLE
></DIV
><P
><TT
CLASS="STRUCTNAME"
>pg_statio_all_sequences</TT
>ビューは現在のデータベース内のシーケンスごとに、特定シーケンスにおけるI/Oに関する統計情報を示す１行を保持します。
  </P
><DIV
CLASS="TABLE"
><A
NAME="PG-STAT-USER-FUNCTIONS-VIEW"
></A
><P
><B
>表 28-17. <TT
CLASS="STRUCTNAME"
>pg_stat_user_functions</TT
>ビュー</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>列</TH
><TH
>型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>funcid</TT
></TD
><TD
><TT
CLASS="TYPE"
>oid</TT
></TD
><TD
>関数のOIDです。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>schemaname</TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>関数が存在するスキーマの名前です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>funcname</TT
></TD
><TD
><TT
CLASS="TYPE"
>name</TT
></TD
><TD
>関数の名前です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>calls</TT
></TD
><TD
><TT
CLASS="TYPE"
>bigint</TT
></TD
><TD
>関数が呼び出された回数です。</TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>total_time</TT
></TD
><TD
><TT
CLASS="TYPE"
>double precision</TT
></TD
><TD
>関数とその関数から呼び出されるその他の関数で費やされた、ミリ秒単位の総時間です。
     </TD
></TR
><TR
><TD
><TT
CLASS="STRUCTFIELD"
>self_time</TT
></TD
><TD
><TT
CLASS="TYPE"
>double precision</TT
></TD
><TD
>その関数から呼び出されるその他の関数で費やされた時間を含まない、関数自身で費やされた、ミリ秒単位の総時間です。
     </TD
></TR
></TBODY
></TABLE
></DIV
><P
><TT
CLASS="STRUCTNAME"
>pg_stat_user_functions</TT
>ビューは追跡された関数毎に、その関数の実行に関する統計情報を１行保持します。
<A
HREF="runtime-config-statistics.html#GUC-TRACK-FUNCTIONS"
>track_functions</A
>パラメータは関数が追跡されるかどうかを正確に制御します。
  </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="MONITORING-STATS-FUNCTIONS"
>28.2.3. 統計情報関数</A
></H2
><P
>統計情報を参照する他の方法は、上述の標準ビューによって使用される基礎的な統計情報アクセス関数と同じ関数を使用した問い合わせを作成することで設定することができます。
こうした関数の名前などに関する詳細については、標準ビューの定義を参照してください。
（例えば<SPAN
CLASS="APPLICATION"
>psql</SPAN
>では<TT
CLASS="LITERAL"
>\d+ pg_stat_activity</TT
>を発行してください。）
データベースごとの統計情報についてのアクセス関数は、どのデータベースに対して報告するのかを識別するためにデータベースのOIDを取ります。
テーブルごと、インデックスごとの関数はテーブルの、もしくはインデックスのOIDを取ります。
関数ごとの統計情報の関数は、関数のOIDを取ります。
これらの関数を使用して参照できるテーブルとインデックス、および関数は現在のデータベース内のものだけであることに注意してください。
  </P
><P
>その他の統計情報収集に関連した関数を<A
HREF="monitoring-stats.html#MONITORING-STATS-FUNCS-TABLE"
>表28-18</A
>に示します。
  </P
><DIV
CLASS="TABLE"
><A
NAME="MONITORING-STATS-FUNCS-TABLE"
></A
><P
><B
>表 28-18. その他の統計情報関数</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>関数</TH
><TH
>戻り値の型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_backend_pid()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
><TD
>現在のセッションを扱うサーバプロセスのプロセスID。
      </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_stat_get_activity</CODE
>(<TT
CLASS="TYPE"
>integer</TT
>)</TT
></TD
><TD
><TT
CLASS="TYPE"
>setof record</TT
></TD
><TD
>PIDが指定された場合、それに該当するバックエンドの情報のレコード、<TT
CLASS="SYMBOL"
>NULL</TT
>が指定された場合はシステム上のアクティブな各バックエンドに関するレコードが返されます。
返される情報内容は<TT
CLASS="STRUCTNAME"
>pg_stat_activity</TT
>の一部と同じです。
      </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_stat_get_snapshot_timestamp()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>現在の統計情報のスナップショットの時刻を返します。
      </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_stat_clear_snapshot()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>void</TT
></TD
><TD
>現在の統計情報スナップショットを破棄します。
      </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_stat_reset()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>void</TT
></TD
><TD
>現在のデータベースに関する統計カウンタすべてをゼロにリセットします（デフォルトでスーパーユーザ権限が必要ですが、この関数のEXCUTE権限は他のユーザに付与することができます）。 
      </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_stat_reset_shared</CODE
>(text)</TT
></TD
><TD
><TT
CLASS="TYPE"
>void</TT
></TD
><TD
>引数に応じて、クラスタ全体の統計情報カウンタの一部をゼロに戻します（デフォルトでスーパーユーザ権限が必要ですが、この関数のEXCUTE権限は他のユーザに付与することができます）。
<TT
CLASS="LITERAL"
>pg_stat_reset_shared('bgwriter')</TT
>を呼び出すと、<TT
CLASS="STRUCTNAME"
>pg_stat_bgwriter</TT
>ビューで示される値すべてがゼロになります。
<TT
CLASS="LITERAL"
>pg_stat_reset_shared('archiver')</TT
>を呼び出すと、<TT
CLASS="STRUCTNAME"
>pg_stat_archiver</TT
>ビューで示される値すべてがゼロになります。
      </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_stat_reset_single_table_counters</CODE
>(oid)</TT
></TD
><TD
><TT
CLASS="TYPE"
>void</TT
></TD
><TD
>現在のデータベース内にある、ひとつのテーブルあるいはインデックスの統計情報をゼロにリセットします（デフォルトでスーパーユーザ権限が必要ですが、この関数のEXCUTE権限は他のユーザに付与することができます）。
      </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_stat_reset_single_function_counters</CODE
>(oid)</TT
></TD
><TD
><TT
CLASS="TYPE"
>void</TT
></TD
><TD
>現在のデータベース内にある、ひとつの関数の統計情報をゼロにリセットします（デフォルトでスーパーユーザ権限が必要ですが、この関数のEXCUTE権限は他のユーザに付与することができます）。
      </TD
></TR
></TBODY
></TABLE
></DIV
><P
><TT
CLASS="STRUCTNAME"
>pg_stat_activity</TT
>ビューの基礎となる<CODE
CLASS="FUNCTION"
>pg_stat_get_activity</CODE
>関数は、
各バックエンドプロセスに関して利用可能な情報をすべて含むレコード集合を返します。
この情報の一部のみを入手することがより簡便である場合があるかもしれません。
このような場合、<A
HREF="monitoring-stats.html#MONITORING-STATS-BACKEND-FUNCS-TABLE"
>表28-19</A
>に示す、古めのバックエンド単位の統計情報アクセス関数を使用することができます。
これらのアクセス関数は、１から現在活動中のバックエンドの個数までの値を取る、バックエンドID番号を使用します。
<CODE
CLASS="FUNCTION"
>pg_stat_get_backend_idset</CODE
>関数は、これらの関数を呼び出すために、活動中のバックエンド毎に１行を生成する簡便な方法を提供します。
例えば以下はすべてのバックエンドについて<ACRONYM
CLASS="ACRONYM"
>PID</ACRONYM
>と現在の問い合わせを示します。

</P><PRE
CLASS="PROGRAMLISTING"
>SELECT pg_stat_get_backend_pid(s.backendid) AS pid,
       pg_stat_get_backend_activity(s.backendid) AS query
    FROM (SELECT pg_stat_get_backend_idset() AS backendid) AS s;</PRE
><P>
  </P
><DIV
CLASS="TABLE"
><A
NAME="MONITORING-STATS-BACKEND-FUNCS-TABLE"
></A
><P
><B
>表 28-19. バックエンド単位の統計情報関数</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>関数</TH
><TH
>戻り値の型</TH
><TH
>説明</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_stat_get_backend_idset()</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>setof integer</TT
></TD
><TD
>現在活動中のバックエンドID番号（１から活動中のバックエンドの個数まで）を設定します。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_stat_get_backend_activity(integer)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>バックエンドが最後に行った問い合わせテキストです。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_stat_get_backend_activity_start(integer)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>最後の問い合わせが開始された時刻です。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_stat_get_backend_client_addr(integer)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>inet</TT
></TD
><TD
>バックエンドに接続したクライアントのIPアドレスです。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_stat_get_backend_client_port(integer)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
><TD
>クライアントが通信に使用しているTCPポート番号です。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_stat_get_backend_dbid(integer)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>oid</TT
></TD
><TD
>バックエンドが接続するデータベースのOIDです。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_stat_get_backend_pid(integer)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>integer</TT
></TD
><TD
>バックエンドのプロセスIDです。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_stat_get_backend_start(integer)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>プロセスが開始された時刻です。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_stat_get_backend_userid(integer)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>oid</TT
></TD
><TD
>バックエンドにログインしたユーザのOIDです。</TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_stat_get_backend_wait_event_type(integer)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>バックエンドが現在待機中であれば、待機イベント型名、さもなくばNULL。
詳細は<A
HREF="monitoring-stats.html#WAIT-EVENT-TABLE"
>表28-4</A
>を参照してください。
        </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_stat_get_backend_wait_event(integer)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>バックエンドが現在待機中であれば、待機イベント名、さもなくばNULL。
詳細は<A
HREF="monitoring-stats.html#WAIT-EVENT-TABLE"
>表28-4</A
>を参照してください。
       </TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>pg_stat_get_backend_xact_start(integer)</CODE
></TT
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>現在のトランザクションが開始された時刻です。</TD
></TR
></TBODY
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="monitoring-ps.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>ホーム</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="monitoring-locks.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>標準的なUnixツール</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="monitoring.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>ロックの表示</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>