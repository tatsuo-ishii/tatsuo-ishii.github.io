<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>DELETE</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 9.6.5文書"
HREF="index.html"><LINK
REL="UP"
TITLE="SQLコマンド"
HREF="sql-commands.html"><LINK
REL="PREVIOUS"
TITLE="DECLARE"
HREF="sql-declare.html"><LINK
REL="NEXT"
TITLE="DISCARD"
HREF="sql-discard.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=utf-8"><META
NAME="creation"
CONTENT="2018-02-10T07:29:51"></HEAD
><BODY
CLASS="REFENTRY"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>PostgreSQL 9.6.5文書</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="DECLARE"
HREF="sql-declare.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="sql-commands.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="DISCARD"
HREF="sql-discard.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="SQL-DELETE"
></A
>DELETE</H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN84901"
></A
><H2
>名前</H2
>DELETE&nbsp;--&nbsp;テーブルから行を削除する</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN84904"
></A
><H2
>概要</H2
><PRE
CLASS="SYNOPSIS"
>[ WITH [ RECURSIVE ] <TT
CLASS="REPLACEABLE"
><I
>with_query</I
></TT
> [, ...] ]
DELETE FROM [ ONLY ] <TT
CLASS="REPLACEABLE"
><I
>table_name</I
></TT
> [ * ] [ [ AS ] <TT
CLASS="REPLACEABLE"
><I
>alias</I
></TT
> ]
    [ USING <TT
CLASS="REPLACEABLE"
><I
>using_list</I
></TT
> ]
    [ WHERE <TT
CLASS="REPLACEABLE"
><I
>condition</I
></TT
> | WHERE CURRENT OF <TT
CLASS="REPLACEABLE"
><I
>cursor_name</I
></TT
> ]
    [ RETURNING * | <TT
CLASS="REPLACEABLE"
><I
>output_expression</I
></TT
> [ [ AS ] <TT
CLASS="REPLACEABLE"
><I
>output_name</I
></TT
> ] [, ...] ]</PRE
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN84914"
></A
><H2
>説明</H2
><P
><TT
CLASS="COMMAND"
>DELETE</TT
>は、指定したテーブルから<TT
CLASS="LITERAL"
>WHERE</TT
>句を満たす行を削除します。
<TT
CLASS="LITERAL"
>WHERE</TT
>がない場合、指定したテーブルの全ての行を削除することになります。
この結果、そのテーブルは存在するが中身が空のテーブルになります。
  </P
><DIV
CLASS="TIP"
><BLOCKQUOTE
CLASS="TIP"
><P
><B
>ティップ: </B
><A
HREF="sql-truncate.html"
>TRUNCATE</A
>は、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>による拡張で、より高速に、テーブルから全ての行を削除する仕組みを提供します。
    </P
></BLOCKQUOTE
></DIV
><P
>データベース内のほかのテーブルに含まれる情報を用いてテーブル内の行を削除する方法には、副問い合わせと<TT
CLASS="LITERAL"
>USING</TT
>句で追加テーブルを指定する方法の2つがあります。
どちらの技法が適切かはその状況によります。
  </P
><P
><TT
CLASS="LITERAL"
>RETURNING</TT
>句を指定すると、<TT
CLASS="COMMAND"
>DELETE</TT
>は実際に削除された各行に基づいて計算された値を返すようになります。
そのテーブルの列、<TT
CLASS="LITERAL"
>USING</TT
>で指定された他のテーブルの列、あるいは、その両方を使用した式を計算することができます。
<TT
CLASS="LITERAL"
>RETURNING</TT
>リストの構文は<TT
CLASS="COMMAND"
>SELECT</TT
>の出力リストと同一です。
  </P
><P
>削除を実行するには、そのテーブルの<TT
CLASS="LITERAL"
>DELETE</TT
>権限が必要です。
また、<TT
CLASS="LITERAL"
>USING</TT
>句内のテーブルに対する<TT
CLASS="LITERAL"
>SELECT</TT
>権限、および、<TT
CLASS="REPLACEABLE"
><I
>condition</I
></TT
>で使用する値を読み取るために、その値が含まれるテーブルに対する<TT
CLASS="LITERAL"
>SELECT</TT
>権限も必要です。
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN84938"
></A
><H2
>パラメータ</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="REPLACEABLE"
><I
>with_query</I
></TT
></DT
><DD
><P
><TT
CLASS="LITERAL"
>WITH</TT
>句により<TT
CLASS="COMMAND"
>DELETE</TT
>問い合わせ内で名前で参照可能な１つ以上の副問い合わせを指定することができます。
詳しくは<A
HREF="queries-with.html"
>項7.8</A
>と<A
HREF="sql-select.html"
>SELECT</A
>を参照してください。
     </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>table_name</I
></TT
></DT
><DD
><P
>行を削除するテーブルの名前です（スキーマ修飾名も可）。
テーブル名の前に<TT
CLASS="LITERAL"
>ONLY</TT
>が指定された場合、そのテーブルでのみマッチする行が削除されます。
<TT
CLASS="LITERAL"
>ONLY</TT
>が指定されていない場合、そのテーブルおよび（もしあれば）そのテーブルを継承する全てのテーブルから一致する行が削除されます。
オプションで、テーブル名の後に<TT
CLASS="LITERAL"
>*</TT
>を指定することで、明示的に継承するテーブルも含まれることを示すことができます。
     </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>alias</I
></TT
></DT
><DD
><P
>対象テーブルの別名です。
別名が与えられた場合、実際のテーブル名は完全に隠蔽されます。
たとえば、<TT
CLASS="LITERAL"
>DELETE FROM foo AS f</TT
>とあるとき、この<TT
CLASS="COMMAND"
>DELETE</TT
>文の残りの部分ではこのテーブルを<TT
CLASS="LITERAL"
>foo</TT
>ではなく<TT
CLASS="LITERAL"
>f</TT
>として参照しなければなりません。
     </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>using_list</I
></TT
></DT
><DD
><P
><TT
CLASS="LITERAL"
>WHERE</TT
>条件内に他のテーブルの列を記述できるようにするための、テーブル式のリストです。
これは、<TT
CLASS="COMMAND"
>SELECT</TT
>文の<A
HREF="sql-select.html#SQL-FROM"
><I
><I
>FROM</I
>句</I
></A
>において指定できるテーブルのリストと似ています。
例えば、テーブル名の別名も指定することができます。
自己結合を設定する目的以外では<TT
CLASS="REPLACEABLE"
><I
>using_list</I
></TT
>に対象のテーブルを繰り返さないでください。
     </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>condition</I
></TT
></DT
><DD
><P
><TT
CLASS="TYPE"
>boolean</TT
>型の値を返す式です。
この式が<TT
CLASS="LITERAL"
>true</TT
>を返す行のみが削除されます。
     </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>cursor_name</I
></TT
></DT
><DD
><P
><TT
CLASS="LITERAL"
>WHERE CURRENT OF</TT
>条件で使用されるカーソルの名前です。
削除対象の行は、そのカーソルからもっとも最近に取り出される行です。
カーソルは、<TT
CLASS="COMMAND"
>DELETE</TT
>の対象テーブルに対するグループ化のない問い合わせでなければなりません。
<TT
CLASS="LITERAL"
>WHERE CURRENT OF</TT
>を論理条件といっしょに指定することはできません。
<TT
CLASS="LITERAL"
>WHERE CURRENT OF</TT
>付きのカーソルの使用に関する情報については<A
HREF="sql-declare.html"
>DECLARE</A
>を参照してください。
     </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>output_expression</I
></TT
></DT
><DD
><P
>各行を削除した後に<TT
CLASS="COMMAND"
>DELETE</TT
>によって計算され、返される式です。
この式には、<TT
CLASS="REPLACEABLE"
><I
>table_name</I
></TT
>で指名したテーブルまたは<TT
CLASS="LITERAL"
>USING</TT
>で指定したテーブルの任意の列名を使用することができます。
すべての列を返す場合は<TT
CLASS="LITERAL"
>*</TT
>と記載してください。
     </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>output_name</I
></TT
></DT
><DD
><P
>返される列で使用される名前です。
     </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN85007"
></A
><H2
>出力</H2
><P
>正常に終了した場合、<TT
CLASS="COMMAND"
>DELETE</TT
>コマンドは以下の形式のコマンドタグを返します。
</P><PRE
CLASS="SCREEN"
>DELETE <TT
CLASS="REPLACEABLE"
><I
>count</I
></TT
></PRE
><P>
<TT
CLASS="REPLACEABLE"
><I
>count</I
></TT
>は削除した行数です。
この数は、<TT
CLASS="LITERAL"
>BEFORE DELETE</TT
>トリガによって削除が抑止された場合、<TT
CLASS="REPLACEABLE"
><I
>condition</I
></TT
>に合致した行より少なくなる可能性があることに注意してください。
<TT
CLASS="REPLACEABLE"
><I
>count</I
></TT
>が0の場合、<TT
CLASS="REPLACEABLE"
><I
>condition</I
></TT
>を満たす行が存在しなかったことを示します
（これはエラーとはみなされません）。
  </P
><P
><TT
CLASS="COMMAND"
>DELETE</TT
>コマンドが<TT
CLASS="LITERAL"
>RETURNING</TT
>句を持つ場合、その結果は、<TT
CLASS="LITERAL"
>RETURNING</TT
>リストで定義した列と値を持ち、そのコマンドで削除された行全体に対して計算を行う<TT
CLASS="COMMAND"
>SELECT</TT
>文の結果と似たものになるでしょう。
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN85023"
></A
><H2
>注釈</H2
><P
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>では、<TT
CLASS="LITERAL"
>USING</TT
>句で他のテーブルを指定することで、<TT
CLASS="LITERAL"
>WHERE</TT
>条件内で他のテーブルを参照することができます。
例えば、指定したプロデューサが製作した全ての映画を削除する時は、次のようなコマンドを実行します。
</P><PRE
CLASS="PROGRAMLISTING"
>DELETE FROM films USING producers
  WHERE producer_id = producers.id AND producers.name = 'foo';</PRE
><P>
ここでは、<TT
CLASS="STRUCTNAME"
>films</TT
>と<TT
CLASS="STRUCTNAME"
>producers</TT
>とを結合して、<TT
CLASS="STRUCTNAME"
>films</TT
>行に削除用の印を付けるという作業を行っています。
この構文は標準に従ったものではありません。
より標準的な方法は以下の通りです。
</P><PRE
CLASS="PROGRAMLISTING"
>DELETE FROM films
  WHERE producer_id IN (SELECT id FROM producers WHERE name = 'foo');</PRE
><P>
副問い合わせ形式より結合形式の方が書き易い、あるいは、実行が速くなることがあります。
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN85034"
></A
><H2
>例</H2
><P
>ミュージカル以外の全ての映画を削除します。

</P><PRE
CLASS="PROGRAMLISTING"
>DELETE FROM films WHERE kind &lt;&gt; 'Musical';</PRE
><P>
  </P
><P
><TT
CLASS="LITERAL"
>films</TT
>テーブルを空にします。
</P><PRE
CLASS="PROGRAMLISTING"
>DELETE FROM films;</PRE
><P>
  </P
><P
>完了した作業（statusがDONE）を削除し、削除された行のすべての詳細を返します。
</P><PRE
CLASS="PROGRAMLISTING"
>DELETE FROM tasks WHERE status = 'DONE' RETURNING *;</PRE
><P>
  </P
><P
><TT
CLASS="STRUCTNAME"
>tasks</TT
>において<TT
CLASS="LITERAL"
>c_tasks</TT
>カーソルが現在位置している行を削除します。
</P><PRE
CLASS="PROGRAMLISTING"
>DELETE FROM tasks WHERE CURRENT OF c_tasks;</PRE
><P></P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN85047"
></A
><H2
>互換性</H2
><P
>このコマンドは標準SQLに準拠しています。
ただし、<TT
CLASS="LITERAL"
>USING</TT
>句と<TT
CLASS="LITERAL"
>RETURNING</TT
>句は<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の拡張です。
<TT
CLASS="COMMAND"
>DELETE</TT
>で<TT
CLASS="LITERAL"
>WITH</TT
>が使用可能であることも同様に拡張です。
  </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="sql-declare.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>ホーム</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="sql-discard.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>DECLARE</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="sql-commands.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>DISCARD</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>