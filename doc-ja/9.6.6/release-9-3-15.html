<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>リリース9.3.15</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 9.6.5文書"
HREF="index.html"><LINK
REL="UP"
TITLE="リリースノート"
HREF="release.html"><LINK
REL="PREVIOUS"
TITLE="リリース9.3.16"
HREF="release-9-3-16.html"><LINK
REL="NEXT"
TITLE="リリース9.3.14"
HREF="release-9-3-14.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=utf-8"><META
NAME="creation"
CONTENT="2018-02-10T07:29:51"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>PostgreSQL 9.6.5文書</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="リリース9.3.16"
HREF="release-9-3-16.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="release.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>付録 E. リリースノート</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="リリース9.3.14"
HREF="release-9-3-14.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="RELEASE-9-3-15"
>E.36. リリース9.3.15</A
></H1
><DIV
CLASS="FORMALPARA"
><P
><B
>リリース日: </B
>2016-10-27</P
></DIV
><P
>このリリースは9.3.14に対し、各種不具合を修正したものです。
9.3メジャーリリースにおける新機能については、<A
HREF="release-9-3.html"
>項E.51</A
>を参照してください。
  </P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN139901"
>E.36.1. バージョン9.3.15への移行</A
></H2
><P
>9.3.Xからの移行ではダンプ/リストアは不要です。
   </P
><P
>しかしながら、インストレーションが下記変更点の最初に書かれたバグの影響を受けている場合には、アップデート後に壊れた空き領域マップを修復する作業が必要になるでしょう。
   </P
><P
>また、9.3.9よりも前のバージョンからアップグレードする場合には、<A
HREF="release-9-3-9.html"
>項E.42</A
>を参照してください。
   </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN139907"
>E.36.2. 変更点</A
></H2
><P
></P
><UL
><LI
><P
>リレーションの空き領域マップと可視性マップの切り捨てに関するWAL記録を修正しました。
(Pavan Deolasee, Heikki Linnakangas)
     </P
><P
>クラッシュリカバリの際にこれらのファイルが正しくリストアされない、あるいは、スタンバイサーバで誤った書き込みがされる可能性がありました。
空き領域マップ内のでたらめな項目は、リレーション自体から切り捨てられて存在しないページへのアクセスを引き起こすおそれがあり、典型的には<SPAN
CLASS="QUOTE"
>"could not read block <TT
CLASS="REPLACEABLE"
><I
>XXX</I
></TT
>: read only 0 of 8192 bytes（ブロックXXXが読み取りできません: 8192バイトのうち0バイトのみ読み取りました）"</SPAN
>のようなエラーをもたらします。
チェックサム検査を有効にしているなら、可視性マップでのチェックサムエラーの可能性もあります。
     </P
><P
>問題があるかどうかの判断とそうであるときの修復の手順について、
<A
HREF="https://wiki.postgresql.org/wiki/Free_Space_Map_Problems"
TARGET="_top"
>https://wiki.postgresql.org/wiki/Free_Space_Map_Problems</A
>
で説明されています。
     </P
></LI
><LI
><P
><TT
CLASS="COMMAND"
>SELECT FOR UPDATE/SHARE</TT
>が、その後に中止されたトランザクションにより更新されたタプルを正しくロックするように修正しました。
      (&Aacute;lvaro Herrera)
     </P
><P
>9.5以降では、<TT
CLASS="COMMAND"
>SELECT</TT
>は時々そのようなタプルを返すのに失敗しました。
失敗が以前のリリースで発生することは確認されていませんが、同時更新で起こる可能性があります。
     </P
></LI
><LI
><P
>CTEスキャンを伴うEvalPlanQualの再検査を修正しました。(Tom Lane)
     </P
><P
>再検査はCTEを行を返さないものと常にみなしており、これは典型的には最近更新された行の更新の失敗に繋がっていました。
     </P
></LI
><LI
><P
>副問い合わせにおけるハッシュ集約の以前の結果の不適切な繰り返しを修正しました。(Andrew Gierth)
     </P
><P
>以前に計算された集約状態値のハッシュテーブルを再利用可能か確認するテストは集約引数式に外部の問い合わせ参照が現れる可能性を無視していました。
そのような参照の値の変化により、ハッシュテーブルが再計算されることになるはずですが、そうなっていませんでした。
     </P
></LI
><LI
><P
><A
HREF="runtime-config-statistics.html#GUC-TRACK-IO-TIMING"
>track_io_timing</A
>がonのとき、有効なXMLを出力するように<TT
CLASS="COMMAND"
>EXPLAIN</TT
>を修正しました。
(Markus Winand)
     </P
><P
>これまでXML出力形式オプションは<TT
CLASS="LITERAL"
>&lt;I/O-Read-Time&gt;</TT
>のような文法的に無効なタグを生成していました。
これは<TT
CLASS="LITERAL"
>&lt;I-O-Read-Time&gt;</TT
>となります。
     </P
></LI
><LI
><P
><TT
CLASS="COMMAND"
>EXPLAIN</TT
>において計測されなかった時間に0を表示するのを抑制しました。(Maksim Milyutin)
     </P
><P
>特定のオプションの組み合わせでは、その組み合わせでは実際には決して計測されない時間に対して0を表示していました。
<TT
CLASS="COMMAND"
>EXPLAIN</TT
>での私たちの一般的な方針は、そのようなフィールドは全く表示しないことですので、すべての場合で首尾一貫してそのようにします。
     </P
></LI
><LI
><P
><TT
CLASS="COMMAND"
>VACUUM</TT
>がテーブルを切り捨てられるよう排他テーブルロックを待っている時のタイムアウト長を修正しました。(Simon Riggs)
     </P
><P
>タイムアウトは50ミリ秒とされていましたが、実際にはたったの50マイクロ秒でした。そのため<TT
CLASS="COMMAND"
>VACUUM</TT
>は意図したよりもずっと簡単に切り捨てを諦めていました。
意図していた値に設定しました。
     </P
></LI
><LI
><P
>テーブルの作成または定義変更における、継承した<TT
CLASS="LITERAL"
>CHECK</TT
>制約のマージでのバグを修正しました。
(Tom Lane, Amit Langote)
     </P
><P
>同一の<TT
CLASS="LITERAL"
>CHECK</TT
>制約を親テーブルと子テーブルにどの順でも加えることを可能にします。
親テーブルからの有効な制約と子テーブルの<TT
CLASS="LITERAL"
>NOT VALID</TT
>な制約とのマージを防止します。
そのうえ、<TT
CLASS="LITERAL"
>NO INHERIT</TT
>な子の制約と継承された制約とのマージを防止します。
     </P
></LI
><LI
><P
><CODE
CLASS="FUNCTION"
>numeric_in()</CODE
>と<CODE
CLASS="FUNCTION"
>numeric_recv()</CODE
>が受け付ける値に関する人為的な制限を取り除きました。
      (Tom Lane)
     </P
><P
>格納書式の制限(<TT
CLASS="LITERAL"
>1e100000</TT
>以上)までの数値を許していますので、<CODE
CLASS="FUNCTION"
>numeric_in()</CODE
>が科学的表記法で1000より大きな指数を拒否するのはかなり意味のないことと思われます。
同様に<CODE
CLASS="FUNCTION"
>numeric_recv()</CODE
>が入力値として1000桁より大きなものを拒否するのも馬鹿げたことでした。
     </P
></LI
><LI
><P
>バッファロックの保持なしにタプル可視性をテストすることによる、とても低い確率のデータ破損を回避しました。
(Thomas Munro, Peter Geoghegan, Tom Lane)
     </P
></LI
><LI
><P
>1GBよりも大きな一時リレーションを切り捨てる時のファイルディスクリプタのリークを修正しました。(Andres Freund)
     </P
></LI
><LI
><P
>スタンドアローンのバックエンドを<TT
CLASS="LITERAL"
>standby_mode</TT
>をオンにして開始できないようにしました。(Michael Paquier)
     </P
><P
>WALデータを取得して処理するWALレシーバがありませんので、これは全く有用ではありません。この状況を考慮して設計されていないコードで誤った動作をする可能性がありました。
     </P
></LI
><LI
><P
><SPAN
CLASS="APPLICATION"
>libpq</SPAN
>で複数接続を横断してSSLコンテキストを共有をしようとしなくしました。
(Heikki Linnakangas)
     </P
><P
>特に異なる接続に異なるSSLパラメータを使おうとするとき、これは稀な場合で起きる様々なバグをもたらしました。
     </P
></LI
><LI
><P
><SPAN
CLASS="APPLICATION"
>libpq</SPAN
>で稀な場合のメモリリークを回避しました。
(Tom Lane)
     </P
><P
>報告された問題は<CODE
CLASS="FUNCTION"
>PQreset()</CODE
>でエラー報告がメモリリークするものですが、関連したケースがいくつかあると思われます。
     </P
></LI
><LI
><P
><SPAN
CLASS="APPLICATION"
>ecpg</SPAN
>の<TT
CLASS="OPTION"
>--help</TT
>と<TT
CLASS="OPTION"
>--version</TT
>オプションが他の実行ファイルと首尾一貫して動作するようにしました(Haribabu Kommi)
     </P
></LI
><LI
><P
><SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>では、範囲コンストラクタ関数を決してダンプしません。
      (Tom Lane)
     </P
><P
>この見過ごしにより、<SPAN
CLASS="APPLICATION"
>pg_upgrade</SPAN
>はコンストラクタ関数を重複して生成していたため範囲型を含む拡張で失敗していました。
     </P
></LI
><LI
><P
><SPAN
CLASS="APPLICATION"
>pg_xlogdump</SPAN
>で<TT
CLASS="OPTION"
>--follow</TT
>オプションを使っているとき、新たなWALセグメントのオープンを再試行するようにしました。
(Magnus Hagander)
     </P
><P
>これはサーバの次セグメント作成における起こりうる遅れを許容します。
     </P
></LI
><LI
><P
>2ページ以上に渡る連続レコードで始まるWALファイルを<SPAN
CLASS="APPLICATION"
>pg_xlogdump</SPAN
>が処理できるよう修正しました。(Pavan Deolasee)
     </P
></LI
><LI
><P
><TT
CLASS="OPTION"
>-e</TT
>オプションが指定された場合に<TT
CLASS="FILENAME"
>contrib/intarray/bench/bench.pl</TT
>が<TT
CLASS="COMMAND"
>EXPLAIN</TT
>の結果を表示するよう修正しました。
      (Daniel Gustafsson)
     </P
></LI
><LI
><P
>最近のWindowsのバージョンで追加されたタイムゾーン名を認識するようWindowsのタイムゾーンのマッピングを更新しました。(Michael Paquier)
     </P
></LI
><LI
><P
>廃止された動的タイムゾーン省略形での失敗を防止します。(Tom Lane)
     </P
><P
>参照されるタイムゾーンに動的タイムゾーン省略形が一致するものがない場合に、タイムゾーン名と同じであると扱います。
これは、IANAがタイムゾーンデータベースから省略形を削除した場合に発生する予期せぬ失敗を回避します。削除は<SPAN
CLASS="APPLICATION"
>tzdata</SPAN
> release 2016fで行なわれましたし、また、将来再び行なわれる可能性が高いです。
結果は個々の省略形の分別だけに限定されません。ミスマッチにより<TT
CLASS="STRUCTNAME"
>pg_timezone_abbrevs</TT
>ビューが完全に失敗します。
     </P
></LI
><LI
><P
>タイムゾーンデータファイルを<SPAN
CLASS="APPLICATION"
>tzdata</SPAN
> release 2016hに更新しました。
パレスチナとトルコの夏時間法の変更、トルコとロシアのいくつかの地域の歴史的修正が含まれます。
南極大陸、旧ソ連、スリランカのいくつかのタイムゾーンでは数値による省略形に切り替えました。
     </P
><P
>IANAタイムゾーンデータベースはこれまで全てのタイムゾーンについて文字による省略形を提供しましたが、地元の人々の間でほとんど、あるいは全く通用していない省略形をしばしば作成していました。
IANAは英語の省略形が現実に使われている形跡がないゾーンにおいてはUTCオフセット数値を使うことを選ぶという方針に転換しようとしてるところです。
少なくともしばらくの間、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>はタイムスタンプの入力に、このような削除された省略形を引き続き受け入れます。
しかし、それらは<TT
CLASS="STRUCTNAME"
>pg_timezone_names</TT
>ビューには現れず、出力にも使用されなくなります。
     </P
><P
>本更新では<TT
CLASS="LITERAL"
>AMT</TT
>はもはやアルメニア時間の意味で使われるものとしては現れません。
それゆえに、これをアマゾン時間すなわちUTC+4ではなくUTC-4と解釈するように<TT
CLASS="LITERAL"
>Default</TT
>省略形セットを変更しました。
     </P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="release-9-3-16.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>ホーム</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="release-9-3-14.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>リリース9.3.16</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="release.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>リリース9.3.14</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>