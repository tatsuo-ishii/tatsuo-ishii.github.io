<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>インストール手順</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 9.6.5文書"
HREF="index.html"><LINK
REL="UP"
TITLE="  ソースコードからインストール"
HREF="installation.html"><LINK
REL="PREVIOUS"
TITLE="ソースの入手"
HREF="install-getsource.html"><LINK
REL="NEXT"
TITLE="インストール後の設定作業"
HREF="install-post.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=utf-8"><META
NAME="creation"
CONTENT="2018-02-10T07:29:51"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>PostgreSQL 9.6.5文書</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="ソースの入手"
HREF="install-getsource.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="installation.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>第 16章ソースコードからインストール</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="インストール後の設定作業"
HREF="install-post.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="INSTALL-PROCEDURE"
>16.4. インストール手順</A
></H1
><DIV
CLASS="PROCEDURE"
><OL
TYPE="1"
><LI
CLASS="STEP"
><A
NAME="CONFIGURE"
></A
><P
><B
>構成</B
></P
><P
>インストール手順の最初のステップは、システムに合わせてソースツリーを設定し、使用するオプションを選択することです。
<TT
CLASS="FILENAME"
>configure</TT
>スクリプトを実行することでこれを行います。
デフォルトのインストールを行う場合は、単に以下を入力してください。
</P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>./configure</KBD
></PRE
><P>
このスクリプトは、各種のシステムに依存した変数の値を決定するために多くの試験を行い、使用中のオペレーティングシステムが持つどんなクセでも検出し、最終的に構築用ツリーに結果を記録するためのファイルをいくつか作成します。構築用のディレクトリを別の場所にしたい場合は、ソースツリーの外のディレクトリで<TT
CLASS="FILENAME"
>configure</TT
>を実行することもできます。この処理は<I
CLASS="FIRSTTERM"
>VPATH</I
>の構築も呼び出します。どのように行うかは下記を参照して下さい。
</P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>mkdir build_dir</KBD
>
<KBD
CLASS="USERINPUT"
>cd build_dir</KBD
>
<KBD
CLASS="USERINPUT"
>/path/to/source/tree/configure [オプションはここに]</KBD
>
<KBD
CLASS="USERINPUT"
>make</KBD
></PRE
><P>
   </P
><P
>デフォルトの構成では、サーバ、ユーティリティの他に、Cコンパイラだけを必要とするクライアントアプリケーションやインタフェースを構築します。
デフォルトでは、全てのファイルは<TT
CLASS="FILENAME"
>/usr/local/pgsql</TT
>以下にインストールされます。
   </P
><P
><TT
CLASS="FILENAME"
>configure</TT
>に以下のコマンドラインオプションを1つ以上指定することで、構築処理やインストール処理を変更することができます。

     <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="OPTION"
>--prefix=<TT
CLASS="REPLACEABLE"
><I
>PREFIX</I
></TT
></TT
></DT
><DD
><P
><TT
CLASS="FILENAME"
>/usr/local/pgsql</TT
>ではなく、<TT
CLASS="REPLACEABLE"
><I
>PREFIX</I
></TT
>ディレクトリ以下に全てのファイルをインストールします。
ファイルは実際には様々なサブディレクトリにインストールされ、<TT
CLASS="REPLACEABLE"
><I
>PREFIX</I
></TT
>ディレクトリの直下にインストールされるファイルはありません。
        </P
><P
>特別な必要性があるのであれば、以下のオプションを使用して個々のサブディレクトリを変更することもできます。
しかし、これらをそのまま使用した場合、インストレーションは位置再変更可能になります。
つまり、インストールの後にディレクトリを移動することができます
（<TT
CLASS="LITERAL"
>man</TT
>と<TT
CLASS="LITERAL"
>doc</TT
>の場所はこの影響を受けません。）
        </P
><P
>インストールの位置再変更のために、<TT
CLASS="FILENAME"
>configure</TT
>の<TT
CLASS="LITERAL"
>--disable-rpath</TT
>を使用しようと考えるかもしれません。
その場合は、オペレーティングシステムにその共有ライブラリの場所を通知する必要があるでしょう。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--exec-prefix=<TT
CLASS="REPLACEABLE"
><I
>EXEC-PREFIX</I
></TT
></TT
></DT
><DD
><P
>アーキテクチャ依存のファイルを<TT
CLASS="REPLACEABLE"
><I
>PREFIX</I
></TT
>の設定とは別の接頭辞<TT
CLASS="REPLACEABLE"
><I
>EXEC-PREFIX</I
></TT
>以下にインストールすることができます。
ホスト間でアーキテクチャ非依存のファイルを共有する場合に便利です。
省略した場合、<TT
CLASS="REPLACEABLE"
><I
>EXEC-PREFIX</I
></TT
>は<TT
CLASS="REPLACEABLE"
><I
>PREFIX</I
></TT
>と同じに設定され、アーキテクチャに依存するファイルも非依存なファイルも同じツリー以下にインストールされます。
ほとんどの場合、これが望まれています。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--bindir=<TT
CLASS="REPLACEABLE"
><I
>DIRECTORY</I
></TT
></TT
></DT
><DD
><P
>実行可能プログラム用のディレクトリを指定します。
デフォルトでは<TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>EXEC-PREFIX</I
></TT
>/bin</TT
>であり、通常<TT
CLASS="FILENAME"
>/usr/local/pgsql/bin</TT
>となります。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--sysconfdir=<TT
CLASS="REPLACEABLE"
><I
>DIRECTORY</I
></TT
></TT
></DT
><DD
><P
>各種設定ファイル用のディレクトリを設定します。
デフォルトでは<TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>PREFIX</I
></TT
>/etc</TT
>です。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--libdir=<TT
CLASS="REPLACEABLE"
><I
>DIRECTORY</I
></TT
></TT
></DT
><DD
><P
>ライブラリや動的ロード可能モジュールをインストールする場所を設定します。
デフォルトは<TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>EXEC-PREFIX</I
></TT
>/lib</TT
>です。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--includedir=<TT
CLASS="REPLACEABLE"
><I
>DIRECTORY</I
></TT
></TT
></DT
><DD
><P
>CおよびC++のヘッダファイルをインストールするディレクトリを設定します。
デフォルトは<TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>PREFIX</I
></TT
>/include</TT
>です。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--datarootdir=<TT
CLASS="REPLACEABLE"
><I
>DIRECTORY</I
></TT
></TT
></DT
><DD
><P
>いろいろな種類の読み取り専用データファイル用のルートディレクトリを設定します。
これは後述のオプションの一部についてのデフォルトを設定するだけです。
デフォルトは<TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>PREFIX</I
></TT
>/share</TT
>です。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--datadir=<TT
CLASS="REPLACEABLE"
><I
>DIRECTORY</I
></TT
></TT
></DT
><DD
><P
>インストールプログラムが使用する読み取り専用のディレクトリを設定します。
デフォルトは<TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>DATAROOTDIR</I
></TT
></TT
>です。
これはインストールするデータベースファイルがどこに設置されるかとは関係ないことを覚えておいてください。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--localedir=<TT
CLASS="REPLACEABLE"
><I
>DIRECTORY</I
></TT
></TT
></DT
><DD
><P
>特にメッセージ翻訳カタログファイルのロケールデータをインストールするディレクトリを設定します。
デフォルトは<TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>DATAROOTDIR</I
></TT
>/locale</TT
>です。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--mandir=<TT
CLASS="REPLACEABLE"
><I
>DIRECTORY</I
></TT
></TT
></DT
><DD
><P
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>付属のマニュアルページがこのディレクトリ以下の、対応する<TT
CLASS="FILENAME"
>man<TT
CLASS="REPLACEABLE"
><I
>x</I
></TT
></TT
>サブディレクトリにインストールされます。
デフォルトは<TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>DATAROOTDIR</I
></TT
>/man</TT
>です。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--docdir=<TT
CLASS="REPLACEABLE"
><I
>DIRECTORY</I
></TT
></TT
></DT
><DD
><P
><SPAN
CLASS="QUOTE"
>"man"</SPAN
>ページを除いた、ドキュメント一式ファイルをインストールするルートディレクトリを設定します。
これは以下のオプションのデフォルトのみを設定します。
このオプションのデフォルト値は<TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>DATAROOTDIR</I
></TT
>/doc/postgresql</TT
>です。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--htmldir=<TT
CLASS="REPLACEABLE"
><I
>DIRECTORY</I
></TT
></TT
></DT
><DD
><P
>         <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>のHTML形式化文書一式はこのディレクトリの下にインストールされます。デフォルトは<TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>DATAROOTDIR</I
></TT
></TT
>です。
        </P
></DD
></DL
></DIV
><P>

     </P><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>（<TT
CLASS="FILENAME"
>/usr/local/include</TT
>といった）共用のインストール場所に、システムの他の名前空間に影響を与えることなく<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>をインストールすることができるような配慮がなされています。
まず、完全に展開したディレクトリ名に<SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>postgres</TT
>"</SPAN
>か<SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>pgsql</TT
>"</SPAN
>という文字列が含まれていない場合、<SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>/postgresql</TT
>"</SPAN
>という文字列が自動的に<TT
CLASS="VARNAME"
>datadir</TT
>、<TT
CLASS="VARNAME"
>sysconfdir</TT
>、<TT
CLASS="VARNAME"
>docdir</TT
>に追加されます。
例えば、接頭辞として<TT
CLASS="FILENAME"
>/usr/local</TT
>を使用する場合、文書は<TT
CLASS="FILENAME"
>/usr/local/doc/postgresql</TT
>にインストールされますが、接頭辞が<TT
CLASS="FILENAME"
>/opt/postgres</TT
>の場合は<TT
CLASS="FILENAME"
>/opt/postgres/doc</TT
>にインストールされます。
クライアントインタフェース用の外部向けCヘッダファイルは<TT
CLASS="VARNAME"
>includedir</TT
>にインストールされ、名前空間の問題はありません。
内部向けヘッダファイルやサーバ用ヘッダファイルは、<TT
CLASS="VARNAME"
>includedir</TT
>以下の非公開ディレクトリにインストールされます。
各インタフェース用のヘッダファイルにアクセスする方法についての情報は、そのインタフェースの文書を参照してください。
最後に、適切であれば、動的ロード可能モジュール用に<TT
CLASS="VARNAME"
>libdir</TT
>以下にも非公開用のサブディレクトリが作成されます。
      </P
></BLOCKQUOTE
></DIV
><P>
    </P
><P
>     <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="OPTION"
>--with-extra-version=<TT
CLASS="REPLACEABLE"
><I
>STRING</I
></TT
></TT
></DT
><DD
><P
>PostgreSQLバージョン番号に<TT
CLASS="REPLACEABLE"
><I
>STRING</I
></TT
>を追加します。
これは、例えば、リリースされていないGitスナップショットからビルドしたバイナリや、<TT
CLASS="COMMAND"
>git describe</TT
>識別子やディストリビューションパッケージリリース番号のような追加のバージョン文字列のあるカスタムパッチを含むバイナリに印をつけるために使えます。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-includes=<TT
CLASS="REPLACEABLE"
><I
>DIRECTORIES</I
></TT
></TT
></DT
><DD
><P
><TT
CLASS="REPLACEABLE"
><I
>DIRECTORIES</I
></TT
>には、コンパイラがヘッダファイルを検索するディレクトリのリストをコロンで区切って指定します。
（GNU <SPAN
CLASS="APPLICATION"
>Readline</SPAN
>などの）オプションのパッケージが非標準的な場所にインストールされている場合、このオプションと、おそらく対応する<TT
CLASS="OPTION"
>--with-libraries</TT
>オプションを使用する必要があります。
        </P
><P
>         例： <TT
CLASS="LITERAL"
>--with-includes=/opt/gnu/include:/usr/sup/include</TT
>
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-libraries=<TT
CLASS="REPLACEABLE"
><I
>DIRECTORIES</I
></TT
></TT
></DT
><DD
><P
><TT
CLASS="REPLACEABLE"
><I
>DIRECTORIES</I
></TT
>には、ライブラリを検索するディレクトリのリストをコロンで区切って指定します。
パッケージが非標準的な場所にインストールされている場合は、おそらくこのオプション（と対応する<TT
CLASS="OPTION"
>--with-includes</TT
>オプション）を使用する必要があります。
        </P
><P
>例： <TT
CLASS="LITERAL"
>--with-libraries=/opt/gnu/lib:/usr/sup/lib</TT
>
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--enable-nls[<SPAN
CLASS="OPTIONAL"
>=<TT
CLASS="REPLACEABLE"
><I
>LANGUAGES</I
></TT
></SPAN
>]</TT
></DT
><DD
><P
>各国語サポート（<ACRONYM
CLASS="ACRONYM"
>NLS</ACRONYM
>）、つまり、英語以外の言語によるプログラムメッセージの表示機能を有効にします。
<TT
CLASS="REPLACEABLE"
><I
>LANGUAGES</I
></TT
>はオプションであり、サポートさせたい言語コードを空白で区切ったリストを指定します。例えば、<TT
CLASS="LITERAL"
>--enable-nls='de fr'</TT
>などとします 
（指定したリストと実際に用意された翻訳との論理積が自動的に計算されます）。
リストに何も指定しなかった場合、利用可能な翻訳すべてがインストールされます。
        </P
><P
>このオプションを使用するためには、<SPAN
CLASS="APPLICATION"
>gettext</SPAN
> APIの実装が必要です。
上記を参照してください。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-pgport=<TT
CLASS="REPLACEABLE"
><I
>NUMBER</I
></TT
></TT
></DT
><DD
><P
>サーバとクライアントのデフォルトのポート番号を<TT
CLASS="REPLACEABLE"
><I
>NUMBER</I
></TT
>に設定します。
デフォルトは5432です。
このポートは後でいつでも変更することができますが、ここで指定した場合、サーバとクライアントはコンパイル時に同じデフォルト値を持つようになります。
これは非常に便利です。
通常、デフォルト以外の値を選択すべき唯一の理由は、同じマシンで複数の<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>を稼働させることです。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-perl</TT
></DT
><DD
><P
><SPAN
CLASS="APPLICATION"
>PL/Perl</SPAN
>サーバサイド言語を構築します。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-python</TT
></DT
><DD
><P
><SPAN
CLASS="APPLICATION"
>PL/Python</SPAN
>サーバサイド言語を構築します。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-tcl</TT
></DT
><DD
><P
><SPAN
CLASS="APPLICATION"
>PL/Tcl</SPAN
>サーバサイド言語を構築します。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-tclconfig=<TT
CLASS="REPLACEABLE"
><I
>DIRECTORY</I
></TT
></TT
></DT
><DD
><P
>Tclは、Tclへのインタフェースモジュールを構築するために必要な設定情報を含む<TT
CLASS="FILENAME"
>tclConfig.sh</TT
>ファイルをインストールします。
このファイルは通常、自動的に一般的に知られている場所にありますが、もしTclの別のバージョンを使いたい場合は、検索対象のディレクトリを指定することができます。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-gssapi</TT
></DT
><DD
><P
>GSSAPI認証のサポートを構築します。
多くのシステムでは、GSSAPIシステム（通常Kerberosインストレーションの一部）はデフォルトの検索場所（例えば<TT
CLASS="FILENAME"
>/usr/include</TT
>や<TT
CLASS="FILENAME"
>/usr/lib</TT
>）にインストールされていません。
そのため、<TT
CLASS="OPTION"
>--with-includes</TT
>と<TT
CLASS="OPTION"
>--with-libraries</TT
>オプションをさらに追加して使わなければいけません。
<TT
CLASS="FILENAME"
>configure</TT
>は、処理を進める前にGSSAPIが正しくインストールされていることを確認するために、必要とされるヘッダファイルとライブラリを検査します。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-krb-srvnam=<TT
CLASS="REPLACEABLE"
><I
>NAME</I
></TT
></TT
></DT
><DD
><P
>GSSAPIで使用されるKerberosのサービスプリンシパルのデフォルトの名前です。
デフォルトでは<SPAN
CLASS="QUOTE"
>"postgres"</SPAN
>です。
これを変える理由はWindows環境がない限り、特にありません。
Windows環境がある場合は大文字の<TT
CLASS="LITERAL"
>POSTGRES</TT
>に設定する必要があります。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-openssl</TT
>
       </DT
><DD
><P
><ACRONYM
CLASS="ACRONYM"
>SSL</ACRONYM
>（暗号化）接続のサポートを有効にして構築します。
これには、<SPAN
CLASS="PRODUCTNAME"
>OpenSSL</SPAN
>パッケージがインストールされていなければなりません。
<TT
CLASS="FILENAME"
>configure</TT
>は、処理を進める前に<SPAN
CLASS="PRODUCTNAME"
>OpenSSL</SPAN
>のインストールを確認するために、必要なヘッダファイルとライブラリを検査します。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-pam</TT
></DT
><DD
><P
><ACRONYM
CLASS="ACRONYM"
>PAM</ACRONYM
>（プラガブル認証モジュール）のサポートを有効にして構築します。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-bsd-auth</TT
></DT
><DD
><P
>BSD認証のサポートを有効にして構築します。
(BSD認証フレームワークは今のところOpenBSDだけで利用可能です。)
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-ldap</TT
></DT
><DD
><P
>認証および接続パラメータ検索用の<ACRONYM
CLASS="ACRONYM"
>LDAP</ACRONYM
>サポートを有効にして構築します。
（<A
HREF="libpq-ldap.html"
>項32.17</A
>および<A
HREF="auth-methods.html#AUTH-LDAP"
>項20.3.7</A
>を参照してください。）
Unixでは、<SPAN
CLASS="PRODUCTNAME"
>OpenLDAP</SPAN
>パッケージがインストールされていることが要求されます。Windowsではデフォルトの<SPAN
CLASS="PRODUCTNAME"
>WinLDAP</SPAN
>ライブラリが使用されます。
<TT
CLASS="FILENAME"
>configure</TT
>は、処理を進める前に<SPAN
CLASS="PRODUCTNAME"
>OpenLDAP</SPAN
>のインストールが十分されているかどうかを確認するために、必要なヘッダファイルとライブラリを検査します。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-systemd</TT
></DT
><DD
><P
><SPAN
CLASS="APPLICATION"
>systemd</SPAN
>サービス通知のサポートを有効にして構築します。
サーババイナリが<SPAN
CLASS="APPLICATION"
>systemd</SPAN
>の元で開始する場合には、これは統合を改善しますが、それ以外は影響はありません。詳細は<A
HREF="server-start.html"
>項18.3</A
>を参照してください。
このオプションを使えるようにするには、<SPAN
CLASS="APPLICATION"
>libsystemd</SPAN
>と関連するヘッダファイルをインストールすることが必要です。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--without-readline</TT
></DT
><DD
><P
><SPAN
CLASS="APPLICATION"
>Readline</SPAN
>ライブラリ（および<SPAN
CLASS="APPLICATION"
>libedit</SPAN
>）の使用を防止します。
これにより<SPAN
CLASS="APPLICATION"
>psql</SPAN
>でのコマンドライン編集および履歴が無効となるため、推奨されません。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-libedit-preferred</TT
></DT
><DD
><P
>GPLライセンスの<SPAN
CLASS="APPLICATION"
>Readline</SPAN
>ではなくBSDライセンスの<SPAN
CLASS="APPLICATION"
>libedit</SPAN
>ライブラリを優先して使用します。
このオプションは両方のライブラリがインストールされている場合にのみ重要です。
この場合デフォルトで<SPAN
CLASS="APPLICATION"
>Readline</SPAN
>が使用されます。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-bonjour</TT
></DT
><DD
><P
>Bonjourサポートを有効にして構築します。
これにはオペレーティングシステムがBonjourをサポートしていることが必要です。
OS Xでは推奨します。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-uuid=<TT
CLASS="REPLACEABLE"
><I
>LIBRARY</I
></TT
></TT
></DT
><DD
><P
>指定されたUUIDライブラリを使用して(UUIDを生成する関数を提供する)<A
HREF="uuid-ossp.html"
>uuid-ossp</A
>モジュールをビルドします。
<TT
CLASS="REPLACEABLE"
><I
>LIBRARY</I
></TT
>は以下のいずれかでなければなりません。
        </P
><P
></P
><UL
><LI
><P
><TT
CLASS="OPTION"
>bsd</TT
>はFreeBSD、NetBSD、その他のBSD派生システムにあるUUID関数を使います。
          </P
></LI
><LI
><P
><TT
CLASS="OPTION"
>e2fs</TT
>は<TT
CLASS="LITERAL"
>e2fsprogs</TT
>プロジェクトで作られたUUIDライブラリを使います。
このライブラリはたいていのLinuxシステムとOS Xにあり、また、その他のプラットフォームでも入手可能です。
          </P
></LI
><LI
><P
><A
HREF="http://www.ossp.org/pkg/lib/uuid/"
TARGET="_top"
>OSSP UUIDライブラリ</A
>を使用します。
          </P
></LI
></UL
></DD
><DT
><TT
CLASS="OPTION"
>--with-ossp-uuid</TT
></DT
><DD
><P
><TT
CLASS="LITERAL"
>--with-uuid=ossp</TT
>に相当する古いものです。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-libxml</TT
></DT
><DD
><P
>libxmlを使用して構築します（SQL/XMLサポートが有効になります）。
この機能のためにはlibxmlバージョン2.6.23以降が必要です。
        </P
><P
>libxmlがインストールする<TT
CLASS="COMMAND"
>xml2-config</TT
>プログラムを使用して、必要なコンパイラオプション、リンクオプションを検出することができます。
PostgreSQLは、見つけられればこのプログラムを使用します。
通常以外の場所にインストールしたlibxmlインストレーションを指定するためには、環境変数<TT
CLASS="ENVAR"
>XML2_CONFIG</TT
>がそのインストレーション用の<TT
CLASS="COMMAND"
>xml2-config</TT
>プログラムを指し示すように設定してください。
または、<TT
CLASS="OPTION"
>--with-includes</TT
>および<TT
CLASS="OPTION"
>--with-libraries</TT
>を使用してください。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-libxslt</TT
></DT
><DD
><P
> <A
HREF="xml2.html"
>xml2</A
>モジュールを構築する場合はlibxsltを使用してください。
<SPAN
CLASS="APPLICATION"
>xml2</SPAN
>はXMLのXSL変換を行うために、このライブラリに依存します。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--disable-integer-datetimes</TT
></DT
><DD
><P
>日付時刻および時間間隔の格納に64ビット整数格納方式を無効にし、その代わり浮動小数点で格納します。<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>リリース8.4以前では日付時刻の浮動小数点格納方式がデフォルトでしたが、<TT
CLASS="TYPE"
>timestamp</TT
>値がとる値の全ての範囲でマイクロ秒精度をサポートしないため現在非推奨となりました。しかし、整数ベースの日付時刻格納には64-ビット整数型が必要です。従って、このオプションはこの型が使えない場合での使用、または以前の<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>バージョン用に書かれたアプリケーションとの互換性を保たなければならない場合に使用します。
詳細は <A
HREF="datatype-datetime.html"
>項8.5</A
>を参照してください。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--disable-float4-byval</TT
></DT
><DD
><P
>float4値の<SPAN
CLASS="QUOTE"
>"値"</SPAN
>渡しを無効にし、<SPAN
CLASS="QUOTE"
>"参照"</SPAN
>渡しで渡すようにします。
このオプションは性能に関するコストがかかりますが、C言語で開発された古いユーザ定義の関数との互換性を保持する場合や<SPAN
CLASS="QUOTE"
>"version 0"</SPAN
>呼び出し規約を使用する場合に必要になります。
長期的に見てより良い解決方法はこうした関数を更新して、<SPAN
CLASS="QUOTE"
>"version 1"</SPAN
>呼び出し規約を使用するようにすることです。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--disable-float8-byval</TT
></DT
><DD
><P
>float8値の<SPAN
CLASS="QUOTE"
>"値"</SPAN
>渡しを無効にし、<SPAN
CLASS="QUOTE"
>"参照"</SPAN
>渡しで渡すようにします。
このオプションは性能に関するコストがかかりますが、C言語で開発された古いユーザ定義の関数との互換性を保持する場合や<SPAN
CLASS="QUOTE"
>"version 0"</SPAN
>呼び出し規約を使用する場合に必要になります。
長期的に見てより良い解決方法はこうした関数を更新して、<SPAN
CLASS="QUOTE"
>"version 1"</SPAN
>呼び出し規約を使用するようにすることです。
このオプションはfloat8に影響するだけではなく、int8やタイムスタンプなど一部の関連した型についても影響することに注意してください。
32ビットプラットフォームでは、<TT
CLASS="OPTION"
>--disable-float8-byval</TT
>がデフォルトで<TT
CLASS="OPTION"
>--enable-float8-byval</TT
>を選択することはできません。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-segsize=<TT
CLASS="REPLACEABLE"
><I
>SEGSIZE</I
></TT
></TT
></DT
><DD
><P
><I
CLASS="FIRSTTERM"
>セグメントサイズ</I
>をギガバイト単位で指定します。
大規模なテーブルはこのセグメントサイズと同じサイズの複数のオペレーティングシステムのファイルに分割されます。
これにより多くのプラットフォームで存在するファイルサイズ上限に関する問題を防ぎます。
デフォルトのセグメントサイズは1ギガバイトで、サポートされるすべてのプラットフォームで安全です。
使用するオペレーティングシステムが<SPAN
CLASS="QUOTE"
>"ラージファイル"</SPAN
>をサポートしていれば（最近はほとんどサポートしています）、より大きなセグメントサイズを使用することができます。
非常に大規模なテーブルで作業する時のファイル記述子の消費数を減らすために、これが役に立つでしょう。
しかし、プラットフォーム、または使用予定のファイルシステムでサポートされる値以上に大きな値を指定しないように注意してください。
<SPAN
CLASS="APPLICATION"
>tar</SPAN
>などの、使用したいその他のツールにも使用できるファイルサイズに制限があることがあります。
絶対に必要ではありませんが、この値を2のべき乗にすることを勧めます。
この値の変更にはinitdbが必要であることに注意してください。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-blocksize=<TT
CLASS="REPLACEABLE"
><I
>BLOCKSIZE</I
></TT
></TT
></DT
><DD
><P
>キロバイト単位で<I
CLASS="FIRSTTERM"
>ブロック容量</I
>を設定します。
これはテーブル内でのストレージとI/Oの単位です。
８キロバイトのデフォルトはほとんどの場合適切ですが、特別な場合は他の値が役立ちます。
値は1から32（キロバイト）の範囲の２のべき乗でなければなりません。
この値の変更はinitdbを必要とすることを覚えておいてください。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-wal-segsize=<TT
CLASS="REPLACEABLE"
><I
>SEGSIZE</I
></TT
></TT
></DT
><DD
><P
>メガバイト単位で<I
CLASS="FIRSTTERM"
>WALセグメント容量</I
>を設定します。これはWALログ内のそれぞれ個別のファイルの容量です。この容量を調整することで、WALログ配送の粒度を制御するのに役立ちます。デフォルト容量は16メガバイトです。1から64（メガバイト）の範囲の２のべき乗でなければなりません。この値の変更はinitdbを必要とすることを覚えておいてください。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-wal-blocksize=<TT
CLASS="REPLACEABLE"
><I
>BLOCKSIZE</I
></TT
></TT
></DT
><DD
><P
>キロバイト単位で<I
CLASS="FIRSTTERM"
>WALブロック容量</I
>を設定します。
これはWALログ内でのストレージとI/Oの単位です。
８キロバイトのデフォルトはほとんどの場合適切ですが、特別な場合は大きめの値が役立ちます。
値は1から64（キロバイト）の範囲の２のべき乗でなければなりません。
この値の変更はinitdbを必要とすることを覚えておいてください。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--disable-spinlocks</TT
></DT
><DD
><P
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>がそのプラットフォーム用のCPUスピンロックをサポートしない場合でも、構築に成功するようにします。
スピンロックのサポートの欠落により、性能は悪化します。
したがって、このオプションは、構築が失敗し、その原因が使用するプラットフォームでスピンロックサポートが欠落している場合にのみ使用してください。
使用するプラットフォームにおける<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の構築にこのオプションが必要とされた場合は、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>開発者にその問題を報告してください。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--disable-thread-safety</TT
></DT
><DD
><P
>クライアントライブラリのスレッドセーフを無効にします。
これにより、<SPAN
CLASS="APPLICATION"
>libpq</SPAN
>や<SPAN
CLASS="APPLICATION"
>ECPG</SPAN
>プログラム内の同時実行スレッドは、安全にその固有の接続ハンドルを制御できなくなります。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--with-system-tzdata=<TT
CLASS="REPLACEABLE"
><I
>DIRECTORY</I
></TT
></TT
>
       </DT
><DD
><P
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>は、日付時刻に関する操作で必要な、独自の時間帯データベースを持ちます。
実際のところ、この時間帯データベースはFreeBSD、Linux、Solarisなどの多くのオペレーティングシステムで提供されるIANA時間帯データベースと互換性があります。
このため、これを再びインストールすることは冗長です。
このオプションが使用されると、<TT
CLASS="REPLACEABLE"
><I
>DIRECTORY</I
></TT
>にあるシステムが提供する時間帯データベースがPostgreSQLソース配布物に含まれるものの代わりに使用されます。
<TT
CLASS="REPLACEABLE"
><I
>DIRECTORY</I
></TT
>は絶対パスで指定しなければなりません。
<TT
CLASS="FILENAME"
>/usr/share/zoneinfo</TT
>がオペレーティングシステムの一部でよく使われます。
インストール処理が時間帯データが一致しない、またはエラーがあることを検知しないことに注意してください。
このオプションを使用する場合、指定した時間帯データが<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>で正しく動作するかどうかを検証するためにリグレッションテストを実行することが推奨されています。
        </P
><P
>このオプションは、対象オペレーティングシステムを熟知しているパッケージ配布者を主な対象としたもの。
このオプションを使用する大きな利点は、多くの局所的な夏時間規則の変更があってもPostgreSQLパッケージを更新する必要がないことです。
他の利点として、時間帯データベースファイルをインストール時に構築する必要がありませんので、PostgreSQLのクロスコンパイルをより簡単に行うことができます。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--without-zlib</TT
></DT
><DD
><P
>         
<SPAN
CLASS="APPLICATION"
>Zlib</SPAN
>ライブラリの使用を抑制します。
これは、<SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>と<SPAN
CLASS="APPLICATION"
>pg_restore</SPAN
>における圧縮アーカイブのサポートを無効にします。
このオプションは、このライブラリが利用できないごく少数のシステム向けだけのものです。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--enable-debug</TT
></DT
><DD
><P
>全てのプログラムとライブラリをデバッグシンボル付きでコンパイルします。
これは、問題を解析するためにデバッガ内でプログラムを実行できることを意味します。
これはインストールする実行形式ファイルのサイズをかなり大きくし、また、GCC以外のコンパイラでは、通常はコンパイラによる最適化が行われなくなりますので、低速になります。
しかし、デバッグシンボルが利用できるということは、発生した問題に対応する時に非常に便利です。
現在のところ、GCC を使用している場合にのみ、稼働用のインストレーションにこのオプションを使用することを推奨します。
しかし、開発作業時やベータ版を実行する時は、常にこれを有効にすべきです。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--enable-coverage</TT
></DT
><DD
><P
>GCCを使用している場合、すべてのプログラムとライブラリはコードカバレッジ試験機構付きでコンパイルされます。
実行すると、これらは構築用ディレクトリ内にコードカバレッジメトリックを持ったファイルを生成します。
詳細は<A
HREF="regress-coverage.html"
>項31.5</A
>を参照してください
このオプションはGCC専用であり、また、開発作業中に使用するためのものです。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--enable-profiling</TT
></DT
><DD
><P
>GCCを使用する場合、すべてのプログラムとライブラリがプロファイリング可能状態でコンパイルされます。
バックエンドの終了時、プロファイリングに使用する<TT
CLASS="FILENAME"
>gmon.out</TT
>ファイルを含むサブディレクトリが作成されます。
このオプションはGCCを使用する場合のみ使用でき、開発作業を行う時に使用します。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--enable-cassert</TT
></DT
><DD
><P
>サーバにおける、多くの<SPAN
CLASS="QUOTE"
>"あり得ない"</SPAN
>状態をテストする<I
CLASS="FIRSTTERM"
>アサーション</I
>チェックを有効にします。
これは、プログラムの開発のためには測り知れない価値がありますが、このテストによりサーバはかなり低速になります。
また、このテストを有効にしても、サーバの安定性が向上するとは限りません！
アサーションチェックは、重要度によって分類されていませんので、比較的害がないようなバグでも、アサーション失敗をトリガとした、サーバの再起動が行われてしまいます。
稼働用にこのオプションを使用することは推奨されませんが、開発作業時やベータ版を実行する場合は、これを有効にすべきです。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--enable-depend</TT
></DT
><DD
><P
>自動依存関係追跡を有効にします。
このオプションを使用すると、ヘッダファイルが変更された場合に、影響を受ける全てのオブジェクトファイルが再構築されるように、makefile が設定されます。
これは開発作業時には有用ですが、単に一度コンパイルしインストールするだけであれば、これは無駄なオーバーヘッドです。
現在のところ、GCC でのみ、このオプションは動作します。
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--enable-dtrace</TT
></DT
><DD
><P
>         
動的追跡ツールDTraceのサポートを有効にして<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>をコンパイルします。より詳細な情報は<A
HREF="dynamic-trace.html"
>項28.5</A
>を参照してください。
        </P
><P
><TT
CLASS="COMMAND"
>dtrace</TT
>プログラムを指し示すために<TT
CLASS="ENVAR"
>DTRACE</TT
>環境変数を設定することができます。
<TT
CLASS="COMMAND"
>dtrace</TT
>は通常、検索パス内に存在しない可能性がある<TT
CLASS="FILENAME"
>/usr/sbin</TT
>以下にインストールされていますので、この設定はよく必要になります。
        </P
><P
>         さらに<TT
CLASS="COMMAND"
>dtrace</TT
>プログラム用のコマンドラインオプションを<TT
CLASS="ENVAR"
>DTRACEFLAGS</TT
>環境変数で指定することができます。
Solarisで64ビットバイナリでDTraceをサポートするには、<TT
CLASS="LITERAL"
>DTRACEFLAGS="-64"</TT
>をconfigureに指定してください。
例えばGCCコンパイラを使用する場合は以下のようにします。
</P><PRE
CLASS="SCREEN"
>./configure CC='gcc -m64' --enable-dtrace DTRACEFLAGS='-64' ...</PRE
><P>
Sunのコンパイラを使用する場合は以下のようにします。
</P><PRE
CLASS="SCREEN"
>./configure CC='/opt/SUNWspro/bin/cc -xtarget=native64' --enable-dtrace DTRACEFLAGS='-64' ...</PRE
><P>
        </P
></DD
><DT
><TT
CLASS="OPTION"
>--enable-tap-tests</TT
></DT
><DD
><P
>Perl TAPツールを使ったテストを有効にします。
これにはPerlのインストールとPerlモジュール<TT
CLASS="LITERAL"
>IPC::Run</TT
>が必要です。
詳細は<A
HREF="regress-tap.html"
>項31.4</A
>を参照してください。
        </P
></DD
></DL
></DIV
><P>
    </P
><P
><TT
CLASS="FILENAME"
>configure</TT
>が選ぶものと違うCコンパイラを使いたいという場合には、<TT
CLASS="ENVAR"
>CC</TT
> 環境変数をその使用したいプログラムに設定することができます。
デフォルトでは、<TT
CLASS="FILENAME"
>configure</TT
>は利用できるのであれば<TT
CLASS="FILENAME"
>gcc</TT
>を、利用できなければプラットフォームのデフォルト（通常<TT
CLASS="FILENAME"
>cc</TT
>）を選択します。
同様に、デフォルトのコンパイラフラグは必要に応じて<TT
CLASS="ENVAR"
>CFLAGS</TT
>変数で上書きすることもできます。
    </P
><P
>次のようにして、<TT
CLASS="FILENAME"
>configure</TT
>コマンドラインに環境変数を指定することができます。
</P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>./configure CC=/opt/bin/gcc CFLAGS='-O2 -pipe'</KBD
></PRE
><P>
    </P
><P
>以下は、この方式で設定可能な重要な環境変数の一覧です。

     <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="ENVAR"
>BISON</TT
></DT
><DD
><P
>Bisonプログラム。
        </P
></DD
><DT
><TT
CLASS="ENVAR"
>CC</TT
></DT
><DD
><P
>Cコンパイラ。
        </P
></DD
><DT
><TT
CLASS="ENVAR"
>CFLAGS</TT
></DT
><DD
><P
>Cコンパイラに渡すオプション。
        </P
></DD
><DT
><TT
CLASS="ENVAR"
>CPP</TT
></DT
><DD
><P
>Cプリプロセッサ。
        </P
></DD
><DT
><TT
CLASS="ENVAR"
>CPPFLAGS</TT
></DT
><DD
><P
>Cプリプロセッサに渡すオプション。
        </P
></DD
><DT
><TT
CLASS="ENVAR"
>DTRACE</TT
></DT
><DD
><P
><TT
CLASS="COMMAND"
>dtrace</TT
>プログラムの場所。
        </P
></DD
><DT
><TT
CLASS="ENVAR"
>DTRACEFLAGS</TT
></DT
><DD
><P
><TT
CLASS="COMMAND"
>dtrace</TT
>プログラムに渡すオプション。
        </P
></DD
><DT
><TT
CLASS="ENVAR"
>FLEX</TT
></DT
><DD
><P
>Flexプログラム。
        </P
></DD
><DT
><TT
CLASS="ENVAR"
>LDFLAGS</TT
></DT
><DD
><P
>実行ファイルや共有ライブラリにリンクする場合に使用するオプション。
        </P
></DD
><DT
><TT
CLASS="ENVAR"
>LDFLAGS_EX</TT
></DT
><DD
><P
>実行ファイルのリンク時のみに追加されるオプション。
        </P
></DD
><DT
><TT
CLASS="ENVAR"
>LDFLAGS_SL</TT
></DT
><DD
><P
>共有ライブラリのリンク時のみに追加されるオプション。
        </P
></DD
><DT
><TT
CLASS="ENVAR"
>MSGFMT</TT
></DT
><DD
><P
>多言語サポート（NLS）用の<TT
CLASS="COMMAND"
>msgfmt</TT
>プログラム。
        </P
></DD
><DT
><TT
CLASS="ENVAR"
>PERL</TT
></DT
><DD
><P
>Perlインタプリタのフルパス名。
これは、PL/Perl構築に関する依存性を決定するために使用されます。
        </P
></DD
><DT
><TT
CLASS="ENVAR"
>PYTHON</TT
></DT
><DD
><P
>Pythonインタプリタのフルパス名。
これは、PL/Python構築に関する依存性を決定するために使用されます。またここでPython 2または3を指定するかどうかで(あるいは暗黙的に選択されます)、どちらのPL/Python言語が利用可能になるかも決まります。<A
HREF="plpython-python23.html"
>項44.1</A
>を参照してください。
        </P
></DD
><DT
><TT
CLASS="ENVAR"
>TCLSH</TT
></DT
><DD
><P
>Tclインタプリタのフルパス名。
これは、PL/Tcl構築に関する依存性を決定するために使用され、Tclスクリプト内を置き換えます。
        </P
></DD
><DT
><TT
CLASS="ENVAR"
>XML2_CONFIG</TT
></DT
><DD
><P
>libxmlインストレーションの場所を特定するために使用する<TT
CLASS="COMMAND"
>xml2-config</TT
>プログラムです。
        </P
></DD
></DL
></DIV
><P>
    </P
><P
><TT
CLASS="FILENAME"
>configure</TT
>が選んだコンパイラフラグに対して、事後にフラグを追加することが有用な場合があります。
重要な例は、<TT
CLASS="FILENAME"
>configure</TT
>に渡す<TT
CLASS="ENVAR"
>CFLAGS</TT
>に<SPAN
CLASS="APPLICATION"
>gcc</SPAN
>の<TT
CLASS="OPTION"
>-Werror</TT
>オプションを含められないことです。なぜなら、そうすると<TT
CLASS="FILENAME"
>configure</TT
>の組み込みテストの多くが失敗するからです。
そのようなフラグを追加するには、<TT
CLASS="FILENAME"
>make</TT
>を実行する時に<TT
CLASS="ENVAR"
>COPT</TT
>環境変数に含めてください。
<TT
CLASS="FILENAME"
>configure</TT
>で設定された<TT
CLASS="ENVAR"
>CFLAGS</TT
>オプションと<TT
CLASS="ENVAR"
>LDFLAGS</TT
>オプションの両方に、<TT
CLASS="ENVAR"
>COPT</TT
>の内容が追加されます。
例えば、以下のようにします。
</P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>make COPT='-Werror'</KBD
></PRE
><P>
または
</P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>export COPT='-Werror'</KBD
>
<KBD
CLASS="USERINPUT"
>make</KBD
></PRE
><P>
    </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>      サーバ内部のコード開発を行う場合、<TT
CLASS="OPTION"
>--enable-cassert</TT
>(多数の実行時エラーチェックを有効にする)オプションと<TT
CLASS="OPTION"
>--enable-debug</TT
>(デバッグツールの利便性を向上させる)オプションの使用を推奨します。
     </P
><P
>      GCCを使う場合、少なくとも<TT
CLASS="OPTION"
>-O1</TT
>レベルの最適化で構築することがベストです。なぜなら、何の最適化もしない(<TT
CLASS="OPTION"
>-O0</TT
>) と、重要なコンパイル警告(初期化されていない変数の使用など)が無効になるからです。
      しかし、最適化を行うことでソースコードとコンパイルされたコードのステップは1対1とはならなくなるため、デバッグは複雑になるかもしれません。
      最適化されたコードのデバッグに悩まされてしまう場合は、関心のある特定のファイルに対して<TT
CLASS="OPTION"
>-O0</TT
>で再コンパイルしてください。
      これを実行するための簡単な方法は、<TT
CLASS="COMMAND"
>make PROFILE=-O0 file.o</TT
>のように、<SPAN
CLASS="APPLICATION"
>make</SPAN
>経由でオプションを渡すことです。
     </P
><P
><TT
CLASS="ENVAR"
>COPT</TT
>と<TT
CLASS="ENVAR"
>PROFILE</TT
>の環境変数は、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>のmakefileでは実際には全く同一に扱われます。
どちらを使うかは好みの問題ですが、開発者の一般的な習慣では、一時的にフラグを調整するには<TT
CLASS="ENVAR"
>PROFILE</TT
>を使い、永続的に保持するものには<TT
CLASS="ENVAR"
>COPT</TT
>を使います。
     </P
></BLOCKQUOTE
></DIV
></LI
><LI
CLASS="STEP"
><A
NAME="BUILD"
></A
><P
><B
>構築</B
></P
><P
>構築作業を開始するには、以下を入力してください。
</P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>make</KBD
></PRE
><P>
（<ACRONYM
CLASS="ACRONYM"
>GNU</ACRONYM
> <SPAN
CLASS="APPLICATION"
>make</SPAN
>を使用することを忘れないでください。）
ハードウェアに依存しますが、構築作業には数分かかります。
最後に以下のような行が表示されるはずです。
</P><PRE
CLASS="SCREEN"
>All of PostgreSQL successfully made. Ready to install.</PRE
><P>
   </P
><P
>もし、ドキュメント(HTMLやman)や追加モジュール(<TT
CLASS="FILENAME"
>contrib</TT
>)を含め、構築可能なもの全てを構築したい場合、次の様に実施します。
</P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>make world</KBD
></PRE
><P>
最終行は次のように表示されるはずです。
</P><PRE
CLASS="SCREEN"
>PostgreSQL, contrib, and documentation successfully made. Ready to install.</PRE
><P>
   </P
></LI
><LI
CLASS="STEP"
><P
><B
>リグレッションテスト</B
></P
><P
>インストールを行う前に、新しく構築したサーバをテストしたい場合、この時点でリグレッションテストを実行することができます。
リグレッションテストとは、使用するマシンにおいて<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>が、開発者の想定通りに動作することを検証するためのテストのまとまりです。
次のように入力します。
</P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>make check</KBD
></PRE
><P>
（これは root では動作しません。
非特権ユーザとして実行してください。）
 <A
HREF="regress.html"
>第31章</A
>にはテスト結果の表示に関する詳しい情報があります。
同じコマンドを入力することで、後にいつでもテストを繰り返すことができます。
   </P
></LI
><LI
CLASS="STEP"
><A
NAME="INSTALL"
></A
><P
><B
>ファイルのインストール</B
></P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>もし既存のシステムのアップグレードをする場合、DBクラスタのアップグレードの解説が記載されている <A
HREF="upgrading.html"
>項18.6</A
>を参照してください。
    </P
></BLOCKQUOTE
></DIV
><P
><SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>をインストールするには、以下を入力してください。
</P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>make install</KBD
></PRE
><P>
これは、ファイルを<A
HREF="install-procedure.html#CONFIGURE"
>ステップ1</A
>で指定されたディレクトリにインストールします。
その領域に書き込むための権限を持っていることを確認してください。
通常はこのステップはrootで行う必要があります。
代わりに対象とするディレクトリを前もって作成し、適切に権限を調整することも可能です。
   </P
><P
>ドキュメント(HTMLやman)をインストールするには、以下を入力して下さい。
</P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>make install-docs</KBD
></PRE
><P>
   </P
><P
>先にすべてを(worldを付けて)構築していた場合には、代わりに以下を実行してください。
</P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>make install-world</KBD
></PRE
><P>
これによりドキュメントもインストールされます。
   </P
><P
><TT
CLASS="LITERAL"
>make install</TT
>の代わりに<TT
CLASS="LITERAL"
>make install-strip</TT
>を使用することで、インストール時に実行可能ファイルやライブラリをストリップ（strip）することができます。
これにより、多少の容量を節約できます。
デバッグをサポートするように構築している場合でも、ストリップするとデバッグのサポートは実質、除去されてしまいます。
したがって、これはデバッグが必要なくなった場合にのみ実行すべきです。
<TT
CLASS="LITERAL"
>install-strip</TT
>は容量を節約するために適切な作業を行おうとしますが、実行可能ファイルから全ての不必要なバイトを完全にストリップすることはできません。
可能な限りのディスク容量を全て節約したい場合は、手動で作業を行う必要があります。
   </P
><P
>この標準的なインストール方法では、クライアントアプリケーションの開発に必要なヘッダファイルと、Cで独自の関数やデータ型を作成するといったサーバ側のプログラムの開発用のヘッダファイルが用意されます
（<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> 8.0より前まででは、後で別途<TT
CLASS="LITERAL"
>make install-all-headers</TT
>コマンドが必要でした。しかし、この手順は標準のインストールに含まれるようになりました）。
   </P
><DIV
CLASS="FORMALPARA"
><P
><B
>クライアント側のみのインストール: </B
>クライアントアプリケーションとインタフェースライブラリのみをインストールしたい場合、下記のコマンドを使います。
</P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>make -C src/bin install</KBD
>
<KBD
CLASS="USERINPUT"
>make -C src/include install</KBD
>
<KBD
CLASS="USERINPUT"
>make -C src/interfaces install</KBD
>
<KBD
CLASS="USERINPUT"
>make -C doc install</KBD
></PRE
><P>
<TT
CLASS="FILENAME"
>src/bin</TT
>にはサーバ用の数個のバイナリがあります。これらは小さなものです。
    </P
></DIV
></LI
></OL
></DIV
><DIV
CLASS="FORMALPARA"
><P
><B
>アンインストール: </B
>インストールを取り消すには、<TT
CLASS="COMMAND"
>make uninstall</TT
> コマンドを使います。しかし、作成済みのディレクトリは削除されません。
   </P
></DIV
><DIV
CLASS="FORMALPARA"
><P
><B
>クリーニング: </B
>インストールが終わったら、<TT
CLASS="COMMAND"
>make clean</TT
> コマンドを使ってソースツリーから構築用のファイルを削除し、ディスク領域を解放することができます。
<TT
CLASS="COMMAND"
>configure</TT
>プログラムが作るファイルは保持されますので、後で<TT
CLASS="COMMAND"
>make</TT
>コマンドですべてを再構築できます。
ソースツリーを配布された時の状態に戻したい場合は、<TT
CLASS="COMMAND"
>make distclean</TT
>コマンドを使います。
同じソースツリー内で複数のプラットフォーム向けに構築する場合、これを実行して、それぞれのプラットフォームに対し再構成しなければなりません。
（または、未変更のソースツリーを維持するために、各プラットフォームで別々の構築用ツリーを使用してください。）
   </P
></DIV
><P
>構築作業を行った後で<TT
CLASS="COMMAND"
>configure</TT
>用オプションが間違っていることに気付いた場合や、<TT
CLASS="COMMAND"
>configure</TT
>の調査結果に何らかの変更を加えた場合（例えば、ソフトウェアのアップグレードなど）、再設定と再構築の前に<TT
CLASS="COMMAND"
>make distclean</TT
>を行うことをお勧めします。
さもないと、設定選択肢の変更は、必要なところ全てには反映されない可能性があります。
  </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="install-getsource.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>ホーム</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="install-post.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>ソースの入手</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="installation.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>インストール後の設定作業</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>