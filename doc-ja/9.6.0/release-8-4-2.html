<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>リリース8.4.2</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 9.6.0文書"
HREF="index.html"><LINK
REL="UP"
TITLE="リリースノート"
HREF="release.html"><LINK
REL="PREVIOUS"
TITLE="リリース8.4.3"
HREF="release-8-4-3.html"><LINK
REL="NEXT"
TITLE="リリース8.4.1"
HREF="release-8-4-1.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=utf-8"><META
NAME="creation"
CONTENT="2016-10-20T00:12:21"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>PostgreSQL 9.6.0文書</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="リリース8.4.3"
HREF="release-8-4-3.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="release.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>付録 E. リリースノート</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="リリース8.4.1"
HREF="release-8-4-1.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="RELEASE-8-4-2"
>E.119. リリース8.4.2</A
></H1
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>リリース日: </B
>2009-12-14</P
></BLOCKQUOTE
></DIV
><P
>このリリースは8.4.1に対し、各種の不具合を修正したものです。
8.4メジャーリリースにおける新機能については<A
HREF="release-8-4.html"
>項E.121</A
>を参照してください。
  </P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN155117"
>E.119.1. バージョン8.4.2への移行</A
></H2
><P
>8.4.Xからの移行ではダンプ/リストアは不要です。
しかしハッシュインデックスが存在する場合、8.4.2に移行した後に、破損している可能性があるためそれを修復するために<TT
CLASS="COMMAND"
>REINDEX</TT
>を行わなければなりません。
   </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN155121"
>E.119.2. 変更点</A
></H2
><P
></P
><UL
><LI
><P
>セッション固有の状態を変更するインデックス関数により引き起こされる間接的なセキュリティ脅威から保護します。(Gurjeet Singh、Tom)
     </P
><P
>この変更により不変インデックス関数がスーパーユーザのセッションを破壊できることを防ぎます。(CVE-2009-4136)
     </P
></LI
><LI
><P
>ヌルバイトが埋め込まれたコモンネーム（CN）フィールドをもつSSL証明書を拒絶します。(Magnus)
     </P
><P
>これは、SSL検証においてサーバまたはクライアント名に対する証明書が不正に一致しないようにします。(CVE-2009-4034)
     </P
></LI
><LI
><P
>ハッシュインデックス破損を修正しました。 (Tom)
     </P
><P
>8.4では、ハッシュインデックスはハッシュ値でソートして項目を保持するように変更されましたが、順序を保持するためにバケット分割および圧縮処理の更新に失敗します。
このためこうした操作を行うアプリケーションは、永続的なインデックスの破損をもたらす可能性がありました。
これをうまく扱うためには、更新をインストールした後にハッシュインデックスすべてを<TT
CLASS="LITERAL"
>REINDEX</TT
>することを推奨します。
     </P
></LI
><LI
><P
>バックエンド起動時のキャッシュ初期化の間でクラッシュする可能性を修正しました。(Tom)
     </P
></LI
><LI
><P
>空のシソーラス辞書におけるクラッシュを防止しました。(Tom)
     </P
></LI
><LI
><P
>安全ではない時点での<TT
CLASS="LITERAL"
>VACUUM</TT
>を中断するシグナルを防止します。 (Alvaro)
     </P
><P
>この修正により、<TT
CLASS="LITERAL"
>VACUUM FULL</TT
>がすでにタプルの移動をコミットした後にキャンセルされた場合のパニックや、通常の<TT
CLASS="LITERAL"
>VACUUM</TT
>がテーブルを切り詰めた後に割り込みを受けた場合の一時的なエラーを防止します。
     </P
></LI
><LI
><P
>ハッシュテーブルサイズの計算における整数オーバーフローによるクラッシュの可能性を修正しました。(Tom)
     </P
><P
>これは、ハッシュ結合の結果のプランナの推定サイズが極端に大きい場合に発生することがありました。
     </P
></LI
><LI
><P
>内部的な依存関係をもつオブジェクトに対する <TT
CLASS="LITERAL"
>DROP</TT
>が試行された場合のクラッシュを修正しました。(Tom)
     </P
></LI
><LI
><P
><TT
CLASS="TYPE"
>inet</TT
>/<TT
CLASS="TYPE"
>cidr</TT
>の比較における非常にまれなクラッシュを修正しました。 (Chris Mikkelson)
     </P
></LI
><LI
><P
>準備されたトランザクションで保持されるタプルレベルの共有ロックを確実に無視しないようにしました。 (Heikki)
     </P
></LI
><LI
><P
>副トランザクション内でアクセスされるカーソルで使用される一時ファイルの早すぎる削除を修正しました。 (Heikki)
     </P
></LI
><LI
><P
>新しいCSVログファイルに変更する時のsysloggerプロセスのメモリリークを修正しました。(Tom)
     </P
></LI
><LI
><P
><TT
CLASS="FILENAME"
>pg_hba.conf</TT
>の再解析時のpostmasterのメモリリークを修正しました。(Tom)
     </P
></LI
><LI
><P
>Windowsにおける権限ダウングレードロジックを修正しました。(Jesse Morris)
     </P
><P
>これは、Windowsにおいて<SPAN
CLASS="QUOTE"
>"could not locate matching postgres executable"</SPAN
>といった誤解を招くエラーメッセージでよくデータベースの起動が失敗する状況の一部を修正します。

     </P
></LI
><LI
><P
>主問い合わせにおける<TT
CLASS="LITERAL"
>FOR UPDATE/SHARE</TT
>が <TT
CLASS="LITERAL"
>WITH</TT
>問い合わせに伝搬されないようにしました。(Tom)
     </P
><P
>たとえば
</P><PRE
CLASS="PROGRAMLISTING"
>WITH w AS (SELECT * FROM foo) SELECT * FROM w, bar ... FOR UPDATE</PRE
><P>
では、<TT
CLASS="LITERAL"
>FOR UPDATE</TT
>は<TT
CLASS="LITERAL"
>bar</TT
>に影響し、 <TT
CLASS="LITERAL"
>foo</TT
>には影響しなくなります。
これは、以前の8.4の動作より有用かつ一貫性があります。
以前は<TT
CLASS="LITERAL"
>FOR UPDATE</TT
>を<TT
CLASS="LITERAL"
>WITH</TT
>まで伝搬させようとし、常に雑多な実装上の制限により失敗していました。
また、<TT
CLASS="LITERAL"
>WITH</TT
>問い合わせは主問い合わせと独立して実行されるという設計規則にも従います。
     </P
></LI
><LI
><P
>そのすぐ内側に別の<TT
CLASS="LITERAL"
>WITH RECURSIVE</TT
>を持つ<TT
CLASS="LITERAL"
>WITH RECURSIVE</TT
>問い合わせの不具合を修正しました。 (Tom)
     </P
></LI
><LI
><P
>ハッシュインデックスにおける同時実行性に関する不具合を修正しました。(Tom)
     </P
><P
>同時実行の挿入によりインデックス走査が一時的に間違った結果を報告することがありました。
     </P
></LI
><LI
><P
>GiSTインデックスページ分割において、分割がインデックスの最初の列以外に依存する場合の不正なロジックを修正しました。(Paul Ramsey)
     </P
></LI
><LI
><P
><TT
CLASS="LITERAL"
>fastupdate</TT
>が有効な場合、複数列に対するGINインデックスの検索結果が不正となる点を修正しました。(Teodor)
     </P
></LI
><LI
><P
>GINインデックスにおけるWAL項目の生成における不具合を修正しました。(Tom)
     </P
><P
>これらの不具合は、 <TT
CLASS="VARNAME"
>full_page_writes</TT
>が有効な場合は現れることはありませんが、無効にした場合、次のチェックポイント以前にクラッシュが起きた場合、WAL再生は確実に失敗しました。
     </P
></LI
><LI
><P
>チェックポイントの最後で古いWALファイルの回収や削除が失敗した場合にエラーを出力しません。(Heikki)
     </P
><P
>致命的ではないものと扱い、チェックポイントを完了させることができるようにする方が優れています。
将来のチェックポイントでは削除を再試行します。
こうした問題は通常の操作では想定されませんが、うまく設計されていないWindowsのアンチウィルスソフトウェアやバックアップソフトウェアにより現れることがあります。
     </P
></LI
><LI
><P
>WindowsにおいてWALファイルが繰り返しアーカイブされないようにしました。 (Heikki)
     </P
><P
>別の症状として、一部の他のプロセスが不要となったファイルの削除に干渉する場合にも発生します。
     </P
></LI
><LI
><P
>PAMパスワード処理をより堅牢に修正しました。(Tom)
     </P
><P
>以前のコードでは、Linuxの<TT
CLASS="LITERAL"
>pam_krb5</TT
> PAMモジュールとドメインコントローラとしてのMicrosoft Active Directoryを組み合わせると失敗することが知られていました。
PAMスタックに渡される引数に関する正当ではない仮定を作成することであるため、どこかで問題になるかもしれません。
     </P
></LI
><LI
><P
>GSSAPIおよびSSPI認証方式における認証トークン（Kerberosチケット）の最大サイズを上げました。(Ian Turner)
     </P
><P
>以前の2000バイトという制限はUnix Kerberosの実装では十分でしたが、Windowsドメインコントローラで発行されるチケットではより大きくなることがあります。
     </P
></LI
><LI
><P
>ドメインが配列型を管理する場合、ドメイン制約が<TT
CLASS="LITERAL"
>ARRAY[...]::domain</TT
>のような式として確実に強制されるようにしました。 (Heikki)
     </P
></LI
><LI
><P
>複合型の列を外部キーとして含む一部の場合における外部キーのロジックを修正しました。 (Tom)
     </P
></LI
><LI
><P
>カーソルのスナップショットが生成後、確実に変更されないようにしました。(Alvaro)
     </P
><P
>これは、同じトランザクション内で後の操作が、そのカーソルが返すものと想定するデータを変更する場合、カーソルが間違った結果をもたらすようになります。
     </P
></LI
><LI
><P
><TT
CLASS="LITERAL"
>CREATE TABLE</TT
>が別の継承する親テーブル由来のデフォルト式を適切にマージするように修正しました。(Tom)
     </P
><P
>これは動作していましたが、8.4では壊れていました。
     </P
></LI
><LI
><P
>シーケンスのアクセス統計情報の収集を再度有効にしました。 (Akira Kurosawa)
     </P
><P
>これは動作していましたが、8.3では壊れていました。
     </P
></LI
><LI
><P
><TT
CLASS="LITERAL"
>CREATE OR REPLACE FUNCTION</TT
>における所有権限の依存関係の処理を修正しました。(Tom)
     </P
></LI
><LI
><P
><TT
CLASS="LITERAL"
>WHERE</TT
> <TT
CLASS="REPLACEABLE"
><I
>x</I
></TT
>=<TT
CLASS="REPLACEABLE"
><I
>x</I
></TT
>条件の不正な処理を修正しました。(Tom)
     </P
><P
>一部の場合、これらは冗長なものとして無視されることがありましたが、そうではありません。
&mdash; これらは<TT
CLASS="REPLACEABLE"
><I
>x</I
></TT
> <TT
CLASS="LITERAL"
>IS NOT NULL</TT
>と等価です。
     </P
></LI
><LI
><P
>テキスト等価性に関する揮発式においてハッシュ集約を使用して<TT
CLASS="LITERAL"
>DISTINCT</TT
>を実装する場合における不正な計画生成を修正しました。(Tom)
     </P
></LI
><LI
><P
>揮発<TT
CLASS="LITERAL"
>SELECT DISTINCT ON</TT
>式におけるアサート失敗を修正しました。(Tom)
     </P
></LI
><LI
><P
>空の<TT
CLASS="TYPE"
>tsvector</TT
>値に対して<CODE
CLASS="FUNCTION"
>ts_stat()</CODE
>が失敗しないように改修しました。 (Tom)
     </P
></LI
><LI
><P
>全文検索パーサがXML属性内のアンダースコアを受け付けるようにしました。(Peter)
     </P
></LI
><LI
><P
><TT
CLASS="TYPE"
>xml</TT
>バイナリ入力における符号化方式の扱いを修正しました。(Heikki)
     </P
><P
>XMLヘッダにて符号化方式の指定がない場合、デフォルトでUTF-8を仮定するようになります。
以前の扱いには一貫性がありませんでした。
     </P
></LI
><LI
><P
><TT
CLASS="LITERAL"
>plperlu</TT
>から<TT
CLASS="LITERAL"
>plperl</TT
>の呼び出し、またはその逆における不具合を修正しました。(Tom)
     </P
><P
>内部の関数からのエラー終了が、外側の関数用のPerlインタプリタを正しく再選択できずにクラッシュをもたらす可能性がありました。
     </P
></LI
><LI
><P
>PL/Perl関数が再定義された時のセッション有効期間のメモリリークを修正しました。(Tom)
     </P
></LI
><LI
><P
>集合を返すPL/Perl関数により返される場合Perl配列が適切に<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>配列に返還されることを確実にしました。(Andrew Dunstan、Abhijit Menon-Sen)
     </P
><P
>集合以外を返す関数ではすでに正しく動作しました。
     </P
></LI
><LI
><P
>PL/Pythonの例外処理におけるまれなクラッシュを修正しました。(Peter)
     </P
></LI
><LI
><P
><TT
CLASS="LITERAL"
>DECLARE CURSOR</TT
>文におけるコメントに関する<SPAN
CLASS="APPLICATION"
>ecpg</SPAN
>問題を修正しました。(Michael)
     </P
></LI
><LI
><P
><SPAN
CLASS="APPLICATION"
>ecpg</SPAN
>が最近追加されたキーワードを予約語と扱わない問題を修正しました。(Tom)
     </P
><P
>これは、<TT
CLASS="LITERAL"
>CALLED</TT
>、<TT
CLASS="LITERAL"
>CATALOG</TT
>、<TT
CLASS="LITERAL"
>DEFINER</TT
>、<TT
CLASS="LITERAL"
>ENUM</TT
>、<TT
CLASS="LITERAL"
>FOLLOWING</TT
>、<TT
CLASS="LITERAL"
>INVOKER</TT
>、<TT
CLASS="LITERAL"
>OPTIONS</TT
>、<TT
CLASS="LITERAL"
>PARTITION</TT
>、<TT
CLASS="LITERAL"
>PRECEDING</TT
>、<TT
CLASS="LITERAL"
>RANGE</TT
>、<TT
CLASS="LITERAL"
>SECURITY</TT
>、<TT
CLASS="LITERAL"
>SERVER</TT
>、<TT
CLASS="LITERAL"
>UNBOUNDED</TT
>、<TT
CLASS="LITERAL"
>WRAPPER</TT
>キーワードに影響します。
     </P
></LI
><LI
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>の<TT
CLASS="LITERAL"
>\df</TT
>関数名パラメータにおいて正規表現特殊文字を再度許します。(Tom)
     </P
></LI
><LI
><P
><TT
CLASS="FILENAME"
>contrib/fuzzystrmatch</TT
>において、デフォルト以外のコストによる<CODE
CLASS="FUNCTION"
>levenshtein</CODE
>距離の計算を正しくしました。(Marcin Mank)
     </P
></LI
><LI
><P
><TT
CLASS="FILENAME"
>contrib/pg_standby</TT
>にて、Windowsのシグナルを使用したフェイルオーバの通知を無効にしました。(Fujii Masao)
     </P
><P
>WindowsではUnixのようなシグナルを持ちませんので、これはまったく役に立っていませんでした。
さらに最近の変更により実際にクラッシュしてしまいます。
     </P
></LI
><LI
><P
><TT
CLASS="LITERAL"
>FREEZE</TT
>および<TT
CLASS="LITERAL"
>VERBOSE</TT
>オプションを<TT
CLASS="FILENAME"
>contrib/vacuumdb</TT
>が生成する<TT
CLASS="LITERAL"
>VACUUM</TT
>コマンドの右側につけました。(Heikki)
     </P
></LI
><LI
><P
><TT
CLASS="FILENAME"
>contrib/dblink</TT
>がエラーになった場合の接続が漏えいする可能性を修正しました。(Tatsuhito Kasahara)
     </P
></LI
><LI
><P
><SPAN
CLASS="APPLICATION"
>psql</SPAN
>のflexモジュールが正しいシステムヘッダファイルを使用してコンパイルされることを確実にしました。(Tom)
     </P
><P
>これは、<TT
CLASS="LITERAL"
>--enable-largefile</TT
>が生成されたコード内に非互換の変更を引き起こすプラットフォームにおける構築失敗を修正します。
     </P
></LI
><LI
><P
>今後のバージョンのlibpqとの互換性を高めるために、postmasterが接続要求パケットにおける<TT
CLASS="LITERAL"
>application_name</TT
>パラメータをすべて無視するようにしました。(Tom)
     </P
></LI
><LI
><P
>最新の現実に合うように時間帯省略形ファイルを更新しました。(Joachim Wieland)
     </P
><P
>デフォルト時間帯群に<TT
CLASS="LITERAL"
>IDT</TT
>の追加が含まれます。
     </P
></LI
><LI
><P
>タイムゾーンデータファイルを<SPAN
CLASS="APPLICATION"
>tzdata</SPAN
> release 2009sまで更新しました。
南極、アルゼンチン、バングラデシュ、フィジー、ノヴォクズネツク、パキスタン、パレスチナ、サモア、シリアにおける夏時間規則の変更、および香港に関する歴史的な修正が含まれます。
     </P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="release-8-4-3.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>ホーム</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="release-8-4-1.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>リリース8.4.3</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="release.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>リリース8.4.1</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>