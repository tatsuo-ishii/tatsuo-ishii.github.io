<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 21819] pg_attribute が壊れた？ -->
<!--X-From: Takehiro Kuorai <kourai@seasideone.com> -->
<!--X-Date: Thu, 14 Jun 2001 17:10:47 +0900 -->
<!--X-Message-Id: 20010614140901.99D5.KOURAI@seasideone.com -->
<!--X-ContentType: text/plain -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 21819] pg_attribute が壊れた？ </TITLE>
<LINK REV="made" HREF="mailto:kourai@seasideone.com">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00197.html">Date Prev</A>][<A HREF="msg00199.html">Date Next</A>][<A HREF="msg00210.html">Thread Prev</A>][<A HREF="msg00194.html">Thread Next</A>][<A HREF="index.html#00198">Date Index</A>][<A HREF="threads.html#00198">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 21819] pg_attribute が壊れた？</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: Takehiro Kuorai &lt;<A HREF="mailto:kourai@seasideone.com">kourai@seasideone.com</A>&gt;</LI>
<LI><em>Date</em>: Thu, 14 Jun 2001 17:10:47 +0900</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
お初にお目にかかります。向来と申します。

CGIから、テーブルのデータに対して何かしらの処理をさせようと、
Pgモジュールを利用してプログラムを作りました。

ところが、Apacheからアクセスすると、単独で動かしている場合は
問題ないのですが、同時に2つ以上の画面から動かすと、
処理がうまくいかず、思うような結果が返ってきません。

そこで、一方はターミナルから、psqlコマンドを利用して、
もう一方はブラウザからアクセスして調べたところ、
以下のようなエラーメッセージを出していることが分かりました。

このメッセージを元にいろいろ探しましたが、根本的な解決に至る
方法がわかりませんでした。

（環境 PostgreSQL6.5.3＋Apache1.3.12）
NOTICE:  Message from PostgreSQL backend:
        The Postmaster has informed me that some other backend died abnormally and possibly corrupted shared memory.
        I have rolled back the current transaction and am going to terminate your database system connection and exit.
        Please reconnect to the database system and repeat your query.
pqReadData() -- backend closed the channel unexpectedly.
        This probably means the backend terminated abnormally
        before or while processing the request.
We have lost the connection to the backend, so further processing is impossible.
  Terminating.


加えて、一時テーブルとして利用しているはずのものが
残っていたので、削除しようとすると以下のようなメッセージを
吐いて削除できません。

user1=&gt; drop table tmptbl;
ERROR:  cannot read block 557 of pg_attribute

これはもしや、pg_attributeが壊れたのでしょうか。
（select * from pg_attribute も同様のエラーになります。）

上記について、根本的な解決が図れるようなアドバイスを
お願いします。


向来武浩
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00197.html">[pgsql-jp 21818] Re: JDBC におけるトランザクションモード</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00199.html">[pgsql-jp 21820] パスワード認証DBの自動バックアップについて</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00210.html">[pgsql-jp 21831] Re: パスワード認証DBの自動バックアップについて</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00194.html">[pgsql-jp 21815] Re: syslog をPosgreSQLで記録- 結果報告</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00198"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00198"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
