<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 11651] Re: pgbench -->
<!--X-From: Odake <takay@quartz.ocn.ne.jp> -->
<!--X-Date: Mon, 08 Nov 1999 12:12:30 +0900 -->
<!--X-Message-Id: 38263F9EAA.31A2TAKAY@quartz.ocn.ne.jp -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 199911070249.BEF73653.LHBJFN@mikage.to -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 11651] Re: pgbench </TITLE>
<LINK REV="made" HREF="mailto:takay@quartz.ocn.ne.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00222.html">Date Prev</A>][<A HREF="msg00224.html">Date Next</A>][<A HREF="msg00212.html">Thread Prev</A>][<A HREF="msg00227.html">Thread Next</A>][<A HREF="index.html#00223">Date Index</A>][<A HREF="threads.html#00223">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 11651] Re: pgbench</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: Odake &lt;<A HREF="mailto:takay@quartz.ocn.ne.jp">takay@quartz.ocn.ne.jp</A>&gt;</LI>
<LI><em>Date</em>: Mon, 08 Nov 1999 12:12:30 +0900</LI>
<LI><em>References</em>: &lt;<A HREF="msg00212.html">199911070249.BEF73653.LHBJFN@mikage.to</A>&gt;</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
こんにちは、小竹です。pgbench結果です。

cpu Pentium2 233MHz
mem 96M
HD IDE13G
FreeBSD 3.3 REREASEで、PostgreSQL 6.5.2　です。

◎postmaster -S -i -B 256 -D/db/data -o '-S 1024 -F'

$ ./pgbench bench
tps = 44.201630(including connections establishing)
tps = 51.387726(excluding connections establishing)

$ ./pgbench -c 4 -t 100 bench
tps = 46.331179(including connections establishing)
tps = 46.819948(excluding connections establishing)


◎postmaster -S -i -B 256 -D/db/data -o '-S 1024'

$ ./pgbench bench
tps = 10.354132(including connections establishing)
tps = 10.779963(excluding connections establishing)

$ ./pgbench -c 4 -t 100 bench
tps = 10.110797(including connections establishing)
tps = 10.138127(excluding connections establishing)


-Bオプションなしでもやってみました。
◎postmaster -S -i -D/db/data -o '-S 1024 -F'

$ pgbench-1.1/pgbench bench
tps = 48.544161(including connections establishing)
tps = 56.964152(excluding connections establishing)

$ pgbench-1.1/pgbench -c 4 -t 100 bench
tps = 49.485340(including connections establishing)
tps = 50.035031(excluding connections establishing)


◎postmaster -S -i -D/db/data -o '-S 1024'

$ pgbench-1.1/pgbench bench
tps = 10.187875(including connections establishing)
tps = 10.642136(excluding connections establishing)

$ pgbench-1.1/pgbench -c 4 -t 100 bench
tps = 9.963329(including connections establishing)
tps = 9.987468(excluding connections establishing)


ただ、-Bオプションなしの場合、５回のうち４回以下のようにエラー
が出てしまいました。何がいけないんだろう。

bash-2.03$ pgbench-1.1/pgbench -c 4 -t 100 bench
vacuuming and deleting history...end.
Client 0 aborted in state 3. Probably the backend died while processing.
NOTICE:  Message from PostgreSQL backend:
        The Postmaster has informed me that some other backend died abnormally and possibly corrupted shared memory.
        I have rolled back the current transaction and am going to terminate your database system connection and exit.
        Please reconnect to the database system and repeat your query.
Client 1 aborted in state 3. Probably the backend died while processing.
NOTICE:  Message from PostgreSQL backend:
        The Postmaster has informed me that some other backend died abnormally and possibly corrupted shared memory.
        I have rolled back the current transaction and am going to terminate your database system connection and exit.
        Please reconnect to the database system and repeat your query.
Client 2 aborted in state 3. Probably the backend died while processing.
NOTICE:  Message from PostgreSQL backend:
        The Postmaster has informed me that some other backend died abnormally and possibly corrupted shared memory.
        I have rolled back the current transaction and am going to terminate your database system connection and exit.
        Please reconnect to the database system and repeat your query.
Client 3: PQsock failed

---
takay@quartz.ocn.ne.jp  おだけでしたξρ(^^
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00227" HREF="msg00227.html">[pgsql-jp 11655] Re: pgbench</A></STRONG>
<UL><LI><EM>From:</EM> Odake &lt;takay@quartz.ocn.ne.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00212" HREF="msg00212.html">[pgsql-jp 11639] pgbench</A></STRONG>
<UL><LI><EM>From:</EM> "Mikage Sawatari (Taku Sano)" &lt;mikage@mikage.to&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00222.html">[pgsql-jp 11650] Re:SPI_modifytuple()　について</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00224.html">[pgsql-jp 11652] Re: EUCでのデータ転送について。。</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00212.html">[pgsql-jp 11639] pgbench</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00227.html">[pgsql-jp 11655] Re: pgbench</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00223"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00223"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
