<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 9274] Re: can't exec one more postmaster with "semgetfailed"Error -->
<!--X-From: takayasu@wendy.perfect&#45;liberty.or.jp -->
<!--X-Date: Tue, 6 Jul 99 19:31:30 JST -->
<!--X-Message-Id: 9907061031.AA29224@wendy.perfect&#45;liberty.or.jp -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 199907060715.QAA01126@ganymede.sunny.co.jp -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 9274] Re: can't exec one more postmaster with "semgetfailed"Er </TITLE>
<LINK REV="made" HREF="mailto:takayasu@wendy.perfect-liberty.or.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00073.html">Date Prev</A>][<A HREF="msg00080.html">Date Next</A>][<A HREF="msg00076.html">Thread Prev</A>][<A HREF="msg00064.html">Thread Next</A>][<A HREF="index.html#00078">Date Index</A>][<A HREF="threads.html#00078">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 9274] Re: can't exec one more postmaster with "semgetfailed"Error</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: <A HREF="mailto:takayasu@wendy.perfect-liberty.or.jp">takayasu@wendy.perfect-liberty.or.jp</A></LI>
<LI><em>Date</em>: Tue, 6 Jul 99 19:31:30 JST</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
岩梨です。
#２つまとめて reply しています。

谷山さま、井上さま、お二人に教えていただけき、すごく勉強になりました。
ありがとうございました。

谷山さん:
&gt;reconfig時にsem.h、shm.hをいじるというのは正道ではないでしょう。これら
&gt;のヘッダを見ればわかりますが、#ifndef SEMMNI…みたいに書かれていますね？

はい。その通りです。grep で、見つけた(且つ他に見つけられなかった)ので、
モロ書き込みしながら、あやふやな自分でありました。
#一昨日などは、#ifndef,#endif を消してみたりもしてました。;-)


&gt;config file MYHOSTに、
&gt;
&gt;options         SEMMAP=31 (数字は必要に応じて値を調整)
&gt;options         SEMMNI=11
&gt;options         SEMMNS=61 
&gt;options         SEMMNU=31
&gt;options         SEMMSL=61
&gt;options         SEMOPM=101
&gt;options         SEMUME=11
&gt;
&gt;を書くことで設定するのです。options行を書かなければ、sys/sem.hで定義さ
&gt;れている値がデフォルト値として使われます。(つまり、sem.hよりconfig
&gt;fileのoptions行の方が優先)

ああぁ、納得です。(今ごろ納得しててはイケナイのかもしれませんが)
そうなんですねぇ。さっそく、やり直しをしてみました。
きれいに、設定できているのを確認しましたです。
おかげさまで、たいへん、すっきりしました。


&gt;余談: 複数のpostmasterを起動した時に起こり得る問題
&gt;
&gt;1.ファイルのぶち壊し合い
(ちょっと省略)
&gt;2.shm,semのkeyの衝突

示唆に富んだお話、今後心してとりくみたいと思います。




JST時間1999年07月06日(火)16時37分06秒頃、Inoue@tpf.co.jpさんは書きました。

井上さん:
&gt;initdbした単位毎に1本ずつpostmasterを起動するということであれば
&gt;全く問題はないと思います。

ありがとうございます。このポイントを守れば、安心して使える、ということですね。


&gt;同一のinitdb単位に複数のpostmasterを起動すると、親postmasterが
&gt;異なるバックエンド同士は全く無関係になってしまいますから、データ
&gt;ベースとしての意味がなくなってしまうのではないでしょうか。

はい、よくわかりました。慎重に使い分けるよう肝に命じておきます。
とても丁寧に教えていただきましてありがとうございました。
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00076" HREF="msg00076.html">[pgsql-jp 9272] Re: can't exec one more postmaster with "semgetfailed"Error</A></STRONG>
<UL><LI><EM>From:</EM> TANIYAMA Hideki &lt;yoko@sunny.co.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00073.html">[pgsql-jp 9269] Re: can't exec one more postmaster with "semget failed" Error</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00080.html">[pgsql-jp 9276] はじめまして</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00076.html">[pgsql-jp 9272] Re: can't exec one more postmaster with "semgetfailed"Error</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00064.html">[pgsql-jp 9260] RE: can't exec one more postmaster with "semget failed" Error</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00078"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00078"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
