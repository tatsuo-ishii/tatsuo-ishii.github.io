<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp: 26378] PL/pgSQL¤Î¼ÁÌä¤Ç¤¹¡£¡Ö'¡×¤Ç¤¯¤¯¤Ã¤¿Ãæ¤Ç¤ÎÊÑ¿ôÅ¸³«¤Ë¤Ä¤¤¤Æ¡£ -->
<!--X-From: Takeshi Yoshida <yoshida@tkm.att.ne.jp> -->
<!--X-Date: Sat, 15 Jun 2002 00:04:34 +0900 -->
<!--X-Message-Id: 20020614235849.ED7C.YOSHIDA@tkm.att.ne.jp -->
<!--X-ContentType: text/plain -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp: 26378] PL/pgSQL¤Î¼ÁÌä¤Ç¤¹¡£¡Ö'¡×¤Ç¤¯¤¯¤Ã¤¿Ãæ¤Ç¤ÎÊÑ¿ôÅ¸³«¤Ë¤Ä¤ </TITLE>
<LINK REV="made" HREF="mailto:yoshida@tkm.att.ne.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00156.html">Date Prev</A>][<A HREF="msg00158.html">Date Next</A>][<A HREF="msg00163.html">Thread Prev</A>][<A HREF="msg00158.html">Thread Next</A>][<A HREF="index.html#00157">Date Index</A>][<A HREF="threads.html#00157">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp: 26378] PL/pgSQL¤Î¼ÁÌä¤Ç¤¹¡£¡Ö'¡×¤Ç¤¯¤¯¤Ã¤¿Ãæ¤Ç¤ÎÊÑ¿ôÅ¸³«¤Ë¤Ä¤¤¤Æ¡£</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: Takeshi Yoshida &lt;<A HREF="mailto:yoshida@tkm.att.ne.jp">yoshida@tkm.att.ne.jp</A>&gt;</LI>
<LI><em>Date</em>: Sat, 15 Jun 2002 00:04:34 +0900</LI>
<LI><em>Delivered-To</em>: pgsql-jp@ml.postgresql.jp</LI>
<LI><em>List-Archive</em>: &lt;http://ml.postgresql.jp/pipermail/pgsql-jp/&gt;</LI>
<LI><em>List-Help</em>: &lt;mailto:pgsql-jp-request@ml.postgresql.jp?subject=help&gt;</LI>
<LI><em>List-Id</em>: &lt;pgsql-jp.ml.postgresql.jp&gt;</LI>
<LI><em>List-Post</em>: &lt;mailto:pgsql-jp@ml.postgresql.jp&gt;</LI>
<LI><em>List-Subscribe</em>: &lt;http://ml.postgresql.jp/mailman/listinfo/pgsql-jp&gt;,&lt;mailto:pgsql-jp-request@ml.postgresql.jp?subject=subscribe&gt;</LI>
<LI><em>List-Unsubscribe</em>: &lt;http://ml.postgresql.jp/mailman/listinfo/pgsql-jp&gt;,&lt;mailto:pgsql-jp-request@ml.postgresql.jp?subject=unsubscribe&gt;</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
¤¤¤Ä¤âÊÙ¶¯¤µ¤»¤ÆÄº¤¤¤Æ¤ª¤ê¤Þ¤¹¡£µÈÅÄ¤È¿½¤·¤Þ¤¹¡£


¥·¥ó¥°¥ë¥¯¥©¡¼¥Æ¡¼¥·¥ç¥ó¤Ç¤¯¤¯¤Ã¤¿Ãæ¤Ë¡¢ÊÑ¿ô¤òÅ¸³«¤Ç¤­¤º¤ËÇº¤ó¤Ç
¤ª¤ê¤Þ¤¹¡£

PL/pgSQL¤ÎÆâÉô¤Ç¡Ö'¡×¤ò»ÈÍÑ¤¹¤ë»þ¤Ï¡Ö''¡×¤Ç¤¯¤¯¤ë¡ÊËô¤Ï¡Ö\'¡×¡Ë¤È
¥ª¥ó¥é¥¤¥ó¥Þ¥Ë¥å¥¢¥ë¤Ë½ñ¤¤¤Æ¤¢¤ê¤Þ¤¹¤¬¡¢¡Ö'¡×¤ò»ÈÍÑ¤¹¤ë´Ø¿ôÆâÉô¤Ë
ÊÑ¿ô¤òÅ¸³«¤·¤¿¤¤¾ì¹ç¡¢ÊÑ¿ôÌ¾¤¬¤½¤Î¤Þ¤ÞÊ¸»úÎó¤À¤ÈÇ§¼±¤µ¤ì¤Æ´Ø¿ô¤Ë
ÅÏ¤Ã¤Æ¤·¤Þ¤Ã¤Æ¥¨¥é¡¼¤Ë¤Ê¤Ã¤Æ¤·¤Þ¤¤¤Þ¤¹¡£
¡ÊÅö¤¿¤êÁ°¤À¤È¤¤¤¨¤ÐÅö¤¿¤êÁ°¤Ç¤¹¤±¤É¡¦¡¦¡¦¡Ë

Îã¤¨¤Ð°Ê²¼¡ÊËÜÊ¸ºÇ²¼¡Ë¤Î¤è¤¦¤Ê¥¹¥È¥¢¥É¥×¥í¥·¡¼¥¸¥ã¤Î¾ì¹ç¡¢°ú¿ô¡Êint¡Ë
¤ÇÅÏ¤·¤¿¿ôÃÍ¤ò24¤È¤·¤¿¾ì¹ç¡¢

	(CURRENT_TIMESTAMP - (' 24 HOUR '::INTERVAL))

¤È¤·¤¿¤¤¤Î¤Ë¡¢

	(CURRENT_TIMESTAMP - (' time HOUR '::INTERVAL))

¤È¤Ê¤Ã¤Æ¤·¤Þ¤¤¡¢

	ERROR:  Bad interval external representation ' time HOUR '

¤È¤¤¤¦¥¨¥é¡¼¤¬½ÐÎÏ¤µ¤ì¤Æ¤·¤Þ¤¤¤Þ¤¹¡£


¤É¤Ê¤¿¤«ÊÑ¿ô¤ÎÅ¸³«ÊýË¡¤ò¤´¶µ¼ø²¼¤µ¤¤¡£

µ¹¤·¤¯¤ª´ê¤¤Ã×¤·¤Þ¤¹¡£


////////////////////////////////////////////////////////////////

CREATE FUNCTION chk_regist(int, int) RETURNS int AS '
    DECLARE
        id alias for $1;
        time alias for $2;
        buff_regist  regist_info%ROWTYPE;

    BEGIN

        SELECT INTO buff_regist * FROM regist_info
          WHERE regist_id = id
          AND (CURRENT_TIMESTAMP - ('' time HOUR ''::INTERVAL)) &gt; regist_date;

        IF buff_regist.regist_id ISNULL THEN
            return 0;
        ELSE
            return 1;
        END IF;

    END;
' LANGUAGE 'plpgsql';

////////////////////////////////////////////////////////////////


-- 
Takeshi Yoshida &lt;yoshida@tkm.att.ne.jp&gt;

-- 
Takeshi Yoshida &lt;yoshida@tkm.att.ne.jp&gt;

</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00167" HREF="msg00167.html">[pgsql-jp: 26388] Re: PL/pgSQL¤Î¼ÁÌä¤Ç¤¹¡£¡Ö '¡×¤Ç¤¯¤¯¤Ã¤¿Ãæ¤Ç¤ÎÊÑ¿ôÅ¸³«¤Ë¤Ä¤¤¤Æ¡£</A></STRONG>
<UL><LI><EM>From:</EM> Takeshi Yoshida &lt;yoshida@tkm.att.ne.jp&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00158" HREF="msg00158.html">[pgsql-jp: 26379] Re: PL/pgSQL¤Î¼ÁÌä¤Ç¤¹¡£¡Ö'¡×¤Ç¤¯¤¯¤Ã¤¿Ãæ¤Ç¤ÎÊÑ¿ôÅ¸³«¤Ë¤Ä¤¤¤Æ¡£</A></STRONG>
<UL><LI><EM>From:</EM> Mashiki &lt;mashiki@yanah.com&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00156.html">[pgsql-jp: 26377] Re: ÂçÎÌ¥Ç¡¼¥¿¤Î¹¹¿·</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00158.html">[pgsql-jp: 26379] Re: PL/pgSQL¤Î¼ÁÌä¤Ç¤¹¡£¡Ö'¡×¤Ç¤¯¤¯¤Ã¤¿Ãæ¤Ç¤ÎÊÑ¿ôÅ¸³«¤Ë¤Ä¤¤¤Æ¡£</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00163.html">[pgsql-jp: 26384] Re: ¥Ó¥Ã¥È±é»»»Ò¤Ç¤ÎÇÛÎó¤Ë¤Ä¤¤¤Æ</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00158.html">[pgsql-jp: 26379] Re: PL/pgSQL¤Î¼ÁÌä¤Ç¤¹¡£¡Ö'¡×¤Ç¤¯¤¯¤Ã¤¿Ãæ¤Ç¤ÎÊÑ¿ôÅ¸³«¤Ë¤Ä¤¤¤Æ¡£</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00157"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00157"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
