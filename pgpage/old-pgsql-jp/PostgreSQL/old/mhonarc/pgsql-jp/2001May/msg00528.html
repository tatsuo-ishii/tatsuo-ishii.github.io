<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 21484] Re: Pg.pm のチョウ訳あります(was: coelacanth book thirded	ition) -->
<!--X-From: Tatsuo Ishii <t&#45;ishii@sra.co.jp> -->
<!--X-Date: Fri, 25 May 2001 10:02:39 +0900 -->
<!--X-Message-Id: 20010525100239M.t&#45;ishii@sra.co.jp -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 07f701c0e44b$e3f55480$0a00a8c0@nifty.ne.jp -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 21484] Re: Pg.pm のチョウ訳あります(was: coelacanth book third </TITLE>
<LINK REV="made" HREF="mailto:t-ishii@sra.co.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00527.html">Date Prev</A>][<A HREF="msg00529.html">Date Next</A>][<A HREF="msg00521.html">Thread Prev</A>][<A HREF="msg00546.html">Thread Next</A>][<A HREF="index.html#00528">Date Index</A>][<A HREF="threads.html#00528">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 21484] Re: Pg.pm のチョウ訳あります(was: coelacanth book thirded	ition)</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: Tatsuo Ishii &lt;<A HREF="mailto:t-ishii@sra.co.jp">t-ishii@sra.co.jp</A>&gt;</LI>
<LI><em>Date</em>: Fri, 25 May 2001 10:02:39 +0900</LI>
<LI><em>References</em>: &lt;<A HREF="msg00521.html">07f701c0e44b$e3f55480$0a00a8c0@nifty.ne.jp</A>&gt;</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
石井です．

&gt; 川合孝典です。
&gt; 
&gt; &gt; 自分の日本語訳についてはDBIとDBD::Pgのバージョンアップに伴う
&gt; &gt; 見直しとPgの作成は、来月中旬にはやってしまうつもりでいますが。
&gt; &gt; #YARPC19101が終わるまでは気分的に落ち着けそうもなくって
&gt; と以前、書いていたんですが、とりあえずできちゃったし、
&gt; Edmund Merglさんから許可ももらったしというわけで、
&gt; Pg.pmのドキュメントを訳したものを公開しました。

おー，すばらしい!

&gt; Pgモジュール(pgsql-perl5 ver.1.90)
&gt; <A HREF="http://member.nifty.ne.jp/hippo2000/perltips/Pg.htm">http://member.nifty.ne.jp/hippo2000/perltips/Pg.htm</A>
&gt; 
&gt; ちなみにDBD::Pgのほうはこちら
&gt; DBD::Pg
&gt; <A HREF="http://member.nifty.ne.jp/hippo2000/perltips/DBD/pg.htm">http://member.nifty.ne.jp/hippo2000/perltips/DBD/pg.htm</A>

これ，本MLのページ，日本PostgreSQLユーザ会のページ，ついでにSRAのペー
ジ:-)からもリンクさせてもらっていいですか?

&gt; Pg.pmとDBD::Pgでは機能的な違いはないと思い込んでいたのですが、
&gt; Pg.pmだと非同期ができるんですね。やっぱりきちんとドキュメントを
&gt; 読まなくっちゃとあらためて反省しました。

そういうこともあるわけですね．ところで，ご存じかも知れませんが，DBD::Pg
のバグについて添付のようなメールが本家MLに流れてました．参考までに．

&gt; おかしな翻訳があるかと思います。ご指摘ほどよろしくお願いします。

社内のPerlな人に見てもらおうかな．

&gt; &gt; 確かにPostgreSQL+Perl だけでは本になりません．実際にはその周りを膨らま
&gt; &gt; せるのでしょうね．Perl の強みの一つは，膨大なライブラリ，そして Web 用
&gt; &gt; としてだけでなく，バッチ処理にも使えるところかな,という気がしてます．
&gt; &gt; さらに Perl/Gtk なら GUI も... というわけで，Perl なら DBもWebもバッチ
&gt; &gt; 処理もGUIも全部できます，というのを解説・実証する本を読んでみたい:-)
&gt; このようなものには遠く及びませんが、PostgreSQLの関連のネタにはなるかなと
&gt; 思います。
&gt; ＃しかし、これは「Perlクックブック」の強化版みたいな感じに
&gt; ＃なるんですかねぇ。こんなのあったら読んでみたいです(^^)。

これはもう川合さんが書くしか...:-)
--
Tatsuo Ishii
--------------------------------------------------------------------

Subject: Re: [INTERFACES] DBD::Pg or DBI breakage?
From: Oleg Bartunov &lt;oleg@sai.msu.su&gt;
To: Zachary Beane &lt;xach@xach.com&gt;
cc: &lt;pgsql-interfaces@postgresql.org&gt;
Date: Thu, 24 May 2001 19:54:11 +0300 (GMT)

Zach,

We just found a bug in DBD-PG 0.98 and sent bug report to Edmund.
You may try our patch:

	Regards,

		Oleg

&gt;From ivan@xray.sai.msu.ru Thu May 24 19:51:22 2001
Date: Thu, 24 May 2001 20:49:46 +0400 (MSD)
From: Ivan E. Panchenko &lt;ivan@xray.sai.msu.ru&gt;
To: Edmund Mergl &lt;e.mergl@bawue.de&gt;
Cc: Oleg Bartunov &lt;oleg@sai.msu.su&gt;
Subject: DBD-Pg-0.98 horrible segfault bug !!!


Dear Edmund,

There is a horrible bug in DBD-Pg introduced in the 0.98 version.
It can lead to a segmentation falut under some random circumstances,
namely, in the case of my applications.

This bug lives in pg_error() , dbdimp.c  near line 90 and consists of two
 ugly mistakes. Please see the patch below.

I would greatly appreciate the prompt  inclusion of this patch in the next
version.

Regards, Ivan


--- DBD-Pg-0.98/dbdimp.c	Wed Apr 25 15:29:06 2001
+++ DBD-Pg-0.98a/dbdimp.c	Thu May 24 20:12:52 2001
@@ -75,15 +75,16 @@
     char *err, *src, *dst;
     int  len  = strlen(error_msg);

-    err = (char *)malloc(strlen(error_msg + 1));
+    err = (char *)malloc(strlen(error_msg) + 1);
     if (!err) {
       return;
     }
     src = error_msg;
     dst = err;

+
     /* copy error message without trailing newlines */
-    while (*dst != '\0' &amp;&amp; *dst != '\n') {
+    while (*src != '\0' &amp;&amp; *src != '\n') {
         *dst++ = *src++;
     }
     *dst = '\0';

On Wed, 23 May 2001, Zachary Beane wrote:

&gt; I've been having trouble getting the proper value of $handle-&gt;errstr
&gt; or $DBI::errstr. For some reason, it's always giving the scalar 7 back
&gt; rather than an informative error message. Here's an script and output:
&gt;
&gt; --- foo.pl ---
&gt; #!/usr/bin/perl
&gt;
&gt; use DBI;
&gt; my $dbh = DBI-&gt;connect("dbi:Pg:dbname=template1", "xach", undef);
&gt;
&gt; my $sql = "bogus sql goes here";
&gt; my $sth = $dbh-&gt;prepare($sql);
&gt; $sth-&gt;execute() or die $sth-&gt;errstr;
&gt;
&gt; my ($result) = $sth-&gt;fetchrow_array();
&gt;
&gt; $sth-&gt;finish;
&gt;
&gt; print $result, "\n";
&gt; $dbh-&gt;disconnect();
&gt; --- end ---
&gt;
&gt; When run, it prints out this:
&gt;
&gt;    $ perl foo.pl
&gt;    DBD::Pg::st execute failed:  at foo.pl line 8.
&gt;    7 at foo.pl line 8.
&gt;    Database handle destroyed without explicit disconnect.
&gt;
&gt; Now, I'm not surprised at the "database handle destroyed..." part, but
&gt; I can't figure out why i'm getting "7 at foo.pl" and a blank message
&gt; in the execute failed string. Any ideas?
&gt;
&gt; Zach
&gt;
_____________________________________________________________
Oleg Bartunov, sci.researcher, hostmaster of AstroNet,
Sternberg Astronomical Institute, Moscow University (Russia)
Internet: oleg@sai.msu.su, <A HREF="http://www.sai.msu.su/~megera/">http://www.sai.msu.su/~megera/</A>
phone: +007(095)939-16-83, +007(095)939-23-83


---------------------------(end of broadcast)---------------------------
TIP 1: subscribe and unsubscribe commands go to majordomo@postgresql.org
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00546" HREF="msg00546.html">[pgsql-jp 21502] Re: Pg.pm のチョウ訳あります(was: coelacanth book thirded	ition)</A></STRONG>
<UL><LI><EM>From:</EM> "Kawai,Takanori" &lt;GCD00051@nifty.ne.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00521" HREF="msg00521.html">[pgsql-jp 21476] Pg.pm のチョウ訳あります(was: coelacanth book third edition)</A></STRONG>
<UL><LI><EM>From:</EM> "Kawai,Takanori" &lt;GCD00051@nifty.ne.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00527.html">[pgsql-jp 21483] RE: ODBC Driver 日本語版（2001/05/08版）</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00529.html">[pgsql-jp 21485] Re: シーケンスの最大値</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00521.html">[pgsql-jp 21476] Pg.pm のチョウ訳あります(was: coelacanth book third edition)</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00546.html">[pgsql-jp 21502] Re: Pg.pm のチョウ訳あります(was: coelacanth book thirded	ition)</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00528"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00528"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
