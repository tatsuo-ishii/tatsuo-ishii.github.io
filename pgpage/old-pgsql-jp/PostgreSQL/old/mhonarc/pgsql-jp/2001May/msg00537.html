<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 21493] SJIS のDBデータを一括EUC化したい -->
<!--X-From: Hiroshi Ishiura <issy@snu.ne.jp> -->
<!--X-Date: Fri, 25 May 2001 14:16:29 +0900 -->
<!--X-Message-Id: 20010525132535.5174.ISSY@snu.ne.jp -->
<!--X-ContentType: text/plain -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 21493] SJIS のDBデータを一括EUC化したい </TITLE>
<LINK REV="made" HREF="mailto:issy@snu.ne.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00536.html">Date Prev</A>][<A HREF="msg00538.html">Date Next</A>][<A HREF="msg00544.html">Thread Prev</A>][<A HREF="msg00547.html">Thread Next</A>][<A HREF="index.html#00537">Date Index</A>][<A HREF="threads.html#00537">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 21493] SJIS のDBデータを一括EUC化したい</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: Hiroshi Ishiura &lt;<A HREF="mailto:issy@snu.ne.jp">issy@snu.ne.jp</A>&gt;</LI>
<LI><em>Date</em>: Fri, 25 May 2001 14:16:29 +0900</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
お世話になってます。石浦です。

今度Postgreのバージョンを7.02から7.1.1にあげるついでに
現在データがSJISで格納されているものがあるんですが、これをＥＵＣにいっき
に変換したいんですがどうやったらいいでしょうか。
携帯も対応しているサイトで
現在ソースをSJISで書いていてそのままSJISでDBに格納している状態で
PHP-3.0.18-2-ja2の文字コード設定は
i18n.http_output = pass
i18n.internal_encoding = EUC-JP
i18n.script_encoding = pass
i18n.http_input = pass
i18n.http_input_default = pass

PostgreSQL7.0.2
-enable-multybyte=EUC-JP
データをSJISで格納してしまっている

この状況をソースを全部EUCにかきかえて、DBのデータもEUCにして
PC側はこのままの設定でも大丈夫ですが
携帯サイトのほうをおいてる場所の設定を
出力だけディレクトリごとに文字コード設定するなりして
i18n.http_output = SJIS
という形にしたいなぁとおもっています。
これで文字化けとかしませんよね？

なにせその当初はまだPostgreSQLもやりはじめたころで文字コードのあたりの知
識がとぼしくてとりあえず携帯で文字化けせず表示できればいいとしかかんがえ
てなかったので。。

あともうひとつこれもSJISの問題からきてるのかもしれませんが
pg_dumpをすると復元されないデータが多々でてくるんです。
いままで何度か復元したときは普通に-dで復元はできていたんですが、なぜか今
回はinsertされないデータが多々ありどこに問題があるのかがいまいち見当がつ
かないんです。。
アイモードも対応したサイトなので絵文字等を入力されたときに「・」というふ
うになってますが（除去プログラム書かないといけないけど＾＾；）これかなぁ
とも思いつつ手動で削除してから再度復元作業をしてもだめ。
おそらくしっかりEUCでデータを格納しておいてさえいればちゃんとpg_dumpで確
実にデータを復元できるとはおもうんですが。。
実行したコマンドは
pg_dump -d dbname &gt; db.out バックアップ
psql -e dbname &lt; db.out　復元

これがしっかりできないとpg_dumpallもかなり危険なので＾＾；

よろしくお願いします。
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00547" HREF="msg00547.html">[pgsql-jp 21503] RE: SJIS のDBデータを一括EUC化したい</A></STRONG>
<UL><LI><EM>From:</EM> "Eiji Tokuya" &lt;e-tokuya@sankyo-unyu.co.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00536.html">[pgsql-jp 21492] Re: コピーコマンドについて改めPQfinish()について</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00538.html">[pgsql-jp 21494] Re: コピーコマンドについて改めPQfinish()について</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00544.html">[pgsql-jp 21500] RE: initdb でエラー</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00547.html">[pgsql-jp 21503] RE: SJIS のDBデータを一括EUC化したい</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00537"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00537"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
