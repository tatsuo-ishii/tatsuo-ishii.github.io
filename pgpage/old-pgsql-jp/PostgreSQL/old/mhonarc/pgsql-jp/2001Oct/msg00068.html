<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 23323] Re: pg_log がない状態からの復旧 -->
<!--X-From: access@pos.to -->
<!--X-Date: Thu, 4 Oct 2001 22:30:16 +0900 -->
<!--X-Message-Id: 056e01c14cd8$b4fcd540$5601a8c0@kamita -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 4.2.0.58.J.20010404122303.00c461a0@[211.133.137.11] -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 23323] Re: pg_log がない状態からの復旧 </TITLE>
<LINK REV="made" HREF="mailto:access@pos.to">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00067.html">Date Prev</A>][<A HREF="msg00069.html">Date Next</A>][<A HREF="msg00074.html">Thread Prev</A>][<A HREF="msg00069.html">Thread Next</A>][<A HREF="index.html#00068">Date Index</A>][<A HREF="threads.html#00068">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 23323] Re: pg_log がない状態からの復旧</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: <A HREF="mailto:access@pos.to">access@pos.to</A></LI>
<LI><em>Date</em>: Thu, 4 Oct 2001 22:30:16 +0900</LI>
<LI><em>References</em>: &lt;4.2.0.58.J.20010404122303.00c461a0@[211.133.137.11]&gt;</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
kamitaです。たまに質問させていただいております。

過去の質問と同様なのですが、レスはなかったようですので
質問させていただきます。
&gt; 
&gt; 実は誤ってpg_logを削除してしまったためにデータが見えなく
&gt; なってしまったのですが、pg_logがない状態からデータを
&gt; 救う方法はあるのでしょうか？

全く同様のことをしてしまいました。

&gt; 
&gt; 過去ログを見ると、begin;end; をひたすら繰り返したら
&gt; 見えるようになったとか、C言語を使えば何とかなるけど
&gt; かなり難しいとかいった記述がありましたが、実際、何とか
&gt; する方法というものはあるのでしょうか？
&gt; 
&gt; pg_log以外のデータは残っているので、何とかデータだけ
&gt; でも救えないかと思っているのですが...。


私の場合は、/usr/local/pgsql/data/base/以下の
各DBのファイルサイズをみるととても減っています。

dumpにて、バックアップはとっていますが、

createdbとすると、　すでにそのDBはあると言われ
バックアップから復旧しようとすると、DBはないと
言われてしまいます。

解決策は、ありますでしょうか。

initdb をして、すべてバックアップから復旧と考え

initdb しようとすると

initdb: error: File /usr/local/pgsql/data/PG_VERSION already exists.
This probably means initdb has already been run and the
database system already exists.

If you want to create a new database system, either remove
the directory /usr/local/pgsql/data or run initdb with a --pgdata option
other than /usr/local/pgsql/data.

となります。

段々ひどくなりそうな気がしますので、教えていただけませんでしょうか。


よろしくお願いします。

kamita
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00070" HREF="msg00070.html">[pgsql-jp 23325] Re: pg_log がない状態からの復旧</A></STRONG>
<UL><LI><EM>From:</EM> Masashi Ohba &lt;ohba@netforce.ne.jp&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00069" HREF="msg00069.html">[pgsql-jp 23324]  Re: pg_log がない状態からの復旧</A></STRONG>
<UL><LI><EM>From:</EM> access@pos.to</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00067.html">[pgsql-jp 23322] Re: [Q]Pg での複数のテーブルからの抽出について</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00069.html">[pgsql-jp 23324]  Re: pg_log がない状態からの復旧</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00074.html">[pgsql-jp 23330] (No Subject in original)</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00069.html">[pgsql-jp 23324]  Re: pg_log がない状態からの復旧</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00068"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00068"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
