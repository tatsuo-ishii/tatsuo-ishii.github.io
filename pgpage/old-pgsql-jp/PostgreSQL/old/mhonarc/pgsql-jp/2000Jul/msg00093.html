<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 15860] [Q] using env value in sql -->
<!--X-From: Yoshio Funaki <yoshio@apl.pref.akita.jp> -->
<!--X-Date: Thu, 06 Jul 2000 09:52:19 +0900 -->
<!--X-Message-Id: 10007060052.AA00786@mebius.apl.pref.akita.jp -->
<!--X-ContentType: text/plain -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 15860] [Q] using env value in sql </TITLE>
<LINK REV="made" HREF="mailto:yoshio@apl.pref.akita.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00091.html">Date Prev</A>][<A HREF="msg00094.html">Date Next</A>][<A HREF="msg00097.html">Thread Prev</A>][<A HREF="msg00094.html">Thread Next</A>][<A HREF="index.html#00093">Date Index</A>][<A HREF="threads.html#00093">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 15860] [Q] using env value in sql</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: Yoshio Funaki &lt;<A HREF="mailto:yoshio@apl.pref.akita.jp">yoshio@apl.pref.akita.jp</A>&gt;</LI>
<LI><em>Date</em>: Thu, 06 Jul 2000 09:52:19 +0900</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
お世話になっております。船木＠秋田県立図書館です。
現在、当館のweb蔵書検索のリニューアルにむけ、実験中なのですが
お知恵を貸してください。

やっていることは
１）汎用機からデータをDBマシンにFTPする
２）FTPされたデータをawkやらsedやらをつかってばらばらにする
３）バラバラにしたものを各テーブルにコピーする
と言う手順なんですが、実験しているマシン上で
サービス稼働中のDBがある^^;　ので、別DBを実験用に作ってそちらで
検証したスクリプトやらSQLやらを本番用に流用したいと考えています。

そこで問題となるのが３）のCOPYの時なんですが、コピーを行う
SQL文を、１つのファイルに書いて、スクリプトから
psql -f sql_script DB_NAME
のように実行する際のSQLは、
copy hoge from '/fuga/nyoro.txt';
のように、直接コピー元を指定しますが、コピー元のファイルも
実験と本格稼働用で分ける必要があるため、できれば
copy hoge from $HYORO/nyoro.txt；
としておいて$HYOROの値を変えることで対応したいわけです。

そこで、setenv HYORO /fuga
として実験してみたのですが、ダメのようでした。
＃　$HYORO/nyoro.txtなんて知らん！　と怒られた。　;_;

手間を惜しまず実験用と本格稼働用を別々に作ればよいのでしょうが
テーブルが140くらいありますので、できるだけ手を省きたいのと
実験用-&gt;本格稼働用変換で、変換ミスをしたくないのと両方の
理由からこれをやりたいわけです。
＃　最初の方の理由が80%くらい・・・・^^;
＃　でも、これができるといろいろ便利なことができそうなので
＃　是非実現したいんです

よろしくお願いいたします。

追伸：
みなさんSQLファイルに入れるコメントどうしてますか？
140もテーブルがあると、このテーブルはなんじゃい？　となりそうだったので
１つ１つのcreate table文にコメントをつけようとしてはまりました。
＃　ソースが最良の参考資料！（マニュアル書くのが面倒！）
いろいろ文献をあさって（図書館勤めはこれができるので便利）やっとこさ
--（マイナス２個）でコメント文が書けることを知ったのですが
これって、超初心者的疑問だと思うのですが、ふれている書籍は
ほとんどなかったです。

船木　喜夫　yoshio@apl.pref.akita.jp
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00130" HREF="msg00130.html">[pgsql-jp 15897] Re: [Q] using env value in sql</A></STRONG>
<UL><LI><EM>From:</EM> 近藤直文&lt;nkon@shonan.ne&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00118" HREF="msg00118.html">[pgsql-jp 15885] Re: [Q] using env value in sql</A></STRONG>
<UL><LI><EM>From:</EM> Sugimura Masayuki &lt;sugimura@ksp.nis.nec.co.jp&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00101" HREF="msg00101.html">[pgsql-jp 15868] Re: [Q] using env value in sql</A></STRONG>
<UL><LI><EM>From:</EM> Masashi Ohba &lt;ohba@intelight.co.jp&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00098" HREF="msg00098.html">[pgsql-jp 15865] Re: [Q] using env value in sql</A></STRONG>
<UL><LI><EM>From:</EM> Yoshio Oki &lt;oki@ctsinc.co.jp&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00096" HREF="msg00096.html">[pgsql-jp 15863] Re: [Q] using env value in sql</A></STRONG>
<UL><LI><EM>From:</EM> Masayuki Tadano &lt;tadano@d-product.co.jp&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00094" HREF="msg00094.html">[pgsql-jp 15861] Re: [Q] using env value in sql</A></STRONG>
<UL><LI><EM>From:</EM> Yasuhiro Tanaka &lt;ytanaka@ssd.co.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00091.html">[pgsql-jp 15858] Re: インストール失敗</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00094.html">[pgsql-jp 15861] Re: [Q] using env value in sql</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00097.html">[pgsql-jp 15864] Re: Call for fmgr beta testers</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00094.html">[pgsql-jp 15861] Re: [Q] using env value in sql</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00093"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00093"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
