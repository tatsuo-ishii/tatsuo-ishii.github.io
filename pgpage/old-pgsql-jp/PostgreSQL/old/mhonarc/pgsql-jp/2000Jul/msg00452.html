<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 16219] 複数検索の方法 -->
<!--X-From: Yumiko Fujiwara <fujiwara@daj.co.jp> -->
<!--X-Date: Wed, 19 Jul 2000 12:39:02 +0900 -->
<!--X-Message-Id: 397522D6122.BB13FUJIWARA@mail.daj.co.jp -->
<!--X-ContentType: text/plain -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 16219] 複数検索の方法 </TITLE>
<LINK REV="made" HREF="mailto:fujiwara@daj.co.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00451.html">Date Prev</A>][<A HREF="msg00453.html">Date Next</A>][<A HREF="msg00492.html">Thread Prev</A>][<A HREF="msg00453.html">Thread Next</A>][<A HREF="index.html#00452">Date Index</A>][<A HREF="threads.html#00452">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 16219] 複数検索の方法</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: Yumiko Fujiwara &lt;<A HREF="mailto:fujiwara@daj.co.jp">fujiwara@daj.co.jp</A>&gt;</LI>
<LI><em>Date</em>: Wed, 19 Jul 2000 12:39:02 +0900</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
藤原です。
お世話になっています。

select文記述方法について、質問したいと思います。

テーブル名(users)に、
name  varchar(30)　※氏名漢字
namef varchar(60)　※氏名かな
で設定してあります。

ここに、
name  --- 山田 太郎（氏名の間は半角スペース）
namef --- やまだ たろう (上と同じ）

が入ってるとします。
検索の指定で、姓名を分けた検索方法を探しているのですが、やり
方が見つかりません。

PHPと連携してWebフォームで検索文字を入力して値を渡しています。
入力フォームは姓と名の２カ所ありどちらか１項目の入力で検索可
能にしてあります。
また、漢字でもふりがなでもどちらを入力しても構わない方法をとっ
ています。

例えば、
姓「やま」　名「たろ」と入力された場合該当を検索したいとして考
えられる方法は、

select * from users where (name like '%やま%' or namef like
'%やま%') and  (name like '%たろ%' or namef like '%たろ%');

だと思うのですが、これだと姓の項目に「たろ」と入れても該当に
なってしまいます。
姓名の間に必ず半角空白が入っているので、これをうまく利用すれ
ば検索は可能じゃないのかな？と思って色々と試しています。

姓の引数名:name-s　名の引数名:name-m　としたら、

name(の半角スペース以前）like name-s and name(の半角スペース
以後）like name-m

みたいなwhere句を作れたら可能ではないかと思っていますが、方
法が思いつかず、

select * from users where (name like '%やま たろ%' or namef
like '%やま たろ%');
とか
select * from users where (name like '%やま * たろ%' or
namef like '%やま * たろ%');
とか。
※もちろん、検索結果はゼロです。

文法的に間違っているんだろうな、とは思うのですが、他に方法が
思いつかないもので、どのようにしたら出来るのか、とても悩んで
います。

もし出来ない場合は姓・名でフィールドを分けないといけないと思
うので、とりあえずこの方法は可能なのか？
可能な場合、ヒントなど教えていただけたら、と思います。

長文になってしまい申し訳ありませんが、良いやり方があったらぜ
ひよろしくお願いいたします。

-----------------------------
Yumiko Fujiwara
Digital Arts Inc.
Mail  &gt;&gt; fujiwara@daj.co.jp
-----------------------------
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00454" HREF="msg00454.html">[pgsql-jp 16221] Re: 複数検索の方法</A></STRONG>
<UL><LI><EM>From:</EM> Naofumi Kondoh &lt;nkon@shonan.ne.jp&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00453" HREF="msg00453.html">[pgsql-jp 16220] Re: 複数検索の方法</A></STRONG>
<UL><LI><EM>From:</EM> Shinichi Moritani &lt;ml@softcream.co.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00451.html">[pgsql-jp 16218] Re: datetimeが使用できません。</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00453.html">[pgsql-jp 16220] Re: 複数検索の方法</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00492.html">[pgsql-jp 16259] Re: psql でのCtrl コマンド</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00453.html">[pgsql-jp 16220] Re: 複数検索の方法</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00452"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00452"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
