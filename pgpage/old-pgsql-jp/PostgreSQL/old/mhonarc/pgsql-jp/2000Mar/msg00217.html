<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 13523] VACUUM で落ちる -->
<!--X-From: KIKKAWA Fumiyasu <kikkawa@openhokkaido.co.jp> -->
<!--X-Date: Thu, 16 Mar 2000 11:39:40 +0900 -->
<!--X-Message-Id: 200003160239.LAA19022@fortunate.openhokkaido.co.jp -->
<!--X-ContentType: text/plain -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 13523] VACUUM で落ちる </TITLE>
<LINK REV="made" HREF="mailto:kikkawa@openhokkaido.co.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00216.html">Date Prev</A>][<A HREF="msg00218.html">Date Next</A>][<A HREF="msg00244.html">Thread Prev</A>][<A HREF="msg00231.html">Thread Next</A>][<A HREF="index.html#00217">Date Index</A>][<A HREF="threads.html#00217">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 13523] VACUUM で落ちる</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: KIKKAWA Fumiyasu &lt;<A HREF="mailto:kikkawa@openhokkaido.co.jp">kikkawa@openhokkaido.co.jp</A>&gt;</LI>
<LI><em>Date</em>: Thu, 16 Mar 2000 11:39:40 +0900</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
オープン北海道、吉川と申します。

いつもこのＭＬで学ばせていただいております。

現在 RedHat上に、Perl + Pg でシステムを構築しております。
マシンのメモリは768MB、PostgreSQL のバージョンは6.5.3です。

VACUUM を行なうと下記のような「OID IS INVALID」などのメッセージが出て
落ちるという現象が起きました。もともと、この foo_table を SELECT する
と、落ちるようになってしまったことから、VACUUM をかけたのですが、 
VACUUMも落ちてしまう結果となりました。  

推測ですが、foo_table にアクセス中に、誤って VACUUM をかけてしまったこ
と等が関与していると考えております。

尚、この状態であっても、INSERT はできたりします。

これらの現象について教えていただけると幸いです。
よろしくお願いします。

---&gt;8-----------------------------------------------------------------
$ psql -q -c "VACUUM foo_table"
NOTICE:  Rel foo_table: TID 4920/13: OID IS INVALID. TUPGONE 1.
NOTICE:  Rel foo_table: TID 4920/37: OID IS INVALID. TUPGONE 1.
NOTICE:  Rel foo_table: TID 4920/39: OID IS INVALID. TUPGONE 1.
NOTICE:  Rel foo_table: TID 4920/63: OID IS INVALID. TUPGONE 1.
NOTICE:  Rel foo_table: TID 4920/111: OID IS INVALID. TUPGONE 1.
（中略）
NOTICE:  Rel foo_table: TID 4920/1757: OID IS INVALID. TUPGONE 1.
NOTICE:  Rel foo_table: TID 4920/1769: OID IS INVALID. TUPGONE 1.
pqReadData() -- backend closed the channel unexpectedly.
        This probably means the backend terminated abnormally
        before or while processing the request.
We have lost the connection to the backend, so further processing is impossible.  Terminating.

---&gt;8-----------------------------------------------------------------
test=&gt; SELECT DISTINCT bar FROM foo_table;
pqReadData() -- backend closed the channel unexpectedly.
        This probably means the backend terminated abnormally
        before or while processing the request.
We have lost the connection to the backend, so further processing is impossible.  Terminating.

────────────────────────────────
インターネットも地域が重要だ！□□□□□□□□□□「おところWeb」
□□□□□有限会社オープン北海道□<A HREF="http://www.openhokkaido.co.jp/">http://www.openhokkaido.co.jp/</A>
吉川 文康（きっかわ ふみやす) mailto: kikkawa@openhokkaido.co.jp
────────────────────────────────
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00231" HREF="msg00231.html">[pgsql-jp 13537] RE:VACUUM で落ちる</A></STRONG>
<UL><LI><EM>From:</EM> "Hiroshi Inoue" &lt;Inoue@tpf.co.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00216.html">[pgsql-jp 13522] Re: postmasterが落ちます</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00218.html">[pgsql-jp 13524] TUPLES IS NOT THE SAME AS HEAPが出てデータも消えてしまいました</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00244.html">[pgsql-jp 13550] Re: TUPLES IS NOT THE SAME AS HEAPが出てデータも消えてしまいました</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00231.html">[pgsql-jp 13537] RE:VACUUM で落ちる</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00217"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00217"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
