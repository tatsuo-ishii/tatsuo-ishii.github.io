<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 19293] backend FATAL error -->
<!--X-From: Satoshi Yamada <s&#45;yamada@kh.rim.or.jp> -->
<!--X-Date: Sat, 30 Dec 2000 18:08:58 +0900 -->
<!--X-Message-Id: 200012300908.SAA08228@mail2.rim.or.jp -->
<!--X-ContentType: text/plain -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 19293] backend FATAL error </TITLE>
<LINK REV="made" HREF="mailto:s-yamada@kh.rim.or.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00414.html">Date Prev</A>][<A HREF="msg00416.html">Date Next</A>][<A HREF="msg00423.html">Thread Prev</A>][<A HREF="msg00413.html">Thread Next</A>][<A HREF="index.html#00415">Date Index</A>][<A HREF="threads.html#00415">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 19293] backend FATAL error</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: Satoshi Yamada &lt;<A HREF="mailto:s-yamada@kh.rim.or.jp">s-yamada@kh.rim.or.jp</A>&gt;</LI>
<LI><em>Date</em>: Sat, 30 Dec 2000 18:08:58 +0900</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
山田＠神戸市 です。

# またよりによってこんな時に...

FreeBSD 2.2.8 で PostgreSQL 6.5.3 を使っているのですが、
何か突然、問い合わせ時に backend が

  FATAL 1:  Socket command type 2 unknown

とエラーを吐くようになりました。
postmaster を再起動しましたが相変わらず吐きます。

どなたかこのような現象について、
心当たりのある方いらっしゃいませんでしょうか?

とりあえず postmaster に -d 3 をつけて実行した結果はこんな感じです。

===== from here ========================================================
postmaster: ServerLoop:         handling reading 7
postmaster: ServerLoop:         handling reading 7
postmaster: ServerLoop:         handling writing 7
postmaster: BackendStartup: environ dump:
-----------------------------------------
        PATH=/usr/local/pgsql/bin:/usr/local/bin:/usr/bin:/bin
        POSTPORT=5432
        POSTID=2147483641
        PG_USER=nobody
        PGDATA=/usr/local/pgsql/data
        IPC_KEY=5432000
-----------------------------------------
postmaster: BackendStartup: pid 8366 user nobody db ***** socket 7
postmaster child[8366]: starting with (/usr/local/pgsql/bin/postgres -d3 -B 192
-v131072 -p ***** )
FindExec: found "/usr/local/pgsql/bin/postgres" using argv[0]
debug info:
        User         = nobody
        RemoteHost   = localhost
        RemotePort   = 0
        DatabaseName = *****
        Verbose      = 3
        Noversion    = f
        timings      = f
        dates        = Normal
        bufsize      = 192
        sortmem      = 512
        query echo   = f
InitPostgres
        reset_client_encoding()..
        reset_client_encoding() done.
StartTransactionCommand
query: SET client_encoding = 'EUC_JP'
ProcessUtility: SET client_encoding = 'EUC_JP'
CommitTransactionCommand
StartTransactionCommand
query: SELECT count(id) FROM *****
ProcessQuery
CommitTransactionCommand
FATAL 1:  Socket command type 2 unknown
proc_exit(0) [#0]
shmem_exit(0) [#0]
exit(0)
postmaster: reaping dead processes...
postmaster: CleanupProc: pid 8366 exited with status 0
===== to here ==========================================================

なお、エラーは毎回出るわけではなく、全く同じ問い合わせでも
出たり出なかったりです。

実際に運用中のサイトなのでちょっと(かなり?)あせっています。
些細な情報やポインタ等でも結構です。
よろしくお願いします _o_
-- 
<A HREF="mailto:s-yamada@kh.rim.or.jp">mailto:s-yamada@kh.rim.or.jp</A> (山田 智史)
<A HREF="http://www.kh.rim.or.jp/~s-yamada/">http://www.kh.rim.or.jp/~s-yamada/</A>
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00414.html">[pgsql-jp 19292] Re: ラージオブジェクトの画像を表示できません</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00416.html">[pgsql-jp 19294] Re: ラージオブジェクトの画像を表示できません</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00423.html">[pgsql-jp 19301] Re: 処理停止？</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00413.html">[pgsql-jp 19291] 検索システムのご紹介</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00415"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00415"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
