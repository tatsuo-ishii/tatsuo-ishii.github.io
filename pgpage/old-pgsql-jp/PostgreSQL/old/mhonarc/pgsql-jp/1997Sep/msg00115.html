<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 2542] Re: regression test failed -->
<!--X-From: uchiyama@agent.it.matsue&#45;ct.ac.jp -->
<!--X-Date: Thu, 25 Sep 1997 10:13:17 +0900 -->
<!--X-Message-Id: 199709250113.KAA13191@agent.it.matsue&#45;ct.ac.jp -->
<!--X-ContentType: text/plain -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 2542] Re: regression test failed </TITLE>
<LINK REV="made" HREF="mailto:uchiyama@agent.it.matsue-ct.ac.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00114.html">Date Prev</A>][<A HREF="msg00108.html">Date Next</A>][<A HREF="msg00133.html">Thread Prev</A>][<A HREF="msg00118.html">Thread Next</A>][<A HREF="index.html#00115">Date Index</A>][<A HREF="threads.html#00115">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 2542] Re: regression test failed</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: <A HREF="mailto:uchiyama@agent.it.matsue-ct.ac.jp">uchiyama@agent.it.matsue-ct.ac.jp</A></LI>
<LI><em>Date</em>: Thu, 25 Sep 1997 10:13:17 +0900</LI>
<LI><em>cc</em>: <A HREF="mailto:uchiyama@wakeup.it.matsue-ct.ac.jp">uchiyama@wakeup.it.matsue-ct.ac.jp</A></LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
内山@松江高専です。
	石井さんの教えの通りやって見ました。
gdb の方は

postgres@agent[52]%gdb /usr/local/pgsql/bin/postgres /usr/local/pgsql/data/base/regression/core
GDB is free software and you are welcome to distribute copies of it
 under certain conditions; type "show copying" to see the conditions.
There is absolutely no warranty for GDB; type "show warranty" for details.
GDB 4.16 (sparc-sun-solaris2.4), Copyright 1996 Free Software Foundation, Inc...
(no debugging symbols found)...
Core was generated by `/usr/local/pgsql/bin/postgres -p -d3 -P4 regression'.
Program terminated with signal 11, Segmentation fault.
Reading symbols from /usr/lib/libnsl.so.1...(no debugging symbols found)...done.
Reading symbols from /usr/lib/libsocket.so.1...(no debugging symbols found)...
done.
Reading symbols from /usr/lib/libdl.so.1...(no debugging symbols found)...done.
Reading symbols from /usr/lib/libm.so.1...(no debugging symbols found)...done.
Reading symbols from /usr/lib/libc.so.1...(no debugging symbols found)...done.
Reading symbols from /usr/lib/libintl.so.1...(no debugging symbols found)...done.
Reading symbols from /usr/lib/libmp.so.1...(no debugging symbols found)...done.
Reading symbols from /usr/lib/libw.so.1...(no debugging symbols found)...done.
#0  0xef623478 in memset ()
(gdb) where
#0  0xef623478 in memset ()
#1  0x11ff60 in re_compile_fastmap ()
#2  0x120f18 in re_search_2 ()
#3  0x120d94 in re_search ()
#4  0x1272c4 in pg95_regexec ()
#5  0x100750 in RE_compile_and_execute ()
#6  0x100884 in fixedlen_regexeq ()
#7  0x100bd4 in textregexeq ()
#8  0x10f45c in fmgr_c ()
#9  0x5f1fc in ExecMakeFunctionResult ()
#10 0x5f298 in ExecEvalOper ()
#11 0x5f7ec in ExecEvalExpr ()
#12 0x5f910 in ExecQualClause ()
#13 0x5f9c8 in ExecQual ()
#14 0x60148 in ExecScan ()
#15 0x6a5c0 in ExecSeqScan ()
#16 0x5d9e0 in ExecProcNode ()
#17 0x5d17c in ExecutePlan ()
#18 0x5c878 in ExecutorRun ()
#19 0xd3720 in ProcessQueryDesc ()
#20 0xd37b4 in ProcessQuery ()
#21 0xd0d70 in pg_eval_dest ()
#22 0xd0b94 in pg_eval ()
#23 0xd2cdc in PostgresMain ()
#24 0x77098 in main ()
(gdb) 

で、re_compile_fastmap の memset のような気がするのですが、
re_compile_fastmap は、regex.c にありますが、memset を使っていません。
不思議です。わからないので、一応、投稿しながら考えます。また、-d 3 
オプションで postmaster を動かした所、

省略。

----    after rewriting:
{QUERY :command 4 :utility "" :resrel 1 :rtable ({RTE :relname "onek2" :inh 0  :refname "onek2" :relid 255440 }) :unique "" :targetlist nil :qual nil}


----    plan is :
{SEQSCAN 
   :cost 53 
   :size 1000 
   :width 6 
   :state nil 
   :qptargetlist (
      {TLE 
      :resdom 
         {RESDOM 
         :resno 1 
         :restype 27 
         :reslen 6 
         :resname "ctid" 
         :reskey 0 
         :reskeyop 0 
         :resjunk 1
         }
       
      :expr 
         {VAR 
         :varno 1 
         :varattno -1 
         :vartype 27 
         :varnoold 1 
         :varoattno -1
         }
      }
   )
    
   :qpqual nil 
   :lefttree nil 
   :righttree nil 
   :scanrelid 1
   }

        ProcessQuery() at Wed Sep 24 17:55:53 1997

        CommitTransactionCommand() at Wed Sep 24 17:55:53 1997

        StartTransactionCommand() at Wed Sep 24 17:55:54 1997


----    after rewriting:
{QUERY :command 6 :utility "" :resrel 0 :rtable nil :unique "" :targetlist nil :qual nil}

        ProcessUtility() at Wed Sep 24 17:55:54 1997

ここで、動かなくなりました。regression test の misc .. です。
							以上です。
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00120" HREF="msg00120.html">[pgsql-jp 2547] Re: regression test failed</A></STRONG>
<UL><LI><EM>From:</EM> Yoshihiko ICHIKAWA &lt;ichikawa@hyalos.is.ocha.ac.jp&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00119" HREF="msg00119.html">[pgsql-jp 2546] Re: regression test failed</A></STRONG>
<UL><LI><EM>From:</EM> Yoshihiko ICHIKAWA &lt;ichikawa@hyalos.is.ocha.ac.jp&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00118" HREF="msg00118.html">[pgsql-jp 2545] Re: regression test failed</A></STRONG>
<UL><LI><EM>From:</EM> tamaoki@manage.kanazawa-it.ac.jp (Nobuyuki Tamaoki)</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00114.html">[pgsql-jp 2541] Re: PHP/FI de gomi data</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00108.html">[pgsql-jp 2535] Re: PHP/FI de gomi data</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00133.html">[pgsql-jp 2560] Re: regression test failed</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00118.html">[pgsql-jp 2545] Re: regression test failed</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00115"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00115"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
