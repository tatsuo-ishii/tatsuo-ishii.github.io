<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 20652] Re: 7.1 RC4 -->
<!--X-From: Takeshi Ken Yamada <ken@tydfam.machida.tokyo.jp> -->
<!--X-Date: Wed, 11 Apr 2001 00:12:28 +0900 -->
<!--X-Message-Id: 20010411001228H.ken@tyd2.tydfam.machida.tokyo.jp -->
<!--X-ContentType: text/plain -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 20652] Re: 7.1 RC4 </TITLE>
<LINK REV="made" HREF="mailto:ken@tydfam.machida.tokyo.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00076.html">Date Prev</A>][<A HREF="msg00078.html">Date Next</A>][<A HREF="msg00083.html">Thread Prev</A>][<A HREF="msg00078.html">Thread Next</A>][<A HREF="index.html#00077">Date Index</A>][<A HREF="threads.html#00077">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 20652] Re: 7.1 RC4</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: Takeshi Ken Yamada &lt;<A HREF="mailto:ken@tydfam.machida.tokyo.jp">ken@tydfam.machida.tokyo.jp</A>&gt;</LI>
<LI><em>Date</em>: Wed, 11 Apr 2001 00:12:28 +0900</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
  山田＠町田市です。
  rc4 をインストールしました(無事出来ました@ FreeBSD-current)。
ついでに、perl (PL/Perl) のマニュアルから(一部) ざっと読んだ所
では連想配列も使える見たいです。

--------------------------------------------------------------
26.2. Using PL/Perl

Assume you have the following table:

CREATE TABLE EMPLOYEE (
    name text,
    basesalary integer,
    bonus integer
);
In order to get the total compensation (base + bonus) we could define a function as follows:

CREATE FUNCTION totalcomp(integer, integer) RETURNS integer
    AS 'return $_[0] + $_[1]'
    LANGUAGE 'plperl';
Notice that the arguments to the function are passed in @_ as might be expected.

We can now use our function like so:

SELECT name, totalcomp(basesalary, bonus) FROM employee;

But, we can also pass entire tuples to our functions:

CREATE FUNCTION empcomp(employee) RETURNS integer AS '
    my $emp = shift;
    return $emp-&gt;{''basesalary''} + $emp-&gt;{''bonus''};
' LANGUAGE 'plperl';
A tuple is passed as a reference to a hash. The keys are the names of the fields in the tuples. The hash values are values of the corresponding fields in the tuple.

Tip: Because the function body is passed as an SQL string literal to CREATE FUNCTION you have to escape single quotes within your Perl source, either by doubling them as shown above, or by using the extended quoting functions (q[], qq[], qw[]). Backslashes must be escaped by doubling them.

The new function empcomp can used like:

SELECT name, empcomp(employee) FROM employee;

  :                 :                   :
以下省略
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00078" HREF="msg00078.html">[pgsql-jp 20653] Re: 7.1 RC4</A></STRONG>
<UL><LI><EM>From:</EM> Jun Kuwamura &lt;juk@rccm.co.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00076.html">[pgsql-jp 20651] Re: 7.1 RC4</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00078.html">[pgsql-jp 20653] Re: 7.1 RC4</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00083.html">[pgsql-jp 20658] Re: ユーザー会ホームページは</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00078.html">[pgsql-jp 20653] Re: 7.1 RC4</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00077"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00077"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
