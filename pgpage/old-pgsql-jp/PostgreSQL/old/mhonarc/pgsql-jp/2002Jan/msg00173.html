<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 24504] Re: Â¾¤Î¥Æ¡¼¥Ö¥ë¤ò»²¾È¤¹¤ëupdate»þ¤Î¥¤¥ó¥Ç¥Ã¥¯¥¹¤ÎÍøÍÑ¤Ë¤Ä¤¤¤Æ -->
<!--X-From: Jun Kitamura <kitamura@assiette.net> -->
<!--X-Date: Fri, 18 Jan 2002 05:24:27 +0900 -->
<!--X-Message-Id: 3C4732FB1FE.858DKITAMURA@mail.assiette.net -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 3C46EE2C7C.D332KAKUMA@mail.mib21.co.jp -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 24504] Re: Â¾¤Î¥Æ¡¼¥Ö¥ë¤ò»²¾È¤¹¤ëupdate»þ¤Î¥¤¥ó¥Ç¥Ã¥¯¥¹¤ÎÍøÍÑ¤ </TITLE>
<LINK REV="made" HREF="mailto:kitamura@assiette.net">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00172.html">Date Prev</A>][<A HREF="msg00174.html">Date Next</A>][<A HREF="msg00172.html">Thread Prev</A>][<A HREF="msg00180.html">Thread Next</A>][<A HREF="index.html#00173">Date Index</A>][<A HREF="threads.html#00173">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 24504] Re: Â¾¤Î¥Æ¡¼¥Ö¥ë¤ò»²¾È¤¹¤ëupdate»þ¤Î¥¤¥ó¥Ç¥Ã¥¯¥¹¤ÎÍøÍÑ¤Ë¤Ä¤¤¤Æ</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: Jun Kitamura &lt;<A HREF="mailto:kitamura@assiette.net">kitamura@assiette.net</A>&gt;</LI>
<LI><em>Date</em>: Fri, 18 Jan 2002 05:24:27 +0900</LI>
<LI><em>References</em>: &lt;<A HREF="msg00172.html">3C46EE2C7C.D332KAKUMA@mail.mib21.co.jp</A>&gt;</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
ËÌÂ¼¡÷¥¢¥·¥§¥Ã¥È¤Ç¤¹¡£

&gt; OS Linux Redhat 7.1
&gt; DB Postgres7.1.3
(Î¬)
&gt; ¤³¤³¤ÇÌäÂê¤¬È¯À¸¤·¤Æ¤ª¤ê¤Þ¤·¤Æ¡¢M_PARENT¤Îage_id¤Ë¤Ä¤¤¤Æ¤Ê¤Î¤Ç¤¹¤¬¡¢
&gt; ¥Ç¡¼¥¿¤ò½¸·×¤¹¤ëÁ°¤Ë¤³¤ÎÇ¯Âå¥Õ¥£¡¼¥ë¥É¤Î¹¹¿·¤¬É¬Í×¤Ç¡¢
&gt; UPDATE m_parent SET age_id = m_parentage.age_id FROM m_parentage where
&gt; m_parent.age BETWEEN m_parentage.age_start AND m_parentage.age_end;
&gt; ¤È£Ó£Ñ£Ì¤ò½ñ¤­¡¢Æ°ºî¼«ÂÎ¤ÏÌÜÅª¤Ë¤½¤Ã¤¿Æ°ºî¤ò¤·¤Æ¤¤¤ë¤Î¤Ç¤¹¤¬¡¢
&gt; »þ´Ö¤¬£±Ê¬¤Û¤É¤«¤«¤Ã¤Æ¤·¤Þ¤¤¡¢»þ´Ö¤òÃ»½Ì¤¹¤ëÉ¬Í×¤¬¤¢¤ê¤Þ¤¹¡£

UPDATE m_parent SET age_id = 
 (select m2.age_id FROM m_parentage m2
   where m_parent.age BETWEEN m2.age_start and m2.age_end);
¤Ç¡¢¥µ¥Ö¥¯¥¨¥ê¤Ë¤Ê¤ë¤Î¤Ç¡¢()Æâ¤Î¥¯¥¨¥ê¤Ç¤Ï¥¤¥ó¥Ç¥Ã¥¯¥¹¤ò»È¤Ã¤Æ¤¯¤ì¤ë¤è¤¦
¤Ë¤Ê¤ë¤Î¤Ç¤Ï¤Ê¤¤¤«¤È¡¦¡¦¡¦¡£

Àß·×¤ÎÌäÂê¤«¤â¤·¤ì¤Þ¤»¤ó¤¬¡¢m_parentage ¤Î age_start ¤È age_end ¤Ç¶´¤à¤ä
¤êÊý¤À¤È¡¢¡Ö½ÅÊ£¤¹¤ëÇ¯Îð¡×¤¬È¯À¸¤¹¤ë²ÄÇ½À­¤¬¤¢¤ê¤Þ¤»¤ó¤«¡©
id:1 s:0  e:19
id:2 s:20 e:24
id:3 s:22 e:29
¡¦¡¦¤À¤È¡¢22¡¢23¡¢24 ºÐ¤Ï¡¢id=2 ¤È id=3 ¤Î¤É¤Á¤é¤Ë¤â¤Ê¤ê¤¨¤Þ¤¹¤è¤Í¡£
¥×¥í¥°¥é¥àÂ¦¤Ç¤³¤Î¤è¤¦¤Ê»öÂÖ¤¬È¯À¸¤·¤Ê¤¤¤è¤¦¤Ë¤µ¤ì¤Æ¤¤¤ë¤È¤Ï»×¤¤¤Þ¤¹¤¬¡¢
»×¤¤ÀÚ¤Ã¤Æ¡¢Ç¯Îð¤ÈÇ¯ÎðID(? age_id)¤òÉ½¤Ë»ý¤Ã¤Æ¤·¤Þ¤Ã¤¿¤Û¤¦¤¬ÎÉ¤¤¤Î¤Ç¤Ï¡¦
¡¦¤È¤â»×¤¤¤Þ¤¹¡£
age | age_id
----+--------
  0 | 1
  1 | 1
(Î¬)
 19 | 1
 20 | 2
 21 | 2
 23 | 2
 24 | 2
 25 | 3
 26 | 3
(°Ê²¼Î¬¡¡120ºÐ¤¯¤é¤¤¤Þ¤ÇÍÑ°Õ¤·¤È¤±¤Ð½¼Ê¬¤«¤È)
¡¦¡¦¡¦¤Ã¤Æ¤Ê¶ñ¹ç¤Ç¤¹¡£age ¤Ï¡¢¥×¥é¥¤¥Þ¥ê¥­¡¼¤Ê¤Î¤Ç¡¢ÀäÂÐ¤Ë½ÅÊ£¤·¤Þ¤»¤ó¡£
ÁýÄ¹¤Ç¤¹¤±¤É¤Í¡£¤Ç¤âÇ¯Îð¤Ê¤ó¤Æ¡¢¤¿¤«¤¬100·ï¤¯¤é¤¤¤·¤«¤Ê¤¤¤·¡£
¤³¤ì¤À¤È¡¢m_parent ¤Ë¡¢age_id ¥«¥é¥à¤ò»ý¤ÄÉ¬Í×¤¹¤é¤Ê¤¯¤Ê¤ê¤Þ¤¹¡£É¬Í×¤Ê»þ
¤Ë = ¤Ç·ë¤Ö¤« JOIN ¤Ç·Ò¤²¤ì¤Ð OK ¤Ç¤¹¡£

¿§¡¹ÊýË¡¤¬¤¢¤ë¤Î¤Ç¡¢¤É¤ì¤¬ÎÉ¤¤¤Î¤«»ä¼«¿È¤â¤ï¤«¤ê¤Þ¤»¤ó¤¬¡£
¤è¤í¤·¤±¤ì¤Ð³§ÍÍ¤Î¤´°Õ¸«¤ò»Ç¤¤¤¿¤¤¤Ç¤¹¡£

¤Ç¤Ï¡£
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00180" HREF="msg00180.html">[pgsql-jp 24511] Re: Â¾¤Î¥Æ¡¼¥Ö¥ë¤ò»²¾È¤¹¤ëupdate»þ¤Î¥¤¥ó¥Ç¥Ã¥¯¥¹¤ÎÍøÍÑ¤Ë¤Ä¤¤¤Æ</A></STRONG>
<UL><LI><EM>From:</EM> Minoru Kakuma &lt;kakuma@mib21.co.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00172" HREF="msg00172.html">[pgsql-jp 24503] Â¾¤Î¥Æ¡¼¥Ö¥ë¤ò»²¾È¤¹¤ëupdate»þ¤Î¥¤¥ó¥Ç¥Ã¥¯¥¹¤ÎÍøÍÑ¤Ë¤Ä¤¤¤Æ</A></STRONG>
<UL><LI><EM>From:</EM> Minoru Kakuma &lt;kakuma@mib21.co.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00172.html">[pgsql-jp 24503] Â¾¤Î¥Æ¡¼¥Ö¥ë¤ò»²¾È¤¹¤ëupdate»þ¤Î¥¤¥ó¥Ç¥Ã¥¯¥¹¤ÎÍøÍÑ¤Ë¤Ä¤¤¤Æ</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00174.html">[pgsql-jp 24505] Re: ¥¤¥ó¥Ç¥Ã¥¯¥¹ÍøÍÑ¤ÎÍ¥ÀèÅÙ</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00172.html">[pgsql-jp 24503] Â¾¤Î¥Æ¡¼¥Ö¥ë¤ò»²¾È¤¹¤ëupdate»þ¤Î¥¤¥ó¥Ç¥Ã¥¯¥¹¤ÎÍøÍÑ¤Ë¤Ä¤¤¤Æ</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00180.html">[pgsql-jp 24511] Re: Â¾¤Î¥Æ¡¼¥Ö¥ë¤ò»²¾È¤¹¤ëupdate»þ¤Î¥¤¥ó¥Ç¥Ã¥¯¥¹¤ÎÍøÍÑ¤Ë¤Ä¤¤¤Æ</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00173"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00173"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
