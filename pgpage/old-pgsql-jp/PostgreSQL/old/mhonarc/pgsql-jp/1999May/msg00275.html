<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 8548] Re: pgReadData() Error. -->
<!--X-From: "Satoshi Zakimi" <zak@po.teleway.ne.jp> -->
<!--X-Date: Sun, 30 May 1999 23:18:00 +0900 -->
<!--X-Message-Id: 000b01beaaa7$444cd960$0200a8c0@neweb.ne.jp -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 199905300135.KAA00954@ext16.sra.co.jp -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 8548] Re: pgReadData() Error. </TITLE>
<LINK REV="made" HREF="mailto:zak@po.teleway.ne.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00274.html">Date Prev</A>][<A HREF="msg00276.html">Date Next</A>][<A HREF="msg00271.html">Thread Prev</A>][<A HREF="msg00282.html">Thread Next</A>][<A HREF="index.html#00275">Date Index</A>][<A HREF="threads.html#00275">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 8548] Re: pgReadData() Error.</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: "Satoshi Zakimi" &lt;<A HREF="mailto:zak@po.teleway.ne.jp">zak@po.teleway.ne.jp</A>&gt;</LI>
<LI><em>Date</em>: Sun, 30 May 1999 23:18:00 +0900</LI>
<LI><em>References</em>: &lt;<A HREF="msg00271.html">199905300135.KAA00954@ext16.sra.co.jp</A>&gt;</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
石井さん、どうもお世話になります。

----- Original Message -----
送信者 : Tatsuo Ishii &lt;t-ishii@sra.co.jp&gt;
宛先 : &lt;pgsql-jp@sra.co.jp&gt;
送信日時 : 1999年5月30日 10:35
件名 : [pgsql-jp 8544] Re: pgReadData() Error.


&gt; 石井です。
&gt;
&gt; &gt; FreeBSD2.2.8にて、PostgreSQL6.4.2pached をインストールして
&gt; &gt; 使用しています。
&gt;
&gt; いつのバージョンですか？

具体的に、いつのバージョンかはわかりませんが、４月末ごろに get した
ものです。
もしかして、細かいバージョンアップとか、パッチとか出ていたのでしょうか？

&gt; &gt; ところで、以下のエラーが突然出るようになって困っています。
&gt; &gt; pqReadData() -- backend closed the channel unexpectedly.
&gt; &gt; This probably means the backend terminated abnormally before or
&gt; &gt;  while processing the request.
&gt; &gt; We have lost the connection to the backend, so further processing
&gt; &gt;  is impossible.
&gt; &gt; Terminating.
&gt;
&gt; これはバックエンド(postgres)が死んだときに出る現象です。バックエンドが
&gt; 死ぬ原因は色々あるので、これだけでは問題を特定できません。
&gt;
&gt; &gt; selectは問題なくできますが、updateを使用とするとコアダンプしている
&gt; &gt; ようです。
&gt; &gt; postgres.coreができていました。
&gt;
&gt; とりあえず
&gt; gdb /usr/local/pgsql/bin/postgres postgres.core
&gt; where
&gt; を実行した結果を見せて下さい。

取り急ぎ、以下のような結果が出ました。
これで何かわかりますでしょうか？

一見、メモリーへのアクセスに失敗しているようですが。

&gt; gdb /usr/local/pgsql/bin/postgres postgres.core
GDB is free software and you are welcome to distribute copies of it
 under certain conditions; type "show copying" to see the conditions.
There is absolutely no warranty for GDB; type "show warranty" for details.
GDB 4.16 (i386-unknown-freebsd),
Copyright 1996 Free Software Foundation, Inc...(no debugging symbols
found)...
Core was generated by `postgres'.
Program terminated with signal 11, Segmentation fault.
Cannot access memory at address 0x20111080.
#0  0xce3d0 in bcTruelen ()
(gdb) where
#0  0xce3d0 in bcTruelen ()
#1  0xce72d in bpcharcmp ()
#2  0x138b8 in _bt_isequal ()
#3  0x1154d in _bt_doinsert ()
#4  0x14734 in btinsert ()
#5  0xd8795 in fmgr_c ()
#6  0xd8b84 in fmgr ()
#7  0xd615 in index_insert ()
#8  0x3c736 in ExecInsertIndexTuples ()
#9  0x397f0 in ExecReplace ()
#10 0x394ff in ExecutePlan ()
#11 0x38e01 in ExecutorRun ()
#12 0xaaebb in ProcessQueryDesc ()
#13 0xaaf26 in ProcessQuery ()
#14 0xa8e7e in pg_exec_query_dest ()
#15 0xa8d14 in pg_exec_query ()
#16 0xaa6f8 in PostgresMain ()
#17 0x8f80c in DoBackend ()
#18 0x8f293 in BackendStartup ()
#19 0x8e590 in ServerLoop ()
#20 0x8de5f in PostmasterMain ()
#21 0x4c2b7 in main ()
(gdb)

他に調査すべきところなどありましたら、また教えてください。
一応、以下のオプションでカーネルの再構築は行っております。
間違いなどありましたらご指摘ください。

options         SYSVSHM
options         SYSVSEM
options         SYSVMSG

――――――……‥‥・・ ．　　 ☆
 zak@po.telway.ne.jp       ・  ．
 S.Zakimi                    ・
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00282" HREF="msg00282.html">[pgsql-jp 8555] Re: pgReadData() Error.</A></STRONG>
<UL><LI><EM>From:</EM> Tatsuo Ishii &lt;t-ishii@sra.co.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00271" HREF="msg00271.html">[pgsql-jp 8544] Re: pgReadData() Error.</A></STRONG>
<UL><LI><EM>From:</EM> Tatsuo Ishii &lt;t-ishii@sra.co.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00274.html">[pgsql-jp 8547] Re: pg_Connect error</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00276.html">[pgsql-jp 8549] Re: Internel compiler error program cc1 get fatal signal 6</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00271.html">[pgsql-jp 8544] Re: pgReadData() Error.</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00282.html">[pgsql-jp 8555] Re: pgReadData() Error.</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00275"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00275"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
