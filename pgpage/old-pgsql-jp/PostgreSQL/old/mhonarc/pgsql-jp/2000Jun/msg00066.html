<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 15023] Re: pg_dumpall&#45;uでエラー -->
<!--X-From: Michiko Tomobe <michiko@palnet.co.jp> -->
<!--X-Date: Mon, 05 Jun 2000 11:27:27 +0900 -->
<!--X-Message-Id: 20000605112727J.michiko@palnet.co.jp -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 20000531165648C.michiko@palnet.co.jp -->
<!--X-Reference-Id: 20000602174205P.sugimura@ksp.nis.nec.co.jp -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 15023] Re: pg_dumpall-uでエラー </TITLE>
<LINK REV="made" HREF="mailto:michiko@palnet.co.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00065.html">Date Prev</A>][<A HREF="msg00067.html">Date Next</A>][<A HREF="msg00048.html">Thread Prev</A>][<A HREF="msg00081.html">Thread Next</A>][<A HREF="index.html#00066">Date Index</A>][<A HREF="threads.html#00066">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 15023] Re: pg_dumpall-uでエラー</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: Michiko Tomobe &lt;<A HREF="mailto:michiko@palnet.co.jp">michiko@palnet.co.jp</A>&gt;</LI>
<LI><em>Date</em>: Mon, 05 Jun 2000 11:27:27 +0900</LI>
<LI><em>References</em>: &lt;20000531165648C.michiko@palnet.co.jp&gt;&lt;<A HREF="msg00048.html">20000602174205P.sugimura@ksp.nis.nec.co.jp</A>&gt;</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>

友部です。

杉村さん、お返事ありがとうございます。

&gt; 環境変数 PGPASSWORD (と必要なら PGUSER) を設定して -u つけずに
&gt; pg_dumpall するとどうでしょう？

この方法で、うまくいきました。
具体的には以下のようにしました。

(1)認証付きにしている各データベースに共通のユーザとパスワードを設定
(2)環境変数PGUSERとPGPASSWORDに(1)のユーザとパスワードを設定
(3)pg_dumpall (-uオプション無し) &gt; alldb.out

これで成功しました。が、さらに質問させてください。

この方法でさらに定期的に自動的にバックアップを取りたい場合のことです。

過去メール
[pgsql-jp 11736] Re: pg_dump -uに関して
によれば、

&gt;&gt;　/usr/local/pgsql/bin/pg_dump -u DBname &lt; input.dat &amp;&gt; output.dat
&gt;&gt;
&gt;&gt;　"input.dat"にユーザ名とパスワードをそれぞれ改行コードで区切って
&gt;&gt;指定する。この方法はどうでしょうか。

こういうったスクリプトをcronで動かすといった手があるようですが、
(これで動くことも確認しました)

そもそもセキュリティが必要なためにDBを認証付きにしているのに、
IDとパスワードを記述したファイルを置くというのが不安なのです。

セキュリティには詳しくないので、漠然と不安に思っているのですが、
そのパスワードを記述したファイルのパーミッションを600にしておけば
平気と考えてよいのでしょうか？

もっとも、この過去メールでの例はpg_dump -uなのでこれでいけますが、
認証付きでpg_dumpallをcronで動かしたいので、
スクリプト内で環境変数にIDとパスワードを設定することになりますよね。

やはりこのスクリプト自体のパーミッションを600にしておくしか
ないでしょうか。

似たような状況でバックアップ自動化を運用してらっしゃる方など、
何か思い付く方ヒントをください。よろしくお願いします。

--
MICHIKO TOMOBE 
(株)パルネット　インターネットビジネス事業部
E-mail : michiko@palnet.co.jp
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00081" HREF="msg00081.html">[pgsql-jp 15038] Re: pg_dumpall-uでエラー</A></STRONG>
<UL><LI><EM>From:</EM> Sugimura Masayuki &lt;sugimura@ksp.nis.nec.co.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00048" HREF="msg00048.html">[pgsql-jp 15005] Re: pg_dumpall-uでエラー</A></STRONG>
<UL><LI><EM>From:</EM> Sugimura Masayuki &lt;sugimura@ksp.nis.nec.co.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00065.html">[pgsql-jp 15022] (No Subject in original)</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00067.html">[pgsql-jp 15024] 画像データの扱い？</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00048.html">[pgsql-jp 15005] Re: pg_dumpall-uでエラー</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00081.html">[pgsql-jp 15038] Re: pg_dumpall-uでエラー</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00066"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00066"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
