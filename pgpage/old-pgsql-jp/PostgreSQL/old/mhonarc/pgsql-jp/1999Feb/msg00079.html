<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 6953] Are 'create/drop table' available in PL/pgSQL -->
<!--X-From: Fukuda Masaki <fukuda@wni.co.jp> -->
<!--X-Date: Thu, 04 Feb 1999 18:35:15 +0900 -->
<!--X-Message-Id: 199902040935.SAA25384@ocha.wni.co.jp -->
<!--X-ContentType: text/plain -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 6953] Are 'create/drop table' available in PL/pgSQL </TITLE>
<LINK REV="made" HREF="mailto:fukuda@wni.co.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00078.html">Date Prev</A>][<A HREF="msg00080.html">Date Next</A>][<A HREF="msg00083.html">Thread Prev</A>][<A HREF="msg00081.html">Thread Next</A>][<A HREF="index.html#00079">Date Index</A>][<A HREF="threads.html#00079">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 6953] Are 'create/drop table' available in PL/pgSQL</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: Fukuda Masaki &lt;<A HREF="mailto:fukuda@wni.co.jp">fukuda@wni.co.jp</A>&gt;</LI>
<LI><em>Date</em>: Thu, 04 Feb 1999 18:35:15 +0900</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
Weathernews 福田と申します。

PL/pgSQL で記述した functionの中で、'create table/drop table'文を
実行すると、以下のようなエラーになります。

pqReadData() -- backend closed the channel unexpectedly.
        This probably means the backend terminated abnormally before or while processing the request.
We have lost the connection to the backend, so further processing is impossible.  Terminating.

設定しているfunctionは、以下のようになっています。


  CREATE FUNCTION test_func () RETURNS text
    AS '
  begin
    create table tmptbl ( a text);
/*
    drop table tmptbl;
    delete from tmptbl;
    insert into tmptbl values(''aaaaa'');
*/
    return ''OK'';
  end;
  ' LANGUAGE 'plpgsql';

PostgreSQLのバージョンは、postgresql-6.4.2-patched-990108.tar.gz、
OSのバージョンはSolaris2.5.1です。

insert/delete文は正常に動作するのですが、create/drop文はうまく
動きません。
CREATE FUNCTION文が間違っているのでしょうか、それともcreate/drop文は
create functionの中では実行できないものなのでしょうか。

ご存知の方がいたら教えて下さい。よろしくお願いします。

------------------------------------------
Masaki Fukuda &lt;fukuda@wni.co.jp&gt;
(DCE)Weathernews, Inc.
Phone:043-274-5508, FAX:043-274-4957,4955
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00081" HREF="msg00081.html">[pgsql-jp 6955] RE: Are 'create/drop table' available in PL/pgSQL</A></STRONG>
<UL><LI><EM>From:</EM> "Hiroshi Inoue" &lt;Inoue@tpf.co.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00078.html">[pgsql-jp 6952] Re: Benchmark on Linux2.0.36(Comparing Solaris7)</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00080.html">[pgsql-jp 6954] Re: Benchmark on Linux2.0.36(Comparing Solaris7)</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00083.html">[pgsql-jp 6957] [Q]Apache-JServの設定について</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00081.html">[pgsql-jp 6955] RE: Are 'create/drop table' available in PL/pgSQL</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00079"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00079"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
