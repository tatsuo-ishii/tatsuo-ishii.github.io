<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp: 25000] Re: date_part() milliseconds ¤Î  ver.7.2.x ¤Ç¤ÎÊÖ¤êÃÍ¤Ï¡© -->
<!--X-From: Jun Kitamura <kitamura@assiette.net> -->
<!--X-Date: Thu, 28 Feb 2002 02:02:02 +0900 -->
<!--X-Message-Id: 3C7D110A186.0DE2KITAMURA@mail.assiette.net -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 3C7C0520398.0DE1KITAMURA@mail.assiette.net -->
<!--X-Reference-Id: 20020227170843H.t&#45;ishii@sra.co.jp -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp: 25000] Re: date_part() milliseconds ¤Î  ver.7.2.x ¤Ç¤ÎÊÖ¤êÃÍ¤ </TITLE>
<LINK REV="made" HREF="mailto:kitamura@assiette.net">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00412.html">Date Prev</A>][<A HREF="msg00414.html">Date Next</A>][<A HREF="msg00408.html">Thread Prev</A>][<A HREF="msg00378.html">Thread Next</A>][<A HREF="index.html#00413">Date Index</A>][<A HREF="threads.html#00413">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp: 25000] Re: date_part() milliseconds ¤Î  ver.7.2.x ¤Ç¤ÎÊÖ¤êÃÍ¤Ï¡©</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: Jun Kitamura &lt;<A HREF="mailto:kitamura@assiette.net">kitamura@assiette.net</A>&gt;</LI>
<LI><em>Date</em>: Thu, 28 Feb 2002 02:02:02 +0900</LI>
<LI><em>Delivered-To</em>: pgsql-jp@ml.postgresql.jp</LI>
<LI><em>List-Archive</em>: &lt;http://ml.postgresql.jp/pipermail/pgsql-jp/&gt;</LI>
<LI><em>List-Help</em>: &lt;mailto:pgsql-jp-request@ml.postgresql.jp?subject=help&gt;</LI>
<LI><em>List-Id</em>: &lt;pgsql-jp.ml.postgresql.jp&gt;</LI>
<LI><em>List-Post</em>: &lt;mailto:pgsql-jp@ml.postgresql.jp&gt;</LI>
<LI><em>List-Subscribe</em>: &lt;http://ml.postgresql.jp/mailman/listinfo/pgsql-jp&gt;,&lt;mailto:pgsql-jp-request@ml.postgresql.jp?subject=subscribe&gt;</LI>
<LI><em>List-Unsubscribe</em>: &lt;http://ml.postgresql.jp/mailman/listinfo/pgsql-jp&gt;,&lt;mailto:pgsql-jp-request@ml.postgresql.jp?subject=unsubscribe&gt;</LI>
<LI><em>References</em>: &lt;<A HREF="msg00379.html">3C7C0520398.0DE1KITAMURA@mail.assiette.net</A>&gt; &lt;<A HREF="msg00408.html">20020227170843H.t-ishii@sra.co.jp</A>&gt;</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
ËÌÂ¼¤Ç¤¹¡£

&gt; ÀÐ°æ¤Ç¤¹¡¥
&gt; 
&gt; &gt; PostgreSQL 7.1.3 ¤ò»È¤Ã¤Æ¤¤¤Þ¤¹¡£
&gt; &gt; 7.2 ¤òÆþ¤ì¤¿Êý¤Ë¼Â¤ª´ê¤¤¤Ç¤¹¡£
&gt; 
&gt; # ¤É¤¦¤·¤Æ¼«Ê¬¤Ç¤ä¤Ã¤Æ¤ß¤Ê¤¤¤ó¤Ç¤·¤ç¤¦¤«¤Í¡¥¥×¥é¥¤¥Ù¡¼¥È¤Ë7.2¤ò¥¤¥ó¥¹
&gt; # ¥È¡¼¥ë¤¹¤ë¤³¤È¤Ê¤É¡¤¥Ç¥£¥¹¥¯ÎÎ°è¤µ¤¨¤¢¤ì¤Ð´ÊÃ±¤Ê¤Î¤Ë...

¿½¤·Ìõ¤Ê¤¤¤Ç¤¹¡£ÂÕËý¤Ç¤·¤¿¡£

&gt; ÌäÂê¤Ï¡¤source ¤¬ TIMESTAMP ¤Î¤È¤­¤ÎÆ°ºî¤Ç¤¹¤Í¡¥
&gt; 
&gt; test=# select current_timestamp,extract(milliseconds from current_timestamp);
&gt;           timestamptz          | date_part 
&gt; -------------------------------+-----------
&gt;  2002-02-27 14:45:53.945529+09 |   945.529
&gt; (1 row)

²¿¸Î¡¢current_timestamp ¤Ç¡¢¥Þ¥¤¥¯¥í¥»¥«¥ó¥É¤Þ¤Ç½Ð¤ë¤ó¤Ç¤¹¤«¡©
Æ±¤¸ SQL ¤¬¡¢

test=# select current_timestamp,extract(milliseconds from current_timestamp);
       timestamp        | date_part
------------------------+-----------
 2002-02-28 00:40:51+09 |         0
(1 row)

¤È¤Ê¤ê¤Þ¤¹¡¦¡¦¡£(7.1.3¤Ç¼Â¹Ô)
now() ¤ä current_timestamp ¤Ï¡¢time() ¤ò»È¤Ã¤Æ¤¤¤ë¤Î¤ÇÉÃ¤Þ¤Ç¤·¤«½Ð¤Ê¤¤¡¦
¡¦¡¦¤È¤¤¤¦¤³¤È¤À¤Ã¤¿¤È»×¤¤¤Þ¤¹¤¬¡£
7.1.3 ¤Ç¤Ï¡¢/src/backend/utils/adt/nabstime.c ¤Ë GetCurrentAbsoluteTime()
(121¹ÔÌÜ)¤·¤«¤Ê¤¤¤Ç¤¹¤¬¡¢ 7.2¤Ç¤Ï GetCurrentAbsoluteTimeUsec()(187¹ÔÌÜ) 
¤Ã¤Æ¤Î¤¬¤¢¤ê¤Þ¤¹¤Í¡£
¤³¤ÎÃæ¤Ç gettimeofday() ¤ò»È¤Ã¤Æ¡¢¥Þ¥¤¥¯¥í¥»¥«¥ó¥É¤Þ¤Ç¼èÆÀ¤·¤Æ¤ë¤Ã¤Ý¤¤¤ó
¤Ç¤¹¤±¤É¡¢¥Ð¡¼¥¸¥ç¥ó¤Ë¤è¤ê current_timestamp ¤ÎÃÍ¤¬°ã¤¦¤Î¤Ï¤³¤Î¤¿¤á¤Ç¤¹¤«
¤Í¡©(¤³¤ì°Ê¾å¥½¡¼¥¹¤òÄÉ¤¨¤Ê¤¤)


¤È¤ê¤¢¤¨¤º¤Î²ò·èºö¤È¤·¤Æ¡¢timeofday() ¤ÎÊÖ¤êÃÍ¤¬Ê¸»úÎó¤Ê¤Î¤Ç¡¢timestamp·¿
¤Ë¥­¥ã¥¹¥È¤·¤Æ time·¿¤Ë¥­¥ã¥¹¥È¤¹¤ë¤³¤È¤Ë¤è¤êÌÜÅª¤ÎÃÍ¤ÏÆÀ¤é¤ì¤ë¤è¤¦¤Ë¤Ê¤ê
¤Þ¤·¤¿¡£

test=# select timeofday(),date_part('milliseconds',timeofday()::datetime::time);
              timeofday              |    date_part
-------------------------------------+------------------
 Thu Feb 28 00:54:53.693292 2002 JST | 53693.9170000001
(1 row)

¤¢¤ê¤¬¤È¤¦¤´¤¶¤¤¤Þ¤·¤¿¡£

&gt; ¥½¡¼¥¹¤òÄ¾¤¹¤Î¤Ï´ÊÃ±¤Ç¤¹¤¬¡¤¥Þ¥Ë¥å¥¢¥ë¤¬Àµ¤·¤¤¤Î¤«¤É¤¦¤«º£°ì¤Ä¤Ï¤Ã¤­¤ê
&gt; ¤·¤Ê¤¤¤Î¤ÇËÜ²È¤ËÊ¹¤¤¤Æ¤ß¤Þ¤¹¡¥
&gt; # ¤½¤ì¤ÈSQL99¤Î¥¹¥Ú¥Ã¥¯¤âÄ´¤Ù¤Æ¤ß¤Þ¤¹¡¥
&gt; # º£»¥ËÚ¤Ë½ÐÄ¥Ãæ¤Ê¤Î¤Ç¤Á¤ç¤Ã¤È»þ´Ö¤¬¤«¤«¤ë¤«¤âÃÎ¤ì¤Þ¤»¤ó¤¬...

¤è¤í¤·¤¯¤ª´ê¤¤¤·¤Þ¤¹¡£

</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00379" HREF="msg00379.html">[pgsql-jp: 24966] date_part() milliseconds ¤Îver.7.2.x ¤Ç¤ÎÊÖ¤êÃÍ¤Ï¡©</A></STRONG>
<UL><LI><EM>From:</EM> Jun Kitamura &lt;kitamura@assiette.net&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00408" HREF="msg00408.html">[pgsql-jp: 24995] Re: date_part() milliseconds ¤Î ver.7.2.x ¤Ç¤ÎÊÖ¤êÃÍ¤Ï¡©</A></STRONG>
<UL><LI><EM>From:</EM> Tatsuo Ishii &lt;t-ishii@sra.co.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00412.html">[pgsql-jp: 24999] Re: ¥ì¥³¡¼¥É¤ò¤Ò¤È¤Ä¤À¤±¼è¤ê½Ð¤¹View¤Îºî¤êÊý</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00414.html">[pgsql-jp: 25001] UPDATE¤¬</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00408.html">[pgsql-jp: 24995] Re: date_part() milliseconds ¤Î ver.7.2.x ¤Ç¤ÎÊÖ¤êÃÍ¤Ï¡©</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00378.html">[pgsql-jp: 24965] ¥À¥¦¥ó¥í¡¼¥É¤·¤¿²áµî¤ÎML¤ÎÆüËÜ¸ì¤¬Ê¸»ú²½¤±¤·¤Æ¤¤¤Þ¤¹¡©</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00413"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00413"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
