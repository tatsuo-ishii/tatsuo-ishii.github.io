<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 16837] Re: [pgsql&#45;jp 16795] Re: postmaster  起動オプションの安全性について -->
<!--X-From: "Yoshio Tokuda"<actords@zaqcad091da.zaq.ne.jp> -->
<!--X-Date: Tue, 22 Aug 2000 17:53:09 +0900 (JST) -->
<!--X-Message-Id: 20000822175309.1A185305@zaqcad091da.zaq.ne.jp -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 20000819234912.3946670@zaqcad091da.zaq.ne.jp -->
<!--X-Reference-Id: 399F2CD6.89F16273@shonan.ne.jp -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 16837] Re: [pgsql-jp 16795] Re: postmaster  起動オプションの安 </TITLE>
<LINK REV="made" HREF="mailto:actords@zaqcad091da.zaq.ne.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00450.html">Date Prev</A>][<A HREF="msg00452.html">Date Next</A>][<A HREF="msg00409.html">Thread Prev</A>][<A HREF="msg00395.html">Thread Next</A>][<A HREF="index.html#00451">Date Index</A>][<A HREF="threads.html#00451">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 16837] Re: [pgsql-jp 16795] Re: postmaster  起動オプションの安全性について</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: "Yoshio Tokuda"&lt;<A HREF="mailto:actords@zaqcad091da.zaq.ne.jp">actords@zaqcad091da.zaq.ne.jp</A>&gt;</LI>
<LI><em>Date</em>: Tue, 22 Aug 2000 17:53:09 +0900 (JST)</LI>
<LI><em>Organization</em>: Merry Machanization Japan Corp.</LI>
<LI><em>References</em>: &lt;<A HREF="msg00398.html">20000819234912.3946670@zaqcad091da.zaq.ne.jp</A>&gt;&lt;<A HREF="msg00409.html">399F2CD6.89F16273@shonan.ne.jp</A>&gt;</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
遅くなってしまいました。原因究明と復旧で
泊まり込み作業のため、朦朧状態でレスが
遅れてしまいました。実際にはMLでUpした段階では
「同じバージョンのPostgreSQLの再インストールか、
　折角だから最新版のPostgreSQLにするのか、
　Linuxが異常を来しているのなら、Linux本体から
　見直すべきかな〜　何とか簡単に治らないものかな」
状況下にあり、決断できない状況下で
わらをもすがる思いでMLへUpしたことでした。
その後、判断しまして、まずはPostgreSQLのみを
最新版に取り急ぎアップグレードして、システム
復旧を優先することに決定し、MLでの待ちではなく
作業に着手、傾注致しました。
レスが遅れました点、ご容赦願います。

&gt;ソフト工房の近藤です。こんにちは。

(snip)

&gt;事情がよくわからないので、一般論ですが。
&gt;ＤＢを使う場合、UPS を付けるのはあたりまえですね。
おっしゃる通りです。人にはやかましく言うのですが、
自分の周りは危険度一杯であります。

&gt;ＤＢは、本来、同期モード( -o '-F' なし )で動かすべき
&gt;ものですがか、非同期で動かす場合は、それなりのリスクを
&gt;承知しなければなりません。
&gt;
&gt;商用ＤＢだと、ログだけを同期モードにして、ＤＢ本体は、
&gt;バッファリングして遅延書込みによって、高速化できるよう
&gt;にしているものがあります。
&gt;
&gt;# 私は、Linux など安定している OS なら、UPS + 非同期
&gt;# でも十分ではないかと思ってますが、経験者の皆さんの
&gt;# ご意見を是非伺いたいところです。
&gt;
&gt;なお、 UPS なしの非同期モードで動かすというような恐ろ
&gt;しいことは、データーが命の本運用の業務では、やっては
&gt;いけないことですね。
&gt;
&gt;UPS を使わない場合は、停電その他トラブルで、データー
&gt;が損傷した場合は、前回のバックアップ時のデーターを
&gt;復元して、その後は、手作業でデーターを入力するなり、
&gt;関係者に、データー消失のお詫びをするしかないです。
&gt;
&gt;余談ですが、UPS を入れる場合、数年後のバッテリー容量
&gt;の低下時の動作時間で計算して、バッファーを DISK に
&gt;書出して、安全にシャットダウンできるだけの十分な時間
&gt;を確保しましょう。  短時間の停電がないとか無視できる
&gt;ようなら、商用電源停電後、1 分で、シャットダウン動作
&gt;開始というような設定にすれば、比較的安価な UPS です
&gt;みます。老婆心ですが、せっかく UPS を入れたのに、
&gt;バッテリーの交換をさぼっていたために、シャットダウン
&gt;完了前に、バッテリー切れにならないようご注意を。
流石にUPSへの過信による落とし穴を突いておられると
存じます。UPSについてはおっしゃる通りだと存じます。
同期非同期の件は判りませんが、7から同期非同期を
SQL文で指定、キャンセルできると書いてあったようですので
ケースバイケースで切り替えようと考えています。

&gt;/etc/rc.local で、PostgreSQL を起動しているようです
&gt;から、POSIX 準拠の最近の Linux ディトリビューション
&gt;ではないようですね。UPS シャットダウン時の設定を忘れ
&gt;ないよう注意してください。
了解しました。と言うか、ノンストップシステムを目指して
おりますので、今般のような、落雷事故をもカバーできる
廉価なシステムつくりが必要なだけです。

&gt;# 細いことですが、こういう場合に「悪さ」という表現は好き
&gt;# ではありません。-F で、同期モードでなく、非同期で動け
&gt;# と指示されたので、忠実に従っているだけなのに、それを、
&gt;# 悪さといわれては、プログラムちゃんがかわいそう (^_^)。
またまた、おっしゃる通りです。
「自分は間違いが無い」と言う気持ちが表れるのか・・・
デバッグできない、デバッグに時間がかかる「スタンス」の
表れですね。っと言うか、「恥かしくてついつい大柄に出た」のかも
知れません。今では迷いが吹っ切れて、PostgreSQLのアップグレードで
解決の方向へ向かっておりますので、思い出せませんが・・・ ^J~;
レスに感謝致します。では、

_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/
     Yoshio Tokuda
_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00398" HREF="msg00398.html">[pgsql-jp 16784] postmaster 起動オプションの安全性について</A></STRONG>
<UL><LI><EM>From:</EM> "Yoshio Tokuda"&lt;actords@zaqcad091da.zaq.ne.jp&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00409" HREF="msg00409.html">[pgsql-jp 16795] Re: postmaster 起動オプションの安全性について</A></STRONG>
<UL><LI><EM>From:</EM> Naofumi Kondoh &lt;nkon@shonan.ne.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00450.html">[pgsql-jp 16836] PL/pgSQLについて</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00452.html">[pgsql-jp 16838] Re: PostgreSQLの管理用ツール</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00409.html">[pgsql-jp 16795] Re: postmaster 起動オプションの安全性について</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00395.html">[pgsql-jp 16781] pgaccess patch for 7.0.2</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00451"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00451"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
