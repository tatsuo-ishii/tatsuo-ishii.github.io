<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 16624] rule における'now' -->
<!--X-From: daikin@hkr.ne.jp -->
<!--X-Date: Fri, 11 Aug 2000 19:26:50 +0900 -->
<!--X-Message-Id: 200008111036.TAA01696@sraigw.sra.co.jp -->
<!--X-ContentType: text/plain -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 16624] rule における'now' </TITLE>
<LINK REV="made" HREF="mailto:daikin@hkr.ne.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00236.html">Date Prev</A>][<A HREF="msg00237.html">Date Next</A>][<A HREF="msg00237.html">Thread Prev</A>][<A HREF="msg00232.html">Thread Next</A>][<A HREF="index.html#00238">Date Index</A>][<A HREF="threads.html#00238">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 16624] rule における'now'</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: <A HREF="mailto:daikin@hkr.ne.jp">daikin@hkr.ne.jp</A></LI>
<LI><em>Date</em>: Fri, 11 Aug 2000 19:26:50 +0900</LI>
<LI><em>In</em>: Reply-To: &lt;<A HREF="msg00173.html">3990C148.8F5EDC2A@ctsinc.co.jp</A>&gt;</LI>
<LI><em>Reference</em>: &lt;<A HREF="msg00173.html">3990C148.8F5EDC2A@ctsinc.co.jp</A>&gt;</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
おはようございます、ひらめ@青梅市と申します。

隠岐さんはおっしゃいました。'now' が日付になっちゃってると。

&gt; CREATE RULE "temp_rule" AS ON DELETE TO "t1" DO 
&gt; INSERT INTO "deleted_t1" ("deldate", "id", "name")
&gt; VALUES ('Tue Aug 08 20:49:51 2000 JST'::"datetime", old."id", old."name");

&gt;create rule temp_rule as on delete to t1 do 
&gt;	insert into deleted_t1 VALUES('now', old.id, old.name); 
								  ^^^^^	
									を 'now'::text

にするとうまくゆくと思います。まだ実際ためしてないのですが、ちょうど
PostgreSQLのドキュメントを読んでいた所にヒットしたため、メールしました。

「キャストによりパーサはdatetime('now'::text)をそのまま構築するように
なり、ルールが実行される時にこれ(datetime('now'::text))が評価されます。」

遅い反応ですいません。

ではでは。

</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00236.html">[pgsql-jp 16622] Re: pg_connect()でエラー</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00237.html">[pgsql-jp 16623] odbc 文字化け　中西</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00237.html">[pgsql-jp 16623] odbc 文字化け　中西</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00232.html">[pgsql-jp 16618] エクスポート時の日付の出力形式について</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00238"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00238"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
