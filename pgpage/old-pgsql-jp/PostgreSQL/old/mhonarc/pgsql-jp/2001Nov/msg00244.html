<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 23828] Re: Solaris8 ¤Ø¤ÎPostgreSQL7.1.2¥¤¥ó¥¹¥È¡¼¥ë»þ¤Î¥¨¥é¡¼¤Ë¤Ä¤¤¤Æ -->
<!--X-From: sugita@sra.co.jp -->
<!--X-Date: Thu, 22 Nov 2001 10:46:48 +0900 (JST) -->
<!--X-Message-Id: 20011122.104648.74746172.sugita@sra.co.jp -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 20011121171948.2dcfcb03.tosiyuki@gol.com -->
<!--X-Reference-Id: 20011121184725E.cafekuro@yk.rim.or.jp -->
<!--X-Reference-Id: 20011122102630Z.etoh@bunroku.cc.saga&#45;u.ac.jp -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 23828] Re: Solaris8 ¤Ø¤ÎPostgreSQL7.1.2¥¤¥ó¥¹¥È¡¼¥ë»þ¤Î¥¨¥é¡¼¤ </TITLE>
<LINK REV="made" HREF="mailto:sugita@sra.co.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00243.html">Date Prev</A>][<A HREF="msg00245.html">Date Next</A>][<A HREF="msg00243.html">Thread Prev</A>][<A HREF="msg00245.html">Thread Next</A>][<A HREF="index.html#00244">Date Index</A>][<A HREF="threads.html#00244">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 23828] Re: Solaris8 ¤Ø¤ÎPostgreSQL7.1.2¥¤¥ó¥¹¥È¡¼¥ë»þ¤Î¥¨¥é¡¼¤Ë¤Ä¤¤¤Æ</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: <A HREF="mailto:sugita@sra.co.jp">sugita@sra.co.jp</A></LI>
<LI><em>Date</em>: Thu, 22 Nov 2001 10:46:48 +0900 (JST)</LI>
<LI><em>References</em>: &lt;<A HREF="msg00235.html">20011121171948.2dcfcb03.tosiyuki@gol.com</A>&gt;&lt;<A HREF="msg00239.html">20011121184725E.cafekuro@yk.rim.or.jp</A>&gt;&lt;<A HREF="msg00243.html">20011122102630Z.etoh@bunroku.cc.saga-u.ac.jp</A>&gt;</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
From: Hirofumi ETO &lt;etoh@bunroku.cc.saga-u.ac.jp&gt;
Subject: [pgsql-jp 23827] Re: Solaris8 ¤Ø¤Î PostgreSQL7.1.2 ¥¤¥ó¥¹¥È¡¼¥ë»þ¤Î¥¨¥é¡¼¤Ë¤Ä¤¤¤Æ 
Date: Thu, 22 Nov 2001 10:26:30 +0900

;;; ½é¤á¤Þ¤·¤Æ¡¢º´²ìÂç³Ø³Ø½Ñ¾ðÊó½èÍý¥»¥ó¥¿¡¼¤Î¹¾Æ£¤È¿½¤·¤Þ¤¹¡£

  ¤³¤ó¤Ë¤Á¤Ï¡¢¿ùÅÄ¤Ç¤¹¡£

;;; &gt; ÀÄ»³³Ø±¡Âç³Ø°æÅÄ¸¦µæ¼¼¤Î¹õÅÄ¤Ç¤¹¡£
;;; 
;;; °Ê²¼¤Î·ï¡¢Solaris ¤Î¾ì¹ç¡¢¥Ç¥Õ¥©¥ë¥È¤Î¥Ð¥Ã¥¯¥¨¥ó¥É¤Î¿ô(32)¤Ç¤Ï 
;;; postmaster ¤¬µ¯Æ°¤·¤Ê¤¤¤³¤È¤Ï¤´Â¸ÃÎ¤«¤È»×¤¤¤Þ¤¹¡£

  UNIX ¥É¥á¥¤¥ó¥½¥±¥Ã¥È¤Ë¤Ä¤¤¤Æ¤Ç¡¢¥¹¥È¥ê¡¼¥à¤ÎÊý¤Ç¤ÏÈ¯À¸¤·¤Þ¤»¤ó¡£¤Þ¤¿¡¢µ¯Æ°
¤Ï¤·¤Þ¤¹¤¬¥½¥±¥Ã¥È¤Ø¤Î¥¢¥¯¥»¥¹¤¬·ã¤·¤¯¤Ê¤Ã¤¿¤È¤­¤ËÀµ¾ï¤ËÆ°¤«¤Ê¤¯ (½èÍý»ÅÀÚ¤ì¤Ê
¤¯) ¤Ê¤ê¤Þ¤¹¡£

  Solaris ¤Î¥·¥¹¥Æ¥à¥Ø¥Ã¥À¥Õ¥¡¥¤¥ë¤Ç SOMAXCONN = 5 ¤È¤Ê¤Ã¤Æ¤¤¤Æ¡¢FreeBSD/Linux 
¤Ç¤Ï SOMAXCONN = 128 ¤È¤Ê¤Ã¤Æ¤¤¤ë¤Î¤ò 7.1.3 ¤Þ¤Ç¤Î PostgreSQL ¤Ç°Ê²¼¤Î¤è¤¦¤Ë¤·
¤Æ¡¢listen ¤Î¥Ð¥Ã¥¯¥í¥°¿ô¤Ë¤·¤Æ¤¤¤ë¤Î¤¬¸¶°ø¤Ç¤¹¡£

    #ifndef SOMAXCONN
    #define SOMAXCONN 5             /* from Linux listen(2) man page */
    #endif

  Solaris ¤Ç listen ¤Î¥Ð¥Ã¥¯¥í¥°¤òÊÑ¤¨¤Æregression ¤¹¤ë¤È°Ê²¼¤Î¤è¤¦¤Ë¤Ê¤ê¤Þ¤¹¡£

    listen() ¤Î  5 ²ó¤Î¥ê¥°¥ì¥Ã¥·¥ç¥ó
    ¥Ð¥Ã¥¯¥í¥°   ¤Î¥¨¥é¡¼¹ç·×
    ===========  ====================
      5          23
      6          15
      7           5
      8           3
      9           0
     10           0
     16           0
     32           0
     64           0
    128           0

  Solaris ¤Ç¤Ï¡¢¤³¤ÎÄê¿ô¤Î¼ÂºÝ¤ÎÃÍ¤Ï 128 ¤Ê¤Î¤Ç¡¢listen ¤Ë 128 ¤ò»ØÄê¤¹¤ì¤Ð 
UNIX ¥É¥á¥¤¥ó¤Ç regression ¤¬ÄÌ¤ê¤Þ¤¹¡£

  Linux ¤Ç¤â SOMAXCONN ¤ò 5 ¤Ë¤·¤Æ PostgreSQL ¤òºîÀ®¤¹¤ë¤È regression ¤ÏÉÔÄê¤Ê
°Û¾ï½ªÎ»¤ò¤·¤Þ¤¹¡£

  ¥½¡¼¥¹¥³¡¼¥É¤òÄ¾¤¹¤Ê¤é¤Ð¡¢src/backend/libpq/pqcomm.c ¤Î SOMAXCONN ¤È listen 
¤ÎÊÕ¤ê¤ò PostgreSQL 7.2¦Â ¤Ê¤¤¤·¥«¥ì¥ó¥È¤Î¥³¡¼¥É¤Î¤è¤¦¤Ë½¤Àµ¤¹¤ë¤Î¤¬°ìÈÖ¤Ç¤¹¡£

;;; ¤½¤·¤Æ¡¢configure »þ¤ËÌÀ¼¨Åª¤Ë --with-maxbackends=16 ¤Ê¤É¤Èµ­½Ò¤·¤Ê¤¤
;;; ¤È¡¢regresssion ¥Æ¥¹¥È¤ÎºÝ¤Ë¤Ï¥Ç¥Õ¥©¥ë¥È¤Î32¤Ç¹Ô¤ï¤ì¤ë¤Î¤Ç¡¢°Ê²¼¤Î¥¨¥é¡¼
;;; ¤¬½Ð¤Þ¤¹¡£
;;; 
;;; ÂÐ½èÊýË¡¤È¤·¤Æ¤Ï¡¢¾åµ­¤Î maxbackends ¤Î¥ª¥×¥·¥ç¥ó¤ò¤Ä¤±¤ÆºÆÅÙ 
;;; configure ¤·¡¢make ¤·Ä¾¤¹¤«¡¢src/test/regress °Ê²¼¤Î pg_regress.sh ¤¢
;;; ¤¿¤ê¤Î postmaster_options ¤Ë "-N 16" ¤òÄÉ²Ã¤¹¤ë¤ÈÎÉ¤¤¤È»×¤¤¤Þ¤¹¡£
;;; pg_regress.sh ¤«¤É¤¦¤«¤Ï¤Á¤ç¤Ã¤ÈÉÔÌÀ¤Ç¤¹¤Î¤Ç¡¢Makefile ¤Ê¤É¤ò³ÎÇ§¤·¤Æ
;;; ²¼¤µ¤¤¡£
;;; 
;;; &gt; 
;;; &gt; &gt; &gt; (Î¬¡Ë
;;; &gt; &gt; &gt; ============== creating temporary installation        ==============
;;; &gt; &gt; &gt; ============== initializing database system           ==============
;;; &gt; &gt; &gt; ============== starting postmaster                    ==============
;;; &gt; &gt; &gt; running on port 65432 with pid 8242
;;; &gt; &gt; &gt; ============== creating database "regression"         ==============
;;; &gt; &gt; &gt; psql: connectDBStart() -- connect() failed: No such file or directory
;;; &gt; &gt; &gt; 	Is the postmaster running locally
;;; &gt; &gt; &gt; 	and accepting connections on Unix socket '/tmp/.s.PGSQL.65432'?
;;; &gt; &gt; &gt; createdb: database creation failed
;;; &gt; &gt; &gt; pg_regress: createdb failed
;;; &gt; &gt; &gt; ./pg_regress: kill: no such process
;;; &gt; &gt; &gt; make[2]: *** [check] Error 2
;;; &gt; &gt; &gt; rm regress.o
;;; &gt; &gt; &gt; make[2]: Leaving directory `/opt/local/src/postgresql-7.1.2/src/test/regress'
;;; &gt; &gt; &gt; make[1]: *** [check] Error 2
;;; &gt; &gt; &gt; make[1]: Leaving directory `/opt/local/src/postgresql-7.1.2/src/test'
;;; &gt; &gt; &gt; make: *** [check] Error 2
;;; &gt; &gt; &gt; 
;;; &gt; &gt; &gt; ¤È½ÐÎÏ¤µ¤ì½ªÎ»¤·¤Æ¤·¤Þ¤¤¤Þ¤·¤¿¡£
;;; &gt; &gt; &gt; 
;;; &gt; &gt; 


Kenji Sugita
sugita@sra.co.jp
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00245" HREF="msg00245.html">[pgsql-jp 23829] Re: Solaris8 ¤Ø¤ÎPostgreSQL7.1.2¥¤¥ó¥¹¥È¡¼¥ë»þ¤Î¥¨¥é¡¼¤Ë¤Ä¤¤¤Æ</A></STRONG>
<UL><LI><EM>From:</EM> sugita@sra.co.jp</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00235" HREF="msg00235.html">[pgsql-jp 23819] Re: Solaris8 ¤Ø¤ÎPostgreSQL7.1.2 ¥¤¥ó¥¹¥È¡¼¥ë»þ¤Î¥¨¥é¡¼¤Ë¤Ä¤¤¤Æ</A></STRONG>
<UL><LI><EM>From:</EM> Ishikawa Toshiyuki &lt;tosiyuki@gol.com&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00239" HREF="msg00239.html">[pgsql-jp 23823] Re: Solaris8 ¤Ø¤ÎPostgreSQL7.1.2¥¤¥ó¥¹¥È¡¼¥ë»þ¤Î¥¨¥é¡¼¤Ë¤Ä¤¤¤Æ</A></STRONG>
<UL><LI><EM>From:</EM> Hiroshi KURODA&lt;cafekuro@noa.sipeb.aoyama.ac.jp&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00243" HREF="msg00243.html">[pgsql-jp 23827] Re: Solaris8 ¤Ø¤ÎPostgreSQL7.1.2¥¤¥ó¥¹¥È¡¼¥ë»þ¤Î¥¨¥é¡¼¤Ë¤Ä¤¤¤Æ</A></STRONG>
<UL><LI><EM>From:</EM> Hirofumi ETO &lt;etoh@bunroku.cc.saga-u.ac.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00243.html">[pgsql-jp 23827] Re: Solaris8 ¤Ø¤ÎPostgreSQL7.1.2¥¤¥ó¥¹¥È¡¼¥ë»þ¤Î¥¨¥é¡¼¤Ë¤Ä¤¤¤Æ</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00245.html">[pgsql-jp 23829] Re: Solaris8 ¤Ø¤ÎPostgreSQL7.1.2¥¤¥ó¥¹¥È¡¼¥ë»þ¤Î¥¨¥é¡¼¤Ë¤Ä¤¤¤Æ</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00243.html">[pgsql-jp 23827] Re: Solaris8 ¤Ø¤ÎPostgreSQL7.1.2¥¤¥ó¥¹¥È¡¼¥ë»þ¤Î¥¨¥é¡¼¤Ë¤Ä¤¤¤Æ</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00245.html">[pgsql-jp 23829] Re: Solaris8 ¤Ø¤ÎPostgreSQL7.1.2¥¤¥ó¥¹¥È¡¼¥ë»þ¤Î¥¨¥é¡¼¤Ë¤Ä¤¤¤Æ</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00244"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00244"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
