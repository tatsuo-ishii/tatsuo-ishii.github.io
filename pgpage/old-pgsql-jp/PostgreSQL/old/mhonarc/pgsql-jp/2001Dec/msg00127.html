<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 24017] function 内にテーブル名を入れるにはどうすればいいのでしょうか？ -->
<!--X-From: nakatani <nakatani@mx.cable&#45;net.ne.jp> -->
<!--X-Date: Sat, 08 Dec 2001 00:44:10 +0900 -->
<!--X-Message-Id: 2C17F360369A0nakatani@mx.cable.net.ne.jp -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 20011203225308.62f93ad0.nobuakit@rose.ocn.ne.jp -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 24017] function 内にテーブル名を入れるにはどうすればいいのでし </TITLE>
<LINK REV="made" HREF="mailto:nakatani@mx.cable-net.ne.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00126.html">Date Prev</A>][<A HREF="msg00128.html">Date Next</A>][<A HREF="msg00066.html">Thread Prev</A>][<A HREF="msg00142.html">Thread Next</A>][<A HREF="index.html#00127">Date Index</A>][<A HREF="threads.html#00127">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 24017] function 内にテーブル名を入れるにはどうすればいいのでしょうか？</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: nakatani &lt;<A HREF="mailto:nakatani@mx.cable-net.ne.jp">nakatani@mx.cable-net.ne.jp</A>&gt;</LI>
<LI><em>Date</em>: Sat, 08 Dec 2001 00:44:10 +0900</LI>
<LI><em>References</em>: &lt;<A HREF="msg00036.html">20011203225308.62f93ad0.nobuakit@rose.ocn.ne.jp</A>&gt;</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
はじめまして、中谷誠和と申します。
ちょっとわからないのでお伺いしたいことがあるのですが。

アクセス解析のスクリプトを作成する際に躓いたことで、
create function select_count(timestamp,interval,char,char)returns 
integer as 'select count(*) from $3 where time &gt;$1 and time &lt;$1+$2 and 
url=$4 group by url' language 'sql';
という構文で、テーブル$3の時間$1から、$2の時間内のURL$4のデータの数を
カウントして返すという関数を作ろうとしたのですが、
parser:parse error at or near "$3"
と返されます。

で、この$3の部分を直に目的とするテーブル名に変えてやれば関数はでき、
望むどおりの動作をしています。
だから、恐らくこの型指定が間違っているのではないかと思うのですが、
charやtext,nameはもちろん、わかる範囲の全部のデータ型で試してみたところ、
やはりこの3つ目の引数のところで躓くようなのです。

一応個別にテーブルごとに関数を作ってやれば行けるのですが、できることなら、
このfromの後に引数を使うためにはデータ型をどうすればいいのかを
教えていただきたいのですが、、、。
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00184" HREF="msg00184.html">[pgsql-jp 24074] pl/pgsql のインストールのマニュアルの件ですが。</A></STRONG>
<UL><LI><EM>From:</EM> nakatani &lt;nakatani@mx.cable-net.ne.jp&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00142" HREF="msg00142.html">[pgsql-jp 24032] Re: function  内にテーブル名を入れるにはどうすればいいのでしょうか？</A></STRONG>
<UL><LI><EM>From:</EM> Jun Kitamura &lt;kitamura@assiette.net&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00036" HREF="msg00036.html">[pgsql-jp 23926] 更新はシリアルに，参照は並列実行可能なロック種別は</A></STRONG>
<UL><LI><EM>From:</EM> Nobuaki Tanaka &lt;nobuakit@rose.ocn.ne.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00126.html">[pgsql-jp 24016] Re: シリアル型で0を使用しても問題ないですか？</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00128.html">[pgsql-jp 24018] The Database that Bill Gates does not want you to see !!!</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00066.html">[pgsql-jp 23956] Re: 更新はシリアルに，参照は並列実行可能なロック種別は</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00142.html">[pgsql-jp 24032] Re: function  内にテーブル名を入れるにはどうすればいいのでしょうか？</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00127"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00127"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
