<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 2459] Re: freeze on running regression test -->
<!--X-From: HIROSE&#45;31&#45;Masaaki <hirose31@t3.rim.or.jp> -->
<!--X-Date: Tue, 9 Sep 1997 16:57:03 +0900 -->
<!--X-Message-Id: 199709090754.QAA12377@mail.t3.rim.or.jp -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 199709061051.TAA21459@mail.t3.rim.or.jp -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 2459] Re: freeze on running regression test </TITLE>
<LINK REV="made" HREF="mailto:hirose31@t3.rim.or.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00031.html">Date Prev</A>][<A HREF="msg00033.html">Date Next</A>][<A HREF="msg00020.html">Thread Prev</A>][<A HREF="msg00019.html">Thread Next</A>][<A HREF="index.html#00032">Date Index</A>][<A HREF="threads.html#00032">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 2459] Re: freeze on running regression test</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: HIROSE-31-Masaaki &lt;<A HREF="mailto:hirose31@t3.rim.or.jp">hirose31@t3.rim.or.jp</A>&gt;</LI>
<LI><em>Date</em>: Tue, 9 Sep 1997 16:57:03 +0900</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>

自己リプライです。

自分が 97.9.6ごろに書いた
「[pgsql-jp 2447] freeze on running regression test (Linux/S」
のメールを引用します

&gt; 初めて PostgreSQL をインストールしたのですが、どうも挙動がおかしい
&gt; のでメールしました。
snip
&gt; 症状は、
&gt; ●regression test をすると、途中で止まってしまう。

その後、6.1、6.1.1 で jp.patch を当てる/当てない、gcc のオプション
をいろいろ変えてみるなど試したのですが、結果は同じでした。

# なぜか make bench.out.perquery はあっさりこなしくれました。

postmaster が吐くメッセージはこんな感じでして、
./postmaster: reaping dead processes...
./postmaster: CleanupProc: pid 8147 exited with status 11
./postmaster: CleanupProc: reinitializing shared memory and semaphores
./postmaster: ServerLoop: connect on 4
./postmaster: BackendStartup: pid 8149 user postgres db testn socket 4
./postmaster: ServerLoop:               done with 4

FAQ-Linux に

3.2)    I run postmaster and after that system says 'Bad system call(Core
        dumped)'

        This indicates that you have not compiled shared memory support
        into your kernel. You need to recompile the Linux kernel to add this
        feature.

と書いてあったのですが、shared memory support とは具体的に make config
でのどの項目なのでしょうか。

関係あるかわかりませんが、

CONFIG_SYSVIPC=y

にはなってます。

また、一度 postmaster が core を吐いたので strings で覗いてみたのです
が、ちんぷんかんぷんでした。(^^;

インストールはMLのページの記事を参考にしたのですが、Linux-ELF では
他になにか必要なのでしょうか。

# ドつぼにハマってます…

それでは










---
ひろせまさあき
 E-mail: hirose31@t3.rim.or.jp
 WWW   : <A HREF="http://www.t3.rim.or.jp/~hirose31/">http://www.t3.rim.or.jp/~hirose31/</A>
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00020" HREF="msg00020.html">[pgsql-jp 2447] freeze on running regression test (Linux/Slackware)</A></STRONG>
<UL><LI><EM>From:</EM> HIROSE-31-Masaaki &lt;hirose31@t3.rim.or.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00031.html">[pgsql-jp 2458] self introduction</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00033.html">[pgsql-jp 2460] Re: freeze on running regression test</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00020.html">[pgsql-jp 2447] freeze on running regression test (Linux/Slackware)</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00019.html">[pgsql-jp 2446] PostgreSQL ruby module</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00032"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00032"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
