<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 10558] Re: pgbench -->
<!--X-From: Tatsuo Ishii <t&#45;ishii@sra.co.jp> -->
<!--X-Date: Sat, 04 Sep 1999 23:27:17 +0900 -->
<!--X-Message-Id: 199909041427.XAA00800@ext16.sra.co.jp -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 37D10257.C0752BC8@mb.kcom.ne.jp -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 10558] Re: pgbench </TITLE>
<LINK REV="made" HREF="mailto:t-ishii@sra.co.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00055.html">Date Prev</A>][<A HREF="msg00057.html">Date Next</A>][<A HREF="msg00055.html">Thread Prev</A>][<A HREF="msg00058.html">Thread Next</A>][<A HREF="index.html#00056">Date Index</A>][<A HREF="threads.html#00056">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 10558] Re: pgbench</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: Tatsuo Ishii &lt;<A HREF="mailto:t-ishii@sra.co.jp">t-ishii@sra.co.jp</A>&gt;</LI>
<LI><em>Date</em>: Sat, 04 Sep 1999 23:27:17 +0900</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
石井です。

&gt; こんばんは、吾一です。
&gt; 
&gt; 朝、起きてから、自分でも少し挑戦してみようと思ったら既に全て
&gt; 修正されておりました。ありがとうございます。

どういたしまして。

&gt; とんでもないです。ベンチマークは欲しかったので、感謝しております。
&gt; シーラカンス本を読む限り、Wisconsin Benchmarkは歴史的文化遺産としか思え
&gt; なかったので。:-)

その通りですね。でも、実はpgbenchが参考にしているTPC-B自体もすでに
obsoleteだったりします:-)www.tpc.orgに行ってTPC-Cの仕様書を眺めてみた
のですが、結構複雑ですぐには実装できそうもありませんでした。

&gt; 自分で単純なＳＱＬ文を発行する物を作成し、バックグラウンドで同時に実行す
&gt; ると言う
&gt; 原始的な事をやっておりました。
&gt; 非同期関数を使っている所など、とても参考になります。

何を隠そう私も実際に非同期関数を使うのは始めてです:-)

&gt; これからもドンドン使わせて頂きます。

よろしくお願いします。

&gt; &gt; これは気付いていましたが、チェックが面倒で放ってありました。御指摘があっ
&gt; &gt; た以上、直さなければ:-)利用可能なファイルディスクリプタ数を調べ、指定
&gt; &gt; 同時接続数をこなせそうもなければエラーにすることにします。
&gt; 
&gt; なんか催促してしまっているようで申し訳ないです。

ファイルディスクリプタ数のチェックを実装するに当たり、一応 
Linux/FreeBSD/Solarisあたりは対応できるようにconfigureを仕込んだつもり
ですが、うまくコンパイルできないプラットフォームがあったら教えて下さい。

&gt; 他のホストからベンチを実行した場合、
&gt; 
&gt; Connection to database 'goichi' failed.
&gt; connectDB(): getprotobyname failed
&gt; 
&gt; と、謎のメッセージが出るのです。
&gt; 私はこれでしばらく途方に暮れておりました。

確かに謎ですね:-)

&gt; 今のところ、Ｓオプションや，Ｂオプションの数値がどの程度パフォーマンスに
&gt; 影響するのかなどを調べております。
&gt; でも、一番重要なのは「データベースの設計」だとわかりました。
&gt; indexがあそこまでパフォーマンスに貢献しているとは思いませんでした。

後は性能に影響するとしたらtransactionのisolation modeですかね。

&gt; Sugitaさんの結果を拝見しましたが、
&gt; クライアント数が１とはいえ、
&gt; 
&gt; ＞ ====  -o '-F'  ====
&gt; ＞ number of clients: 1
&gt; ＞ number of transactions per client: 100
&gt; ＞ number of transactions actually processed: 100/100
&gt; ＞ tps = 104.012598(including connections establishing)
&gt; ＞ tps = 107.109615(excluding connections establishing)
&gt; 
&gt; ３桁台と言うのは凄いですね。
&gt; ＨＤＤが効いているのでしょうか。

最近のPCならこんなもんでしょう。ちなみに当方のLinux RedHat 6.0(2.2.5
smp kernel)/Pentium 500MHz x 2/512MB/Ultra Wide SCSI/RAID5? では、
150-200tps位の値が出ています。500tps以上の値を達成した人いませんか？
---
Tatsuo Ishii

</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00087" HREF="msg00087.html">[pgsql-jp 10589] Re: pgbench</A></STRONG>
<UL><LI><EM>From:</EM> Tatsuo Ishii &lt;t-ishii@sra.co.jp&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00058" HREF="msg00058.html">[pgsql-jp 10560] PostgreSQL+Apache+PHP3+PHP3日本語Patchでの最適な構成は？</A></STRONG>
<UL><LI><EM>From:</EM> kouichi matsumoto &lt;maykeart@din.or.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00055" HREF="msg00055.html">[pgsql-jp 10557] Re: pgbench</A></STRONG>
<UL><LI><EM>From:</EM> harada goichi &lt;goichi@mb.kcom.ne.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00055.html">[pgsql-jp 10557] Re: pgbench</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00057.html">[pgsql-jp 10559] libpgtcl のインストールでつまずいています</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00055.html">[pgsql-jp 10557] Re: pgbench</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00058.html">[pgsql-jp 10560] PostgreSQL+Apache+PHP3+PHP3日本語Patchでの最適な構成は？</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00056"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00056"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
