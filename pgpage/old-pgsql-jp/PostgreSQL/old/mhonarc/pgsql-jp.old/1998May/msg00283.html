<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 4221] Re: postmaster is dead -->
<!--X-From: NAKAJIMA Mutsuki <muc@tg&#45;inet.co.jp> -->
<!--X-Date: Wed, 27 May 1998 10:23:01 +0900 -->
<!--X-Message-Id: 199805270123.KAA00700@g3.tg&#45;inet.co.jp -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 9805260747.AA00274@mebius.air.akita&#45;u.ac.jp -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 4221] Re: postmaster is dead </TITLE>
<LINK REV="made" HREF="mailto:muc@tg-inet.co.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00282.html">Date Prev</A>][<A HREF="msg00284.html">Date Next</A>][<A HREF="msg00279.html">Thread Prev</A>][<A HREF="msg00296.html">Thread Next</A>][<A HREF="index.html#00283">Date Index</A>][<A HREF="threads.html#00283">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 4221] Re: postmaster is dead</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: NAKAJIMA Mutsuki &lt;<A HREF="mailto:muc@tg-inet.co.jp">muc@tg-inet.co.jp</A>&gt;</LI>
<LI><em>Date</em>: Wed, 27 May 1998 10:23:01 +0900</LI>
<LI><em>References</em>: &lt;<A HREF="msg00279.html">9805260747.AA00274@mebius.air.akita-u.ac.jp</A>&gt;</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
中嶋です。

From: Yoshio Funaki &lt;yoshio@Air.akita-u.ac.jp&gt;
&gt; ということで手持ちの同じく書籍のデータにqueryをかけてみました。
&gt; タプル数は約２９万です。
&gt; タプルの構造が違いますので参考になるかどうか分かりませんけが、
&gt; とりあえずselectに数十秒、表示にはものすごい時間がかかりましたが
&gt; 全部表示されました（と思います　^^;）
&gt; 
&gt; 当方の環境は
&gt; FreeBSD 3.0 current(971208?)
&gt; Fujitsu FMVPro (Pen2 300MHz*2)
&gt; 192MB memory
&gt; 20GB UW SCSI RAID5 arry
&gt; 4.3GB UW SCSI HDD
&gt; Adaptec 2940UW
&gt; という感じです。メモリー、HDDがたっぷりあるおかげで動いている
&gt; とも思われますが、このMLにも何度か投稿していますように
&gt; select ...... in (....)とかやるとさすがに遅いです。
&gt; 最悪、シェアードメモリーの使い果たし（石井さんのご指摘）
&gt; によるのか、だんまりモードにはいることもあります。
&gt; ということで、selectできるタプル数の制限は事実上
&gt; 無いのかなぁと思います。

私の環境は、FreeBSD 2.2.2 Libretto 50CT, 32MB memory, 64MB swap
程度です。さすがに船木さんのハードウェア環境とでは差が大きすぎ
ますので、この手持ちの環境では難しいのでしょうか。いづれにしても、
エラーが帰ってきているので、最悪の事態は免れています。

しかし、負荷の大きなリクエストが同時に発生した場合では、いくら
ハードウェアリソースをたっぷりもったサーバとはいえ、メモリに依存
している限りは、この現象が発生してしまうような気がします。

&gt; ＃ちなみにこのテーブルは、元テーブルを分割して作成したもので
&gt; ＃元テーブルのタプル数は約１０００万ありました。
&gt; ＃selectすると数十分たっても結果が帰ってこなかった（だんまりモード）
&gt; ＃のですが、postmasterは落ちてなかったように記憶しています。

postmaster事態は落ちません。バックエンドは、多分各々のリクエスト
に対して専用のプロセスを生成して対応させていると思うのですが。

&gt; ということで、何かの参考になれば・・・・

ありがとうございました。いづれにしても、30万タプルに近い規模で
ちゃんと動くということですよね。FreeBSD 2.2.2というのもそんなに
新しいバージョンではないので、プラットフォームも含めて考えて
みます。FreeBSD 3.0(current)は、安定しているのでしょうか?

--
NAKAJIMA Mutsuki(muc@tg-inet.co.jp, <A HREF="http://www.tg-inet.co.jp/~muc">http://www.tg-inet.co.jp/~muc</A>)
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00296" HREF="msg00296.html">[pgsql-jp 4234] Re of re: postmaster is dead</A></STRONG>
<UL><LI><EM>From:</EM> Yoshio Funaki &lt;yoshio@Air.akita-u.ac.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00279" HREF="msg00279.html">[pgsql-jp 4217] Re:postmaster is dead</A></STRONG>
<UL><LI><EM>From:</EM> Yoshio Funaki &lt;yoshio@Air.akita-u.ac.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00282.html">[pgsql-jp 4220] Re: Apache が落ちてもcore が出ない</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00284.html">[pgsql-jp 4222] Re: RTreeを用いたインデックスの生成</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00279.html">[pgsql-jp 4217] Re:postmaster is dead</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00296.html">[pgsql-jp 4234] Re of re: postmaster is dead</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00283"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00283"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
