<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 14006] Re: [Q] compatibility between 6.5.3 front and7.0b5 back -->
<!--X-From: Yoshio Funaki <yoshio@apl.pref.akita.jp> -->
<!--X-Date: Tue, 18 Apr 2000 08:47:57 +0900 -->
<!--X-Message-Id: 10004172347.AA00755@mebius.apl.pref.akita.jp -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 20000417215656F.t&#45;ishii@sra.co.jp -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 14006] Re: [Q] compatibility between 6.5.3 front and7.0b5 back </TITLE>
<LINK REV="made" HREF="mailto:yoshio@apl.pref.akita.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00302.html">Date Prev</A>][<A HREF="msg00304.html">Date Next</A>][<A HREF="msg00295.html">Thread Prev</A>][<A HREF="msg00281.html">Thread Next</A>][<A HREF="index.html#00303">Date Index</A>][<A HREF="threads.html#00303">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 14006] Re: [Q] compatibility between 6.5.3 front and7.0b5 back</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: Yoshio Funaki &lt;<A HREF="mailto:yoshio@apl.pref.akita.jp">yoshio@apl.pref.akita.jp</A>&gt;</LI>
<LI><em>Date</em>: Tue, 18 Apr 2000 08:47:57 +0900</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
お世話になっております。船木＠秋田県立図書館です。
&gt;石井です。
（ご挨拶モード）
新年度になって、またまた新しいサーバを立ち上げる羽目になりました。
本年度も石井さんはじめこのＭＬの方々にはにはおんぶにだっこで
お願いすると存じます。

&gt;&gt; &gt;環境
&gt;&gt; &gt;１）うまく動いている方
&gt;&gt; &gt;FreeBSD3.3R+PostgreSQL6.5.3 --&gt; FreeBSD3.3R+Apache1.3.9+php3.0.12-i18n
&gt;&gt; &gt;PostgreSQLは --with-mb
&gt;&gt; &gt;２）変な動き
&gt;&gt; &gt;FreeBSD4.0R+PostgreSQL7.0beta5 --&gt;FreeBSD3.3R+Apache1.3.9+php3.0.12-i18n
&gt;&gt; &gt;PostgreSQLは --enable-multibyte（変わったんですね）
&gt;&gt; &gt;検索の流れ：
&gt;&gt; &gt;検索画面（パラメータ入力）-&gt;SQL生成＆検索-&gt;検索結果表示
&gt;&gt; &gt;
&gt;&gt; 
&gt;&gt; うだうだしててもしょうがないので、とりあえずテスト環境で
&gt;&gt; apacheを1.3.9から1.3.12にあげて、PostgreSQL7.0beta5+php3.0.15-i18n-jaで
&gt;&gt; 実験したところ、下記の症状は無くなりました。
&gt;
&gt;うーむ、これを見る限り、phpのバージョンを上げたのが功をそうしたようで
&gt;すが、なぜ? もしかし php のコンテンツがSJISだとか。あるいはphp3.iniの
&gt;設定の問題?
apache1.3.9+php-3.0.12を作成するときには6.5.3のライブラリをリンクして
作成していたので、個人的には7.0のバックエンドとの非互換性の問題かと
考えていたんで、subjectのような質問をしたわけですが・・・・・
ということで今回は7.0のライブラリを使ってphp-3.0.15+apache1.3.12を
作ってみました。
ちなみに、php3.iniとかsql関係、php3スクリプト関係は、そのまま移行なので
これに関する限り環境は変わってません。
(snip)
&gt;
&gt;「秋田の歴史」が文字化けして検索条件に使われてるような気がします。
&gt;postmasterを -d 3 付で起動してSQL文をphpから渡って来たSQL文を見てみて
&gt;は如何でしょう?
環境を再構築してしまったので、再現しないとは存じますがやってみます。
(snip)
&gt;&gt; explainしてみると、indexが使われず、seq scanになってたんですが、
&gt;&gt; vacuum analyzeすることによって、無事index scanするようになりました。
&gt;&gt; 6.5.3では、とりあえずvacuumするだけでindexが使われましたが、
&gt;&gt; より厳密になったのでしょうね。スクリプト書き換えなきゃ！
&gt;
&gt;6.5.3の時もそういう経験をしましたよ。
あら？私の方ではそんなことはなかったような？？？？
一括登録のスクリプト（自作）を見てもvacuumしか書いてないしぃ？
でも、基本はvacuum analyzeかもしれませんね。
&gt;
&gt;&gt; ＃　人柱モードとしてはPostgreSQL7.0+apache2.01a+php4+FreeBSD4.0R
&gt;&gt; ＃　なんてのがよいかと思ってますが・・・　^^;
&gt;
&gt;素晴らしい。人柱の鏡です:-)
&gt;--
もうちょっとで本格稼働する環境がFreeBSD4.0R+PostgreSQL7.0(beta5?)
+php3.0.15-i18n-ja+apache1.3.12なのですが、一段落したら人柱がんばりまっす。

秋田県立図書館　船木　喜夫　yoshio@apl.pref.akita.jp
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00295" HREF="msg00295.html">[pgsql-jp 13998] Re: [Q] compatibility between 6.5.3 front and7.0b5 back</A></STRONG>
<UL><LI><EM>From:</EM> Tatsuo Ishii &lt;t-ishii@sra.co.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00302.html">[pgsql-jp 14005] Re: Pgモジュールをレンタルサーバで使用する方法</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00304.html">[pgsql-jp 14007] RE: データベースのバックアップとった後、リストアするときの元のデータベースの状態について！！</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00295.html">[pgsql-jp 13998] Re: [Q] compatibility between 6.5.3 front and7.0b5 back</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00281.html">[pgsql-jp 13984] テーブル間のリンクについて</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00303"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00303"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
