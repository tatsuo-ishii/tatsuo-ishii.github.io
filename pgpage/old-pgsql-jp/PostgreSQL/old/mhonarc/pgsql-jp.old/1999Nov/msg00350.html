<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 11778] libpqを用いたプログラミング -->
<!--X-From: 木村 勝人<kimura@axio.co.jp> -->
<!--X-Date: Mon, 15 Nov 1999 16:24:12 +0900 -->
<!--X-Message-Id: 00e701bf2f3a$6a156960$57b6f6ca@axio.co.jp -->
<!--X-ContentType: text/plain -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 11778] libpqを用いたプログラミング </TITLE>
<LINK REV="made" HREF="mailto:kimura@axio.co.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00349.html">Date Prev</A>][<A HREF="msg00351.html">Date Next</A>][<A HREF="msg00362.html">Thread Prev</A>][<A HREF="msg00351.html">Thread Next</A>][<A HREF="index.html#00350">Date Index</A>][<A HREF="threads.html#00350">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 11778] libpqを用いたプログラミング</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: 木村 勝人&lt;<A HREF="mailto:kimura@axio.co.jp">kimura@axio.co.jp</A>&gt;</LI>
<LI><em>Date</em>: Mon, 15 Nov 1999 16:24:12 +0900</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
おしさしぶりです、ずいぶんと前にお世話になっていた
木村と言います。このたび仕事の都合上またこちらに
お世話になる事になりました。よろしくお願いします。

現在、apache+php3+PostgreSQL6.3.2+FreeBSDでWebを
構築しています。

今、自分のプログラムの形式にのっとったテキストデータ
を用意されたＤＢのテーブルに格納するものを作っています。
しかし、どうもプログラムのループ中にエラーが出てしまう
のですが、私にはどうしてもわかりません。
過去ログも当たってみたのですが、なんとなく予想したのは
１、バージョンの問題。
２、オプティマイザがメモリを使い果たす。
３、ルーチンの抜け（バグ）。
です。

ルーチンは簡単にまとめると以下のとおりです。


定義ファイル数分ループ開始

　　トランザクション（Begin)
１、各テーブルの定義ファイルを読み込む。
（ここに取得するファイル名称も書かれている。）
２、ファイルを読み込みデータを形式通りに分割する。
（各フィールドのデータ形式にのっとった形で。）
３、Select文を発行し、データの有無を調べる。
４、データが存在する場合Update、ない場合Insart文を作る。
５、上の条件に基づいたSQL文を発行しデータを格納
　　トランザクション（End）

定義ファイル数分ループ終了

起こる症状
１、ループ中にプログラムが止まる、固まる
２、Broken pipeというメッセージが出て落ちる
３、その他いろいろそのときに応じてエラーが（メモリ関連）

ちゃんとPQclearは毎回行っているのですが、、。
もしかして複数テーブルこのようなルーチンでデータを
格納するような事は無理なのでしょうか？

もし、質問する際に必要事項が抜けているようでしたら
もっと詳しく述べさせていただきますので、よろしく
お願いします。
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00353" HREF="msg00353.html">[pgsql-jp 11781] Re: ibpqを用いたプログラミング</A></STRONG>
<UL><LI><EM>From:</EM> "Hiroshi Iwamura" &lt;iwamura@bluesystems.co.jp&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00351" HREF="msg00351.html">[pgsql-jp 11779] Re: libpqを用いたプログラミング</A></STRONG>
<UL><LI><EM>From:</EM> SAKAIDA　Masaaki &lt;sakaida@psn.ne.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00349.html">[pgsql-jp 11777] Re: Re: [pgsql-jp 11772] Re: [pgsql-jp 11771] ユーザ定義関数について</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00351.html">[pgsql-jp 11779] Re: libpqを用いたプログラミング</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00362.html">[pgsql-jp 11790] Re: 初めまして、＆'date' フィールドタイプの'current' について</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00351.html">[pgsql-jp 11779] Re: libpqを用いたプログラミング</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00350"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00350"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
