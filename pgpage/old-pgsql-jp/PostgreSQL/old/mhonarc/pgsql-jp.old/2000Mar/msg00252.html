<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 13558] ApacheJServ1.0&#45;PostgreSQL6.5.3の日本語処理について -->
<!--X-From: Toshiki Fukuoka <tag@slab.sfc.keio.ac.jp> -->
<!--X-Date: Sat, 18 Mar 2000 00:07:26 +0900 -->
<!--X-Message-Id: 38D24A2E1E5.51D3TAG@4fu&#45;shi.slab.sfc.keio.ac.jp -->
<!--X-ContentType: text/plain -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 13558] ApacheJServ1.0-PostgreSQL6.5.3の日本語処理について </TITLE>
<LINK REV="made" HREF="mailto:tag@slab.sfc.keio.ac.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00250.html">Date Prev</A>][<A HREF="msg00251.html">Date Next</A>][<A HREF="msg00306.html">Thread Prev</A>][<A HREF="msg00248.html">Thread Next</A>][<A HREF="index.html#00252">Date Index</A>][<A HREF="threads.html#00252">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 13558] ApacheJServ1.0-PostgreSQL6.5.3の日本語処理について</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: Toshiki Fukuoka &lt;<A HREF="mailto:tag@slab.sfc.keio.ac.jp">tag@slab.sfc.keio.ac.jp</A>&gt;</LI>
<LI><em>Date</em>: Sat, 18 Mar 2000 00:07:26 +0900</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
はじめまして。福岡と申します。

ApacheJServ1.0 と PostgreSQL6.5.3の環境下での日本語の扱いに
ついてご教授願いたく、メールを出させていただきました。

[pgsql-jp 8312]でも同じ質問が森さんから出されていたのですが、
これに対する回答が見つけられなかったので、恐縮ですが再び質問
させていただきたいと思います。

環境：
Linux Kernel : 2.2.14
PostgreSQL   : 6.5.3 / postgresql.Driver
Java         : Java2SDK SE v1.2.2 (Blackdownではなく、Sunのバージョン）

データベースから日本語のデータを取り出し、WEBブラウザにHTMLで
返す事はうまく動いているのですが、WEBフォームからPOSTされた日
本語をデータベースに格納する事が上手くいきません。

フォームから入力された日本語をJVMにUnicodeとして渡すのには以下
の方法を用いています。

String str
   = new String(req.getParameterValues("param")[0].getBytes(),"SJIS");

これで、例えば、param が「ほげ」という入力であった場合、str.length()
の結果は正しく「２」と表示されます。つまり、POSTされたデータから
Unicodeへの変換は上手くいっているのではないかと思います。

しかし、これを

Statement st;
st.executeUpdate("insert into table values ('" + str + "')");

として、データベースに格納するとデータベースには「？？？」という文字
が格納されてしまいます。

jserv.properties で、-Duser.language=ja、及び -Dfile.encoding=EUCJIS
を試しても結果は同じでした。

どなたかよいアドバイスがありましたら教えてください。

よろしくお願いします。

--
_/_/_/_/_/-----------------------------------------------
&gt;from Toshiki Fukuoka
KEIO Univ. Saito Lab.
e-mail to: toshiki@slab.sfc.keio.ac.jp
                    or: tfuku@ma.mailbank.ne.jp
URL:   <A HREF="http://sputnik.sfc.keio.ac.jp/">http://sputnik.sfc.keio.ac.jp/</A> &lt;- Under Construction
ICQ UIN: 4354610   You can seek me NOW!!
---------------------------------------------------------
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00250.html">[pgsql-jp 13556] Re: pg_connect()のエラー &gt;&gt;できました。</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00251.html">[pgsql-jp 13557] Re: swap_pager:out of swap space</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00306.html">[pgsql-jp 13612] Re: postmaster$B&lt;+F05/F0MQ%9%/%j%W%H$K4X$7(B$B$F(B</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00248.html">[pgsql-jp 13554] Movieデータの送信</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00252"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00252"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
