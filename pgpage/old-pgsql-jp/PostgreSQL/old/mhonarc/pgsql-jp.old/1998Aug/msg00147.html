<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 5079] Re: functional index (Re: date in a month) -->
<!--X-From: t&#45;ishii@sra.co.jp -->
<!--X-Date: Fri, 14 Aug 1998 23:37:33 +0900 -->
<!--X-Message-Id: 199808141437.XAA02506@srapc451.sra.co.jp -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 199808141423.XAA07561@meshsv26.tk.mesh.ad.jp -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 5079] Re: functional index (Re: date in a month) </TITLE>
<LINK REV="made" HREF="mailto:t-ishii@sra.co.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00146.html">Date Prev</A>][<A HREF="msg00148.html">Date Next</A>][<A HREF="msg00146.html">Thread Prev</A>][<A HREF="msg00154.html">Thread Next</A>][<A HREF="index.html#00147">Date Index</A>][<A HREF="threads.html#00147">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 5079] Re: functional index (Re: date in a month)</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: <A HREF="mailto:t-ishii@sra.co.jp">t-ishii@sra.co.jp</A></LI>
<LI><em>Date</em>: Fri, 14 Aug 1998 23:37:33 +0900</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
石井です。この件ですが、サンプルパッケージを作ったので良かったら
お試し下さい。

READMEを引用しておきます。
----------------------------------------------------------------------------
functional index demo					1998/8/14 石井達夫

このサンプルプログラムは、PostgreSQL の functional index という関数の
出力結果を索引にできる機能をデモするものです。

使い方：

1. Makefile 中の

SRCDIR= /usr/local/src/pgsql/postgresql-6.3.2/src

を適当に直します。

2. make を実行します。

3. 関数 date2month を登録します。

psql -e dbname &lt; date2month.sql

dbname はデータベース名です。

4. テスト用のテーブルを作り、テストデータを登録します。

sh gen.sh dbname

5. functionnal index を作り、explain で索引が使われるかどうかチェックします。

psql -e dbname &lt; test.sql

最後の方で、以下のように "Index Scan on d1" と表示されればOKです。

----------------------------------------------------------------------------
QUERY: explain select d from d1 where date2month(d1.d) = '1998/12/1'::datetime;
NOTICE:  QUERY PLAN:

Index Scan on d1  (cost=7.00 size=100 width=4)

EXPLAIN
----------------------------------------------------------------------------
begin 644 date2month.tar.gz
M'XL(`&amp;E#U#4``^U8ZU?:2!3W*_,O],L%)P54(`E$:I"V"$A1"A:PC^UV%9(!
MLH:$38+:[OJ_[YV$EWUYSB[:?&gt;1W#DPR]SF/&gt;^],])['Y+%M&gt;:/,QGT!&lt;F)&gt;
M46`#()N5LKR5\HK(VSE$@%UE5Q%SDB(J2)9RN_D-4.[-HQ5,7:_G`&amp;QX*&lt;,=
M&amp;&lt;8W^&lt;9#YR'&lt;&gt;6CHR_5_V;M@`\-D:[&lt;AB&gt;)N+O?M]5&gt;4W&lt;7ZY_(RDK.RI&amp;R`
MN'9/OH+_^?IWVN5*O5V$S-1U,J:M]&lt;R,ZVB9R=#]S&lt;Q,;-&lt;;.@P?4[OI;%KF
M)$(,2S.G.@.:"(23BYV3'IIVOV&lt;24CYLE&amp;J=[2+R!(]GG4824O6ER$P)(=U2
MNU;M=HJPW(DT46ET3@\/ZV^3*[UI=`,U-ZJEYF&amp;]40VTSZ23A/1,4U5O]0A&lt;
M0@5L[*FC,1)QQI`:`'U&gt;@)])I%P\GUSIY_ZSRW1(,8BYZEGKX.A-Y4REM*P.
M8YS&amp;-^B,-O&lt;*R4L/.=L^T'UXBIH)T4S6LU18&amp;%OX`UMIF_SHU?X2*_&amp;_,M7:
M6FW&lt;&amp;?]9/_YE11$Q`T@\_O.*%,;_0V!S'LVQ&gt;;"G1S&amp;R[)UZANEF^E/#]`S+
MIY$*[I.N,6:PM=PQ"=Y9JG3]&gt;$V2WPD`SJMG:*"-&lt;'JW?"8H0LQ_B!60OJ)F
M9\MA'N^;6H9M`9&lt;&amp;\-BUQSM\`@1Z^M/!&gt;TE^\H%WW&lt;!E@6"K0Y`[SOB?APH3
MO@\%WP5'FWQ,O"ZU*Z5N*?'X,LWU)7=\)WP.)'7J/U47)-2%0B:S$@'/-C*\
MJ+0[/W%F=')FBYLY\YRII&lt;TE=_3DC&amp;7J6`EL\/7F'QCOG^/K\1]DS'79N"O^
M93&amp;_B/^\C,]X"LSFPOA_"%3:K1,X/&amp;V6N_56&lt;Z7:SH.(E-O54K?Z;182:5&gt;[
MI^UF9Q$8)%+J0'Q625=VU;)^QDFD46K63DNU*L2U."G\"P+E/XJ5^/&gt;8Z_$C
MT]IMW!G_&gt;#GDYW])4;+YO%__924?QO]#0'?L"1B6SJY!E_RV0#2'X:ZXW0M8
MEW4)IJYA#:'O.8Q!8C45))=UT9ZXF#@N&gt;]IT.D:9`F'7$[-G6.`RDVD&gt;%NR!
M8W,*7(V8PVYE%"FM\QH&lt;E_;VGF0D.2/%576N.,P2]X"5^!\R*^V.[L$&amp;QO]W
MO_]@M9_?_T59P6=)W@W/_P^#S2AD^H:5&lt;4?$&amp;,![H)N0,CV0X$/!&amp;S'+/WHS
M;63C3&lt;#M#9D*P2X!O6_UQBP6T*\-E"`#@U0.BE0B9()5A%^:4QK$_`3C]?HF
M!KH4`UHYN$6&gt;Y9HY`R:5X`H1&lt;!+-\HJH\&amp;ID(%DENDTB@3=X&amp;6&amp;.ASG*L[G8
M9&lt;^&lt;,C&gt;1B%OVU4K*@&amp;V(`T4EJ/1C/!D0DH48B7#%YYB8G("\#=(YB00SP-]3
M0P^RH@@?2,2?ADBDCXY&gt;%$@$1ZG;%OO#'X3OXX]&gt;PK^%E?C'@U[E9?4&gt;;-Q1
M_V4QFU]^_\N*//YSN6P8_P^!`=YA/;QT]\QYO6=C.\+AEV`LPCEX1`^&gt;GXB#
M\F;]S:,$;GA\IUG:%!3!%=X(%_@;"Z)@".&gt;T%8TAQTGP):'SJL%%:1.[X`L[
MG/*"4OHX]_:9Y_-PO&lt;639BM_(3&gt;HHUZ)G^@QK=$4O5"BM2)UA)K0IWOT@O9I
M$_OWHIMS;PJHZ.@F&amp;O??I33,OT=R(^5!H)S\A2^=W$&gt;GNE.]I,&gt;5IS1/?UD8
ME=,P1B/^*)S]@[WN+6HVS0E\8'SHRQ`+V*LGK6&gt;WV.?Y,,BIL/_%1\\9@4NW
MA%IT7W@FO,/_O&lt;;3E7G(^4:%0V%/&gt;/'R%2[/(;*\%BYP*BWZ:S064`+QKSB!
M.?U6:B=$22]6[?:RS12BV/QDQWMK_HKMX%K8U,15VJ9U^IAN"R4A+I2%S/='
M/+][^'.NUIXPVCRZH;5H3#R2]W&amp;Y1ZCJF$]FK.Z[T=%Z5G`DC04[J5[&lt;3U`%
M#9OT!/E:Q[Y+"X.I-8*\.JVVWZFPMF-ML]6MEZLJ@*\83O!NK!+R^4`!$AKN
MTF(^C77)-3ZQ(N95N#)T;U3,)0FIOD7!&gt;G.]0_W1Z2E$B!`A0H0($2)$B!!K
*Q)\L%)M7`"@``.95
`
end
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00154" HREF="msg00154.html">[pgsql-jp 5086] Re: functional index (Re: date in a month)</A></STRONG>
<UL><LI><EM>From:</EM> SHIOZAKI Takehiko &lt;takehi-s@ascii.co.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00146" HREF="msg00146.html">[pgsql-jp 5078] Re: functional index (Re: date in a month)</A></STRONG>
<UL><LI><EM>From:</EM> t-ishii@sra.co.jp (Tatsuo Ishii)</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00146.html">[pgsql-jp 5078] Re: functional index (Re: date in a month)</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00148.html">[pgsql-jp 5080] Re: explicit cast</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00146.html">[pgsql-jp 5078] Re: functional index (Re: date in a month)</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00154.html">[pgsql-jp 5086] Re: functional index (Re: date in a month)</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00147"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00147"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
