<!-- MHonArc v2.1.0 -->
<!--X-Subject: [pgsql&#45;jp 8703] Re: SoftwareDesign６月号[pgimage]での質問 -->
<!--X-From: Makoto Kaga <makoto&#45;k@ascii.co.jp> -->
<!--X-Date: Sun, 06 Jun 1999 22:26:31 +0900 -->
<!--X-Message-Id: 199906061326.WAA28908@pbmail.ascii.co.jp -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 375731F8.A6E33918@kcat.zaq.ne.jp -->
<!--X-Head-End-->
<HTML>
<HEAD>
<TITLE>[pgsql-jp 8703] Re: SoftwareDesign６月号[pgimage]での質問 </TITLE>
<LINK REV="made" HREF="mailto:makoto-k@ascii.co.jp">
</HEAD>
<BODY BGCOLOR="#ffffff">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00135.html">Date Prev</A>][<A HREF="msg00138.html">Date Next</A>][<A HREF="msg00116.html">Thread Prev</A>][<A HREF="msg00147.html">Thread Next</A>][<A HREF="index.html#00137">Date Index</A>][<A HREF="threads.html#00137">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>[pgsql-jp 8703] Re: SoftwareDesign６月号[pgimage]での質問</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><em>From</em>: Makoto Kaga &lt;<A HREF="mailto:makoto-k@ascii.co.jp">makoto-k@ascii.co.jp</A>&gt;</LI>
<LI><em>Date</em>: Sun, 06 Jun 1999 22:26:31 +0900</LI>
<LI><em>References</em>: &lt;<A HREF="msg00077.html">375731F8.A6E33918@kcat.zaq.ne.jp</A>&gt;</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
加賀＠アスキーです。
# もしかしたら自己紹介以来のポストかもしれない...。今後は業務でも
# バキバキ使う予定なので、いろいろとお世話になります。

From: Kiyoharu Shimizu &lt;shimizu@kcat.zaq.ne.jp&gt;
Subject: [pgsql-jp 8643] SoftwareDesign６月号[pgimage]での質問
Date: Fri, 04 Jun 1999 10:55:04 +0900

&gt; 件名のSoftwareDesign６月号[pgimage]での質問です。
--snip--
&gt; ファイルをアップロードした時に、画像が右下のフレームに表示
&gt; されますが、これがWIN95マシンでインターネット経由(ブラウザ
&gt; はIE5)ですると、表示されるはずの画像がshow_imageと言うファ
&gt; イル名でダウンロードするダイアログが開いてしまいます。

*** pgimage.org/add_pict.php3   Sun Apr 11 19:06:08 1999
--- pgimage/add_pict.php3       Sat Jun  5 06:03:14 1999
***************
*** 59,65 ****
    /* upload されたイメージを表示 */
    print("&lt;script language=\"JavaScript\"&gt;\n");
    print("parent.frames['image'].location = ");
!   print("'show_image.php3?oid=$oid&amp;type=$userfile_type target=\"image\"'\n");
    print("&lt;/script&gt;\n");
  
  ?&gt;
--- 59,65 ----
    /* upload されたイメージを表示 */
    print("&lt;script language=\"JavaScript\"&gt;\n");
    print("parent.frames['image'].location = ");
!   print("'show_image.php3?oid=$oid&amp;type=$userfile_type'\n");
    print("&lt;/script&gt;\n");
  
  ?&gt;

とかするとどうでしょうか？

&gt; Netscape4.6jで試してみましたが、この場合、登録画像指定画面
&gt; でのローカルファイルを選択し、ファイルをアップロードした時
&gt; 点で以下のエラーがでます。
&gt; 
&gt; warning:Unable to open none in 
&gt; /usr/local/apache/htdocs/pgimage/add_pict.php3 on line 25
&gt; 
&gt; warning:PostgresSQL query failed: ERROR: parser error at or near","in
&gt; /usr/local/apache/htdocs/pgimage/add_pict.php3 on line 35

こちらでやってみたところ、Netscape Communicator 4.51[en] (日
本語版Windows NT 4.0)では、ローカルファイルのフルパスに日本
語文字列が含まれているファイルでは失敗しました。

日本語版Windows 9x/NTの「デスクトップ」にあるファイルなどは
失敗します。CGI+Perlでファイルのアップロードを実装した場合、
Microsoft Internet ExplorerでもNavigatorでも、パスに日本語に
含まれていても正常にファイルは転送できているので、PHP側の問
題のような気がします。

なぜ、IEだとOKでNavigatorではダメなのかいまいちよくわかりま
せんが。

-- 
加賀誠人               ：株式会社アスキー 日刊アスキー
makoto-k@project92.com ：makoto-k@ascii.co.jp
<A HREF="http://project92.com/">http://project92.com/</A>  ：<A HREF="http://www.linux24.com/">http://www.linux24.com/</A>
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00147" HREF="msg00147.html">[pgsql-jp 8713] Re: SoftwareDesign６月号[pgimage]での質問</A></STRONG>
<UL><LI><EM>From:</EM> Kiyoharu Shimizu &lt;shimizu@kcat.zaq.ne.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00077" HREF="msg00077.html">[pgsql-jp 8643] SoftwareDesign６月号[pgimage]での質問</A></STRONG>
<UL><LI><EM>From:</EM> Kiyoharu Shimizu &lt;shimizu@kcat.zaq.ne.jp&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00135.html">[pgsql-jp 8702] Re: Q:PostgreSQLのデータをAccessで制御可？</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00138.html">[pgsql-jp 8704] Re: PostgreSQL へはCVSのみ？</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00116.html">[pgsql-jp 8682] Re: SoftwareDesign６月号[pgimage] での質問</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00147.html">[pgsql-jp 8713] Re: SoftwareDesign６月号[pgimage]での質問</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00137"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00137"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
