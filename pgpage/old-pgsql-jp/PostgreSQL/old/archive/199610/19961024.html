<A NAME="8">
<PRE><B>
From: Tanaka Minoru &lt;green@keiken.co.jp&gt;
Date: Thu, 24 Oct 1996 19:58:16 +0900
Subject: [postgres95 900] access pg95 by mail
Message-Id: &lt;9610241058.AA06944@onbashira&gt;
</A>
</B></PRE>
<PRE>

田仲@ケイケンです。

いまさらダセーとお思いでしょうが、メールを介して postgres95 
をアクセスするようなものを検討しています。社内の共用文書を登
録しておいて、メールを通してDBから取得する、といった感じです。
メーリングリストのプログラムを使えば、似たようなことはできる
のですが、文書一覧を出す処理がとても重かったり、文書の更新な
どが面倒なので、DBの使用を考えました。

で、以下のようなことをお尋ねします。

１．上記のような機能のフリーソフトはあるでしょうか。

２．なければ pg95perl で作ろうかと思うのですが、最新版はどこ
    にあるのでしょう。

３．関係ないけど、ftp.jaist.ac.jp:/pub/dbms/postgres95 にあ
    る mkid-3.0.8.tar.gz と pg-lib-1.2.tar.gz とはなんのプロ
    グラムでしょう。

以下、余談。

遅ればせながら、postgres95-1.08.tar.gz を持ってきました。な
んせ、UUCP接続なもんですから、ftpmail で取り寄せるんです。
90Kに分けて、33通でした。最初、中ほどの3通ぐらいが届きません
で、ずいぶん焦りました。それでも他のに遅れること3時間ぐらい
で、すべて到着しました。一体、どこで道草喰っていたのかな。と
もあれ、パッケージは手に入ったので、明日インストールの予定で
す。
-
田仲 稔 (Tanaka Minoru)  （株）ケイケンエンジニアリングシステム 諏訪支社


<HR>
</PRE>
<A NAME="7">
<PRE><B>
From: Tatsuo Ishii &lt;t-ishii@sra.co.jp&gt;
Date: Thu, 24 Oct 1996 17:17:37 +0900
Subject: [postgres95 899] Re: はじめまして
Message-Id: &lt;199610240817.RAA02707@srashc.sra.co.jp&gt;
</A>
</B></PRE>
<PRE>

石井です。超ローカルネタで済みませんが、

&gt; &gt; もしかしてウチの会社のすぐそばですか？
&gt; &gt; # ウチの会社は 都筑区 茅ヶ崎南 4-16-10 です。
&gt;
&gt;SRA さんってどこでしたっけ。見たような記憶があります。ウチの会社は北部
&gt;工場前から、新横浜方面へ向かう道路の「ハローマック」の向かいの青い建物
&gt;です。

おお、あそこでしたか。

SRAは、北部工場の一つ手前、「都築ふれあいの丘」バス停に面している葛ケ
谷公園をセンター南方面に横断したとこです。マンションが建ち並ぶ住宅地の
はずれ、日産生命さんの隣ですね。CADの図研さんのとこの T 字路をまっすぐ
来たつきあたりでもあります。

&gt;＃自宅はそこから歩いて５分

うらやましい:-)
---
t-ishii@sra.co.jp	石井達夫
（株）ＳＲＡ
<HR>
</PRE>
<A NAME="6">
<PRE><B>
From: uchida@yrd.suzuki.co.jp (Uchida Hitoshi)
Date: Thu, 24 Oct 1996 14:19:47 +0900
Subject: [postgres95 898] Re: はじめまして
Message-Id: &lt;199610240519.OAA21833@tsuzuki.yrd.suzuki.co.jp&gt;
</A>
</B></PRE>
<PRE>


sakamoto@cec.co.jp (Kazuki Sakamoto) wrote at Thu, 24 Oct 96 13:42:29 JST
 &gt;  &gt;  &gt; Webブラウザ経由で ps に落す、というのは駄目ですか？
 &gt;  &gt; 
 &gt;  &gt; なるほど。ただ、ほんとは TeX 版がうれしいですねぇ。暇ができたら自分で
 &gt;  &gt; 作ろうかな。
 &gt; 
 &gt; plain2で、TeXにさくっと変換してしまうというのはどうでしょう。

やってみようかな。会社のマシンには入っていませんが、自宅のマシンには入っ
てるので、なんとかなるでしょう。


========================================================
内田　仁	スズキ株式会社	技術研究所　ＫＤグループ
(E-Mail:uchida@yrd.suzuki.co.jp)
<HR>
</PRE>
<A NAME="5">
<PRE><B>
From: kane@gb.sankyoseiki.co.jp (Hideki Kanebako)
Date: Thu, 24 Oct 1996 14:11:14 +0900
Subject: [postgres95 897] Re: はじめま して
Message-Id: &lt;199610240511.OAA00583@deskpro.gb.sankyoseiki.co.jp&gt;
</A>
</B></PRE>
<PRE>

金箱です。

&gt;内田です。

&gt;ところで、日本語版 User Manual は、http 版、TEXT 版があるようですが、
&gt;ps か TeX 版は無いのでしょうか。OnLine 版はたしかにいいのですが、紙メ
&gt;ディアがどうしても手放せない性格なものですから。

manual-jp.txt を a2ps して ps にするのはどうですか？
私はそうしています。

＃ plain2 に食わせたけど jlatex が通らなかった？？

--
Hideki Kanebako,   SANKYO SEIKI MFG. CO., LTD. NAGANO, JAPAN
PGP Key fingerprint = 81 DA FB 34 D4 43 C3 9B  31 C5 34 47 16 EE C4 EF
Office: kane@gb.sankyoseiki.co.jp
Home:   kane@kane.shimosuwa.nagano.jp
	kane@st.rim.or.jp
        gga02061@niftyserve.or.jp
<HR>
</PRE>
<A NAME="4">
<PRE><B>
From: sakamoto@cec.co.jp (Kazuki Sakamoto)
Date: Thu, 24 Oct 96 13:42:29 JST
Subject: [postgres95 896] Re: はじめまして
Message-Id: &lt;9610240442.AA11770@mugi.cec.co.jp&gt;
</A>
</B></PRE>
<PRE>

坂本＠中央電子です。

&lt;199610240423.NAA19524@tsuzuki.yrd.suzuki.co.jp&gt;の記事にて
1996年10月24日(木)、uchida@yrd.suzuki.co.jpさんの記述は:
 &gt; Tatsuo Ishii &lt;t-ishii@sra.co.jp&gt; wrote at Thu, 24 Oct 1996 13:07:48 +0900
 &gt;  &gt; おみつさんの &quot;http://www.tramp.co.jp/Postgres95/Plain/manual.html&quot; を
 &gt;  &gt; Webブラウザ経由で ps に落す、というのは駄目ですか？
 &gt; 
 &gt; なるほど。ただ、ほんとは TeX 版がうれしいですねぇ。暇ができたら自分で
 &gt; 作ろうかな。

plain2で、TeXにさくっと変換してしまうというのはどうでしょう。

plain2についての説明は、http://www.jp.opentext.com/とかで検索すれば
いくらでも出てくると思います。

sakamoto@cec.co.jp
<HR>
</PRE>
<A NAME="3">
<PRE><B>
From: uchida@yrd.suzuki.co.jp (Uchida Hitoshi)
Date: Thu, 24 Oct 1996 13:23:46 +0900
Subject: [postgres95 895] Re: はじめまして
Message-Id: &lt;199610240423.NAA19524@tsuzuki.yrd.suzuki.co.jp&gt;
</A>
</B></PRE>
<PRE>


Tatsuo Ishii &lt;t-ishii@sra.co.jp&gt; wrote at Thu, 24 Oct 1996 13:07:48 +0900
 &gt; おみつさんの &quot;http://www.tramp.co.jp/Postgres95/Plain/manual.html&quot; を
 &gt; Webブラウザ経由で ps に落す、というのは駄目ですか？

なるほど。ただ、ほんとは TeX 版がうれしいですねぇ。暇ができたら自分で
作ろうかな。

PS 版なり TeX 版きれいなマニュアルがあると、多少見栄えがいいので、
「Free の RDBMS 」と使っていることへの「ちょっとえらい人の偏見」に多少
効果があります。(^^;

 &gt; &gt;--------------------------------------
 &gt; &gt;内田  仁  (Uchida, Hitoshi)
 &gt; &gt;〒224 横浜市 都筑区 茅ヶ崎南 4-5-14
 &gt; 
 &gt; もしかしてウチの会社のすぐそばですか？
 &gt; # ウチの会社は 都筑区 茅ヶ崎南 4-16-10 です。

SRA さんってどこでしたっけ。見たような記憶があります。ウチの会社は北部
工場前から、新横浜方面へ向かう道路の「ハローマック」の向かいの青い建物
です。

＃自宅はそこから歩いて５分

========================================================
内田　仁	スズキ株式会社	技術研究所　ＫＤグループ
(E-Mail:uchida@yrd.suzuki.co.jp)
<HR>
</PRE>
<A NAME="2">
<PRE><B>
From: Tatsuo Ishii &lt;t-ishii@sra.co.jp&gt;
Date: Thu, 24 Oct 1996 13:07:48 +0900
Subject: [postgres95 894] Re: はじめまして
Message-Id: &lt;199610240407.NAA14268@srashc.sra.co.jp&gt;
</A>
</B></PRE>
<PRE>

石井です。

&gt;内田です。

&gt;ところで、日本語版 User Manual は、http 版、TEXT 版があるようですが、
&gt;ps か TeX 版は無いのでしょうか。OnLine 版はたしかにいいのですが、紙メ
&gt;ディアがどうしても手放せない性格なものですから。

おみつさんの &quot;http://www.tramp.co.jp/Postgres95/Plain/manual.html&quot; を
Webブラウザ経由で ps に落す、というのは駄目ですか？

ところで、

&gt;--------------------------------------
&gt;内田  仁  (Uchida, Hitoshi)
&gt;〒224 横浜市 都筑区 茅ヶ崎南 4-5-14

もしかしてウチの会社のすぐそばですか？
# ウチの会社は 都筑区 茅ヶ崎南 4-16-10 です。
---
t-ishii@sra.co.jp	石井達夫
（株）ＳＲＡ
<HR>
</PRE>
<A NAME="1">
<PRE><B>
From: Tatsuo Ishii &lt;t-ishii@sra.co.jp&gt;
Date: Thu, 24 Oct 1996 12:34:53 +0900
Subject: [postgres95 893] Re: search in array 
Message-Id: &lt;199610240334.MAA11937@srashc.sra.co.jp&gt;
</A>
</B></PRE>
<PRE>

石井です。

&gt;たびたびすいません、鈴木＠千葉大です。
&gt;
&gt;&gt;&gt; おみつ@Tramp です。
&gt;&gt;&gt; 
&gt;&gt;&gt; Postgres95 の配布パッケージの contrib として
&gt;&gt;&gt; 「array_iterator.c」が入っておりますが、
&gt;&gt;&gt; これこそまさにこの問題を解決してくれるものです。
&gt;&gt;&gt; # 私も前に使わせていただきました ;-)
&gt; 
&gt;実は、こういったものを使うには初めてでして...
&gt;どうぞ知恵をお貸し下さい。
&gt; 
&gt;とりあえず、FAQなどを参考にarray_iterator.cをコンパイルして
&gt;shared libraryを作ればいいということはわかったのですが...
&gt; 
&gt;当方、SunOS 4.1.3を使用しているので

ということで、ちょっと古いのですが、1.02 が sparc10/SunOS4.1.3 でちょ
うど動いているので試してみました。

&gt;gcc -fPIC -c -I（略） array_iterator.c

ちょっと長いですが、

gcc -DNAMEDATALEN=32 -DOIDNAMELEN=36 -g -DNO_ASSERT_CHECKING  \
-DPORTNAME_sparc -I -DPOSTPORT='&quot;5432&quot;'  \
-DARRAY_PATCH -DNULL_PATCH -DESCAPE_PATCH -DOPENLINK_PATCHES \
-DDEADLOCK_TIMEOUT=60 -I/usr/prj/postgres/include -fPIC  \
-I/usr/prj/postgres/src/backend \
-I/usr/prj/postgres/src/backend/include \
-I/usr/prj/postgres/src/backend/catalog \
-I/usr/prj/postgres/src/backend/utils \
-I/usr/prj/postgres/src/backend/port/sparc \
-I/usr/prj/postgres/src/backend/obj \
-c array_iterator.c

でコンパイルしました。

&gt;ld -dc -dp -Bdynamic -o array_iterator.so array_iterator.o

これは全く一緒。

&gt;として、とりあえずarray_iterator.soはできました。
&gt;これを/usr/local/postgres95/libにコピーし、
&gt;また、array_iterator.sql内のパスを適当に直して、psqlから、
&gt; 
&gt;	test=&gt; \i array_iterator.sql
&gt;
&gt;とやったところ、
&gt; 
&gt;load '/usr/local/postgres95/lib/array_iterator.so';
&gt;PQexec() -- Request was sent to backend, but backend closed the channel before
&gt;responding.  This probably means the backend terminated abnormally before or 
&gt;while processing the request.
&gt;We have lost the connection to the backend, so further processing is impossible 
&gt;とでて、
&gt; 
&gt;&gt;&gt; .... いっぱいつくってくれる
&gt;
&gt;いっぱい作ってくれないのです。?(-_-)?

うーむ、問題なく動いてしまいました。

一応ログを載せておきます。

------------------------------ cut here -------------------------------
test=&gt; \i array_iterator.sql
/*
 * SQL code
load '/usr/prj/postgres/lib/array_iterator.so';
WARN:parser: syntax error at or near &quot;/*&quot;

# なぜかエラーになりますが、どうせ必要な時に自動的にロードされるのでよ
# しとする

create function array_texteq(_text, text)
  returns bool
  as '/usr/prj/postgres/lib/array_iterator.so'
  language 'c';
CREATE
create function array_all_texteq(_text, text)
  returns bool
  as '/usr/prj/postgres/lib/array_iterator.so'
  language 'c';
CREATE
create function array_textregexeq(_text, text)
  returns bool
  as '/usr/prj/postgres/lib/array_iterator.so'
  language 'c';
CREATE
create function array_all_textregexeq(_text, text)
  returns bool
  as '/usr/prj/postgres/lib/array_iterator.so'
  language 'c';
CREATE
create operator *= (
  leftarg=_text,
  rightarg=text,
  procedure=array_texteq);
CREATE
create operator **= (
  leftarg=_text,
  rightarg=text,
  procedure=array_all_texteq);
CREATE
create operator *~ (
  leftarg=_text,
  rightarg=text,
  procedure=array_textregexeq);
CREATE
create operator **~ (
  leftarg=_text,
  rightarg=text,
  procedure=array_all_textregexeq);
CREATE
create function array_char16eq(_char16, char16)
  returns bool
  as '/usr/prj/postgres/lib/array_iterator.so'
  language 'c';
CREATE
create function array_all_char16eq(_char16, char16)
  returns bool
  as '/usr/prj/postgres/lib/array_iterator.so'
  language 'c';
CREATE
create function array_char16regexeq(_char16, text)
  returns bool
  as '/usr/prj/postgres/lib/array_iterator.so'
  language 'c';
CREATE
create function array_all_char16regexeq(_char16, text)
  returns bool
  as '/usr/prj/postgres/lib/array_iterator.so'
  language 'c';
CREATE
create operator *= (
  leftarg=_char16,
  rightarg=char16,
  procedure=array_char16eq);
CREATE
create operator **= (
  leftarg=_char16,
  rightarg=char16,
  procedure=array_all_char16eq);
CREATE
create operator *~ (
  leftarg=_char16,
  rightarg=text,
  procedure=array_char16regexeq);
CREATE
create operator **~ (
  leftarg=_char16,
  rightarg=text,
  procedure=array_all_char16regexeq);
CREATE
create function array_int4eq(_int4, int4)
  returns bool
  as '/usr/prj/postgres/lib/array_iterator.so'
  language 'c';
CREATE
create function array_all_int4eq(_int4, int4)
  returns bool
  as '/usr/prj/postgres/lib/array_iterator.so'
  language 'c';
CREATE
create function array_int4gt(_int4, int4)
  returns bool
  as '/usr/prj/postgres/lib/array_iterator.so'
  language 'c';
CREATE
create function array_all_int4gt(_int4, int4)
  returns bool
  as '/usr/prj/postgres/lib/array_iterator.so'
  language 'c';
CREATE
create operator *= (
  leftarg=_int4,
  rightarg=int4,
  procedure=array_int4eq);
CREATE
create operator **= (
  leftarg=_int4,
  rightarg=int4,
  procedure=array_all_int4eq);
CREATE
create operator *&gt; (
  leftarg=_int4,
  rightarg=int4,
  procedure=array_int4gt);
CREATE
create operator **&gt; (
  leftarg=_int4,
  rightarg=int4,
  procedure=array_all_int4gt);
CREATE

test=&gt;  CREATE TABLE sample (
test=&gt;  no int4,
test=&gt; sports char16[]
test=&gt; );
CREATE
test=&gt; INSERT INTO sample VALUES ( 1,'{&quot;baseball&quot;,&quot;tennis&quot;,&quot;basketball&quot;}');
INSERT 274263
test=&gt; INSERT INTO sample VALUES ( 2,'{&quot;football&quot;,&quot;volleyball&quot;}');
INSERT 274264
test=&gt;  INSERT INTO sample VALUES ( 3,'{&quot;handball&quot;,&quot;rugby&quot;,&quot;ski&quot;,&quot;snowboard&quot;}');
INSERT 274265
test=&gt;  select sample.no from sample where sample.sports*='tennis';
no
--
 1
(1 row)

test=&gt; select sample.no from sample where sample.sports**='tennis';
no
--
(0 rows)

test=&gt; select sample.no from sample where sample.sports*~'^[bf]';
no
--
 1
 2
(2 rows)

test=&gt; 
---
t-ishii@sra.co.jp	石井達夫
（株）ＳＲＡ
<HR>
</PRE>
<A NAME="0">
<PRE><B>
From: Tatsuo Ishii &lt;t-ishii@sra.co.jp&gt;
Date: Thu, 24 Oct 1996 11:33:32 +0900
Subject: [postgres95 892] Re: Teach me about speed custamization 
Message-Id: &lt;199610240233.LAA07988@srashc.sra.co.jp&gt;
</A>
</B></PRE>
<PRE>

石井です。

&gt;岩村＠科技大です。
&gt;石井さん、アドバイスを有難うございます。
&gt;たしかにcharXXにした方が、速くなると思うのですが、
&gt;データの容量に関して200バイトの長さのデータがあったと
&gt;思ったら、10バイト以下のデータしかないといったデータ
&gt;になっています。従いまして、どうしても容量を可変に
&gt;しておきたかったのです。

なるほど。

&gt;しかし、indexにかんしては
&gt;... string like 'hoe%hoe'
&gt;といったlike演算子が対応しているインデックスがなかったので、
&gt;その代わりの対応策として
&gt;No	int4,
&gt;String	text,
&gt;Hash	char2
&gt;としてStringの最初のコード(データは全て全角にしてしまいました)
&gt;をHashに代入し、No と Hashにそれぞれindexをつけて
&gt;select * from ... where Hash = &quot;何か&quot; and String like 'なにか'
&gt;といったようにして前方一致に関しては対応しています。

おお、これはなかなかのテクニックですね。（もしかして知らないの私だけ？）
ところで、

&gt;select * from ... where Hash = &quot;何か&quot; and String like 'なにか'

を explain させると、どんな結果になるでしょうか。ちょっと興味がありま
す。
---
t-ishii@sra.co.jp	石井達夫
（株）ＳＲＡ
<HR>
</PRE>
