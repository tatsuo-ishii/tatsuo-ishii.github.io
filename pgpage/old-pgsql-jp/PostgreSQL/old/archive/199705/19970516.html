<A NAME="1">
<PRE><B>
From: Jun TATEYAMA &lt;tateyama@tokyo.jst.go.jp&gt;
Date: Fri, 16 May 1997 18:00:44 +0900
Subject: [postgres95 1817] Can I use 'exists' ?
Message-Id: &lt;199705160900.SAA04372@apollo.tokyo.jst.go.jp&gt;
</A>
</B></PRE>
<PRE>

こんにちは、舘山です。

 先日のsubstrに続いて、今度はexistsに関して質問させてください。

 これまで、PostgreSQLでは副問い合わせはできないものだ、という認識でいたの
 ですが、今日初心に帰って :-) 石井さんがSD誌に書かれた記事を読み直して
 みました。(Web上でですが)

 すると、PostgreSQL6.0から追加された機能として'EXISTSのサポート'が
 あげられていました。
 しかし同時に、やはり副問い合わせはできない、とも書かれています。
 この2つは矛盾しないのでしょうか？

 私の認識ではEXISTSは必ず副問い合わせを引き連れているような気がするのですが。

 また、existsが実際には使えないという場合、次のような関数を作って対応する
 ことになると思うのですが、このようなSQLによる関数の場合、引数として渡す
 ことができるものに制限はあるのでしょうか？

	create function exists(int4) returns int4 as
	        'select count(id) from test2 where foo = $1;'
	        language 'sql';

 例えばfrom句で指定されるtableの名前を渡すとか、where句を丸ごと渡して
 しまうとか。
 さすがにselec文をまるごと渡すことは、できないでしょうが。
 ＃これができたら、副問い合わせできるってことですものね。

 連日の質問で恐縮ですが、よろしくお願い致します。
---
舘山　純＠科学技術振興事業団(tateyama@tokyo.jst.go.jp)

<HR>
</PRE>
<A NAME="0">
<PRE><B>
From: &quot;Takayuki Tsuji&quot; &lt;a626@info.sendai-ct.ac.jp&gt;
Date: Fri, 16 May 1997 15:03:58 +0900
Subject: [postgres95 1816] Re: [Q]PHP/FIによるデータベースへの登録
Message-Id: &lt;199705160602.PAA07871@infodm.info.sendai-ct.ac.jp&gt;
</A>
</B></PRE>
<PRE>

仙台電波高専の辻です。

&gt; &gt;  $rtn = pg_Exec($con ,&quot;insert into hosts values('$newhost');&quot;);
&gt; &gt;
&gt; &gt;を実行したところで、
&gt; &gt;
&gt; &gt;  Bad response to postgres95 query (WARN:hosts Either no such
&gt; &gt;  class or insufficient privilege ) on line 18
&gt; &gt;
&gt; &gt;というエラーが出ます。（hostsはクラス名）
&gt; 
&gt; 書き込み許可が nobody になさそうですね。
&gt; 
&gt; 	GRANT INSERT ON hosts TO nobody;
&gt; 
&gt; で大丈夫だと思います。

nobodyではなくbinで動きました。ありがとうございました。
権限の関係のＳＱＬ文があったんですね。
権限の関係ということまでは分かってたんですが、どうやって
それをどうやってかえたらいいか分かりませんでした。
ＳＱＬをもっと勉強しなくてはいけませんね(^^;

--
  仙台電波工業高等専門学校専攻科 情報システム工学専攻２年
  情報工学科 脇山研究室
  辻  貴孝 / Takayuki Tsuji &lt; a626@info.sendai-ct.ac.jp &gt;
    WWW-URL: majesty.info.sendai-ct.ac.jp/~a626/

<HR>
</PRE>
