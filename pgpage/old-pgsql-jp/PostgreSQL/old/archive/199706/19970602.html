<A NAME="8">
<PRE><B>
From: &quot;Takayuki Tsuji&quot; &lt;a626@adv.sendai-ct.ac.jp&gt;
Date: Mon, 2 Jun 1997 14:28:25 +0900
Subject: [postgres95 1886] [Q] pg_Connect() について
Message-Id: &lt;199706020526.OAA25676@azalea.adv.sendai-ct.ac.jp&gt;
</A>
</B></PRE>
<PRE>

仙台電波高専の辻です。

PHP/FIからPostgresの接続を開く関数、pg_Connect()に
ついて教えていただきたいのですが、
$connection=pg_Connect(host,port,options,tty,dbname)
のうち、３番目の引数 options は何を指定するものなのでしょうか？
ソースを見てもライブラリへ渡しているだけのようですし、
マニュアルにも（私が見た限りでは）詳しい記述がなさそうなので、
どなたかご存知でしたら教えてください。

今、ApachとPHP/FIとPostgres95の組み合わせで使用していますが、
Webを使った場合、Postgres95をアクセスするユーザはhttpdの
プロセス所有者のbinまたはnobodyになると思うのですが、これを指定した
任意のユーザのアクセスとしたいと考えています。そこで、pg_Connectの
optionsの指定でできないかと思ったのですが、そのようなことはできない
のでしょうか？

以上、宜しくお願いします。

--
  仙台電波工業高等専門学校専攻科 情報システム工学専攻２年
  辻  貴孝 / Takayuki Tsuji &lt; a626@adv.sendai-ct.ac.jp &gt;
    WWW-URL: majesty.info.sendai-ct.ac.jp/~a626/


<HR>
</PRE>
<A NAME="7">
<PRE><B>
From: Eiji-usagi-MATSUmoto &lt;ematsu@pfu.co.jp&gt;
Date: Mon, 02 Jun 1997 14:21:56 +0900
Subject: [postgres95 1885] Win32 Porting (was Re: About the operation of kanji caractor. )
Message-Id: &lt;199706020521.OAA03214@Io.unoke.pfu.co.jp&gt;
</A>
</B></PRE>
<PRE>

松本です。

Tatsuo Ishii &lt;t-ishii@sra.co.jp&gt; said:
&gt; &gt;＃ところで、6.1はでたんでしょうか？
&gt; 6/6 位に出るという話だったような。

なかなか収束しないみたいですね。

ところで、ソースの中にWin32なコードがずいぶん入っているのですが、
Win32へのPortingというのは、まだまだなのでしょうか？

＃ちょっと前に、libpqがportされたと言う話がありましたが。

私自身は別に興味ないのですが、上司が興味あるようで。
こういった話は本家のMLに行かないといけないのかなぁ。

では。

--
Eiji MATSUmoto  &lt;ematsu@pfu.co.jp&gt;
PFU Limited, Ishikawa Japan. &lt; Call me 'USAGI' please. (^^) &gt;
<HR>
</PRE>
<A NAME="6">
<PRE><B>
From: Mitsuhiro Maeda &lt;mitsu@tramp.co.jp&gt;
Date: Mon, 02 Jun 1997 13:15:41 +0900
Subject: [postgres95 1884] Re: About the operation of kanji caractor. 
Message-Id: &lt;199706020415.NAA16508@log.tramp.co.jp&gt;
</A>
</B></PRE>
<PRE>

おみつ@Tramp です。

On Mon, 02 Jun 1997 12:06:58 +0900
Tatsuo Ishii &lt;t-ishii@sra.co.jp&gt; wrote:
&gt; ところで、おみつさんのパッチを 6.1β(970530バージョン)+Mklinux
&gt; DR2.1+update2+shared lib(つまり ELF になるわけです)で試して見ました。
&gt; おみつさんの例は見事通りました。

やったー!!

&gt; ところで、6.1 用の JP パッチにおみつさんのパッチを含めさせていただいて
&gt; よろしいでしょうか？ &gt; おみつさん

もちろん OK です :-)

# Linux , FreeBSD 以外も大丈夫なのかどうかが少々気になりますが...

# あと、御周知とは思いますが、ついつい .../backend/parser ディレクトリ内で
# diff してしまいましたので、その不具合はよろしくお願いします _0_

== おみつ
<HR>
</PRE>
<A NAME="5">
<PRE><B>
From: hidaka@agusa.nuie.nagoya-u.ac.jp (Takahiro HIDAKA)
Date: Mon, 2 Jun 1997 12:49:49 +0900 (JST)
Subject: [postgres95 1883] self introduction
Message-Id: &lt;199706020349.MAA09163@curry.agusa.nuie.nagoya-u.ac.jp&gt;
</A>
</B></PRE>
<PRE>

  PostgreSQL(J) ML の皆様、はじめまして。
日高隆博＠名古屋大学と申します。

  大学で JU1/140 を使える環境なので、そこで
PostgreSQL + PHP/FI + Apache を動かして
いじってみています。

  データベース自体ほとんどさわったことのない
初心者です。よくわからないことも多いので、また
質問させていただくこともあるかと思います。

  これからよろしくお願いします。

  ところで、

&lt;199706011817.DAA15763@log.tramp.co.jp&gt;の記事において
mitsu@tramp.co.jpさんは書きました。

&gt;おみつ@Tramp です。
&gt;scan.l をいじることで、日本語のテーブル名・フィールド名などが
&gt;使えるようになりました :-)

&gt;! letter		([\241-\376].|[_A-Za-z])+

  ちゃんと試してないのでわからないのですが、
この書式では、SunOS4.1.4+JLE とかの日本語化された lex では
うまく動かなかった気がします。flex で 8bit を通すようにすれば
大丈夫だったと思いますが。

  また明日くらいに Solaris2.5.1 で試してみます。
-- 
日高 隆博  hidaka@agusa.nuie.nagoya-u.ac.jp
<HR>
</PRE>
<A NAME="4">
<PRE><B>
From: Tatsuo Ishii &lt;t-ishii@sra.co.jp&gt;
Date: Mon, 02 Jun 1997 12:06:58 +0900
Subject: [postgres95 1882] Re: About the operation of kanji caractor. 
Message-Id: &lt;199706020306.MAA24687@srashd.sra.co.jp&gt;
</A>
</B></PRE>
<PRE>

石井です。

&gt;松本です。
&gt;
&gt;Mitsuhiro Maeda &lt;mitsu@tramp.co.jp&gt; said:
&gt;&gt; おみつ@Tramp です。
&gt;
&gt;&gt; scan.l をいじることで、日本語のテーブル名・フィールド名などが
&gt;&gt; 使えるようになりました :-)
&gt;
&gt;すばらしぃ！

いやー、すごい！

&gt;&gt; とりあえず Linux 2.0.27 上では動いてますが、
&gt;&gt; 他の OS でも動くもんかどうかはわかりません。
&gt;
&gt;FreeBSD2.2.1-RELEASEで、おみつさんの例と同じテーブルを作成し
&gt;動作することを確認しました。ぱちぱち。

&gt;＃ところで、6.1はでたんでしょうか？

6/6 位に出るという話だったような。

ところで、おみつさんのパッチを 6.1β(970530バージョン)+Mklinux
DR2.1+update2+shared lib(つまり ELF になるわけです)で試して見ました。
おみつさんの例は見事通りました。

ところで、6.1 用の JP パッチにおみつさんのパッチを含めさせていただいて
よろしいでしょうか？ &gt; おみつさん

# 6.1 用のJPパッチはほとんどできていて、後は 6.1 の正式版が出るのを待つば
# かりになっています。
---
t-ishii@sra.co.jp	石井達夫
（株）ＳＲＡ
<HR>
</PRE>
<A NAME="3">
<PRE><B>
From: Mitsuhiro Maeda &lt;mitsu@tramp.co.jp&gt;
Date: Mon, 02 Jun 1997 11:51:34 +0900
Subject: [postgres95 1881] Re: About the operation of kanji caractor.
Message-Id: &lt;199706020251.LAA16310@log.tramp.co.jp&gt;
</A>
</B></PRE>
<PRE>

おみつ@Tramp です。

On Mon, 02 Jun 1997 09:21:21 +0900
Eiji-usagi-MATSUmoto &lt;ematsu@pfu.co.jp&gt; wrote:
&gt; 
&gt; FreeBSD2.2.1-RELEASEで、おみつさんの例と同じテーブルを作成し
&gt; 動作することを確認しました。ぱちぱち。
&gt; 
おお!! FreeBSD も大丈夫でしたか...うれしいです :-)

&gt; あとはparserが、妙なところでasciiを意識したコーディングをして
&gt; いなければいいというところですよね。

この辺がちょっと心配ですね :-| 
お気づきの点ご指摘願えれば幸いです。

== おみつ

<HR>
</PRE>
<A NAME="2">
<PRE><B>
From: Eiji-usagi-MATSUmoto &lt;ematsu@pfu.co.jp&gt;
Date: Mon, 02 Jun 1997 09:21:21 +0900
Subject: [postgres95 1880] Re: About the operation of kanji caractor.
Message-Id: &lt;199706020021.JAA02576@Io.unoke.pfu.co.jp&gt;
</A>
</B></PRE>
<PRE>

松本です。

Mitsuhiro Maeda &lt;mitsu@tramp.co.jp&gt; said:
&gt; おみつ@Tramp です。

&gt; scan.l をいじることで、日本語のテーブル名・フィールド名などが
&gt; 使えるようになりました :-)

すばらしぃ！

&gt; とりあえず Linux 2.0.27 上では動いてますが、
&gt; 他の OS でも動くもんかどうかはわかりません。

FreeBSD2.2.1-RELEASEで、おみつさんの例と同じテーブルを作成し
動作することを確認しました。ぱちぱち。

&gt; diff は非常に短い(1行!)ので添付しておきます。

あとはparserが、妙なところでasciiを意識したコーディングをして
いなければいいというところですよね。

&gt; ほんとにこれだけで大丈夫かどうか非常に心配なんですけど...^^;

Happy Hacking!

＃ところで、6.1はでたんでしょうか？

ではでは。

--
Eiji MATSUmoto  &lt;ematsu@pfu.co.jp&gt;
PFU Limited, Ishikawa Japan. &lt; Call me 'USAGI' please. (^^) &gt;
<HR>
</PRE>
<A NAME="1">
<PRE><B>
From: Mitsuhiro Maeda &lt;mitsu@tramp.co.jp&gt;
Date: Mon, 02 Jun 1997 03:17:40 +0900
Subject: [postgres95 1879] Re: About the operation of kanji caractor.
Message-Id: &lt;199706011817.DAA15763@log.tramp.co.jp&gt;
</A>
</B></PRE>
<PRE>

おみつ@Tramp です。

ちょっと古い自己フォローですが、

On Mon, 21 Apr 1997 22:46:57 +0900
Mitsuhiro Maeda &lt;mitsu@tramp.co.jp&gt; wrote:
&gt; 
&gt; &gt; さて、データベースとして、漢字のテーブルを作成して、漢字の中身って言う
&gt; &gt; んですか、を利用するにはどうするのでしょうか？
&gt; 
&gt; クラス、属性の名前に漢字は使えないと思いました。
&gt; 確か[a-zA-Z0-9_]くらいしか駄目だったと...
&gt; 
&gt; # 私もたまに漢字やスペースが名前に使えればいいなとは思ったりします ;-)
&gt; # gram.y とか scan.l をいじるのかな ?? (あてずっぽです :-)
&gt; 
ようやく自宅でも PostgreSQL をいじれるようになりまして
いろいろいじっていましたところ、
scan.l をいじることで、日本語のテーブル名・フィールド名などが
使えるようになりました :-)

とりあえず Linux 2.0.27 上では動いてますが、
他の OS でも動くもんかどうかはわかりません。

# ファイル単位でデータを保存してますので、
# 日本語(EUC)のファイルが作れれば大丈夫だと思うのですが...

diff は非常に短い(1行!)ので添付しておきます。

ほんとにこれだけで大丈夫かどうか非常に心配なんですけど...^^;

------------------------------ 動作-&gt; ------------------------------
% createdb テスト
% psql テスト
Welcome to the POSTGRESQL interactive sql monitor:
  Please read the file COPYRIGHT for copyright terms of POSTGRESQL

   type \? for help on slash commands
   type \q to quit
   type \g or terminate with semicolon to execute query
 You are currently connected to the database: テスト

テスト=&gt; create table 電子メール (アドレス text, 名前 text);
CREATE
テスト=&gt; insert into 電子メール values ('mitsu@tramp.co.jp', '前田充宏');
INSERT 21179
テスト=&gt; select * from 電子メール;
アドレス         |名前    
-----------------+--------
mitsu@tramp.co.jp|前田充宏
(1 row)

テスト=&gt;
------------------------------ &lt;-動作 ------------------------------

------------------------------ ここから ------------------------------
*** scan.l.org	Mon Jun  2 02:41:12 1997
--- scan.l	Mon Jun  2 02:49:24 1997
***************
*** 58,64 ****
  %}
  
  digit		[0-9]
! letter		[_A-Za-z]
  letter_or_digit	[_A-Za-z0-9]
  
  sysfunc		SYS_{letter}{letter_or_digit}*
--- 58,64 ----
  %}
  
  digit		[0-9]
! letter		([\241-\376].|[_A-Za-z])+
  letter_or_digit	[_A-Za-z0-9]
  
  sysfunc		SYS_{letter}{letter_or_digit}*
------------------------------ ここまで ------------------------------

== おみつ
<HR>
</PRE>
<A NAME="0">
<PRE><B>
From: Mitsuhiro Maeda &lt;mitsu@tramp.co.jp&gt;
Date: Mon, 02 Jun 1997 02:51:08 +0900
Subject: [postgres95 1878] Re: Linux2.0.0 Instll
Message-Id: &lt;199706011751.CAA15699@log.tramp.co.jp&gt;
</A>
</B></PRE>
<PRE>

おみつ@Tramp です。

On Fri, 30 May 1997 09:27:48 -0700
tatesawa nobuyuki &lt;ntate@echna.or.jp&gt; wrote:
&gt; ...snip...
&gt; その後、postgreSQLv6をインストールしようとしましたが、initdbで、以下のよ
&gt; うな
&gt; メッセージを出して、先に進めません。
&gt; ...snip...
&gt; custmizeで以下のように進めたのですが、linuxの項目は、1.2しかないようなん
&gt; ですが、
&gt; 大丈夫なのでしょうか。

私も Slackware3.1 を使ってますが、大丈夫みたいですよ :-)

&gt; ...snip...
&gt; ---------------------------------------------------------------------------------
&gt; linux:/usr/local$ initdb --pgdata=/usr/local/pgsql/data
&gt; --pglib=/usr/local/pgsq
&gt; l/lib
&gt; initdb: using /usr/local/pgsql/lib/local1_template1.bki.source as input
&gt; to creat
&gt; e the template database.
&gt; initdb: using /usr/local/pgsql/lib/global1.bki.source as input to create
&gt; the glo
&gt; bal classes.
&gt; initdb: using /usr/local/pgsql/lib/pg_hba.conf.sample as the host-based
&gt; authenti
&gt; cation control file.
&gt; 
&gt; Can't tell what username to use.  You don't have the USER
&gt; environment variable set to your username and didn't specify the
&gt; --username option
&gt; 

PostgreSQL のスーパーユーザーはデフォルトで「postgres」という
ユーザーを仮定してたと思いますので、その他のユーザーにするなら、
このエラーメッセージ通り「--username ユーザー名」のオプションを
つければOKだと思います。

例えば mitsu というユーザーをスーパーユーザーにするには、

% initdb --username mitsu --pgdata=....
         ^^^^^^^^^^^^^^^^

ですね :-)
# 実際私も自宅ではこうしてます...

== おみつ

<HR>
</PRE>
