<HTML>
<HEAD>
<TITLE>
Postgres95 FAQ in Japanese
</TITLE>
</HEAD>
<BODY>
<PRE>
==================================================
Postgres95 についてよくある質問(FAQ)
==================================================
最終更新日:		Mon Sep 16 00:45:49 EDT 1996
現在の保守管理者:	Bruce Momjian (maillist@candle.pha.pa.us)
最初の著者:		Jolly Chen (jolly@cs.berkeley.edu)

[訳註：日本語版については以下の通りです。
(以下、訳者による注意書きを [訳註： と ] で囲んで記します。)
最終更新日:	１９９６年９月２０日
訳者:		桑村 潤 (juk@rccm.co.jp)
校正：		田仲 稔さん(green@keiken.co.jp)、
		石井 達夫さん(t-ishii@sra.co.jp)、
		齊藤 知人さん(tomos@elelab.nsc.co.jp)、
		中西 通雄さん(naka@ics.es.osaka-u.ac.jp)、
]

このバージョンでの変更箇所(* = 修正, + = 新):
*1.3)	Postgres95 はどこから手に入りますか？
*3.23)	連続のフィールドはどのように創りますか？
+3.40)	oid とは何ですか？ tid とは何ですか？
+3.41)	Postgres で使われる幾つかの用語の意味は何ですか？


このファイルはだいたい次のような内容で分けられています：
1.*)	一般的な質問
2.*)	インストールに関する質問
3.*)	Postgres95 の特徴についての質問
4.*)	Postgres95 の拡張についての質問
5.*)	バグについて


解答された質問：
1.1)	Postgres95 とは何ですか？
1.2) 	Postgres95 の動作環境は？
1.3)	Postgres95 はどこから手に入りますか？
1.4)	Postgres95 の著作権はどうなってますか？
1.5)	Postgres95 のための支援
1.6)	Postgres95 の将来のリリースは？
1.7)	Postgres95 の商用版はありますか？
1.8)	Postgres95 にはどのようなドキュメントがありますか？
1.9)	Postgres95 はどのバージョンのSQLを使いますか？
1.10)	Postgres95 は、それより前のバージョンの postgres からのデータベース
	を使って動きますか？
1.11)   何人位の人々が Postgres95 を使ってますか？
2.1)	バックエンドをコンパイルしようとすると "cpp: command not found" と
	いうエラーを受け取りました。
2.2)	バックエンドをコンパイルしようとすると 'yy_flush_buffer undefined'
	を受け取ります。
2.3)	initdb が走りません。
2.4)	postmaster を起動したら、次のメッセージを受け取りました。
2.5)	システムがコンマと小数点と日付フォーマットとについて混乱して
	いるようです。
2.6)	どのようにすれば /usr/local/postgres95 以外の場所にインストール
	できますか？
2.7)    バックエンドのコンパイルは成功しましたが、libpq のコンパイルは：
		"libpq/pqcomm.h" not found when compiling fe-auth.c
	と文句を言われて終ってしまいました。
2.8)	Postgres95 のバグの修正はどこでみつかりますか？
2.9)	すべて問題無く見えるのですが、パッチがうまく当たりません。
2.10)	postmaster を走らせると、悪いシステム・コールでコア・ダアンプしたと
	いうメッセージを受け取ります。
2.11)	"obj/fmgr.h: No such file or directory" というエラーメッセージを
	受け取ります。
2.12)	postmaster を走らせようとすると、IpcMemoryCreate エラーを受け取り
	ます。
2.13)	しょっぱなから奇妙なエラーメッセージを受け取ります：
2.14)	ソースファイルを変更したのですが、再コンパイルをしても変化が
3.1)	カラムに「キー」とかその他の制約をどのように設定すればよいですか？
3.2)	Postgres95 は入れ子した副問い合わせを支援しますか？
3.3)	一意な索引をどのように定義しますか？
3.4)	ルールを使うと沢山の問題がおきたのですが？
3.5)	巨大オブジェクトの途中にきちんと書き込むことができないみたいです。
3.6)	Postgres95 はグラフィカル・ユーザ・インターフェースを持っていますか？
3.7)	Postgres95 のクライアント・アプリケーションはどのようすれば書
	けますか？
3.8)	他のホストから私の postgres95 バックエンドへアクセスするのを、
	どのように防げば良いでしょうか？
3.9)	pg_group のセットアップはどのようにしますか？
3.10)	バイナリ・カーソルとノーマル・カーソルの厳密な違いは何ですか？
3.11)	なぜ != 演算子が動かないのですか？
3.12)	R-tree 索引とは何ですか、また、何のために使われますか？
3.13)	タップル(1レコード)の最大サイズは？
3.14)	複数の索引を定義しましたが、私の行なった問い合わせではそれらを使っ
	ている様子がありません。なぜですか？
3.15)	Postgres95 のための ODBC ドライバーはありますか？
3.16)	多次元(＞２次元)の索引には postgres をどのように使えば良いですか？
3.17)	正規表現での検索はどのようにすればよいですか？ 大文字と小文字を
	区別しない正規表現検索は？
3.18)	'root' ユーザでデータベースにアクセスできません。
3.19)	vacuum を行なっている時にサーバーが落ちる経験をしました。
3.20)	varchar、bpchar、bytea、text の違いは何ですか？
3.21)	問い合わせで、フィールドが NULL であることを見つけるにはどう
	しますか？
3.22)	問い合わせ最適化モジュールがどのようにして問い合わせを評価するの
	かを見るにはどうしますか？
3.23)	連続のフィールドはどのように創りますか？
3.24)	複数列索引はどのように創りますか？
3.25)	自分のデータベース・ディレクトリにある temp_XXX ファイルは何ですか？
3.26)	削除を行なった後でもテーブルファイルが小さくならないのはなぜですか？
3.27)	他のマシンから自分のデータベースに接続できないのはなぜですか？
3.28)	索引を創ろうとすると、'default index class unsupported'というエラー
	を受け取ります。どうすればいいですか？
3.29)	索引を創るときにバックエンド・サーバが落ちるのはなぜですか？
3.30)	float8 に十進定数や text に文字列を指定するにはどうしますか？
3.31)	データベース中に定義された索引や演算子はどのようにして見つけ
3.32)	データベースが壊れました。何もできません。なにをするべきですか？
3.33)	Createdb, destroydb, createuser,destroyuser が走りません。どうして？
3.34)	'createuser' は何故 'unexpected last match in input()' を返すの
	ですか？
3.35)	同時にテーブル・アクセスするとすべてのサーバが落ちます。何故？
3.36)	ウェブページに postgres を繋ぐにはどんなツールがありますか？
3.37)	時間旅行機能とは何ですか、また、その機能と vaccuum との関係は？
3.38)	よりよい性能を得るためには、どのようにデータベース・エンジンを調整
	できますか？
3.39)	Postgres95 の中ではどんなデバッグ機能が利用できますか？
3.40)	oid とは何ですか？ tid とは何ですか？
3.41)	Postgres で使われる幾つかの用語の意味は何ですか？
4.1)	ユーザ定義ファンクション(関数)を書きましたが、psql の中から実行
	したらコアダンプしてしまいました。
4.2)	次のようなメッセージを受け取ります。
4.3)	私は、Postgres95 のために粋な新しい型と関数を書きました。
4.4)	タップルを返す C の関数はどのように書きますか？
5.1)	バグの修正版はどこでみつかりますか？
5.2)	バグ・レポートはどういうふうにしますか？


----------------------------------------------------------------------
第１節：	一般的な質問
----------------------------------------------------------------------

1.1)	Postgres95 とは何ですか？

	Postgres95 は POSTGRES データベース管理システムの改良版で、次世代
	DBMS 研究用のプロトタイプです。Postgres95 は POSTGRES の強力なデー
	タ・モデルと豊富なデータ・タイプ(型)を内包しつつ、POSTGRES で使わ
	れた PostQuelクエリ(問い合わせ)言語を、拡張したSQL のサブセットに
	置き換えています。Postgres95 は無料で完全なソースの利用ができます。

	Postgres95 の開発は Postgres95 開発者メーリングリストを購読してい
	るインターネット上の開発者チームにより進められています。現在の調整
	役は Marc G. Fournier (scrappy@ki.net) です。(以下に参加の仕方があ
	ります。)現在、このチームがすべての現状と将来の Postgres95 の開発
	の面倒を見守ります。

	Postgres95 1.01 の著者は Andrew Yu と Jolly Chen でした。その他大
	勢の人々がこのコードの移植、テスト、デバグ、および、改良に貢献しま
	した。Postgres95 の派生元コードである POSTGRES はカリフォルニア大
	学バークレー校において、 Michael Stonebraker 教授の指揮のもと、多
	くの学生、卒業生、職業プログラマーたちの努力により作られました。

1.2) 	Postgres95 の動作環境は？

	著者らは Postgres95 のコンパイルとテストを次のプラットホーム上で行
	ないました。(これらのうちの幾つかはコンパイルにgcc 2.7.0が必要です)：

        - DEC Alpha AXP on OSF/1 2.0
        - HP PA-RISC on HP-UX 9.0
        - i386 Solaris
        - SUN SPARC on Solaris 2.4
        - SUN SPARC on SunOS 4.1.3
        - DEC MIPS on Ultrix 4.4
        - Intel x86 on Linux 1.2 and Linux ELF
        - OSs derived from 4.4-lite BSD (NetBSD, FreeBSD)
        - IBM on AIX 3.2.5
        - BSD/OS 2.0, 2.01 & 2.1
        - SGI MIPS on IRIX 5.3

	また、下記の移植版が Postgres95 の配布に含まれています。著者らはこ
	れらのプラットホームを手近で使えませんが、他の人々の手によりこれら
	の移植版のテストが行なわれました。

        - Motorola MC68K or Intel x86 on NeXTSTEP 3.2
        - Intel x86 on Intel SVR4

	[訳註: Windows-NT版への移植は Jon Forrest(forrest@cs.berkeley.edu)
	さんにより行なわれているそうです。
	  日本語への移植は、石井達夫さん(t-ishii@sra.co.jp)大西雅晴さん
	(onishi@nova.co.jp)、によって行なわれました。このパッチは：
		ftp://ftp.sra.co.jp/pub/cmd/postgres/postgres95-1.06
	から入手できます。]

1.3)	Postgres95 はどこから手に入りますか？
	
	Postgres95 の大本の anonymous ftp サイトは：

		ftp://ftp.ki.net/pub/postgres95

	また、次のサイトにもミラーされています：

		ftp://postgres95.vnet.net/pub/postgres95
		ftp://ftp.luga.or.at/pub/postgres95
		ftp://cal011111.student.utwente.nl/pub/postgres95

	[訳註:日本でのミラーサイトは、藤枝和宏さん(fujieda@jaist.ac.jp)
	の貢献により
		ftp://ftp.jaist.ac.jp/pub/dbms/postgres95
	において、されています。]

1.4)	Postgres95 の著作権はどうなってますか？

	Postgres95 は下記の著作権に従います。
	[訳註:訳者は法律について不案内なので、以下原文を残し注釈を
	付けます。]

POSTGRES95 Data Base Management System
[訳註：
POSTGRES95 データベース管理システム]

Copyright (c) 1994-6 Regents of the University of California
[訳註：
著作権 (c) 1994-6 カリフォルニア大学本校]

Permission to use, copy, modify, and distribute this software and its
documentation for any purpose, without fee, and without a written agreement
is hereby granted, provided that the above copyright notice and this
paragraph and the following two paragraphs appear in all copies.
[訳註：
このソフトウェアとその文書を、如何なる目的でも、無料で、使用許諾書無しに、
使用、複写、修正、そして、配布することへの許可を、上記の著作権表示、この段
落、および、これに続く二つの段落が、すべての複写に添付される限りにおいて、
ここにそれを認めます．]

IN NO EVENT SHALL THE UNIVERSITY OF CALIFORNIA BE LIABLE TO ANY PARTY FOR
DIRECT, INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, INCLUDING
LOST PROFITS, ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS
DOCUMENTATION, EVEN IF THE UNIVERSITY OF CALIFORNIA HAS BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGE.
[訳註：
例えカリフォルニア大学が以下のような損害の可能性について言及していたと
しても．このソフトウェア及び文書の使用上，直接的・間接的・特別・偶然も
しくは必然的に，生じた失われた利益を含む損害に於いて，いずれの当事者に
対してもカリフォルニア大学は一切の責任を負いません．]

THE UNIVERSITY OF CALIFORNIA SPECIFICALLY DISCLAIMS ANY WARRANTIES,
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS FOR A PARTICULAR PURPOSE.  THE SOFTWARE PROVIDED HEREUNDER IS
ON AN "AS IS" BASIS, AND THE UNIVERSITY OF CALIFORNIA HAS NO OBLIGATIONS TO
PROVIDE MAINTENANCE, SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS.
[訳註：
カリフォルニア大学は，特定目的のための商用性及び適合性の暗黙の保証を含
む，しかしそれに限定されることのない，いかなる保証も明確に放棄します．
ここにおいて用意されたソフトウェアは「あるがまま」ということを前提とし，
カリフォルニア大学は維持・補助・更新・改良・修正を用意する義務を負いま
せん．]

1.5)	Postgres95 のための支援

	元来の維持者達からも、カリフォルニア大学バークレー校からも、
	Postgres95 の公式な支援はありません。その支援はボランティアの努力を
	通じてのみ維持されています。

	Vnet の Jason Wright さんらのご厚意により postgres95 メーリング・
	リストは今、新たな宿(ホーム) -- postgres95@postgres95.vnet.net を
	得ることができました。Postgres95 に関することであれば、バグのレポー
	トや修正版だけに限らず議論ができます。このリストの定期購読の仕方に
	ついて知りたければ、電子メールの本文(Subject 行ではなく)に：
		help
		info postgres95
	と書いて、
		majordomo@postgres95.vnet.net
	に送って下さい。

	ダイジェスト版のメーリング・リストもあります。このリストの購読は
	"本文"に：
		subscribe postgres95-digest
	と書いて majordomo@postgres95.vnet.net に電子メールを送って下さい。
	ダイジェスト版はメインのリストが 30k 前後のメッセージを受信する毎
	にそのリストのメンバーに送付されます。

	アーカイブおよび Vnet での新メーリング・リストのダイジェスト版は次
	の所でみつかります：
		ftp://postgres95.vnet.net/pub/postgres95/archives
		ftp://postgres95.vnet.net/pub/postgres95/digests
	
	開発者メーリングリストも利用可能です。このリストの購読申込は、次
	の内容のE-メールを pg95-dev-request@ki.net に送って下さい：

		subscribe pg95-dev

	Postgres95 についてもっと詳しく知りたければ、次の postgres95 WWW
	ホームページからたどれます：
		http://www.ki.net/postgres95


	[訳註: 日本語のメーリング・リストは SRA Inc. の石井達夫さんが管理
	しています。このリストの購読は、本文の１行目に：
		subscribe postgres95
	と書いて majordomo@sramhe.sra.co.jp 宛に電子メールを送って下さい。]


1.6)	Postgres95 の将来のリリースは？

	postgres95 の最新版はバージョン 1.02 です。
	[訳註：	１９９６年９月１５日現在 1.06 となってます。]

1.7)	Postgres95 の商用版はありますか？

	Illustra Information Technology (Infomix Software, Inc. の完全
	子会社)が POSTGRES を基にした Illustra というオブジェクト-リレー
	ショナル DBMS を販売しています。Illustra の見かけは postgres95
	と似ていますが、もっと多くの機能を持っていて、より堅牢で、より
	性能も良く、実際のドキュメントと支援を提供しています。その反面、
	費用がかかります。これ以上の情報が欲しければ、
	sales@illustra.com に問い合わせて下さい。

1.8)	Postgres95 にはどのようなドキュメントがありますか？

	1冊のユーザマニュアルとオンラインマニュアル(マニュアル・ページ)お
	よび幾つかの小さなテスト例題が配付に含まれます。その sql と附属の
	オンラインマニュアルは特に大切です。


	www ページは、実装案内と postgres の設計概念と将来について書かれた
	５つの論文へのポインターを含んでいます。

1.9)	Postgres95 はどのバージョンのSQLを使いますか？

	Postgres95 は SQL-92 のサブセットを支援しています。ほとんどの大切
	な構造は持っていますが、機能の幾つかが欠けています。最も顕著な違い
	は：
		- 主キーとカラムの制約を支援しません
		- 入れ子状の副問い合わせを支援しません
		- GROUP BY のもとでの HAVING 句がありません

	その反面、ユーザー定義の型、関数、継承などを創ることができます。も
	し、どうしても postgres95 のコーディングを手伝いたければ、ちょうど
	良い具合に、上記の機能洩れを追加することができます。

1.10)	Postgres95 は、それより前のバージョンの postgres からのデータベース
	を使って動きますか？

	Postgres95 v1.02 は v1.01 で創られたデータベースと互換があります。
	これらを1.0 から 1.02 にアップグレードするには 
	MIGRATION_1.0_TO_1.02 ディレクトリにある指針読むことを勧めます。

1.11)   何人位の人々が Postgres95 を使ってますか？

	我々は、使用許可や登録の形式を持ちませんので、それを述べることは不
	可能です。敢えて言うなら、postgres95 v1.* の数百のコピーがダウンロー
	ドされたことが分かっているのと、また、さらに数百の購読者がメーリン
	グリストにいます。

----------------------------------------------------------------------
第２節：	インストールに関する質問
----------------------------------------------------------------------

2.1)	バックエンドをコンパイルしようとすると "cpp: command not found" と
	いうエラーを受け取りました。

	あなたのサイトにある cpp へのパスを含むように
	src/backend/utils/Gen_fmgrtab.sh スクリプトを修正して下さい。
	
2.2)	バックエンドをコンパイルしようとすると 'yy_flush_buffer undefined'
	を受け取ります。

	version 2.5.2 以降の flex を使って下さい。Version 2.5.3 にはバグが
	あることが分かっています。

2.3)	initdb が走りません。

	* 適切なパスが通っているかを確認して下さい
	* ユーザ 'postgres' がすべての該当ファイルを所有しているかどうかを
	  確認して下さい。
	* $PGDATA/files の下にファイルがあって、それらが空でないかを確認し
	  て下さい。もし、ファイルが空でなければ、"gmake install" が何らか
	  の理由で失敗しています。

2.4)	postmaster を起動したら、次のメッセージを受け取りました。
		"FindBackend: could not find a backend to execute..."
		"postmaster: could not find backend to execute..."

	おそらく、パスが正しく設定されていません。'postgres' 実行モジュー
	ルが設定されたパスの中にある必要があります。

2.5)	システムがコンマと小数点と日付フォーマットとについて混乱して
	いるようです。

	ロカールの設定を確かめて下さい。Postgres95 は postmaster プロセスを
	走らせたユーザーのロカールの設定を使います。これらをあなたの作業環
	境に合わせて設定して下さい。


2.6)	どのようにすれば /usr/local/postgres95 以外の場所にインストール
	できますか？

	src/Makefile.global の中のパスを手で修正して、あなたのサイトの
	配置に合わせる必要があります。
	[訳註：現在のデフォルトのパスは /usr/local/postgres95 になっていま
	せん。]

2.7)    バックエンドのコンパイルは成功しましたが、libpq のコンパイルは：
		"libpq/pqcomm.h" not found when compiling fe-auth.c
	と文句を言われて終ってしまいました。

	おそらく、 postgres95 を /usr/local/postgres 以外のどこかにインス
	トールしていますが、それに合わせて src/Makefile.global を直してい
	ません。
	質問 2.6 を参照下さい。

2.8)	Postgres95 のバグの修正はどこでみつかりますか？


	パッチはリストされる順番に当てられるべきです。パッチファイルは次の
	ディレクトリから直接 ftp で取得できます：

  	   ftp://ftp.ki.net/pub/postgres95

2.9)	すべて問題無く見えるのですが、パッチがうまく当たりません。

	もし、ウェブ・ブラウザから直接カット＆ペーストをしたとすると、タブ
	と空白がその通りには保存されません。カット＆ペーストの代わりに、ウェ
	ブ・ブラウザの 'save as file' オプションを使って下さい。

2.10)	postmaster を走らせると、悪いシステム・コールでコア・ダアンプしたと
	いうメッセージを受け取ります。

	さまざまな問題が考えられますが、まず最初にあなたのカーネルに 
	system V の拡張がインストールされているかを確認して見てください。
	Postgres95 はカーネルが共有メモリを支援していることを必要とします。
	

2.11)	"obj/fmgr.h: No such file or directory" というエラーメッセージを
	受け取ります。

	これは、fmgr.h というファイルが正しく生成されなかったことを示して
	います。src/backend/utils/Gen_fmgrtab.sh スクリプトの実行で何かが
	失敗しています。スクリプトの中で使われているパスがあなたのシステム
	に適切かどうか確かめて見て下さい。

2.12)	postmaster を走らせようとすると、IpcMemoryCreate エラーを受け取り
	ます。

	あらかじめカーネルに共有メモリーを持つ設定にしていなかったか、
	あるいは、カーネルに対して使える共有メモリの大きさを大きくする
	必要があります。具体的な大きさは、使っているアーキテクチャと
	postmaster を走らせるときに設定するバッファの数に依存します。
	ほとんどのシステムでは、デフォルトのバッファサイズとして、少な
	くても約760Kが必要です。

2.13)	しょっぱなから奇妙なエラーメッセージを受け取ります：
		warning: NUL character seen; rest of line ignored
		*** missing separator.  Stop.
	あるいは、
		Is a directory.  Stop.

	Makefile.global の中の PORTNAME の行の後ろにある空白を取り除い
	て下さい。余計なタブや空白は make の雛型を混乱させます。

2.14)	ソースファイルを変更したのですが、再コンパイルをしても変化が
	ありません？

	幾つかの Makefile が適切な依存関係を持っていません。'make clean' 
	をしてからもう一度 'make' を行なわなくてはなりません。

----------------------------------------------------------------------
第３節：	Postgres95 の特徴についての質問
----------------------------------------------------------------------

3.1)	カラムに「キー」とかその他の制約をどのように設定すればよいですか？

	Postgres95 ではカラムの制約は支援されていません。ですので、システ
	ムは重複のチェックをしません。

3.2)	Postgres95 は入れ子した副問い合わせを支援しますか？

	副問い合わせは組み込まれていませんが、sql 関数を用いて模擬できます。

3.3)	一意な索引をどのように定義しますか？

	Postgres95 は一意な索引を支援しません。索引の定義において、重複す
	る索引キー値の挿入を妨げません。

3.4)	ルールを使うと沢山の問題がおきたのですが？

	現在、postgres95 のルール・システムはおおよそだめです。このルール・
	システムはビュー機構を支援するのには十分ですが、所詮その程度のもの
	です。Postgres95 のルールは危険を覚悟の上で使って下さい。
	
3.5)	巨大オブジェクトの途中にきちんと書き込むことができないみたいです。

	Postgres95 のインバージョン巨大オブジェクト・システムも同様に、大
	方壊れています。大きなサイズのデータを保存して、そして、それらを読
	み出すのには十分機能しますが、しかし、実装に根本的問題が潜んでいま
	す。Postgres95 の巨大オブジェクトは危険を覚悟の上で使って下さい。

	[訳註：インバージョン巨大オブジェクト(Inversion Large Object)は
	POSTGRES からその仕組みだけを引き継いだ巨大オブジェクトの取扱いで、
	巨大オブジェクトを幾つかの塊に分解したタップルとして保存する方法
	です。詳しくはマニュアルを参照して下さい。]

3.6)	Postgres95 はグラフィカル・ユーザ・インターフェースを持っていますか？
	レポート・ジェネレータは？埋め込み問い合わせ言語のインターフェースは？

	３つともありません。少なくとも正式な配布には含まれてません。何
	人かのユーザが 'pgbrowse' と 'onyx' を postgres95 のフロントエ
	ンドに使って成功したと報告しています。幾つかのコントリビューショ
	ンが tk ベースのフロントエンド・ツールで動いています。メーリン
	グ・リストで聞いて下さい。

	[訳註：pgbrowse は以前の postgres 用に作られた Tcl7.3/Tk3.6 を
	使ったインターフェースです。これを postgres95 用に変更した雛型
	が pg95browse ですが、これを Tcl7.4/Tk4.0+TclX7.4 でほぼ完全に
	動くようにした pgb5 というのがあります。
		ftp://ftp.folz.de/pub/postgres95/pgb5-v0.1a.tar.gz
	 その他に William Wanders(wwanders@sci.kun.nl)さんによるα版の
	pg95admin というのがあります。これは、
	Tcl7.4/Tk4.0 + TclX7.4 + TIX-4.0 を使っていて、ユーザ登録や
	アクセス権の設定などができます。
	 Onix は 4GL の汎用の DBMS インターフェースで POSTGRES4.2 にも
	対応していました。]

3.7)	Postgres95 のクライアント・アプリケーションはどのようすれば書
	けますか？
	
	Postgres95 は libpq というＣ言語呼出し可能なライブラリ・インター
	フェースと、同様に、 libtcl という Tcl主導型のライブラリ・インター
	フェースを支援しています。

	[訳註：C++呼出しの libpq++ もあります。]

	他の人々が、postgres95 への perl インターフェースと WWW ゲートウェ
	イを寄贈しました。Postgres95 のホームページに詳細がありますので御
	覧下さい。

	[訳註：	WWW インターフェースに WDB(A Web interface to SQL
		DataBase) の Wdb-p95 というのがあります。これは perl インター
		フェースの pg95perl5 を使っています。
			(http://www.eol.ists.ca/~dunlop/wdb-p95/)
		 Python のモジュールの PyGres95 もあります。
			(旧URL：http://www.via.ecp.fr/via/products/pygres.html)
		 Java のインターフェースもあるそうです。
			(http://www.blackdown.org/java-linux.html)
	]

3.8)	他のホストから私の postgres95 バックエンドへアクセスするのを、
	どのように防げば良いでしょうか？

	$PGDATA/pg_hba ファイルを適切に直して、ホスト主導型の認証を使って
	下さい。

3.9)	pg_group のセットアップはどのようにしますか？

	現在、ユーザ・グループを設定する簡単なインターフェースはありません。
	明示的に pg_group テーブルを insert/update しなければなりません。
	例えば次のようにします：

	jolly=> insert into pg_group (groname, grosysid, grolist)
	jolly=>     values ('posthackers', '1234', '{5443, 8261}');
	INSERT 548224
	jolly=> grant insert on foo to group posthackers;
	CHANGE
	jolly=>

	pg_group のフィールドは以下のとおりです：
		groname:  グループ名。Char*16 型で純粋な英数字にすべき。
			  アンダースコアやその他の特殊文字を含めないこと。
		grosysid: グループID。Int4 型で各グループ毎に一意であるべき。
		grolist:  そのグループに所属する pg_user id のリスト。
			  このフィールドの型は int4[]。

3.10)	バイナリ・カーソルとノーマル・カーソルの厳密な違いは何ですか？

	ノーマル・カーソルは ASCII フォーマットでデータを返します。データ
	はもともとバイナリ・フォーマットで保存されていますのでシステムは
	ASCII フォーマットで取り出すために変換をしなければなりません。それ
	に加えて、ASCII フォーマットはバイナリ・フォーマットよりもサイズが
	大きくなることがよくあります。また、一旦 ASCII フォーマットで返さ
	れたアトリビュート(属性)をクライアント・アプリケーションで扱うため
	に、再びバイナリ・フォーマットに変換しなければならないことがよくあ
	ります。

	バイナリ・カーソルはデータをもとのバイナリ表現で返します。この
	ため、バイナリ・カーソルは変換のオーバーヘッドが少ないので多少
	速くなる傾向があります。

	しかしながら、バイナリ表現は異なるマシン・アーキテクチャ間では異な
	る可能性があるのに対して、ASCII はアーキテクチャに関しては中立です。
	このように、クライアント機とサーバ機が異なるバイナリ表現を持つとき、
	アトリビュート(属性)をバイナリ・フォーマットで取り出すことはあまり
	やりたくないでしょう。また、もし本来の目的がデータを ASCII で表示
	することであれば、ASCII でデータを取り出すとによりクライアント側で
	の作業は減ります。

3.11)	なぜ != 演算子が動かないのですか？

	SQL は <> を不等号の演算子として指定していますので、我々はそれを組
	み込み型として既に定義しています。しかしながら、そうしたければ、!= 
	演算子を組み込んで postgres95 を拡張することはあなたの自由です。

3.12)	R-tree 索引とは何ですか、また、何のために使われますか？

	R-tree 索引は空間的なデータに索引を付けるために使われます。ハッシュ
	索引では範囲の検索ができません。また、B-tree 索引では、１次元でし
	か範囲の検索ができません。R-tree 索引であれば多次元のデータを扱え
	ます。たとえば、もし R-tree 索引を 'point' 型の属性に付けることが
	できるとするとシステムは、長方形に囲まれた点をすべてを選択するとい
	うような問い合わせに、より効率良く答えられます。

	R-Tree の設計の原典となる権威ある論文は:

	Guttman, A. "R-Trees: A Dynamic Index Structure for Spatial Searching."
	Proc of the 1984 ACM SIGMOD Int'l Conf on Mgmt of Data, 45-57.
	で、この論文は、Stonebraker 教授の "Readings in Database Systems"
	でも取り上げられています。

	[訳註：日本語のドキュメントとして、和久利＠筑波大さんから、R-tree に
	関する修士論文が紹介されています。

		古本幸彦 "R-treeによる効率的な空間検索手法の研究" 1996

	R-tree が具体的なイメージとして理解しやすく説明されています。]

3.13)	タップル(1レコード)の最大サイズは？

	タップルの大きさは 8K バイトに制限されています。システムの属性やそ
	の他のオーバーヘッドを考慮すると、安全側に見積もって１タップルあた
	り 8,000 バイトにとどめるべきでしょう。8K を越える属性を使うときは、
	巨大オブジェクト・インターフェースを使ってみて下さい。
	[訳註：8K は 8*1024=8192]

	タップルは 8k の境界内では重ならないので、5k のタップルでも 8k の
	保存領域が必要です。

3.14)	複数の索引を定義しましたが、私の行なった問い合わせではそれらを使っ
	ている様子がありません。なぜですか？

	Postgres95 は統計情報を自動的には保守しません。統計情報を更新する
	ためには、明示的に 'vacuum' を呼び出さなくてはなりません。統計情報
	が更新された後は、最適化モジュールが索引を使うようになり的中率が上
	がります。ただし、最適化モジュールには制約があって、(OR 句のような)
	いくつかの状況では索引を使いません。

	もし、システムが已然として索引を見ないとすれば、不適切な *_ops 型
	のフィールドに索引を創ってしまったからでしょう。たとえば、CHAR(4) 
	のフィールドを創ったのに、char_ops index type_class を指定してしま
	いました。

	どの型のクラスが利用可能かにつては、オンラインマニュアルで 
	create_index を見て下さい。フィールドの型と合うはずです。

	不適切な索引が創られても、 postgres は警告を出しません。

	索引は ORDER BY 操作のためには使われません。

3.15)	Postgres95 のための ODBC ドライバーはありますか？

	PostODBC と OpenLink ODBC の二つの ODBC ドライバーが利用可能です。

	PostODBC について興味ある人々のために、PostODBC についての議論の場
	として、現在２つのメーリングリストがあります。そのメーリングリスト
	は：
	        postodbc-users@listserv.direct.net
	と
	        postodbc-developers@listserv.direct.net

	で、これらのリストは一般的な majordomo メーリングリストです。メー
	ルを次のところに送ることによって購読が出来ます：

	        majordomo@listserv.direct.net

	OpenLink ODBC は Linux の下で現在ベータ版です。
	http://www.openlinksw.com/postgres.html から入手できます。標準的な 
	ODBCクライアント・ソフトウェアで使えますので、支援しているすべての
	プラットホーム(Win, Mac, Unix, VMS)から Postgres ODBC が利用できま
	す。

3.16)	多次元(＞２次元)の索引には postgres をどのように使えば良いですか？

	組み込まれている R-Tree でポリゴンや箱を操作できます。理論的には
	R-tree はもっと高い次元を操作するように拡張できます。実際は、
	R-tree の拡張にはちょっとした作業が必要ですが、現在、我々はどのよ
	うにするかについての文書を持っていません。

3.17)	正規表現での検索はどのようにすればよいですか？ 大文字と小文字を
	区別しない正規表現検索は？

	Postgres95 は ~ 演算子で検索する一般的な正規表現と同様に、SQL
	の LIKE 構文を支援します。!~ は否定の正規表現演算子です。
	~* と !~* は大文字と小文字を区別しない正規表現演算子です。

3.18)	'root' ユーザでデータベースにアクセスできません。

	ユーザ id ０でデータベース・ユーザを創るべきではありません。そうし
	たユーザはデータベースにはアクセスできません。これは、すべてのユー
	ザがデータベース・エンジンの中にオブジェクト・モジュールを動的に結
	合できるかわりの保全対策です。

3.19)	vacuum を行なっている時にサーバーが落ちる経験をしました。
	ロックファイルはどのようにして消せばよいのですか？

	vacuum コマンドの途中でサーバが落ちると、ロック・ファイルを残した
	ままにしてしまうでしょう。再び vacuum コマンドを走らせようとすると
	次のような結果で終ってしまいます。
		WARN:can't create lock file -- another vacuum cleaner running?

	もし、vacuum が実際に走っていないことが確認できれば、データベース・
	ディレクトリ($PGDATA/base/<dbName>ディレクトリ)の "pg_vlock"
	というファイルを消すことが出来ます。

3.20)	varchar、bpchar、bytea、text の違いは何ですか？

Type		Internal Name	Notes
--------------------------------------------------
CHAR		char		1 character   }
CHAR2		char2		2 characters  }
CHAR4		char4		4 characters  } 固定長に最適化されている
CHAR8		char8		8 characters  } 
CHAR16		char16		16 characters }
CHAR(#)		bpchar		指定された固定長となるように空白が詰められる
VARCHAR(#)	varchar		最大長の大きさを指定する、何も詰められない
TEXT		text		長さの制限は最大タップル長にのみよる
BYTEA		bytea		バイトの可変長配列

	これらのフィールドに索引を付けたり、その他の内部操作を行なうときに
	は、内部名を使う必要があることを覚えておいて下さい。

	上記の型のうち最後の４つの型は "varlena" 型です(すなわち、最初の４
	バイトがデータ長で、それの後に実際のデータが続きます)。CHAR(#) と 
	VARCHAR(#) はどれだけデータがフィールドに保存されようとも最大のバ
	イト数を確保します。TEXT と BYTE のみがディスク上でも可変長となる
	文字型です。

3.21)	問い合わせで、フィールドが NULL であることを見つけるにはどう
	しますか？

	Postgres95 は "isnull" と "notnull" の２つの内部組み込みキーワード
	を持ちます(注意、どちらも空白を入れないで)。
	たとえば：
		select * from tbl where field isnull
	は tbl から field が null 値の行を返すはずで。

3.22)	問い合わせ最適化モジュールがどのようにして問い合わせを評価するの
	かを見るにはどうしますか？

	'EXPLAIN' という単語を問い合わせの前に置いて下さい。たとえば：

	EXPLAIN SELECT * FROM table1 WHERE age = 23;

3.23)	連続のフィールドはどのように創りますか？

	Postgres95 には、連続あるいは一意のフィールドを創る方法はありませ
	ん。しかしながら、データベースをダンプして、再読み込みする必要があ
	るならば、postgres version 1.06 か 2.* の pgdump の -o オプション、
	あるいは、COPY の WITH OIDS オプションを oid を使って oid を保護す
	る必要があります。

3.24)	複数列索引はどのように創りますか？

	create index を使っても直接には複数カラム索引を創れません。複数カ
	ラムに作用する関数を定義する必要があります。そして、その関数で
	create index を使います。

3.25)	自分のデータベース・ディレクトリにある temp_XXX ファイルは何ですか？

	それらは問い合わせ実行モジュールで生成される temp_ ファイルです。
	例えば、もし ORDER BY 句を満たす為に並び替えが必要だとすると、幾つ
	かの一時ファイルが並び替えの結果として生成されます。

	もし、そのときにトランザクションも並び替えも走ってなければ、temp_ 
	ファイルを消しても大丈夫です。

3.26)	削除を行なった後でもテーブルファイルが小さくならないのはなぜですか？

	もし vacuum を走らせると、使われていない行に再利用のための印が付け
	られますが、ファイルのブロックは解放されません。使われていない行を
	ファイルの後ろに移動して ftruncate() を使ってファイルの大きさを減
	らすこともできるでしょうが、まだ、この実装は誰もしていません。

3.27)	他のマシンから自分のデータベースに接続できないのはなぜですか？

	デフォルトの設定では tcp/ip ホストは localhost からしか接続を許し
	ません。postgres95/data/pg_hba ファイルにホスト登録を追加する必要
	があります。

3.28)	索引を創ろうとすると、'default index class unsupported'というエラー
	を受け取ります。どうすればいいですか？

	多分、次の文を使ったのでしょう：

		create index idx1 on person using btree (name);

	Postgres95 の索引は拡張可能で、それゆえ、索引を創るときには 
	class_typeを指定しなければなりません。オンラインマニュアルで 
	create index のところ(create_index と呼ばれる)を読んで下さい。

3.29)	索引を創るときにバックエンド・サーバが落ちるのはなぜですか？

	おそらく、索引付けをしているフィールドに間違った *_ops 型クラスを
	定義してしまったのでしょう。

3.30)	float8 に十進定数や text に文字列を指定するにはどうしますか？
	単精度の数値を受け取るのはなぜですか？

	:: 演算子を使って下さい。デフォルトの促進ルールが失敗するときのみ
	必要とされます。

		insert into tab1 values (4.23::float8, '2343'::text)

	デフォルトの浮動小数点定数は float4 です。

3.31)	データベース中に定義された索引や演算子はどのようにして見つけ
	出しますか？

	postgres95/src/tutorial/syscat.source ファイルを走らせて下さい。そ
	れは、沢山の 'select' 文により必要な情報をデータベースのシステム・
	テーブルから取り出して例示します。

3.32)	データベースが壊れました。何もできません。なにをするべきですか？

	1.02 リリースでは問題発生の可能性と対処について記した README ファ
	イルとユーティリティがあります。postgres95/contrib/zap_ltv/README 
	にさらに詳細がありますので見て下さい。それと、どうか README の著者
	に連絡してこのバグを完全に直すのを手伝ってあげて下さい。

3.33)	Createdb, destroydb, createuser,destroyuser が走りません。どうして？

	Release 1.02 ではこの問題はありません。

	postgres95 の 1.01 リリースでは PAGER という変数を select 文の出力
	をフィルタするのに使います。運悪く、標準出力が端末以外のときもこの 
	PAGER が使われています。1996 年の ８月に出た 1.02 にアップグレード
	するか、PAGER変数を未定義にしてください。７月のメーリングリストの
	アーカイブに 1.01 でのこの問題を直すためのパッチもあります。

3.34)	'createuser' は何故 'unexpected last match in input()' を返すの
	ですか？

	flex 2.5.3 で postgres をコンパイルしたのでしょう。このバージョン
	の flex にはバグがあります。それの代りに、flex version 2.5.2 を使っ
	て下さい。flex 2.5.3 のソースコードを修正するパッチが 
	doc/README.flex ファイルの中にあります。

3.35)	同時にテーブル・アクセスするとすべてのサーバが落ちます。何故？

	この問題はセマフォを支援するように設定していないカーネルにて起こり
	得ます。

3.36)	ウェブページに postgres を繋ぐにはどんなツールがありますか？

	ウェブへの拡張のためには、PHP/FI が卓越したインターフェースとなり
	ます。その URL は、http://www.vex.net/php/ です。

	PHP は簡単な内容に対しては素晴らしいのですが、より複雑な内容に対し
	ては、依然として perl インターフェースと CGI.pm が使われています。

	C で WWW を使って Postgres に問いかける実例が次の所で試せます：

		http://www.ki.net/~mlc

3.37)	時間旅行機能とは何ですか、また、その機能と vaccuum との関係は？

	Postgres95 は他のほとんどのデータベースシステムとは異なる方法でデー
	タの変更を扱います。テーブルの中の行が変更されると、元の行は変更さ
	れた時間で印が付けられ、そして、新しい行が現在のデータで創られます。
	デフォルトでは、テーブルの中では現在の行のみが使われます。もし、
	FROM 句の中でテーブル名の後ろに 日時を指定すると、その時点で最新で
	あったデータにアクセスできます。すなわち、

		SELECT *
		FROM employees ['July 24, 1996 09:00:00']

	は、指定された時間での雇用者の行をすべて表示します。また、
	[date,date]、[date,]、[,date]、 あるいは [,] のような期間を指定で
	きます。この最後のオプションはかつて存在したすべての行にアクセスし
	ます。

	INSERTされた行もタイムスタンプを得ますので、望んだ時間のテーブルの
	中に無い行は表示されません。

	Vacuum は現行以外の行を削除します。この時間旅行機能は、ロールバッ
	クとクラッシュからの復活のためにデータベースのエンジンにより使われ
	ます。

3.38)	よりよい性能を得るためには、どのようにデータベース・エンジンを調整
	できますか？

	行なえることは２つあります。postmaster を '-o -F' オプションで起動
	することによって、fsync() を無効にする Openlink のオプションを使う
	ことができます。これによって、すべてのトランザクション後に fsync() 
	がディスクを更新するのを止めます。

	postmaster -B オプションを使ってバックエンド・プロセスとの間で共有
	する共有メモリ・バッファを大きくすることもできます。もし、このパラ
	メータを高くしすぎると、プロセスが走らなかったり、予期せずクラッシュ
	してしまいます。それぞれのバッファは 8K で、デフォルトでは 64 バッ
	ファです。

3.39)	Postgres95 の中ではどんなデバッグ機能が利用できますか？

	Postgres95 は、デバッグを行なうために価値のある、状態情報を報告す
	る幾つかの機能を持ちます。

	まず、DEBUG を定義してコンパイルすることにより、沢山の assert() が、
	バックエンドの進捗を監視し、何か予期せぬことが起きるとプログラムを
	停止します。

	postmaster と postgres の両方で幾つかのデバッグ・オプションの利用
	ができます。まず次のように、postmaster を起動するときはいつでも、
	次のように標準出力とエラー出力をログ・ファイルに送るようにしてある
	ことを確かめて下さい。

		cd /usr/local/postgres95
		./bin/postmaster >server.log 2>&1 &

	これにより postgres95 の最上部のディレクトリに server.log ファイル
	が置かれます。このファイルはサーバーが遭遇した問題やエラーについて
	役に立つ情報を含みます。Postmaster は更に詳細な情報を報告するため
	の -d オプションを持ちます。その -d オプションは、デバグ・レベルを
	指定する 1〜3 の数を取ります。冗長なデバグ・ファイルの中の問い合わ
	せ計画は 'indent' プログラムを使うことにより清書させることができま
	す。('===='の行を削除した方が良いでしょう。)デバグ・レベルを大きく
	すると、より大きなログファイルが生成されることに気を付けて下さい。

	コマンド行から、実際に postgres のバックエンドを走らせることも、ま
	た、SQL 文を直接入力することもできます。これは、デバッグの目的のた
	めにだけお勧めします。セミコロンではなく、改行が問い合わせを完結す
	ることに注意して下さい。もし、デバッグ・シンボルを一緒にコンパイル
	していたならば、何が起きているかを診るのにおそらくデバッガが使える
	でしょう。バックエンドが postmaster から起動されたのではなく、同一
	環境で走るわけではではないので、ロッキングとバックエンドとの相互関
	係の問題では重複は起こらないでしょう。あるオペレーティング・システ
	ムでは、直接に問題を診断するために、走っているバックエンドに取り付
	けることができます。

	postgres プログラムは、デバッグと性能計測にとても役に立つ -s、-A、
	-t のオプションを持ちます。

	EXPLAIN コマンド(この FAQ を参照)は postgres95 が問い合わせをどの
	様に解釈するかを見ることができるようにします。

3.40)	oid とは何ですか？ tid とは何ですか？

	Oid は一意の行 id や連続カラムなどに対する Postgres の答えです。
	Postgres の中で創られるすべての行は一意の oid を得ます。initdb
	で(backend/access/transam.h から)発生される oid はすべて 16384
	より小さい値です。initdb 後のすべての oid (ユーザ作成)はそれ以
	上の値になります。これらすべての oid はテーブル内やデータベー
	ス内に留まらず、Postgres の１つのインストレーション内で一意で
	あります。

	Postgres は別々のテーブルの行を結びつけるために、そのシステム・
	テーブル内に oid を使います。この oid は特定のユーザの行を識別す
	るためや結合の中で使われることができます。oid の値を保存するため
	には oid型のカラムを使うことを奨めます。他の内部カラムを見るには
	オンライン・マニュアルの sql(1) を見て下さい。

	Tid は特定の物理行をそのブロックとオフセット値で識別するために使
	われます。Tid は行が修正されたり際読み込みされると変わります。そ
	れらの tidは、物理行を指すために索引登録で使われます。それらは、
	sql ではアクセスできません。

3.41)	Postgres で使われる幾つかの用語の意味は何ですか？

ソースコードと古い文書の幾つかは、それよりももっと一般的な使い方のある
用語を使ってます。

	タップル(tuple)、	行(row)
	属性(attribute)、	カラム(column)
	取得(retrieve)、	選択(select)
	置換(replace)、		更新(update)
	oid、			連続値(serial value)


----------------------------------------------------------------------
第４節：	Postgres95 の拡張についての質問
----------------------------------------------------------------------
4.1)	ユーザ定義ファンクション(関数)を書きましたが、psql の中から実行
	したらコアダンプしてしまいました。

	問題は色々と考えられます。まず最初に、あなたのユーザ定義ファンクショ
	ンを単独のテスト・プログラムとして試してみて下さい。また、
	type_in() や type_out()ファンクションの実行中のように、フロントエ
	ンドがデータを待っている時に elog NOTICES を送っていないか確かめて
	下さい。
	[訳註：elog は error logging です。]

4.2)	次のようなメッセージを受け取ります。
	NOTICE:PortalHeapMemoryFree: 0x402251d0 not in alloc set!

	palloc されていない何かを pfree しようとしています。ユーザ定義ファ
	ンクション(関数)を書くときに "libpq-fe.h" をインクルードしないよう
	にして下さい。それをすると palloc が free のかわりにmalloc になっ
	てしまいます。そして、バックエンドが保存領域を pfreeしようとすると
	きに、そのことを知らせるメッセージを受け取ります。

4.3)	私は、Postgres95 のために粋な新しい型と関数を書きました。

	どうか、それらを他の postgres95 ユーザと分かちあって下さい。皆さん
	の行なった拡張をメーリング・リストに送ってください。そして、ゆくゆ
	くはそうした拡張が contrib/ サブディレクトリに入ることになるでしょ
	う。

4.4)	タップルを返す C の関数はどのように書きますか？

	これには極端な妙技を要します、あまりにも極端すぎて著者らは未だかつ
	てやってみたことがありませんが、原理的には可能です。手短に答えると...
	それは無理です。この機能は将来、やがて出来るようになります。

----------------------------------------------------------------------
第５節：	バグについて
----------------------------------------------------------------------

5.1)	バグの修正版はどこでみつかりますか？

	ftp.ki.net:/pub/postgres95 というディレクトリにはパッチと最新版が
	あります。

5.2)	バグ・レポートはどういうふうにしますか？

	最初に、見つけたバグが既に修正されたもの(質問5.1)ではないことを確
	認して下さい。そして、"bug-template" ファイルの項目を埋めて、それ
	を下記に送って下さい：

		pg95-dev@ki.net

	これは、開発者メーリング・リストのアドレスです。


</PRE>
</BODY>
</HTML>
