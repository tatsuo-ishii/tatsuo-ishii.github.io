<A NAME="8">
<PRE><B>
From: Hanai Hiroyuki &lt;hanai@astec.co.jp&gt;
Date: Fri, 13 Dec 1996 14:48:50 +0900
Subject: [postgres95 1163] Re: introduction&amp;questions
Message-Id: &lt;9612130548.AA08818@domino.astec.co.jp&gt;
</A>
</B></PRE>
<PRE>

坂本さん:
&gt;  &gt; MSIE って charset=x-euc-jp がわからないというか、理解できないというか、
&gt;  &gt; 無視するというか、そういうのじゃなかったでしたっけ?
&gt; 
&gt; MSIE3.01で試してみました。
&gt; 理解していないようです…

西嶋さん:
&gt; ちょっとだけやってみました。
&gt; しかし、MSIE3.0では文字化けしました。（NetscapeではＯＫ）
&gt; 十分なテストはしてませんが、やはり、MSIEの問題でしょうか？

やっぱりそうでしたか。

坂本さん:
&gt; クライアントにMSIEがいる場合、&lt;META…&gt;だけじゃだめなんですねぇ *sigh*
&gt; 他にも対応してないのがいるんでしょうか。

それはなかなかわかんないですよね。
実装依存なんだから、ブラウザの方に期待するような対処方法っていうのは
私はあんまり好きじゃないです。
というわけで、

&gt; まじめに漢字コード変換してやらないといけないようですね。

私がすすめるのはこれですね。
対した手間じゃないし。

-----はない
<HR>
</PRE>
<A NAME="7">
<PRE><B>
From: sakamoto@cec.co.jp (Kazuki Sakamoto)
Date: Fri, 13 Dec 96 14:21:25 JST
Subject: [postgres95 1162] Re: introduction&amp;questions
Message-Id: &lt;9612130521.AA14006@mugi.cec.co.jp&gt;
</A>
</B></PRE>
<PRE>

坂本＠中央電子です。

&lt;9612130415.AA08113@domino.astec.co.jp&gt;の記事にて
1996年12月13日(金)、hanai@astec.co.jpさんの記述は:
 &gt; MSIE って charset=x-euc-jp がわからないというか、理解できないというか、
 &gt; 無視するというか、そういうのじゃなかったでしたっけ?

MSIE3.01で試してみました。
理解していないようです…

クライアントにMSIEがいる場合、&lt;META…&gt;だけじゃだめなんですねぇ *sigh*
他にも対応してないのがいるんでしょうか。


まじめに漢字コード変換してやらないといけないようですね。

sakamoto@cec.co.jp
<HR>
</PRE>
<A NAME="6">
<PRE><B>
From: nishijim@hkc.fujioil.co.jp (Nishijima Taisaku)
Date: Fri, 13 Dec 1996 14:19:24 +0900
Subject: [postgres95 1161] Re^3: introduction&amp;questions
Message-Id: &lt;9612130514.AA08952@hkc.fujioil.co.jp&gt;
</A>
</B></PRE>
<PRE>

西嶋です。
At  0:54 PM 96.12.13 +0900, Kazuki Sakamoto wrote:
&gt;
&gt;つまり、
&gt;
&gt;&lt;HTML&gt;
&gt;&lt;HEAD&gt;
&gt;&lt;TITLE&gt;test&lt;/TITLE&gt;
&gt;&lt;META HTTP-EQUIV=&quot;Content-Type&quot; CONTENT=&quot;text/html; charset=x-euc-jp&quot;&gt;
&gt;&lt;/HEAD&gt;
&gt;
&gt;&lt;BODY&gt;
&gt;...
&gt;
&gt;とHTMLファイルに書いておくだけで、
&gt;Webブラウザが&lt;FORM&gt;で送られる文字列を日本語EUCに変換して送ってくれます。
&gt;
&gt;そのHTMLファイルの内容は、日本語EUCで書かなければならなくなりますが。
&gt;
ちょっとだけやってみました。
しかし、MSIE3.0では文字化けしました。（NetscapeではＯＫ）
十分なテストはしてませんが、やはり、MSIEの問題でしょうか？
--
不二製油株式会社　特許室
0724-63-1564
nishijim@fujioil.co.jp  西嶋　大作

<HR>
</PRE>
<A NAME="5">
<PRE><B>
From: Hanai Hiroyuki &lt;hanai@astec.co.jp&gt;
Date: Fri, 13 Dec 1996 13:15:37 +0900
Subject: [postgres95 1160] Re: Re: introduction&amp;questions
Message-Id: &lt;9612130415.AA08113@domino.astec.co.jp&gt;
</A>
</B></PRE>
<PRE>

&gt; &lt;HTML&gt;
&gt; &lt;HEAD&gt;
&gt; &lt;TITLE&gt;test&lt;/TITLE&gt;
&gt; &lt;META HTTP-EQUIV=&quot;Content-Type&quot; CONTENT=&quot;text/html; charset=x-euc-jp&quot;&gt;
&gt; &lt;/HEAD&gt;
&gt; 
&gt; &lt;BODY&gt;

MSIE って charset=x-euc-jp がわからないというか、理解できないというか、
無視するというか、そういうのじゃなかったでしたっけ?

&gt; とHTMLファイルに書いておくだけで、
&gt; Webブラウザが&lt;FORM&gt;で送られる文字列を日本語EUCに変換して送ってくれます。
&gt; 
&gt; そのHTMLファイルの内容は、日本語EUCで書かなければならなくなりますが。

現状でブラウザに任せるのはちょっとアレなような気がするのですが、
そうでもないんでしたっけ?

-----はない
<HR>
</PRE>
<A NAME="4">
<PRE><B>
From: Yoshio Funaki &lt;yoshio@Air.akita-u.ac.jp&gt;
Date: Fri, 13 Dec 1996 11:57:06 +0900
Subject: [postgres95 1159] Re of Re:introduction&amp;questions 
Message-Id: &lt;9612130257.AA00054@mebius.air.akita-u.ac.jp&gt;
</A>
</B></PRE>
<PRE>

石井＠SRAさん、おみつ@TrampさんさっそくのReありがとうございます。

&gt;&gt;１：どうやってデータを移植すればよいのか。

from:石井
&gt;元データの構造と、何を検索対象にしたいのかが分からないと、答えようがな
&gt;いと思います。差し支えなければ、元データのサンプル、検索画面の機能に関
&gt;するアイデアなどがあればよいのですが。

from:おみつ
&gt;目録というのが、どのような形式になるかわかりませんが、
&gt;もとのデータを「タブ」で分けた形式にすれば
&gt;簡単にコピー(copy &lt;table名&gt; from 'ファイルへのパス')
&gt;できるはずです :-)

保存形式は、DOSで言うところのCVS(comma separated value ?)形式です。
適当なフィルターを作ればTAB区切りに変更は簡単なので、けっこう楽に
変換できるかもしれませんね。DOS上なんでMifesとかでもできそうだし・・

あ、ということはpostgres95のファイル形式は、データをTABで区切った
形をしてるんでしょうか？
英文マニュアルを読んだ限りではBinaryがどうのASCIIがどうのと書いてあって
なんだかよく分からなかったものですから。

それとデータの内容ですが、基本的に資料番号（１冊ずつユニーク）と
書名、著者名、出版社、出版年、出版地とかいろいろ項目があって、
まともに全部吸い上げると２５０項目を越えます。
とうぜん資料番号のような１対１対応の（ユニークな）データもあれば
出版社のような１体多対応のデータもあって（大出版社だとその下に
何万もの本がぶら下がることになります）めちゃめちゃです。
また、１項目長（カラム長？）は1バイトから8KB超までこれもめちゃくちゃです。

実際、検索対象になるのは１０項目位なんですがよく考えてやらないと
大変なことは確かです。

現在の構想としては、DBASEとかと同じように、ユニークなデータ
（たとえば資料番号）と、検索項目のみを持つファイルを作って、それにINDEXを
かけ（つまり検索項目別にファイルを作って）、検索した結果出てくるユニークデータ
でもって各ファイルをリンクするような形をとれば検索が速いんではないか
と思っていますがいかがでしょうか？

よろしくご教示下さい。

船木＠秋田県立図書館　yoshio@air.akita-u.ac.jp
<HR>
</PRE>
<A NAME="3">
<PRE><B>
From: sakamoto@cec.co.jp (Kazuki Sakamoto)
Date: Fri, 13 Dec 96 12:54:59 JST
Subject: [postgres95 1158] Re: Re: introduction&amp;questions
Message-Id: &lt;9612130354.AA13357@mugi.cec.co.jp&gt;
</A>
</B></PRE>
<PRE>

坂本＠中央電子です。

&lt;199612130313.MAA02780@log.tramp.co.jp&gt;の記事にて
1996年12月13日(金)、mitsu@tramp.co.jpさんの記述は:
 &gt; &gt; ２：Netscape等のビューワーから送られる検索対象文字はSJIS,JIS,EUCと
 &gt; &gt; 　　多彩になることが考えられるが、どの時点でEUCに変換してpostgres95
 &gt; &gt; 　　にSQLをかけるようにすればもっとも効率がよいか。
 &gt; これが結構難題でして ... :-)
 &gt; 
 &gt; # 只今 PHP/FI というスクリプトの漢字コードの変換を目論んでいるのですが、
 &gt; # いまいち進捗状況はよろしくありません ... ^^;
 &gt; # 前に ML に投稿させていただいた KanjiConv() は、JIS 以外では
 &gt; # なんとか動作しているようです。
 &gt; 
 &gt; CGI などに渡して、nkf などをフィルタさせてやるのが現実的でしょうか...

CGIでperlを使うならjcode.plとかもありですね。


でも、Webブラウザ側で日本語EUCに変換してから渡してもらえれば、
受け取る側での変換は必要ないわけですから、

&lt;199612050407.NAA14972@lance.rsl.crl.fujixerox.co.jp&gt;の記事にて
1996年12月05日(木)、sekijima@crl.fujixerox.co.jpさんの記述は:
 &gt; &gt; 特に、PHP/FI 上へブラウザが Shift-JIS で送った場合そのまま Postgres95
 &gt; &gt; に(Shift-JIS)で処理されてしまいます。
 &gt; &gt; できれば、PHP/FI 上で漢字コードの変換ができればよいのですが・・
 &gt; 
 &gt; Netscapeのような文字コード自動切替機能のついたブラウザしか使わないのな
 &gt; ら、HTMLファイルの&lt;head&gt;タグのところに、
 &gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=x-euc-jp&quot;&gt;
 &gt; と書いて、文字コードをEUCに固定してしまえばいいんじゃないでしょうか？

つまり、

&lt;HTML&gt;
&lt;HEAD&gt;
&lt;TITLE&gt;test&lt;/TITLE&gt;
&lt;META HTTP-EQUIV=&quot;Content-Type&quot; CONTENT=&quot;text/html; charset=x-euc-jp&quot;&gt;
&lt;/HEAD&gt;

&lt;BODY&gt;
...

とHTMLファイルに書いておくだけで、
Webブラウザが&lt;FORM&gt;で送られる文字列を日本語EUCに変換して送ってくれます。

そのHTMLファイルの内容は、日本語EUCで書かなければならなくなりますが。

sakamoto@cec.co.jp
<HR>
</PRE>
<A NAME="2">
<PRE><B>
From: Mitsuhiro Maeda &lt;mitsu@tramp.co.jp&gt;
Date: Fri, 13 Dec 1996 12:13:58 +0900
Subject: [postgres95 1157] Re: introduction&amp;questions
Message-Id: &lt;199612130313.MAA02780@log.tramp.co.jp&gt;
</A>
</B></PRE>
<PRE>

おみつ@Tramp です。

From: Yoshio Funaki &lt;yoshio@Air.akita-u.ac.jp&gt;
Subject: [postgres95 1155] introduction&amp;questions
Date: Fri, 13 Dec 1996 10:33:33 +0900

&gt; 初めまして。新参者　船木＠秋田県立図書館ともうします。
はじめまして。

&gt; １：どうやってデータを移植すればよいのか。
目録というのが、どのような形式になるかわかりませんが、
もとのデータを「タブ」で分けた形式にすれば
簡単にコピー(copy &lt;table名&gt; from 'ファイルへのパス')
できるはずです :-)

ただ後にもあるように、8k を超えるものがあるようでしたら、
コピーするためのスクリプトなどを書くのがよろしいのではないかと。

あと、過去のメールアーカイブ(800番台くらい)に、
目録のスピードアップ等の投稿もありました。

&gt; ２：Netscape等のビューワーから送られる検索対象文字はSJIS,JIS,EUCと
&gt; 　　多彩になることが考えられるが、どの時点でEUCに変換してpostgres95
&gt; 　　にSQLをかけるようにすればもっとも効率がよいか。

これが結構難題でして ... :-)

# 只今 PHP/FI というスクリプトの漢字コードの変換を目論んでいるのですが、
# いまいち進捗状況はよろしくありません ... ^^;
# 前に ML に投稿させていただいた KanjiConv() は、JIS 以外では
# なんとか動作しているようです。

CGI などに渡して、nkf などをフィルタさせてやるのが現実的でしょうか...


&gt; ３：可変長データなので、１項目の長さが8KBを越える可能性もあるが
&gt; 　　Big Objectについての概念がよく分からない。

まだ Postgres95 の large object は、いまいちつかえない印象が強いです。
# ばかみたいにデータが大きくなったり ... :-)

メールアーカイブに、この ML の主催者の石井さんが投稿して下さった
 large object の取り扱いサンプル([postgres95 327])などがあります。


== おみつ
<HR>
</PRE>
<A NAME="1">
<PRE><B>
From: Tatsuo Ishii &lt;t-ishii@sra.co.jp&gt;
Date: Fri, 13 Dec 1996 12:03:14 +0900
Subject: [postgres95 1156] Re: introduction&amp;questions 
Message-Id: &lt;199612130303.MAA23714@srashd.sra.co.jp&gt;
</A>
</B></PRE>
<PRE>

こんにちは、石井＠SRAと申します。

&gt;さて、さっそくですが質問を・・・・
&gt;
&gt;前置き：
&gt;現在、IPA（情報振興事業協会）のパイロットプロジェクトとして
&gt;全国総合目録（全国から対象館を選びそこの図書の情報を一括
&gt;管理して公開する事業）に参加していますが、その情報を情報
&gt;基盤センター（慶応大学湘南藤沢キャンパス内）にftpする際に
&gt;中間ファイルが作成されまして、それをコピーして保存・変換
&gt;することによって所蔵資料のデータをSJIS形式で保存してあります。
&gt;
&gt;本題：
&gt;この資料情報をpostgres95に移植して、それをもとにWebで公開したい
&gt;のです。漢字コードはnkf等でEUCにすればＯＫらしいので問題はないと
&gt;考えていますが
&gt;
&gt;１：どうやってデータを移植すればよいのか。

元データの構造と、何を検索対象にしたいのかが分からないと、答えようがな
いと思います。差し支えなければ、元データのサンプル、検索画面の機能に関
するアイデアなどがあればよいのですが。

&gt;２：Netscape等のビューワーから送られる検索対象文字はSJIS,JIS,EUCと
&gt;　　多彩になることが考えられるが、どの時点でEUCに変換してpostgres95
&gt;　　にSQLをかけるようにすればもっとも効率がよいか。

CGI であれば、URL エンコーディングを解析するあたりで変換してしまうのが
簡単でしょう。PHP/FI なら、現在おみつさんの日本語化が進行中です。

&gt;３：可変長データなので、１項目の長さが8KBを越える可能性もあるが
&gt;　　Big Objectについての概念がよく分からない。

１項目と言うのが１フィールド or カラムを指していますか？正確には、１レ
コードの大きさが8kbを越えるのもまずいです。

ところで、large object ですが、ファイル名の代わりに、oid という数字で
扱うファイルのようなものだと思えば良いのではないでしょうか。ちなみに、
石井は large object にテキストを入れておいて、フルテキストサーチする関
数をこのメーリングリストに投稿したことがあります。
---
t-ishii@sra.co.jp	石井達夫
（株）ＳＲＡ
<HR>
</PRE>
<A NAME="0">
<PRE><B>
From: Yoshio Funaki &lt;yoshio@Air.akita-u.ac.jp&gt;
Date: Fri, 13 Dec 1996 10:33:33 +0900
Subject: [postgres95 1155] introduction&amp;questions
Message-Id: &lt;9612130133.AA00053@mebius.air.akita-u.ac.jp&gt;
</A>
</B></PRE>
<PRE>

初めまして。新参者　船木＠秋田県立図書館ともうします。
昨晩やっとpostgres95をインストールした超初心者ですので
なにとぞよろしくお願いいたします。
私は、NEC ACOS3500という汎用のおもりとWebmasterもどき
（http://air.akita-u.ac.jp/apl/index.htm）を担当してますが
このWebで図書館の資料情報を公開すべくpostgres95を勉強したい
と思っております。

さて、さっそくですが質問を・・・・

前置き：
現在、IPA（情報振興事業協会）のパイロットプロジェクトとして
全国総合目録（全国から対象館を選びそこの図書の情報を一括
管理して公開する事業）に参加していますが、その情報を情報
基盤センター（慶応大学湘南藤沢キャンパス内）にftpする際に
中間ファイルが作成されまして、それをコピーして保存・変換
することによって所蔵資料のデータをSJIS形式で保存してあります。

本題：
この資料情報をpostgres95に移植して、それをもとにWebで公開したい
のです。漢字コードはnkf等でEUCにすればＯＫらしいので問題はないと
考えていますが

１：どうやってデータを移植すればよいのか。
２：Netscape等のビューワーから送られる検索対象文字はSJIS,JIS,EUCと
　　多彩になることが考えられるが、どの時点でEUCに変換してpostgres95
　　にSQLをかけるようにすればもっとも効率がよいか。
３：可変長データなので、１項目の長さが8KBを越える可能性もあるが
　　Big Objectについての概念がよく分からない。

ということでよろしくお願いいたします。

秋田県立図書館　船木　yoshio@air.akita-u.ac.jp


<HR>
</PRE>
