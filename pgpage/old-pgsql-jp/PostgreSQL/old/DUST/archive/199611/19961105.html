<A NAME="7">
<PRE><B>
From: Tatsuo Ishii &lt;t-ishii@sra.co.jp&gt;
Date: Tue, 05 Nov 1996 18:33:07 +0900
Subject: [postgres95 963] postgres95-1.09 available!
Message-Id: &lt;199611050933.SAA09333@srashc.sra.co.jp&gt;
</A>
</B></PRE>
<PRE>

石井です。1.09 が出ましたね。まだコンパイルはしていないのですが、
pg95perl15 が contrib に入ったのが注目されます。

また、ドキュメント関係では、FAQ(update)、FAQ-Irix(new), FAQ-Linux(new)
が更新されてます。桑村さんが大変そう:-)

以下、1.08-&gt;1.09 の変更の様子を付けておきます。
---
t-ishii@sra.co.jp	石井達夫
（株）ＳＲＡ

File postgres95/INSTALL changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/contrib/pg95perl5/ApachePg.pl is new; current revision 1.1.1.1
File postgres95/contrib/pg95perl5/Changes is new; current revision 1.1.1.1
File postgres95/contrib/pg95perl5/MANIFEST is new; current revision 1.1.1.1
File postgres95/contrib/pg95perl5/Makefile.PL is new; current revision 1.1.1.1
File postgres95/contrib/pg95perl5/Pg.pm is new; current revision 1.1.1.1
File postgres95/contrib/pg95perl5/Pg.xs is new; current revision 1.1.1.1
File postgres95/contrib/pg95perl5/README is new; current revision 1.1.1.1
File postgres95/contrib/pg95perl5/test.pl is new; current revision 1.1.1.1
File postgres95/contrib/pg95perl5/typemap is new; current revision 1.1.1.1
File postgres95/contrib/sup/postgres95/last.pg95perl5 is new; current revision 1.1.1.1
File postgres95/contrib/sup/postgres95/when.pg95perl5 is new; current revision 1.1.1.1
File postgres95/doc/FAQ changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/doc/FAQ-Irix is new; current revision 1.1.1.1
File postgres95/doc/FAQ-Linux is new; current revision 1.1.1.1
File postgres95/doc/man/copy.l changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/doc/man/select.l changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/doc/man/update.l changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/Makefile changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/Makefile.global changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/backend/access/common/heapvalid.c changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/backend/access/common/indexvalid.c changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/backend/access/nbtree/nbtinsert.c changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/backend/access/nbtree/nbtsearch.c changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/backend/catalog/heap.c changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/backend/commands/copy.c changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/backend/executor/nodeAgg.c changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/backend/executor/nodeIndexscan.c changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/backend/parser/gram.y changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/backend/parser/keywords.c changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/backend/postmaster/postmaster.c changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/backend/rewrite/rewriteSupport.c changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/backend/storage/lmgr/lock.c changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/backend/storage/lmgr/proc.c changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/backend/tcop/postgres.c changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/backend/utils/rel.h changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/backend/utils/adt/acl.c changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/backend/utils/cache/catcache.c changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/backend/utils/cache/relcache.c changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/bin/pg_dump/pg_dump.c changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/src/bin/pg_dump/pg_dump.h changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/sup/postgres95/last.postgres95-support changed from revision 1.1.1.1 to 1.1.1.2
File postgres95/sup/postgres95/when.postgres95-support changed from revision 1.1.1.1 to 1.1.1.2
<HR>
</PRE>
<A NAME="6">
<PRE><B>
From: Tatsuo Ishii &lt;t-ishii@sra.co.jp&gt;
Date: Tue, 05 Nov 1996 18:28:32 +0900
Subject: [postgres95 962] Re: はじめまして。
Message-Id: &lt;199611050928.SAA08947@srashc.sra.co.jp&gt;
</A>
</B></PRE>
<PRE>

石井＠SRAと申します。

&gt;はじめまして、朝倉と申します。
&gt;
&gt;会社でpostgres95を使用して社員データベースを作っています。
&gt;日付と時間の関数 MONTH(&lt;date&gt;)やAGE(&lt;date1&gt;,&lt;date2&gt;)などを使用したいのですが
&gt;エラーとなってしまい使用できません。
&gt;postgresでは対応していないのでしょうか？

contrib/datetime/ にいくつか関数が定義されていますが、これでは駄目です
か？

doc を引用しておきます。
---
t-ishii@sra.co.jp	石井達夫
（株）ＳＲＡ
------------------------------------------------------------
Some time ago I read in the mailing list requests of people looking
for more time and date functions.  I have now written some of them:

  time_difference(time1, time2) ,also defined as operator '-'
  hour(time)
  minutes(time)
  seconds(time)
  asMinutes(time)
  asSeconds(time)
  currentTime()
  currentDate()

The file can be compiled as shared library and loaded as dynamic module
without need to recompile the backend.  This can also be taken as an example
of the extensibility of postgres (user-defined functions, operators, etc).
I would be nice to see more of these user contributed modules posted to this
list and hopefully accessible from the Postgres home page.
<HR>
</PRE>
<A NAME="5">
<PRE><B>
From: 朝倉秀明  &lt;asakura@micros.co.jp&gt;
Date: Tue, 05 Nov 1996 18:01:27 +0900
Subject: [postgres95 961] はじめまして。
Message-Id: &lt;9611050903.AA01467@hinoki.micros.co.jp&gt;
</A>
</B></PRE>
<PRE>

はじめまして、朝倉と申します。

会社でpostgres95を使用して社員データベースを作っています。
日付と時間の関数 MONTH(&lt;date&gt;)やAGE(&lt;date1&gt;,&lt;date2&gt;)などを使用したいのですが
エラーとなってしまい使用できません。
postgresでは対応していないのでしょうか？
またどの様な関数を対応しているのでしょうか？

今後ともよろしくお願いします。
                                  ------------------------------------------
                                   朝倉  秀明 (hideaki asakura)
                                   (株)ミクロスソフトウェア
                                   E-mail: asakura@micros.co.jp
                                   http://www.micros.co.jp/
                                   tel:044(813)7211  fax:044(850)1655
                                  ------------------------------------------

<HR>
</PRE>
<A NAME="4">
<PRE><B>
From: Tatsuo Ishii &lt;t-ishii@sra.co.jp&gt;
Date: Tue, 05 Nov 1996 14:09:54 +0900
Subject: [postgres95 960] Re: How to use large object 
Message-Id: &lt;199611050509.OAA16660@srashc.sra.co.jp&gt;
</A>
</B></PRE>
<PRE>

石井です。どうも週明けは気分が乗らないので、おみつさんのメールを機会に
逃避に走ってしまいます:-)

&gt;おみつ@Tramp です。

&gt;というのは、psql 上から「lo_export」とした場合、
&gt;ユーザー名に関係なくはきだされたファイルの所有者は
&gt;「postgres」(PG95の所有者)になってしまいます。(postgres95-1.06)
&gt;石井さんが流された bigtext.tar.gz 中での check.sh も 「cat $tmp」が
&gt;Permission denied になってしまうわけです。
&gt;# これも変な仕様だと思うのですが :-&lt;

私の check.sh の不備はさておいて:-)、こういうパーミッションになってし
まうのはやむを得ないと思いますが。postgres95 では、登録ユーザにアサイ
ンされた id は必ずしも postmaster の動いているホストに登録されたアカウ
ントと一致している必要はないし、そのユーザが /etc/passwd に存在してい
る必要もありません。ですから、remote から接続したユーザの Unix 上のア
カウントがサーバの動いているマシンに存在しない場合には、postgres とし
ては lo_export でどういう owner でファイルを作ったら良いかわかりません
というか、全部 postmaster の uid で作るしかないわけです。また、world
readable でファイルを作るのもナニだし。
# lo_export の引数に umask を追加すれば良いのかな。

&gt;Ishii&gt; なにより、lo_export では、サーバ上のファイルシステムにしかファイルを吐
&gt;Ishii&gt; き出すことができませんよね。ここは、クライアントCライブラリの 
&gt;Ishii&gt; lo_export を使うのが筋でしょう(あるいは、pgtclsh などを通じて 
&gt;Ishii&gt; lo_export を呼び出す)。
&gt;ということで、C のライブラリの lo_export から試してみたところ、
&gt;-rw-r--r--   1 mitsu    adm          8697 Nov  5 13:37 test.tmp
&gt;となりました :-)

しかし、これだと psql から select 文で呼び出せないのが痛いところですね。
---
t-ishii@sra.co.jp	石井達夫
（株）ＳＲＡ
<HR>
</PRE>
<A NAME="3">
<PRE><B>
From: Mitsuhiro Maeda &lt;mitsu@tramp.co.jp&gt;
Date: Tue, 05 Nov 1996 13:54:50 +0900
Subject: [postgres95 959] Re: How to use large object 
Message-Id: &lt;199611050454.NAA01204@log.tramp.co.jp&gt;
</A>
</B></PRE>
<PRE>

おみつ@Tramp です。

Large Object に関して、
なんとなくいい加減なポストをしてしまった感がありますので、
自己フォローということで...

From: Mitsuhiro Maeda &lt;mitsu@tramp.co.jp&gt;
Subject: [postgres95 941] Re: How to use large object 
Date: Fri, 01 Nov 1996 14:51:04 +0900

mitsu&gt; ですが lo_export 関数のはきだすファイルは、
mitsu&gt; -rw-------   1 postgres ....
mitsu&gt; になってしまうんですね。

というのは、psql 上から「lo_export」とした場合、
ユーザー名に関係なくはきだされたファイルの所有者は
「postgres」(PG95の所有者)になってしまいます。(postgres95-1.06)
石井さんが流された bigtext.tar.gz 中での check.sh も 「cat $tmp」が
Permission denied になってしまうわけです。
# これも変な仕様だと思うのですが :-&lt;

Ishii&gt; なにより、lo_export では、サーバ上のファイルシステムにしかファイルを吐
Ishii&gt; き出すことができませんよね。ここは、クライアントCライブラリの 
Ishii&gt; lo_export を使うのが筋でしょう(あるいは、pgtclsh などを通じて 
Ishii&gt; lo_export を呼び出す)。
ということで、C のライブラリの lo_export から試してみたところ、
-rw-r--r--   1 mitsu    adm          8697 Nov  5 13:37 test.tmp
となりました :-)

mitsu&gt; lo_export はあきらめて、
mitsu&gt; lo_read, lo_seek を使った方が正解なのかもしれません。
というのは、好みの問題というところでしょうか...

== おみつ
<HR>
</PRE>
<A NAME="2">
<PRE><B>
From: hidekazu tokunaga &lt;tokunaga@takamatsu-nct.ac.jp&gt;
Date: Tue, 5 Nov 1996 11:54:01 +0900
Subject: [postgres95 958] erorr createuser
Message-Id: &lt;9611050254.AA01829@ataka.takamatsu-nct.ac.jp&gt;
</A>
</B></PRE>
<PRE>

createuser コマンドを実行すると，以下のエラーが出ます。
原因と対策をお教え下さい。

sswing:~/postgres95&gt; createuser tokunaga
createuser: database access failed.
sswing:~/postgres95&gt; cat pm.log
postmaster: ServerLoop: connect on 4
be_recvauth: host-based authentication failed
postmaster: ConnStartup: authentication failed
postmaster: ServerLoop:         done with 4


FROM : 徳永　秀和(制御情報工学科）
　　　　&lt;tokunaga@takamatu-nct.ac.jp&gt;
        TEL.3897
<HR>
</PRE>
<A NAME="1">
<PRE><B>
From: Hanai Hiroyuki &lt;hanai@astec.co.jp&gt;
Date: Tue, 05 Nov 1996 11:30:36 +0900
Subject: [postgres95 957] Re: help: usage of php
Message-Id: &lt;9611050230.AA29969@domino.astec.co.jp&gt;
</A>
</B></PRE>
<PRE>

&gt; でも、phpって結構便利ですよね。これまで、perlで採番していたの
&gt; ですが、pg95＋phpに乗り換えてしまいました。phpだとタイプ量が全
&gt; 然違うんですよね。

便利だとは思いますが、phpのスクリプト言語(って言っていいのかな?)って
ワリと Perlに似てますよね。
似ていながら、ちょっとチガウっていうのは最近脳の衰えを感じ始めた僕
にとってはツライ時があります。

-----はない
<HR>
</PRE>
<A NAME="0">
<PRE><B>
From: Mitsunori Tadokoro &lt;tadokoro@tpe.iec.toshiba.co.jp&gt;
Date: Tue, 05 Nov 1996 09:08:14 +0900
Subject: [postgres95 956] Re: help: usage of php
Message-Id: &lt;9611050008.AA00177@ji1993.tpe.iec.toshiba.co.jp&gt;
</A>
</B></PRE>
<PRE>

Hanai Hiroyuki &lt;hanai@astec.co.jp&gt; さんは書きました：
&gt; うーんと、おバカをやってまして、
&gt; 
&gt;    StripSlashes($a);
&gt; 
&gt; 等と書いてたのですが、ソースを読んだところ、ストリップされた文字列が
&gt; 返されるみたいです。

私も最初はこう書いて、「あれ？かわらんなあ？」とやってました(^^;。

&gt; でも、doc.html の
&gt; 
&gt;   StripSlashes(arg) 
&gt;         StripSlashes unescapes the string argument. See also AddSlashes().
&gt; 
&gt;   AddSlashes(arg) 
&gt;         Escapes any $ \ or ' (if MAGIC_QUOTES is set) with a backslash.
&gt; 	See also StripSlashes().
&gt; 
&gt; っていうのもちょっと不親切ですね。
&gt; せめて、返り値があることぐらい書いてくれても良さそうなのに…

そうそう、不親切ですよね。とりあえず、簡単なプログラム書いて
やって確認しないとなんないし。
でも、phpって結構便利ですよね。これまで、perlで採番していたの
ですが、pg95＋phpに乗り換えてしまいました。phpだとタイプ量が全
然違うんですよね。

--
Mitsunori Tadokoro                            (^^) Laugh and peace (^^)v
mailto:tadokoro@tpe.iec.toshiba.co.jp (Office)
mailto:tado@ji1nkf.imasy.or.jp (Private)
TOSHIBA Co. Isogo Engineering Center Turbin Plant Enginearing Department
<HR>
</PRE>
