<A NAME="6">
<PRE><B>
From: Tatsuo Ishii &lt;t-ishii@sra.co.jp&gt;
Date: Fri, 24 Jan 1997 18:49:13 +0900
Subject: [postgres95 1264] Re: pg95perl vs Postgresperl 
Message-Id: &lt;199701240949.SAA01460@srashd.sra.co.jp&gt;
</A>
</B></PRE>
<PRE>

石井です。

&gt;おはようございます。たてやま＠JSTです。

&gt;You(Takafumi Hayashi &lt;takafumi@u-aizu.ac.jp&gt; さま) wrote 
&gt;&gt; &gt; PostgresPerl
&gt;&gt; ftp://ftp.u-aizu.ac.jp/pub/dbms/postgres95/PostgresPerl
&gt;&gt; にmirrorしてありますので、よろしかったらどうぞ..
&gt;
&gt; 是非、このようなMirror Site等の情報も石井さんのページからたどれると
&gt; うれしいと思うんですが、いかがでしょうか？

済みません。一応私が知っている公式ミラーサイトは ftp.jaist.ac.jp だけ
なので、ftp.u-aizu.ac.jp は知りませんでした。今後はどんどん追加してい
きます。
# 公開してもいいよ、という ftp サイトがあれば、名乗りをお願いします。

ところで、リンク構いませんか？ &gt; takafumi@u-aizu.ac.jpさん。
---
t-ishii@sra.co.jp	石井達夫
（株）ＳＲＡ
<HR>
</PRE>
<A NAME="5">
<PRE><B>
From: fukaya@chubu.ksd.co.jp (Fukaya/深谷)
Date: Fri, 24 Jan 1997 18:42:32 +0900
Subject: [postgres95 1263] Postgresperl ld.so: warning: libpq.so.1.0: minor version ?
Message-Id: &lt;199701240942.SAA21086@chubu.ksd.co.jp&gt;
</A>
</B></PRE>
<PRE>

深谷＠川鉄情報システムです。

Postgresperl の所在の件では、一橋の妻鹿さん、Takafumi Hayashiさん、
たてやま＠JSTさんからフォローを戴き、昼休みにインストールしてみました。

Takashi Mega さんが 97.01.23ごろに
「[postgres95 1257] Re: pg95perl vs Postgresperl(Re: Q: FreeBSD」の件で：
妻鹿さん&gt; 一橋の妻鹿です。
・・・
妻鹿さん&gt; 深谷さん&gt; PostgresPerl の所在を御存知でしたら教えて戴けませんか？
妻鹿さん&gt; 深谷さん&gt; 私も試してみたいと思います。
妻鹿さん&gt;
妻鹿さん&gt; ftp://ftp.kciLink.com/pub/PostgresPerl-1.3.tar.gz ですね。

Takafumi Hayashi さん&gt; ftp://ftp.u-aizu.ac.jp/pub/dbms/postgres95/PostgresPerl
Takafumi Hayashi さん&gt; にmirrorしてありますので、よろしかったらどうぞ..

たてやまさん&gt; すでに、妻鹿さんや林さんからフォローがありましたが、
たてやまさん&gt; 私は石井さんのページからリンクされている
たてやまさん&gt;        &quot;本家 postgres95 ML archive の wais search&quot;
たてやまさん&gt;        (http://www.ucolick.org/~de/pglist.html)
たてやまさん&gt; を使ってみつけました。
たてやまさん&gt; これまで、大抵のことはここで事足りております。

みなさん、ありがとうございました。

・・・で、また問題が出たのです・・・・スミマセン・・・

PostgresPerl は動くことは動くのですが、起動時になにやらメッセージが
出ますが、これはどういう意味なのでしょう？？（シロートなのがばれてしまう・・）

ld.so: warning: libpq.so.1.4096: minor version &lt; 19456 expected, using it anyway
ld.so: warning: libpq.so.1.0: minor version &lt; 19456 expected, using it anyway

libpq.so.1 といえば、先日から苦労して皆さんに教えていただきながら作成した
ものですが、なにか作成手順を間違えたのでしょうか？？？

それらしき結果は得られますので、メッセージさえ無視すればいいのでしょうが・・・

--
深谷 直文             (Naofumi Fukaya)
川鉄情報システム(株)  (KAWASAKI STEEL Systems R&amp;D Corp.)
TEL/FAX : +81-569-24-2234  / +81-569-24-2026
E-Mail  : fukaya@ksd.co.jp / fukaya@cup.com (Private)
URL     : http://www.cup.com/fukaya/        (Private) 


<HR>
</PRE>
<A NAME="4">
<PRE><B>
From: Mitsuhiro Maeda &lt;mitsu@tramp.co.jp&gt;
Date: Fri, 24 Jan 1997 18:41:08 +0900
Subject: [postgres95 1262] Re: Questions about COPY &amp; CREATE command
Message-Id: &lt;199701240941.SAA28919@log.tramp.co.jp&gt;
</A>
</B></PRE>
<PRE>

こんにちは。おみつ@Tramp です。

From: Yoshio Funaki &lt;yoshio@Air.akita-u.ac.jp&gt;
Subject: [postgres95 1261] Questions about COPY &amp; CREATE command
Date: Fri, 24 Jan 1997 17:34:58 +0900

&gt; たとえばクラスの名前をtoshoとしたとき
&gt; psql -s tosho
&gt; としてdbを作成し
&gt; CREATE TABLE tosho (
&gt; ......... &lt;- ３８項目書き並べる
&gt; );
&gt; というような定義をしたばあい
&gt; 
&gt; （１）このCRATE以下の部分を別ファイルとして
&gt; 　　（たとえばcreate.sqlとして）
&gt; 　　　tosho =&gt; \i create.sql
&gt; 　　　とするとＯＫなのでしょうか？
OKです。

# 私は非常によくデータベースをフリーズさせるので(^^;)
# こういった 〜.sql というのを山と作ってます。

&gt; （２）copyコマンドについての詳細はSoftwareDessignの
&gt; 　　　石井さんのすばらしい文章にも，多くの方が努力された
&gt; 　　　日本語マニュアルにもないようなので，申し訳ありませんが
&gt; 　　　ファイルを読み込む具体的な方法をお教えいただけないでしょうか。
形式としては、
	COPY クラス FROM 'ファイル名' [ USING DELIMITERS 'デリミタ' ]
でよかったと思いますが。それから、確かデリミタは1文字だけだったと...

SQLコマンドのマニュアルは、/usr/local/postgres95/man/manl/
にあるはずです。(日本語化はちょっと手間取ってます ^^; しばしのお待ちを...)

psql から、
	???=&gt; \h copy
なんてやってもヘルプが出て来ます。(結構重宝したりします。)

&gt; （３）SJIS -&gt; EUC変換をした後，postgres95に読み込ませるためには
&gt; 　　　&quot;データ１&quot;,&quot;データ２&quot;,&quot;データ３&quot;,....という形式のままで
&gt; 　　　よいのか。それともそれぞれを１行に分解して
&gt; 　　　データ１
&gt; 　　　データ２
&gt; 　　　データ３
&gt; 　　　という形にしなければならないのか。データは&quot;&quot;で囲む必要が
&gt; 　　　あるのかどうかお教え下さい。

デフォルト(USING DELIMITERSを使わない書式)ではデリミタが&lt;タブ&gt;文字で、
	データ1&lt;タブ&gt;データ2&lt;タブ&gt;...&lt;タブ&gt;データn&lt;改行&gt;
で1レコードになります。

「&quot;&quot;」は文字として扱われたような...
あと、数字に関しては「&quot;&quot;」があると、変換できないと怒られます :-)

# 数字は結構厄介で、float 系の型の属性には、ちゃんと「???.0」を
# 付けなきゃいけなくて、これで結構はまりました ;-)
# いまじゃ面倒なので、全部 float 型にして、PHPなどでは
# sprintf(&quot;%.3f&quot;,$var) などとしてまして... 

ともあれ、
	nkf -e ファイル | \
	awk '{gsub(/^\&quot;|\&quot;$/,&quot;&quot;); gsub(/\&quot;,\&quot;/,&quot;\t&quot;); print $0}' |\
	psql -n -c &quot;copy tosho from stdin&quot; tosho
の一発でいけると思います。

== おみつ
<HR>
</PRE>
<A NAME="3">
<PRE><B>
From: Yoshio Funaki &lt;yoshio@Air.akita-u.ac.jp&gt;
Date: Fri, 24 Jan 1997 17:34:58 +0900
Subject: [postgres95 1261] Questions about COPY &amp; CREATE command
Message-Id: &lt;9701240834.AA00094@mebius.air.akita-u.ac.jp&gt;
</A>
</B></PRE>
<PRE>

船木＠秋田県立図書館ともうします。
以前にも同じ質問をこのＭＬにしたのですが、「できる」
ことは分かったのですが，具体的な方法が今一つつかめず
恥を忍んで再度質問させていただきます。
ＦＡＱではないかと思っているのですが，初心者ですので
ご勘弁下さい。
----------------以下質問内容------------------

現在手元に図書のデータがDOSのCSV形式であります。
具体的にはキャラクタセットは当然SJIS
データの並びは
&quot;データ１&quot;,&quot;データ２&quot;,&quot;データ３&quot;,........
となっており、全部で（１行に）３８項目あります。

マニュアルを読んで，EUCに変換すればクエリーで日本語が通ること
copy from ほにゃららとするとファイルから読み込めることは
分かったのですが

たとえばクラスの名前をtoshoとしたとき
psql -s tosho
としてdbを作成し
CREATE TABLE tosho (
......... &lt;- ３８項目書き並べる
);
というような定義をしたばあい

（１）このCRATE以下の部分を別ファイルとして
　　（たとえばcreate.sqlとして）
　　　tosho =&gt; \i create.sql
　　　とするとＯＫなのでしょうか？

（２）copyコマンドについての詳細はSoftwareDessignの
　　　石井さんのすばらしい文章にも，多くの方が努力された
　　　日本語マニュアルにもないようなので，申し訳ありませんが
　　　ファイルを読み込む具体的な方法をお教えいただけないでしょうか。

（３）SJIS -&gt; EUC変換をした後，postgres95に読み込ませるためには
　　　&quot;データ１&quot;,&quot;データ２&quot;,&quot;データ３&quot;,....という形式のままで
　　　よいのか。それともそれぞれを１行に分解して
　　　データ１
　　　データ２
　　　データ３
　　　という形にしなければならないのか。データは&quot;&quot;で囲む必要が
　　　あるのかどうかお教え下さい。

よろしくお願いいたします。

秋田県立図書館　船木　喜夫　yoshio@air.akita-u.ac.jp
                            http://air.akita-u.ac.jp/apl/
　 　
<HR>
</PRE>
<A NAME="2">
<PRE><B>
From: Satoshi Ishikawa &lt;power@sekine.densi.gifu-u.ac.jp&gt;
Date: Fri, 24 Jan 1997 11:53:44 +0900
Subject: [postgres95 1260] Re: Compile error on SPARC/Linux 
Message-Id: &lt;199701240253.LAA28154@sekine.densi.gifu-u.ac.jp&gt;
</A>
</B></PRE>
<PRE>

いしかわ＠岐阜大です。

From: Tatsuo Ishii &lt;t-ishii@sra.co.jp&gt;
Subject: [postgres95 1251] Re: Compile error on SPARC/Linux 
Date: Thu, 23 Jan 1997 12:45:15 +0900
Message-ID: &lt;199701230345.MAA12855@srashd.sra.co.jp&gt;

t-ishii&gt; &gt;SPARC/Linuxでpostgres95を PORTNAME=linux でコンパイルしたところ、
t-ishii&gt; &gt;次のようなエラーが出て止まりました。
t-ishii&gt; &gt;
＜略＞
t-ishii&gt; 
t-ishii&gt; アセンブラをいじるのが面倒な場合は...
t-ishii&gt; 
t-ishii&gt; &gt;SPARC/Linuxでの動作実績はあるのでしょうか？
t-ishii&gt; 
t-ishii&gt; 多分無いでしょう。でも御安心下さい。私が Mac用 Linux（つまり MkLinux) 
t-ishii&gt; に移植した時の方法ですが、アセンブラのコードを使わず、system call で代
t-ishii&gt; 用することができます。やり方ですが、src/backend/storage/ipc.h の
t-ishii&gt; 
t-ishii&gt; #if defined(PORTNAME_aix) || \
t-ishii&gt;     defined(PORTNAME_alpha) || \
t-ishii&gt;     defined(PORTNAME_BSD44_derived) || \
t-ishii&gt;     defined(PORTNAME_bsdi) || \
t-ishii&gt;     defined(PORTNAME_bsdi_2_1) || \
t-ishii&gt;     defined(PORTNAME_hpux) || \
t-ishii&gt;     defined(PORTNAME_i386_solaris) || \
t-ishii&gt;     defined(PORTNAME_irix5) || \
t-ishii&gt;     defined(PORTNAME_linux) || \
t-ishii&gt;     defined(PORTNAME_next) || \
t-ishii&gt;     defined(PORTNAME_sparc) || \
t-ishii&gt;     defined(PORTNAME_sparc_solaris)
t-ishii&gt; #define HAS_TEST_AND_SET
t-ishii&gt; #endif
t-ishii&gt; 
t-ishii&gt; から、
t-ishii&gt; 
t-ishii&gt;     defined(PORTNAME_linux) || \
t-ishii&gt; 
t-ishii&gt; を抜きます。これでコンパイルが通るはずです。
t-ishii&gt; # 本来は、新しい port name を sparc_linux とでも定義してきちんと移植す
t-ishii&gt; # べきですが...

この方法で、コンパイルできました。
ありがとうございました。
これからregression testの結果を比べます。

#SoftwareDesignの石井さんの例題を試そ〜っと:-)。

また何かあったらお世話になります。
＃すぐかもしれない(^^;;

それでは。

End Of Message.  
----- ----- ----- ----- ----- ----- ----- ----- ----- ----- -----
石川 諭 （いしかわ さとし）power@densi.gifu-u.ac.jp
Key fingerprint = 53 12 86 DF BF 21 6D BE  DC A4 7B 31 C0 8D E2 F9



<HR>
</PRE>
<A NAME="1">
<PRE><B>
From: Jun TATEYAMA &lt;tateyama@tokyo.jst-c.go.jp&gt;
Date: Fri, 24 Jan 1997 09:29:48 +0900
Subject: [postgres95 1259] Re: pg95perl vs Postgresperl
Message-Id: &lt;199701240029.JAA07927@apollo.tokyo.jst-c.go.jp&gt;
</A>
</B></PRE>
<PRE>

おはようございます。たてやま＠JSTです。

You(fukaya@chubu.ksd.co.jp (Fukaya/深谷) さま) wrote 
&gt; PostgresPerl の所在を御存知でしたら教えて戴けませんか？
&gt; 私も試してみたいと思います。

 すでに、妻鹿さんや林さんからフォローがありましたが、
 私は石井さんのページからリンクされている
	&quot;本家 postgres95 ML archive の wais search&quot;
	(http://www.ucolick.org/~de/pglist.html)
 を使ってみつけました。
 これまで、大抵のことはここで事足りております。

 それと、

You(Takafumi Hayashi &lt;takafumi@u-aizu.ac.jp&gt; さま) wrote 
&gt; &gt; PostgresPerl
&gt; ftp://ftp.u-aizu.ac.jp/pub/dbms/postgres95/PostgresPerl
&gt; にmirrorしてありますので、よろしかったらどうぞ..

 是非、このようなMirror Site等の情報も石井さんのページからたどれると
 うれしいと思うんですが、いかがでしょうか？
---
舘山　純＠科学技術振興事業団(tateyama@tokyo.jst-c.go.jp)


<HR>
</PRE>
<A NAME="0">
<PRE><B>
From: Takafumi Hayashi &lt;takafumi@u-aizu.ac.jp&gt;
Date: Fri, 24 Jan 1997 08:23:43 +0900
Subject: [postgres95 1258] Re: pg95perl vs Postgresperl(Re: Q: FreeBSD gmake ld:-lfl: no match ? ) 
Message-Id: &lt;199701232323.IAA16828@csesun01.u-aizu.ac.jp&gt;
</A>
</B></PRE>
<PRE>

&gt; PostgresPerl
ftp://ftp.u-aizu.ac.jp/pub/dbms/postgres95/PostgresPerl
にmirrorしてありますので、よろしかったらどうぞ..
---
Takafumi Hayashi             takafumi@u-aizu.ac.jp
The University of Aizu       phone : +81-242-37-2614
FCS Lab.                     fax   : +81-242-37-2734

<HR>
</PRE>
