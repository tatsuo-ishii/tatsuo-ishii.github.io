<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.1. Release 16</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release.html" title="Appendix E. Release Notes" /><link rel="next" href="release-prior.html" title="E.2. Prior Releases" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.1. Release 16</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release.html" title="Appendix E. Release Notes">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="Appendix E. Release Notes">Up</a></td><th width="60%" align="center">Appendix E. Release Notes</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 16devel Documentation">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="release-prior.html" title="E.2. Prior Releases">Next</a></td></tr></table><hr /></div><div class="sect1" id="RELEASE-16"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.1. Release 16 <a href="#RELEASE-16" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-16.html#RELEASE-16-HIGHLIGHTS">E.1.1. Overview</a></span></dt><dt><span class="sect2"><a href="release-16.html#RELEASE-16-MIGRATION">E.1.2. Migration to Version 16</a></span></dt><dt><span class="sect2"><a href="release-16.html#RELEASE-16-CHANGES">E.1.3. Changes</a></span></dt><dt><span class="sect2"><a href="release-16.html#RELEASE-16-ACKNOWLEDGEMENTS">E.1.4. Acknowledgments</a></span></dt></dl></div><p><strong>Release date: </strong>AS OF 2023-05-17, 2023-??-??</p><div class="sect2" id="RELEASE-16-HIGHLIGHTS"><div class="titlepage"><div><div><h3 class="title">E.1.1. Overview <a href="#RELEASE-16-HIGHLIGHTS" class="id_link">#</a></h3></div></div></div><p>
    <span class="productname">PostgreSQL</span> 16 contains many new features
    and enhancements, including:
   </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ADD HERE</p></li></ul></div><p>
    The above items and other new features of
    <span class="productname">PostgreSQL</span> 16 are explained in more detail
    in the sections below.
   </p></div><div class="sect2" id="RELEASE-16-MIGRATION"><div class="titlepage"><div><div><h3 class="title">E.1.2. Migration to Version 16 <a href="#RELEASE-16-MIGRATION" class="id_link">#</a></h3></div></div></div><p>
     A dump/restore using <a class="xref" href="app-pg-dumpall.html" title="pg_dumpall"><span class="refentrytitle"><span class="application">pg_dumpall</span></span></a> or use of
     <a class="xref" href="pgupgrade.html" title="pg_upgrade"><span class="refentrytitle"><span class="application">pg_upgrade</span></span></a> or logical replication is required for
     those wishing to migrate data from any previous release.  See <a class="xref" href="upgrading.html" title="19.6. Upgrading a PostgreSQL Cluster">Section 19.6</a> for general information on migrating to new
     major releases.
    </p><p>
     Version 16 contains a number of changes that may affect compatibility
     with previous releases.  Observe the following incompatibilities:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Change assignment rules for PL/pgSQL bound cursor variables (Tom Lane)
</p><p>
Previously, the string value of such variables was set to match the variable name during cursor assignment;  now it will be assigned during OPEN, and will not match the variable name.
</p></li><li class="listitem"><p>
Disallow NULLS NOT DISTINCT indexes for primary keys (Daniel Gustafsson)
</p></li><li class="listitem"><p>
Change REINDEX DATABASE and reindexedb to not process indexes on system catalogs (Simon Riggs)
</p><p>
Processing such indexes is still possible using REINDEX SYSTEM and reindexedb --system.
</p></li><li class="listitem"><p>
Remove pg_walinspect functions pg_get_wal_records_info_till_end_of_wal() and pg_get_wal_stats_till_end_of_wal().
</p></li><li class="listitem"><p>
Remove libpq support for SCM credential authentication (Michael Paquier)
</p><p>
Backend support for this authentication method was removed in PostgreSQL 9.1.
</p></li><li class="listitem"><p>
Rename server variable force_parallel_mode to debug_parallel_query (David Rowley)
</p></li><li class="listitem"><p>
Remove the ability to create views manually with ON SELECT rules (Tom Lane)
</p></li><li class="listitem"><p>
Remove the server variable vacuum_defer_cleanup_age (Andres Freund)
</p><p>
This has been unnecessary since hot_standby_feedback and replication slots were added.
</p></li><li class="listitem"><p>
Remove server variable promote_trigger_file (Simon Riggs)
</p><p>
This was used to promote a standby to primary, but is now easier accomplished with pg_ctl promote or pg_promote().
</p></li><li class="listitem"><p>
Remove symbolic links for the postmaster binary (Peter Eisentraut)
</p></li></ul></div></div><div class="sect2" id="RELEASE-16-CHANGES"><div class="titlepage"><div><div><h3 class="title">E.1.3. Changes <a href="#RELEASE-16-CHANGES" class="id_link">#</a></h3></div></div></div><p>
    Below you will find a detailed account of the changes between
    <span class="productname">PostgreSQL</span> 16 and the previous major
    release.
   </p><div class="sect3" id="RELEASE-16-SERVER"><div class="titlepage"><div><div><h4 class="title">E.1.3.1. Server <a href="#RELEASE-16-SERVER" class="id_link">#</a></h4></div></div></div><div class="sect4" id="RELEASE-16-PARTITIONING"><div class="titlepage"><div><div><h5 class="title">E.1.3.1.1. <a class="link" href="ddl-partitioning.html" title="5.11. Table Partitioning">Partitioning</a> <a href="#RELEASE-16-PARTITIONING" class="id_link">#</a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Improve performance by caching RANGE and LIST partition lookups (Amit Langote, Hou Zhijie, David Rowley)
</p></li><li class="listitem"><p>
Tighten GENERATED expression restrictions on inherited and partitioned tables (Amit Langote, Tom Lane)
</p><p>
Columns of parent/partitioned and child/partition tables must all have the same generation status, though now the actual generation expressions can be different.
</p></li></ul></div></div><div class="sect4" id="RELEASE-16-OPTIMIZER"><div class="titlepage"><div><div><h5 class="title">E.1.3.1.2. Optimizer <a href="#RELEASE-16-OPTIMIZER" class="id_link">#</a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Allow incremental sorts in more cases, including DISTINCT (David Rowley)
</p></li><li class="listitem"><p>
Add the ability for aggregates having ORDER BY or DISTINCT to use pre-sorted data (David Rowley)
</p><p>
This ability is new in this release and the server variable to disable it is called enable_presorted_aggregate.
</p></li><li class="listitem"><p>
Allow memoize atop of UNION ALL and partitions (Richard Guo)
</p></li><li class="listitem"><p>
Allow anti-joins to be constructed on the right/outer side (Richard Guo)
</p></li><li class="listitem"><p>
Allow full and outer joins to be performed in parallel (Melanie Plageman, Thomas Munro)
</p></li><li class="listitem"><p>
Improve the accuracy of GIN index access optimizer costs (Ronan Dunklau)
</p></li></ul></div></div><div class="sect4" id="RELEASE-16-PERFORMANCE"><div class="titlepage"><div><div><h5 class="title">E.1.3.1.3. General Performance <a href="#RELEASE-16-PERFORMANCE" class="id_link">#</a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Allow more efficient addition of multiple heap and index pages (Andres Freund)
</p></li><li class="listitem"><p>
During non-freeze operations, perform page freezing where appropriate (Peter Geoghegan)
</p><p>
This makes full-table freeze vacuums less necessary.
</p></li><li class="listitem"><p>
Allow window functions to use ROWS mode internally when RANGE mode is specified but unnecessary (David Rowley)
</p></li><li class="listitem"><p>
Allow optimization of always-increasing window functions ntile(), cume_dist() and percent_rank() (David Rowley)
</p></li><li class="listitem"><p>
Allow aggregate functions string_agg() and array_agg() to be parallelized (David Rowley)
</p></li><li class="listitem"><p>
Allow control of the shared buffer usage by vacuum and analyze (Melanie Plageman)
</p><p>
The VACUUM/ANALYZE option is BUFFER_USAGE_LIMIT, and the vacuumdb option is --buffer-usage-limit.  The default value is set by server variable vacuum_buffer_usage_limit, which also controls autovacuum.
</p></li><li class="listitem"><p>
Support wal_sync_method=fdatasync on Windows (Thomas Munro)
</p></li><li class="listitem"><p>
Allow HOT updates if only BRIN-indexed columns are updated (Matthias van de Meent, Josef Simanek, Tomas Vondra)
</p></li><li class="listitem"><p>
Improve the speed of updating the process title (David Rowley)
</p></li></ul></div></div><div class="sect4" id="RELEASE-16-MONITORING"><div class="titlepage"><div><div><h5 class="title">E.1.3.1.4. Monitoring <a href="#RELEASE-16-MONITORING" class="id_link">#</a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Add system view pg_stat_io view to track IO statistics (Melanie Plageman)
</p></li><li class="listitem"><p>
Record statistics on the last sequential and index scans on tables (Dave Page)
</p><p>
This information appears in pg_stat_all_tables and pg_stat_all_indexes.
</p></li><li class="listitem"><p>
Record statistics on the occurrence of updated rows moving to new pages (Corey Huinker)
</p><p>
The pg_stat_*_tables column is n_tup_newpage_upd.
</p></li><li class="listitem"><p>
Add speculative lock information to the pg_locks system view (Masahiko Sawada, Noriyoshi Shinoda)
</p><p>
The transaction id is displayed in the transactionid field and the speculative insertion token is displayed in the objid field.
</p></li><li class="listitem"><p>
Add the display of prepared statement result types to the pg_prepared_statements view (Dagfinn Ilmari Mannsåker)
</p></li><li class="listitem"><p>
Create subscription statistics entries at subscription creation time so stats_reset is accurate (Andres Freund)
</p><p>
Previously entries were created only created when the first statistics were reported.
</p></li><li class="listitem"><p>
Correct the IO accounting for temp relation writes shown in pg_stat_database (Melanie Plageman)
</p></li><li class="listitem"><p>
Add function pg_stat_get_backend_subxact() to report on a session's subtransaction cache (Dilip Kumar)
</p></li><li class="listitem"><p>
Have pg_stat_get_backend_idset(), pg_stat_get_backend_activity(), and related functions use the unchanging backend id (Nathan Bossart)
</p><p>
Previously the index values might change during the lifetime of the session.
</p></li><li class="listitem"><p>
Report stand-alone backends with a special backend type (Melanie Plageman)
</p></li><li class="listitem"><p>
Add wait event SpinDelay to report spinlock sleep delays (Andres Freund)
</p></li><li class="listitem"><p>
Create new wait event "DSMAllocate" to indicate waiting for dynamic shared memory allocation (Thomas Munro)
</p><p>
Previously this type of wait was reported as "DSMFillZeroWrite", which was also used by mmap() allocations.
</p></li><li class="listitem"><p>
Add the database name to the process display of logical WAL senders (Tatsuhiro Nakamori)
</p><p>
Physical WAL senders do not display a database name.
</p></li><li class="listitem"><p>
Add checkpoint and REDO LSN information to log_checkpoints messages (Bharath Rupireddy, Kyotaro Horiguchi)
</p></li><li class="listitem"><p>
Provide additional details during client certificate failures (Jacob Champion)
</p></li></ul></div></div><div class="sect4" id="RELEASE-16-PRIVILEGES"><div class="titlepage"><div><div><h5 class="title">E.1.3.1.5. Privileges <a href="#RELEASE-16-PRIVILEGES" class="id_link">#</a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Create a predefined role and grantable privilege with permission to perform maintenance operations (Nathan Bossart)
</p><p>
The predefined role is is called pg_maintain.
</p></li><li class="listitem"><p>
Add predefined role pg_create_subscription with permission to create subscriptions (Robert Haas)
</p></li><li class="listitem"><p>
Allow subscriptions to not require passwords (Robert Haas)
</p><p>
This is accomplished with the option password_required=false.
</p></li><li class="listitem"><p>
Simplify permissions for LOCK TABLE (Jeff Davis)
</p><p>
Previously the ability to perform LOCK TABLE at various lock levels was bound to specific query-type permissions.  For example, UPDATE could could perform all lock levels except ACCESS SHARE, which
required SELECT permissions.  Now UPDATE can issue all lock levels.  MORE?
</p></li><li class="listitem"><p>
Allow "GRANT group_name TO user_name" to be performed with ADMIN OPTION (Robert Haas)
</p><p>
Previously CREATEROLE permission was required.
</p></li><li class="listitem"><p>
Restrict the privileges of CREATEROLE roles (Robert Haas)
</p><p>
Previously roles with CREATEROLE privileges could change many aspects of any non-superuser role.  Such changes, including adding members, are now require the role requesting the change to have ADMIN OPTION
permission.
</p></li><li class="listitem"><p>
Improve logic of CREATEROLE roles ability to control other roles (Robert Haas)
</p><p>
For example, they can change the CREATEDB, REPLICATION, and BYPASSRLS properties only if they also have those permissions.
</p></li><li class="listitem"><p>
Allow GRANT to control role inheritance behavior (Robert Haas)
</p><p>
By default, role inheritance is controlled by the inheritance status of the member role.  The new GRANT clauses WITH INHERIT and WITH ADMIN can now override this.
</p></li><li class="listitem"><p>
Allow roles that create other roles to automatically inherit the new role's rights or SET ROLE to the new role (Robert Haas, Shi Yu)
</p><p>
This is controlled by server variable createrole_self_grant.
</p></li><li class="listitem"><p>
Prevent users from changing the default privileges of non-inherited roles (Robert Haas)
</p><p>
This is now only allowed for inherited roles.
</p></li><li class="listitem"><p>
When granting role membership, require the granted-by role to be a role that has appropriate permissions (Robert Haas)
</p><p>
This is a requirement even when a non-bootstrap superuser is granting role membership.
</p></li><li class="listitem"><p>
Allow non-superusers to grant permissions using a granted-by user that is not the current user (Robert Haas)
</p><p>
The current user still must have sufficient permissions given by the specified granted-by user.
</p></li><li class="listitem"><p>
Add GRANT to control permission to use SET ROLE (Robert Haas)
</p><p>
This is controlled by a new GRANT ... SET option.
</p></li><li class="listitem"><p>
Add dependency tracking to roles which have granted privileges (Robert Haas)
</p><p>
For example, removing ADMIN OPTION will fail if there are privileges using that option;  CASCADE must be used to revoke dependent permissions.
</p></li><li class="listitem"><p>
Add dependency tracking of grantors for GRANT records (Robert Haas)
</p><p>
This will guarantee that pg_auth_members.grantor values is always valid.
</p></li><li class="listitem"><p>
Allow multiple role membership records (Robert Haas)
</p><p>
Previously a new membership grant would remove a previous matching membership grant, even if other aspects of the grant did not match.
</p></li><li class="listitem"><p>
Prevent removal of superuser privileges for the bootstrap user (Robert Haas)
</p></li><li class="listitem"><p>
Allow makeaclitem() to accept multiple privilege names (Robins Tharakan)
</p><p>
Previously only a single privilege names, like SELECT, were supported.
</p></li></ul></div></div><div class="sect4" id="RELEASE-16-SERVER-CONFIG"><div class="titlepage"><div><div><h5 class="title">E.1.3.1.6. Server Configuration <a href="#RELEASE-16-SERVER-CONFIG" class="id_link">#</a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Add support for Kerberos credential delegation (Stephen Frost)
</p><p>
This is enabled with server variable gss_accept_deleg.
</p></li><li class="listitem"><p>
Allow the SCRAM iteration count to be set with server variable scram_iterations (Daniel Gustafsson)
</p></li><li class="listitem"><p>
Store server variables in a hash table (Tom Lane)
</p><p>
This allows the faster addition of server variables.
</p></li><li class="listitem"><p>
Tighten restrictions on which server variables can be reset (Masahiko Sawada)
</p><p>
Previously, while certain variables, like transaction_isolation, were not affected by RESET ALL, they could be individually reset in inappropriate situations.
</p></li><li class="listitem"><p>
Move various postgresql.conf items into new categories (Shinya Kato)
</p><p>
This also affects the categories displayed in the pg_settings view.
</p></li><li class="listitem"><p>
Prevent configuration file recursion beyond 10 levels (Julien Rouhaud)
</p></li><li class="listitem"><p>
Allow autovacuum to more frequently honor changes to delay settings (Melanie Plageman)
</p><p>
Rather than honor changes only at the start of each relation, honor them at the start of each block.
</p></li><li class="listitem"><p>
Remove restrictions that archive files be durably renamed (Nathan Bossart)
</p><p>
The archive command is now more likely to be called with already-archived files after a crash.
</p></li><li class="listitem"><p>
Prevent archive_library and archive_command from being set at the same time (Nathan Bossart)
</p><p>
Previously archive_library would override archive_command.
</p></li><li class="listitem"><p>
Allow the postmaster to terminate children with an abort signal (Tom Lane)
</p><p>
Abort normally creates a core dump.  This is controlled by send_abort_for_crash and send_abort_for_kill.  postmaster -T is now the same as setting send_abort_for_crash.
</p></li><li class="listitem"><p>
Remove the unnecessary postmaster -n option (Tom Lane)
</p></li><li class="listitem"><p>
Allow the server to reserve backend slots for roles with pg_use_reserved_connections membership (Nathan Bossart)
</p><p>
The number of reserved slots is set by server variable reserved_connections.
</p></li><li class="listitem"><p>
Add debug_io_direct setting for developer usage (Thomas Munro, Andres Freund, Bharath Rupireddy)
</p><p>
While primarily for developers, wal_sync_method=open_sync/open_datasync has been modified to not use direct I/O with wal_level=minimal;  this is now enabled with debug_io_direct=wal.
</p></li><li class="listitem"><p>
Add function pg_dissect_walfile_name() to report the segment and timeline values of WAL file names (Bharath Rupireddy)
</p></li></ul></div></div><div class="sect4" id="RELEASE-16-PG-HBA"><div class="titlepage"><div><div><h5 class="title">E.1.3.1.7. <a class="link" href="auth-pg-hba-conf.html" title="21.1. The pg_hba.conf File">pg_hba.conf</a> <a href="#RELEASE-16-PG-HBA" class="id_link">#</a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Add support for regular expression matching on database and role entries in pg_hba.conf (Bertrand Drouvot)
</p><p>
Regular expression patterns are prefixed with a slash.  Database and role names that begin with slashes need to be double-quoted if referenced in pg_hba.conf.
</p></li><li class="listitem"><p>
Improve user-column handling of pg_ident.conf to match pg_hba.conf (Jelte Fennema)
</p><p>
Specifically, add support for "all", role membership with "+", and regular expressions with a leading slash.  Any user name that matches these patterns must be double-quoted.
</p></li><li class="listitem"><p>
Allow include files in pg_hba.conf and pg_ident.conf (Julien Rouhaud)
</p><p>
These are controlled by "include", "include_if_exists", and "include_dir".  System views pg_hba_file_rules and pg_ident_file_mappings now display the file name.
</p></li><li class="listitem"><p>
Add rule and map numbers to the system view pg_hba_file_rules (Julien Rouhaud)
</p></li></ul></div></div><div class="sect4" id="RELEASE-16-LOCALIZATION"><div class="titlepage"><div><div><h5 class="title">E.1.3.1.8. <a class="link" href="charset.html" title="Chapter 24. Localization">Localization</a> <a href="#RELEASE-16-LOCALIZATION" class="id_link">#</a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Determine the ICU default locale from the environment (Jeff Davis)
</p><p>
However, ICU doesn't support the C local so UTF-8 is used in such cases.  Previously the default was always UTF-8.
</p></li><li class="listitem"><p>
Add predefined collations "unicode" and "ucs_basic" (Peter Eisentraut)
</p><p>
This only works if ICU support is enabled.
</p></li><li class="listitem"><p>
Allow custom ICU collation rules to be created (Peter Eisentraut)
</p><p>
This is done using CREATE COLLATION's new new RULES clause, as well as new options for CREATE DATABASE, createdb, and initdb.
</p></li><li class="listitem"><p>
Add Windows process the system collations (Jose Santamaria Flecha)
ADD THIS?
</p></li></ul></div></div></div><div class="sect3" id="RELEASE-16-LOGICAL"><div class="titlepage"><div><div><h4 class="title">E.1.3.2. <a class="link" href="logical-replication.html" title="Chapter 31. Logical Replication">Logical Replication</a> <a href="#RELEASE-16-LOGICAL" class="id_link">#</a></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Allow logical decoding on standbys (Bertrand Drouvot, Andres Freund, Amit Khandekar)
</p><p>
This adds the function pg_log_standby_snapshot().  TEXT?
</p></li><li class="listitem"><p>
Add server variable to control how logical decoding publishers transfer changes and how subscribers apply them (Shi Yu)
</p><p>
The variable is logical_replication_mode.
</p></li><li class="listitem"><p>
Allow logical replication initial table synchronization to copy rows in binary format (Melih Mutlu)
</p><p>
This is only possible for subscriptions marked as binary.
</p></li><li class="listitem"><p>
Allow parallel application of logical replication (Hou Zhijie, Wang Wei, Amit Kapila)
</p><p>
The CREATE SUBSCRIPTION "streaming" option now supports "parallel" to enable parallel application. Perform apply of large transactions by parallel workers.  The number of parallel workers is controlled by
the new server variable max_parallel_apply_workers_per_subscription. Wait events LogicalParallelApplyMain, LogicalParallelApplyStateChange, and LogicalApplySendData were also added.  Column leader_pid was
added to system view pg_stat_subscription to track parallel activity.
</p></li><li class="listitem"><p>
Improve performance for logical replication apply without a primary key (Onder Kalaci, Amit Kapila)
</p><p>
Specifically, REPLICA IDENTITY FULL can now use btree indexes rather than sequentially scanning the table to find matches.
</p></li><li class="listitem"><p>
Allow logical replication subscribers to process only changes that have no origin (Vignesh C, Amit Kapila)
</p><p>
This can be used to avoid replication loops.
</p></li><li class="listitem"><p>
Perform logical replication SELECT and DML actions as the table owner (Robert Haas)
</p><p>
This improves security and now requires subscription owners to be either superusers or to have SET ROLE permissions on all tables in the replication set.  The previous behavior of performing all operations
as the subscription owner can be enabled with the subscription run_as_owner option.
</p></li><li class="listitem"><p>
Have wal_retrieve_retry_interval operate on a per-subscription basis (Nathan Bossart)
</p><p>
Previously the retry time was applied globally.  This also adds wait events LogicalRepLauncherDSA and LogicalRepLauncherHash.
</p></li><li class="listitem"><p>
Allow invalidation of replication slots due to row removal, wal_level, and conflicts (Bertrand Drouvot, Andres Freund, Amit Khandekar)
</p><p>
Invalidated slots are indicated in the pg_replication_slots.conflicting column.
</p></li></ul></div></div><div class="sect3" id="RELEASE-16-UTILITY"><div class="titlepage"><div><div><h4 class="title">E.1.3.3. Utility Commands <a href="#RELEASE-16-UTILITY" class="id_link">#</a></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Add EXPLAIN option GENERIC_PLAN to display the query's generic plan (Laurenz Albe)
</p></li><li class="listitem"><p>
Allow a COPY FROM value to map to a column's DEFAULT (Israel Barth Rubio)
</p></li><li class="listitem"><p>
Allow COPY into foreign tables to add rows in batches (Andrey Lepikhov, Etsuro Fujita)
</p><p>
This is controlled by the postgres_fdw "batch_size" option.
</p></li><li class="listitem"><p>
Allow the STORAGE type to be specified by CREATE TABLE (Teodor Sigaev, Aleksander Alekseev)
</p><p>
Previously only ALTER TABLE could control this
</p></li><li class="listitem"><p>
Allow truncate triggers on foreign tables (Yugo Nagata)
</p></li><li class="listitem"><p>
Allow VACUUM and vacuumdb to only process TOAST tables (Nathan Bossart)
</p><p>
This is accomplished by having VACUUM turn off PROCESS_MAIN or by vacuumdb using the --no-process-main option.
</p></li><li class="listitem"><p>
Add VACUUM option to skip or update all frozen statistics (Tom Lane, Nathan Bossart)
</p><p>
The options are SKIP_DATABASE_STATS and ONLY_DATABASE_STATS.
</p></li><li class="listitem"><p>
Change REINDEX DATABASE and REINDEX SYSTEM to no longer require an argument (Simon Riggs)
</p><p>
Previously the database name had to be specified.
</p></li><li class="listitem"><p>
Allow CREATE STATISTICS to generate a statistics name if none is specified (Simon Riggs)
</p></li></ul></div></div><div class="sect3" id="RELEASE-16-DATATYPES"><div class="titlepage"><div><div><h4 class="title">E.1.3.4. Data Types <a href="#RELEASE-16-DATATYPES" class="id_link">#</a></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Allow non-decimal integer literals (Peter Eisentraut)
</p><p>
For example, 0x42F, 0o273, and 0b100101.
</p></li><li class="listitem"><p>
Allow NUMERIC to process hexadecimal, octal, and binary integers of any size (Dean Rasheed)
</p><p>
Previously only unquoted eight-byte integers were supported with these non-decimal bases.
</p></li><li class="listitem"><p>
Allow underscores in integer and numeric constants (Peter Eisentraut, Dean Rasheed)
</p><p>
This can improve readability for long strings of digits.
</p></li><li class="listitem"><p>
Prevent the specification of "epoch" and "infinity" with other units in datetime strings (Joseph Koshakow)
</p></li><li class="listitem"><p>
Remove support for datetime input that prefixes year-month-day by Y/M/D (Joseph Koshakow)
</p></li></ul></div></div><div class="sect3" id="RELEASE-16-GENERAL"><div class="titlepage"><div><div><h4 class="title">E.1.3.5. General Queries <a href="#RELEASE-16-GENERAL" class="id_link">#</a></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Allow subqueries in the FROM clause to omit aliases (Dean Rasheed)
</p></li><li class="listitem"><p>
Add support for enhanced numeric literals in SQL JSON paths (Peter Eisentraut)
</p><p>
For example, allow hexadecimal, octal, and binary integers and underscores between digits.
</p></li></ul></div></div><div class="sect3" id="RELEASE-16-FUNCTIONS"><div class="titlepage"><div><div><h4 class="title">E.1.3.6. Functions <a href="#RELEASE-16-FUNCTIONS" class="id_link">#</a></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Add SQL/JSON constructors (Nikita Glukhov, Teodor Sigaev, Oleg Bartunov, Alexander Korotkov, Amit Langote)
</p><p>
The new functions JSON_ARRAY(), JSON_ARRAYAGG(), JSON_OBJECT(), and JSON_OBJECTAGG() are part of the SQL standard.
</p></li><li class="listitem"><p>
Add SQL/JSON object checks (Nikita Glukhov, Teodor Sigaev, Oleg Bartunov, Alexander Korotkov, Amit Langote, Andrew Dunstan)
</p><p>
The IS JSON checks include checks for values, arrays, objects, scalars, and unique keys.
</p></li><li class="listitem"><p>
Improve the handling of full text highlighting function ts_headline() for OR and NOT expressions (Tom Lane)
</p></li><li class="listitem"><p>
Add functions to add, subtract, and generate timestamptz values in a specified time zone (Przemysław Sztoch, Gurjeet Singh)
</p><p>
The functions are date_add(), date_subtract(), and generate_series().
</p></li><li class="listitem"><p>
Change date_trunc(unit, timestamptz, time_zone) to be an immutable function (Przemysław Sztoch)
</p><p>
This allows the creation of expression indexes using this function.
</p></li><li class="listitem"><p>
Add server variable SYSTEM_USER (Bertrand Drouvot)
</p><p>
This reports the authentication method and its authenticated user.
</p></li><li class="listitem"><p>
Add functions array_sample() and array_shuffle() (Martin Kalcher)
</p></li><li class="listitem"><p>
Add aggregate function ANY_VALUE() which returns any value from a set (Vik Fearing)
</p></li><li class="listitem"><p>
Add function random_normal() to supply normally-distributed random numbers (Paul Ramsey)
</p></li><li class="listitem"><p>
Add error function erf() and its complement erfc() (Dean Rasheed)
</p></li><li class="listitem"><p>
Improve the accuracy of numeric power() for integer exponents (Dean Rasheed)
</p></li><li class="listitem"><p>
Add XMLSERIALIZE() option INDENT to pretty-print its output (Jim Jones)
</p></li><li class="listitem"><p>
Change pg_collation_actual_version() to return a reasonable value for the default collation (Jeff Davis)
</p><p>
Previously it returned NULL.
</p></li><li class="listitem"><p>
Allow pg_read_file() and pg_read_binary_file() to ignore missing files (Kyotaro Horiguchi)
</p></li><li class="listitem"><p>
Add the byte specification ('B') to pg_size_bytes() (Peter Eisentraut)
</p></li></ul></div></div><div class="sect3" id="RELEASE-16-PLPGSQL"><div class="titlepage"><div><div><h4 class="title">E.1.3.7. <a class="link" href="plpgsql.html" title="Chapter 43. PL/pgSQL — SQL Procedural Language">PL/pgSQL</a> <a href="#RELEASE-16-PLPGSQL" class="id_link">#</a></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Add the ability to get the current function's OID in PL/pgSQL (Pavel Stehule)
</p><p>
This is accomplished with GET DIAGNOSTICS variable = PG_ROUTINE_OID.
</p></li></ul></div></div><div class="sect3" id="RELEASE-16-LIBPQ"><div class="titlepage"><div><div><h4 class="title">E.1.3.8. <a class="link" href="libpq.html" title="Chapter 34. libpq — C Library">libpq</a> <a href="#RELEASE-16-LIBPQ" class="id_link">#</a></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Add libpq connection option require_auth to specify a list of acceptable authentication methods (Jacob Champion)
</p><p>
This can also be used to disallow certain authentication methods.
</p></li><li class="listitem"><p>
Allow multiple libpq-specified hosts to be randomly selected (Jelte Fennema)
</p><p>
This is enabled with "load_balance_hosts=random".  This can be used for load balancing.
</p></li><li class="listitem"><p>
Add libpq option sslcertmode to control transmission of the client certificate (Jacob Champion)
</p><p>
The option values are "disable", "allow", and "require".
</p></li><li class="listitem"><p>
Allow libpq to use the system certificate pool for certificate verification (Jacob Champion, Thomas Habets)
</p><p>
This is enabled with sslrootcert=system, which also enables sslmode=verify-full.
</p></li></ul></div></div><div class="sect3" id="RELEASE-16-CLIENT-APPS"><div class="titlepage"><div><div><h4 class="title">E.1.3.9. Client Applications <a href="#RELEASE-16-CLIENT-APPS" class="id_link">#</a></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Allow ECPG variable declarations to use type names which match SQL keywords (Tom Lane)
</p><p>
This change does prevent keywords which match C typedef names from being processed as keywords in later EXEC SQL blocks.
</p></li></ul></div><div class="sect4" id="RELEASE-16-PSQL"><div class="titlepage"><div><div><h5 class="title">E.1.3.9.1. <a class="xref" href="app-psql.html" title="psql"><span class="refentrytitle"><span class="application">psql</span></span></a> <a href="#RELEASE-16-PSQL" class="id_link">#</a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Allow psql to control the maximum width of header lines in expanded format (Platon Pronko)
</p><p>
This is controlled by xheader_width.
</p></li><li class="listitem"><p>
Allow psql's access privilege commands to show system objects (Nathan Bossart)
</p><p>
The options are \dpS and \zS.
</p></li><li class="listitem"><p>
Add "FOREIGN" designation to psql \d+ for foreign table children and partitions (Ian Lawrence Barwick)
</p></li><li class="listitem"><p>
Allow psql to submit queries using the extended query protocol (Peter Eisentraut)
</p><p>
Passing arguments to such queries is done using the new psql \bind command.
</p></li><li class="listitem"><p>
Allow psql \watch to limit the number of executions (Andrey Borodin)
</p><p>
The \watch options can now be named.
</p></li><li class="listitem"><p>
Detect invalid values for psql \watch, and allow zero to specify no delay (Andrey Borodin)
</p></li><li class="listitem"><p>
Allow psql to detect the exit status of shell commands and queries (Corey Huinker, Tom Lane)
</p><p>
The new psql control variables are SHELL_ERROR and SHELL_EXIT_CODE.
</p></li><li class="listitem"><p>
Various psql tab completion improvements (Vignesh C, Aleksander Alekseev, Dagfinn Ilmari Mannsåker, Shi Yu, Michael Paquier, Ken Kato, Peter Smith)
</p></li></ul></div></div><div class="sect4" id="RELEASE-16-PGDUMP"><div class="titlepage"><div><div><h5 class="title">E.1.3.9.2. <a class="link" href="app-pgdump.html" title="pg_dump"><span class="application">pg_dump</span></a> <a href="#RELEASE-16-PGDUMP" class="id_link">#</a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Add pg_dump control of dumping child tables and partitions (Gilles Darold)
</p><p>
The new options are --table-and-children, --exclude-table-and-children, and --exclude-table-data-and-children.
</p></li><li class="listitem"><p>
Add LZ4 and Zstandard compression to pg_dump (Georgios Kokolatos, Justin Pryzby)
</p></li><li class="listitem"><p>
Allow pg_dump and pg_basebackup to use "long" mode for compression (Justin Pryzby)
</p></li><li class="listitem"><p>
Improve pg_dump to accept a more consistent compression syntax (Georgios Kokolatos)
</p><p>
Options like "--compress=gzip:5".
</p></li></ul></div></div></div><div class="sect3" id="RELEASE-16-SERVER-APPS"><div class="titlepage"><div><div><h4 class="title">E.1.3.10. Server Applications <a href="#RELEASE-16-SERVER-APPS" class="id_link">#</a></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Have initdb use ICU by default if ICU is enabled in the binary (Jeff Davis)
</p><p>
Option --locale-provider=libc can be used to disable ICU.
</p></li><li class="listitem"><p>
Add initdb option to set server variables for the duration of initdb and all future server starts (Tom Lane)
</p><p>
The option is "-c name=value".
</p></li><li class="listitem"><p>
Add options to createuser to control more user options (Shinya Kato)
</p><p>
Specifically, the new options control the valid-until date, bypassing of row-level security, and role membership.
</p></li><li class="listitem"><p>
Allow control of vacuumdb schema processing (Gilles Darold)
</p><p>
These are controlled by options --schema and --exclude-schema.
</p></li><li class="listitem"><p>
Use new VACUUM options to improve the performance of vacuumdb (Tom Lane, Nathan Bossart)
</p></li><li class="listitem"><p>
Have pg_upgrade set the new cluster's locale and encoding (Jeff Davis)
</p><p>
This removes the requirement that the new cluster be created with the same locale and encoding settings.
</p></li><li class="listitem"><p>
Add pg_upgrade option to specify the default transfer mode (Peter Eisentraut)
</p><p>
The option is --copy.
</p></li><li class="listitem"><p>
Improve pg_basebackup to accept numeric compression options (Georgios Kokolatos, Michael Paquier)
</p><p>
Options like "--compress=server-5" are now supported.
</p></li><li class="listitem"><p>
Fix pg_basebackup to handle tablespaces stored in the PGDATA directory (Robert Haas)
</p></li><li class="listitem"><p>
Add pg_waldump option --save-fullpage to dump full page images (David Christensen)
</p></li><li class="listitem"><p>
Allow pg_waldump options -t/--timeline to accept hexadecimal values (Peter Eisentraut)
</p></li><li class="listitem"><p>
Add support for progress reporting to pg_verifybackup (Masahiko Sawada)
</p></li><li class="listitem"><p>
Allow pg_rewind to properly track timeline changes (Heikki Linnakangas)
</p><p>
Previously if pg_rewind was run after a timeline switch but before a checkpoint was issued, it might incorrectly determine that a rewind was unnecessary.
</p></li><li class="listitem"><p>
Have pg_receivewal and pg_recvlogical cleanly exit on SIGTERM (Christoph Berg)
</p><p>
This signal is often used by systemd.
</p></li></ul></div></div><div class="sect3" id="RELEASE-16-SOURCE-CODE"><div class="titlepage"><div><div><h4 class="title">E.1.3.11. Source Code <a href="#RELEASE-16-SOURCE-CODE" class="id_link">#</a></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Build ICU support by default (Jeff Davis)
</p><p>
This removes build flag --with-icu and adds flag --without-icu.
</p></li><li class="listitem"><p>
Add support for SSE2 (Streaming SIMD Extensions 2) vector operations on x86-64 architectures (John Naylor)
</p></li><li class="listitem"><p>
Add support for Advanced SIMD (Single Instruction Multiple Data) (NEON) instructions on ARM architectures (Nathan Bossart)
</p></li><li class="listitem"><p>
Allow ASCII string detection to use vector operations on x86-64 architectures (John Naylor)
</p></li><li class="listitem"><p>
Allow JSON string processing to use vector operations on x86-64 architectures (John Naylor)
</p><p>
ARM?
</p></li><li class="listitem"><p>
Allow arrays searches to use vector operations on x86-64 architectures (John Naylor)
</p></li><li class="listitem"><p>
Allow xid/subxid searches to use vector operations on x86-64 architectures (Nathan Bossart)
</p></li><li class="listitem"><p>
Have Windows binaries built with MSVC use RandomizedBaseAddress (ASLR) (Michael Paquier)
</p><p>
This was already enabled on MinGW builds.
</p></li><li class="listitem"><p>
Prevent extension libraries from export their symbols by default (Andres Freund, Tom Lane)
</p></li><li class="listitem"><p>
Require Windows 10 or newer versions (Michael Paquier, Juan José Santamaría Flecha)
</p><p>
Previously Windows Vista and Windows XP were supported.
</p></li><li class="listitem"><p>
Require Perl version 5.14 or later (John Naylor)
</p></li><li class="listitem"><p>
Require Bison version 2.3 or later (John Naylor)
</p></li><li class="listitem"><p>
Require Flex version 2.5.35 or later (John Naylor)
</p></li><li class="listitem"><p>
Require MIT Kerberos for GSSAPI support (Stephen Frost)
</p></li><li class="listitem"><p>
Remove support for Visual Studio 2013 (Michael Paquier)
</p></li><li class="listitem"><p>
Remove support for HP-UX (Thomas Munro)
</p></li><li class="listitem"><p>
Remove support for HP/Intel Itanium (Thomas Munro)
</p></li><li class="listitem"><p>
Remove support for M68K, M88K, M32R, and SuperH CPU architectures (Thomas Munro)
</p></li><li class="listitem"><p>
Add meson build system (Andres Freund, Nazir Bilal Yavuz, Peter Eisentraut)
</p><p>
This eventually will replace the Autoconf and Windows-based MSVC build systems.
</p></li><li class="listitem"><p>
Allow control of the location of the openssl binary used by the build system (Peter Eisentraut)
</p><p>
Make finding openssl program a configure or meson option
</p></li><li class="listitem"><p>
Add build option to allow testing of small segment sizes (Andres Freund)
</p><p>
The build options are --with-segsize-blocks and -Dsegsize_blocks.
</p></li><li class="listitem"><p>
Add pgindent options (Andrew Dunstan)
</p><p>
The new options are --show-diff, --silent-diff, --commit, and --help, and allow multiple --exclude options.  Also require the typedef file to be explicitly specified.  Options --code-base and --build were
also removed.
</p></li><li class="listitem"><p>
Add pg_bsd_indent source code to the main tree (Tom Lane)
</p></li><li class="listitem"><p>
Improve make_ctags and make_etags (Yugo Nagata)
</p></li><li class="listitem"><p>
Adjust pg_attribute columns for efficiency (Peter Eisentraut)
</p></li></ul></div></div><div class="sect3" id="RELEASE-16-MODULES"><div class="titlepage"><div><div><h4 class="title">E.1.3.12. Additional Modules <a href="#RELEASE-16-MODULES" class="id_link">#</a></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Improve use of extension-based indexes on boolean columns (Zongliang Quan, Tom Lane)
</p></li><li class="listitem"><p>
Add support for Daitch-Mokotoff Soundex to fuzzystrmatch (Dag Lem)
</p></li><li class="listitem"><p>
Allow auto_explain to log query parameters used in executing prepared statements (Dagfinn Ilmari Mannsåker)
</p><p>
This is controlled by auto_explain.log_parameter_max_length, and by default query parameters will be logged with no length restriction.
SHOULD THIS BE MORE CLEARLY IDENTIFIED AS CONTROLLING THE EXECUTION OF PREPARED STATEMENTS?
</p></li><li class="listitem"><p>
Have auto_explain's log_verbose mode honor the value of compute_query_id (Atsushi Torikoshi)
</p><p>
Previously even if compute_query_id was enabled, log_verbose was not showing the query identifier.
</p></li><li class="listitem"><p>
Change the maximum length of ltree labels from 256 to 1000 and allow hyphens (Garen Torikian)
</p></li><li class="listitem"><p>
Have pg_stat_statements normalize constants used in utility commands (Michael Paquier)
</p><p>
Previously constants appeared instead of placeholders, e.g., $1.
</p></li><li class="listitem"><p>
Add pg_walinspect function pg_get_wal_block_info() to report WAL block information (Michael Paquier, Melanie Plageman, Bharath Rupireddy)
</p></li><li class="listitem"><p>
Change how pg_walinspect functions pg_get_wal_records_info() and pg_get_wal_stats() interpret ending LSNs (Bharath Rupireddy)
</p><p>
Previously ending LSNs which represent nonexistent WAL locations would generate an error, while they will now be interpreted as the end of the WAL.
</p></li><li class="listitem"><p>
Add detailed descriptions of WAL records in pg_walinspect and pg_waldump (Melanie Plageman, Peter Geoghegan)
</p></li><li class="listitem"><p>
Add pageinspect function bt_multi_page_stats() to report statistics on multiple pages (Hamid Akhtar)
</p><p>
This is similar to bt_page_stats() except it can report on a range of pages.
</p></li><li class="listitem"><p>
Redesign archive modules to be more flexible (Nathan Bossart)
</p><p>
Initialization changes will require modules written for older versions of Postgres to be updated.
</p></li><li class="listitem"><p>
Correct inaccurate pg_stat_statements row tracking extended query protocol statements (Sami Imseih)
</p></li><li class="listitem"><p>
Add pg_buffercache function pg_buffercache_usage_counts() to report usage totals (Nathan Bossart)
</p></li><li class="listitem"><p>
Add pg_buffercache function pg_buffercache_summary() to report summarized buffer statistics (Melih Mutlu)
</p></li><li class="listitem"><p>
Allow the schemas of dependent extensions to be referenced using the new syntax @extschema:dependent_extension_name@ (Regina Obe)
</p></li><li class="listitem"><p>
Allow dependent extensions to marked as non-relocatable using "no_relocate" (Regina Obe)
</p><p>
This allows @extschema:dependent_extension_name@ to be treated as a constant for the lifetime of the extension.
</p></li></ul></div><div class="sect4" id="RELEASE-16-PGFDW"><div class="titlepage"><div><div><h5 class="title">E.1.3.12.1. <a class="link" href="postgres-fdw.html" title="F.38. postgres_fdw — access data stored in external PostgreSQL servers"><span class="application">postgres_fdw</span></a> <a href="#RELEASE-16-PGFDW" class="id_link">#</a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Allow postgres_fdw to do aborts in parallel (Etsuro Fujita)
</p><p>
This is enabled with postgres_fdw option "parallel_abort".
</p></li><li class="listitem"><p>
Make ANALYZE on foreign postgres_fdw tables more efficient (Tomas Vondra)
</p><p>
The postgres_fdw option analyze_sampling controls the sampling method.
</p></li><li class="listitem"><p>
Restrict shipment of reg* type constants in postgres_fdw to those referencing built-in objects or extensions marked as shippable (Tom Lane)
</p></li><li class="listitem"><p>
Have postgres_fdw and dblink handle interrupts during connection establishment (Andres Freund)
</p></li></ul></div></div></div></div><div class="sect2" id="RELEASE-16-ACKNOWLEDGEMENTS"><div class="titlepage"><div><div><h3 class="title">E.1.4. Acknowledgments <a href="#RELEASE-16-ACKNOWLEDGEMENTS" class="id_link">#</a></h3></div></div></div><p>
    The following individuals (in alphabetical order) have contributed
    to this release as patch authors, committers, reviewers, testers,
    or reporters of issues.
   </p><table border="0" summary="Simple list" class="simplelist"><tr><td>ADD HERE</td></tr></table></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release.html" title="Appendix E. Release Notes">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html" title="Appendix E. Release Notes">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="release-prior.html" title="E.2. Prior Releases">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Appendix E. Release Notes </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 16devel Documentation">Home</a></td><td width="40%" align="right" valign="top"> E.2. Prior Releases</td></tr></table></div></body></html>