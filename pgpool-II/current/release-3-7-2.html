<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Release 3.7.2</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="pgpool-II 4.3beta1 Documentation"
HREF="index.html"><LINK
REL="UP"
TITLE="Release Notes"
HREF="release.html"><LINK
REL="PREVIOUS"
TITLE="Release 3.7.3"
HREF="release-3-7-3.html"><LINK
REL="NEXT"
TITLE="Release 3.7.1"
HREF="release-3-7-1.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=ISO-8859-1"><META
NAME="creation"
CONTENT="2021-11-09T01:21:14"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>pgpool-II 4.3beta1 Documentation</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="Release 3.7.3"
HREF="release-3-7-3.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="release.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>Appendix A. Release Notes</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="Release 3.7.1"
HREF="release-3-7-1.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="RELEASE-3-7-2"
>A.51. Release 3.7.2</A
></H1
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Release Date: </B
>2018-02-13</P
></BLOCKQUOTE
></DIV
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Note: </B
>   This release fixed the bug with socket writing added in Pgpool-II 3.7.0, 3.6.6 and 3.5.10. Due to this bug, when the network load is high, an illegal message may be sent to the frontend or backend. All users using 3.7.x, 3.6.6 or later, 3.5.10 or later versions of Pgpool-II should update as soon as possible.
  </P
></BLOCKQUOTE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN14388"
>A.51.1. Changes</A
></H2
><P
></P
><UL
><LI
><P
>     Allow to build with <TT
CLASS="LITERAL"
>libressl</TT
>. (Tatsuo Ishii)
    </P
><P
>     See <A
HREF="https://www.pgpool.net/pipermail/pgpool-hackers/2018-February/002714.html"
TARGET="_top"
>[pgpool-hackers: 2714]</A
> for more details. Patch by Sandino Araico Sanchez.
    </P
></LI
><LI
><P
>     Set TCP_NODELAY and non blocking to frontend socket. (Tatsuo Ishii)
    </P
><P
>     TCP_NODELAY is employed by <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>, so do we it.
    </P
></LI
><LI
><P
>     Change systemd service file to use <TT
CLASS="VARNAME"
>STOP_OPTS=" -m fast"</TT
>. (Bo Peng)
    </P
></LI
><LI
><P
>     Change <TT
CLASS="COMMAND"
>pgpool_setup</TT
> to add restore_command in <TT
CLASS="FILENAME"
>recovery.conf</TT
>. (Bo Peng)
    </P
></LI
></UL
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN14407"
>A.51.2. Bug fixes</A
></H2
><P
></P
><UL
><LI
><P
>     Fix writing transaction flag is accidentally set at commit or rollback. (Tatsuo Ishii)
    </P
></LI
><LI
><P
>     Throw a warning message when failover consensus settings on watchdog nodes differs. (Muhammad Usama)
    </P
><P
>&#13;    </P
></LI
><LI
><P
>     Doc: Fix document typo. (Bo Peng)
    </P
><P
>&#13;    </P
></LI
><LI
><P
>     Fix bug with socket writing. (Tatsuo Ishii)
    </P
><P
>     <CODE
CLASS="FUNCTION"
>pool_write_flush()</CODE
> is responsible for writing to sockets when pgpool's
     write buffer is full (this function was introduced in 3.6.6 etc). When
     network write buffer in kernel is full, it does retrying but it forgot
     to update the internal buffer pointer. As a result, broken data is
     written to the socket. This results in variety of problems including
     too large message length.
    </P
></LI
><LI
><P
>     Fix pgpool child process segfault when ALWAYS_MASTER is on. (Tatsuo Ishii)
    </P
><P
>     If following conditions are all met pgpool child segfaults:
     <P
></P
></P><OL
TYPE="1"
><LI
><P
>	Streaming replication mode.
       </P
></LI
><LI
><P
>	fail_over_on_backend_error is off.
       </P
></LI
><LI
><P
>	ALWAYS_MASTER flags is set to the master (writer) node.
       </P
></LI
><LI
><P
>	pgpool_status file indicates that the node mentioned in #3 is in down status.
       </P
></LI
></OL
><P>  


    </P
><P
>     See <A
HREF="https://www.pgpool.net/pipermail/pgpool-hackers/2018-January/002687.html"
TARGET="_top"
>[pgpool-hackers: 2687]</A
> and <A
HREF="https://www.pgpool.net/pipermail/pgpool-general/2018-January/005939.html"
TARGET="_top"
>[pgpool-general: 5881]</A
> for more details.
    </P
></LI
><LI
><P
>     Fix segfault when %a is in <TT
CLASS="VARNAME"
>log_line_prefix</TT
> and debug message is on. (<A
HREF="http://www.pgpool.net/mantisbt/view.php?id=376"
TARGET="_top"
>bug 376</A
>) (Tatsuo Ishii)
    </P
></LI
><LI
><P
>     Fix per node health check parameters types. (Tatsuo Ishii)
    </P
></LI
><LI
><P
>     Fix queries hanging in <CODE
CLASS="FUNCTION"
>parse_before_bind</CODE
> with extended protocol and replication + load-balancing. (<A
HREF="http://www.pgpool.net/mantisbt/view.php?id=377"
TARGET="_top"
>bug 377</A
>) (Tatsuo Ishii)
    </P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="release-3-7-3.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="release-3-7-1.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Release 3.7.3</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="release.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Release 3.7.1</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>