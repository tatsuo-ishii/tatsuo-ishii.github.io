<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>リリース 4.3.0</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="Pgpool-II 4.4devel 文書"
HREF="index.html"><LINK
REL="UP"
TITLE="リリースノート"
HREF="release.html"><LINK
REL="PREVIOUS"
TITLE="リリースノート"
HREF="release.html"><LINK
REL="NEXT"
TITLE="リリース 4.2.6"
HREF="release-4-2-6.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=utf-8"><META
NAME="creation"
CONTENT="2021-12-22T01:05:18"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>Pgpool-II 4.4devel 文書</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="リリースノート"
HREF="release.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="release.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>付録 A. リリースノート</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="リリース 4.2.6"
HREF="release-4-2-6.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="RELEASE-4-3-0"
>A.1. リリース 4.3.0</A
></H1
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>リリース日: </B
>2021-12-07</P
></BLOCKQUOTE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN11224"
>A.1.1. 概要</A
></H2
><P
>   
   このバージョンには、設定と管理を容易にするために多くの機能拡張が追加されています。
   動的にwatchdogクラスタのサイズを調整するために、新しくwatchdogにクラスタメンバーシップ機構が導入されました。
   これにより、watchdogノードが停止されたり、接続が切断されたときにもリーダwatchdogノードがquorum/VIPを維持できます。
   新しい<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> 14のSQL パーサが取り込まれています。
   また、<A
HREF="runtime-config-running-mode.html#GUC-SNAPSHOT-ISOLATION-MODE"
>スナップショットアイソレーションモード</A
> を本番環境で使用できるようにしました。
   このモードのための新しい設定例が<A
HREF="example-replication-mode.html"
>設定例の章</A
>に提供されています
  </P
><P
>   
   このバージョンでは、一部の設定パラメータのデフォルト値がより一貫性があり、便利になるように変更されていることに注意してください。
   詳細については、<A
HREF="release-4-3-0.html#MIGRATION-4-3-0"
>移行</A
>セクションを参照してください。
  </P
><P
>   
   以下は主な機能拡張です。
  </P
><P
></P
><UL
><LI
><P
>     
     watchdogノードが削除されたときにもquorum/VIPを維持するために、新しくwatchdogにメンバーシップ機構が導入されました。
    </P
></LI
><LI
><P
>     
     負荷分散ノードの選択時にレプリケーション遅延が最小のスタンバイノードを選択できるようにしました。
     この目的のために、新しいパラメータ<A
HREF="runtime-streaming-replication-check.html#GUC-PREFER-LOWER-DELAY-STANDBY"
>prefer_lower_delay_standby</A
>が追加されました。
    </P
></LI
><LI
><P
>     
     <A
HREF="pcp-promote-node.html"
>pcp_promote_node</A
>で昇格するノードIDを指定できるようにしました。
     この目的のために、新しいスイッチ<TT
CLASS="PARAMETER"
>--switchover</TT
>が追加されました。
     スイッチが指定されている場合、<A
HREF="pcp-promote-node.html"
>pcp_promote_node</A
>は現在のプライマリノードを切り離し、実際に指定されたノードを昇格します。
    </P
></LI
><LI
><P
>     
     <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>が管理者によってシャットダウンされたとき、または<CODE
CLASS="FUNCTION"
>pg_terminate_backend</CODE
>によって強制終了されたときに、フェイルオーバを発生させないように設定できるようにしました。
     この目的のために、新しいパラメータ<A
HREF="runtime-config-failover.html#GUC-FAILOVER-ON-BACKEND-SHUTDOWN"
>failover_on_backend_shutdown</A
>が追加されました。
    </P
></LI
><LI
><P
>     
     <A
HREF="pcp-proc-info.html"
>pcp_proc_info</A
>、<A
HREF="sql-show-pool-processes.html"
>SHOW POOL_PROCESSES</A
>、および<A
HREF="sql-show-pool-pools.html"
>SHOW POOL_POOLS</A
>コマンドにより有用な情報を表示するために、新しいフィールドを追加しました。
    </P
></LI
><LI
><P
>     
     <A
HREF="pcp-node-info.html"
>pcp_node_info</A
>がすべてのバックエンドノード情報を一覧表示できるようにしました。
    </P
></LI
><LI
><P
>     
     実際の<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の状態を示す新しいフィールドを<A
HREF="sql-show-pool-nodes.html"
>SHOW POOL_NODES</A
>とその同種のコマンドに追加しました。
    </P
></LI
><LI
><P
>     
     リカバリ元のホスト名を表す新しいパラメータを<A
HREF="runtime-online-recovery.html#GUC-RECOVERY-1ST-STAGE-COMMAND"
>recovery_1st_stage_command</A
>および<A
HREF="runtime-online-recovery.html#GUC-RECOVERY-2ND-STAGE-COMMAND"
>recovery_2nd_stage_command</A
>に追加しました。
     これは、hostnameコマンドが予期しないホスト名を返す一部のシステムで役立ちます。
    </P
></LI
><LI
><P
>     
     ミリ秒単位でログにタイムスタンプを出力できるようにしました。
    </P
></LI
><LI
><P
>     
     PostgreSQL 14 の SQL パーサを取り込みました。
    </P
><P
>      
      PostgreSQL 14 パーサのおもな変更点は次のとおりです:
    </P
><P
></P
><UL
><LI
><P
>        
        エイリアスをJOIN ... USINGに使用できるようにしました。
	   </P
></LI
><LI
><P
>       
       DISTINCTをGROUP BYに追加できるようにしました。
	   </P
></LI
><LI
><P
>	   
	   共通テーブル式に新しいSEARCHとCYCLE句を追加しました。
	   </P
></LI
></UL
></LI
><LI
><P
>     
     <TT
CLASS="FILENAME"
>pgpool.conf</TT
>ファイルでincludeディレクティブに対応しました。
     <TT
CLASS="FILENAME"
>pgpool.conf</TT
>に取り込む分割した小さな設定ファイルを作成することができます。
    </P
></LI
><LI
><P
>     
     <TT
CLASS="FILENAME"
>pgpool.conf</TT
>のサンプルファイルは、設定を容易にするために単一のサンプルファイルに統合されました。
    </P
></LI
><LI
><P
>     
     <TT
CLASS="FILENAME"
>pgpool.conf</TT
>サンプルファイルのすべての構成パラメータは、どのパラメータを変更する必要があるかを明確にするためにコメント化されました。
     一部の設定パラメータのデフォルト値が変更されていることに注意してください。
     詳細については、<A
HREF="release-4-3-0.html#MIGRATION-4-3-0"
>移行</A
>のセクションを参照してください。
    </P
></LI
></UL
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="MIGRATION-4-3-0"
>A.1.2. バージョン 4.3 への移行</A
></H2
><P
></P
><UL
><LI
><P
>     
     <TT
CLASS="FILENAME"
>pgpool.conf</TT
>のすべてのパラメータをコメント化しました。(Tatsuo Ishii)
    </P
><P
>     
     これにより、<TT
CLASS="FILENAME"
>pgpool.conf</TT
>の混乱が少なくなり、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> の方法に従うため、PostgreSQLユーザは<TT
CLASS="FILENAME"
>pgpool.conf</TT
>を理解しやすくなります。
    </P
></LI
><LI
><P
>     
     すべての<TT
CLASS="FILENAME"
>pgpool.conf.sample</TT
>ファイルを単一の<TT
CLASS="FILENAME"
>pgpool.conf.sample</TT
>に統合しました。(Tatsuo Ishii)
    </P
><P
>     
     <TT
CLASS="FILENAME"
>pgpool.conf</TT
>のすべての設定パラメータがコメント化されたので、個別の設定サンプルファイルを用意する意味がなくなりました。
     <A
HREF="runtime-config-running-mode.html#GUC-BACKEND-CLUSTERING-MODE"
>backend_clustering_mode</A
>パラメータを指定するだけで十分です。
    </P
></LI
><LI
><P
>     
     <A
HREF="runtime-config-running-mode.html#GUC-INSERT-LOCK"
>insert_lock</A
>のコンパイル時のデフォルト値を on に変更しました。(Tatsuo Ishii)
    </P
><P
>     
     insert_lockは<TT
CLASS="FILENAME"
>pgpool.conf.sample</TT
>ですでにonになっています。
     よってそれと同期しました。
    </P
></LI
><LI
><P
>     
     <A
HREF="runtime-watchdog-config.html#GUC-FAILOVER-REQUIRE-CONSENSUS"
>failover_require_consensus</A
>のコンパイル時のデフォルト値をonに変更しました。(Tatsuo Ishii)
    </P
><P
>     
     <A
HREF="runtime-watchdog-config.html#GUC-FAILOVER-REQUIRE-CONSENSUS"
>failover_require_consensus</A
>は、ドキュメントと<TT
CLASS="FILENAME"
>pgpool.conf</TT
>ですでに on になっています。
     よってそれらと同期しました。
    </P
></LI
><LI
><P
>     
     <A
HREF="runtime-watchdog-config.html#GUC-FAILOVER-WHEN-QUORUM-EXISTS"
>failover_when_quorum_exists</A
>のコンパイル時のデフォルト値をonに変更しました。(Tatsuo Ishii)
    </P
><P
>     
     <A
HREF="runtime-watchdog-config.html#GUC-FAILOVER-WHEN-QUORUM-EXISTS"
>failover_when_quorum_exists</A
>は、ドキュメントと<TT
CLASS="FILENAME"
>pgpool.conf</TT
>ですでに on になっています。
     よってそれらと同期しました。
    </P
></LI
><LI
><P
>     
     <A
HREF="runtime-config-load-balancing.html#GUC-LOAD-BALANCE-MODE"
>load_balance_mode</A
>のコンパイル時のデフォルト値を on に変更しました。(Tatsuo Ishii)
    </P
><P
>     
     <A
HREF="runtime-config-load-balancing.html#GUC-LOAD-BALANCE-MODE"
>load_balance_mode</A
>は、ドキュメントと<TT
CLASS="FILENAME"
>pgpool.conf</TT
>ですでにonになっています。
     よってそれらと同期しました。
    </P
></LI
><LI
><P
>     
     デフォルトでストリーミングレプリケーションのチェックを有効にしました。(Tatsuo Ishii)
    </P
><P
>     
     <A
HREF="runtime-streaming-replication-check.html#GUC-SR-CHECK-PERIOD"
>sr_check_period</A
>のコンパイル時のデフォルト値を0から10に変更しました。
     これは、ストリーミングレプリケーションモードで動作している場合、ストリーミングレプリケーションのチェックがデフォルトで有効になっていることを意味します。
     このパラメータは、<TT
CLASS="FILENAME"
>pgpool.conf.sample</TT
> ですでに10に設定されています。
     したがって、唯一の違いは、<A
HREF="runtime-streaming-replication-check.html#GUC-SR-CHECK-PERIOD"
>sr_check_period</A
>がコメント化されている場合です。
    </P
></LI
><LI
><P
>     
     <A
HREF="runtime-streaming-replication-check.html#GUC-LOG-STANDBY-DELAY"
>log_standby_delay</A
>のコンパイル時のデフォルトを'none'から'if_over_threshold'に変更しました。(Tatsuo Ishii)
    </P
><P
>     
     コンパイル時のデフォルトは'none'でしたが、サンプルの<TT
CLASS="FILENAME"
>pgpool.conf</TT
>のデフォルト値は'if_over_threshold'でした。
     'if_over_threshold'はほとんどのユーザにとってより便利なので、コンパイル時のデフォルトも'if_over_threshold'に変更しました。
    </P
></LI
><LI
><P
>     
     いくつかのコンパイル時のデフォルト値を修正しました。(Tatsuo Ishii)
    </P
><P
>     
     src/config/pool_config_variable.cで定義されているいくつかのデフォルト値は、ドキュメントが想定するものとは異なっていました。
     すなわち:
     <A
HREF="runtime-watchdog-config.html#GUC-CLEAR-MEMQCACHE-ON-ESCALATION"
>clear_memqcache_on_escalation</A
> ("false" から "true" に変更)
     <A
HREF="runtime-watchdog-config.html#GUC-WD-LIFECHECK-DBNAME"
>wd_lifecheck_dbname</A
> ("postgres" から "template1" に変更)
     <A
HREF="runtime-config-connection-pooling.html#GUC-LISTEN-BACKLOG-MULTIPLIER"
>listen_backlog_multiplier</A
> ("32" から "2" に変更)
     <A
HREF="runtime-config-connection.html#GUC-AUTHENTICATION-TIMEOUT"
>authentication_timeout</A
> ("0" から "60" に変更)
    </P
></LI
></UL
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN11346"
>A.1.3. バグ修正</A
></H2
><P
></P
><UL
><LI
><P
>     
     このリリースでは、<SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
> 4.2.5と同じバグ修正がすでに適用されています。
     これらの修正の詳細については、<A
HREF="release-4-2-5.html"
>項A.3</A
>を参照してください。
    </P
></LI
></UL
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN11353"
>A.1.4. 変更</A
></H2
><P
></P
><UL
><LI
><P
>     watchdogノードのメンバー・非メンバーの概念を導入することにより、動的にwatchdogクラスタの概念を定義できるようになりました(Muhammad Usama)。
    </P
><P
>     watchdogノードからノードのメンバーが削除されると、クラスタは以後の多数決ルールの計算を調整するために、動的に自分自身を補正します。
    </P
><P
>     3つの新しい設定パラメータ<A
HREF="runtime-watchdog-config.html#GUC-WD-NO-SHOW-NODE-REMOVAL-TIMEOUT"
>wd_no_show_node_removal_timeout</A
>、<A
HREF="runtime-watchdog-config.html#GUC-WD-LOST-NODE-REMOVAL-TIMEOUT"
>wd_lost_node_removal_timeout</A
>、<A
HREF="runtime-watchdog-config.html#GUC-WD-REMOVE-SHUTDOWN-NODES"
>wd_remove_shutdown_nodes</A
>が、watchdogノードのメンバー管理の条件を調整するために導入されました。
    </P
></LI
><LI
><P
>     
     <A
HREF="runtime-streaming-replication-check.html#GUC-PREFER-LOWER-DELAY-STANDBY"
>prefer_lower_delay_standby</A
>を追加しました。(Masaya Kawamoto)
    </P
></LI
><LI
><P
>     
     <A
HREF="pcp-promote-node.html"
>pcp_promote_node</A
>で昇格するノード ID を指定できるようにしました。(Tatsuo Ishii)
    </P
></LI
><LI
><P
>     
     新しい設定パラメータ<A
HREF="runtime-config-failover.html#GUC-FAILOVER-ON-BACKEND-SHUTDOWN"
>failover_on_backend_shutdown</A
>を追加しました。(Tatsuo Ishii)
    </P
></LI
><LI
><P
>     
     <A
HREF="pcp-proc-info.html"
>pcp_proc_info</A
>、<A
HREF="sql-show-pool-processes.html"
>SHOW POOL_PROCESSES</A
>、および <A
HREF="sql-show-pool-pools.html"
>SHOW POOL_POOLS</A
>コマンドに新しいフィールドを追加しました。(Masaya Kawamoto)
    </P
></LI
><LI
><P
>     
     <A
HREF="pcp-node-info.html"
>pcp_node_info</A
>がすべてのバックエンドノードを一覧表示できるようにしました。(Bo Peng)
    </P
></LI
><LI
><P
>     
     実際の<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の状態を<A
HREF="sql-show-pool-nodes.html"
>SHOW POOL_NODES</A
>、<A
HREF="pcp-node-info.html"
>pcp_node_info</A
>、および<A
HREF="pgpool-adm-pcp-node-info.html"
>pgpool_adm_pcp_node_info</A
>で表示するために、新しいフィールドを追加しました。(Tatsuo Ishii)
    </P
></LI
><LI
><P
>     
     リカバリ元のホスト名を表す新しいパラメータを<A
HREF="runtime-online-recovery.html#GUC-RECOVERY-1ST-STAGE-COMMAND"
>recovery_1st_stage_command</A
>と<A
HREF="runtime-online-recovery.html#GUC-RECOVERY-2ND-STAGE-COMMAND"
>recovery_2nd_stage_command</A
>に追加しました。(Tatsuo Ishii)
    </P
></LI
><LI
><P
>     
     <A
HREF="runtime-config-logging.html#GUC-LOG-LINE-PREFIX"
>log_line_prefix</A
>でミリ秒単位でログにタイムスタンプを出力できるようにしました。(Tatsuo Ishii)
    </P
></LI
><LI
><P
>     
     <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> 14の新しいSQLパーサを取り込みました。(Bo Peng)
    </P
></LI
><LI
><P
>     
     すべての<TT
CLASS="FILENAME"
>pgpool.conf.sample</TT
>ファイルを単一の<TT
CLASS="FILENAME"
>pgpool.conf.sample</TT
>に統合しました。(Tatsuo Ishii)
    </P
></LI
><LI
><P
>     
     サンプルの<TT
CLASS="FILENAME"
>pgpool.conf</TT
>でコメント化の漏れを修正しました。(Tatsuo Ishii)
    </P
><P
>     
     <A
HREF="runtime-config-load-balancing.html#GUC-STATEMENT-LEVEL-LOAD-BALANCE"
>statement_level_load_balance</A
>と<A
HREF="runtime-config-connection.html#GUC-ALLOW-CLEAR-TEXT-FRONTEND-AUTH"
>allow_clear_text_frontend_auth</A
>はコメント化されていませんでした。
    </P
></LI
></UL
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN11406"
>A.1.5. ドキュメントの変更</A
></H2
><P
></P
><UL
><LI
><P
>     新しいネィティブレプリケーションモードとスナップショットアイソレーションモードの設定例を追加しました。(Bo Peng)
    </P
></LI
><LI
><P
>     
     <A
HREF="example-cluster.html"
>Pgpool-II + Watchdog の設定例</A
>とサンプルスクリプトを<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> 14 向けに更新しました。(Masaya Kawamoto)
    </P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="release.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>ホーム</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="release-4-2-6.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>リリースノート</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="release.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>リリース 4.2.6</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>