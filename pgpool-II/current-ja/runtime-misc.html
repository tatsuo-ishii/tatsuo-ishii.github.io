<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>その他の設定パラメータ</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="Pgpool-II 4.2devel 文書"
HREF="index.html"><LINK
REL="UP"
TITLE="サーバの設定"
HREF="runtime-config.html"><LINK
REL="PREVIOUS"
TITLE="Watchdog"
HREF="runtime-watchdog-config.html"><LINK
REL="NEXT"
TITLE="クライアント認証"
HREF="client-authentication.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=utf-8"><META
NAME="creation"
CONTENT="2020-09-13T06:05:25"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>Pgpool-II 4.2devel 文書</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="Watchdog"
HREF="runtime-watchdog-config.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="runtime-config.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>第 5章サーバの設定</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="クライアント認証"
HREF="client-authentication.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="RUNTIME-MISC"
>5.15. その他の設定パラメータ</A
></H1
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><A
NAME="GUC-RELCACHE-EXPIRE"
></A
><TT
CLASS="VARNAME"
>relcache_expire</TT
> (<TT
CLASS="TYPE"
>integer</TT
>)
    </DT
><DD
><P
>     
     リレーションキャッシュの寿命を秒単位で指定します。
     リレーションキャッシュは、<SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>がテーブルの構造を含む様々な情報を取得したり、テーブルのタイプ（たとえば、参照されているテーブルが一時テーブルかどうかなど）をチェックするために使う<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>のシステムカタログの問い合わせ結果を保存しておくものです。
     キャッシュはpgpoolの子プロセスのローカルメモリ空間に保管されています。
     <A
HREF="runtime-misc.html#GUC-ENABLE-SHARED-RELCACHE"
>enable_shared_relcache</A
>が有効な場合、子プロセス間で共有するために共有メモリにも保管されます。
      もし<TT
CLASS="COMMAND"
>ALTER TABLE</TT
>でテーブルが変更された場合などは、リレーションキャッシュと一致しなくなります。
      そのため、<TT
CLASS="VARNAME"
>relcache_expire</TT
>がキャッシュの寿命をコントロールしています。
      デフォルトは0で、キャッシュの期限が切れることはありません。
    </P
><P
>     
     このパラメータは、サーバ起動時にのみ設定できます。
    </P
></DD
><DT
><A
NAME="GUC-RELCACHE-SIZE"
></A
><TT
CLASS="VARNAME"
>relcache_size</TT
> (<TT
CLASS="TYPE"
>integer</TT
>)
    </DT
><DD
><P
>     
     リレーションキャッシュのエントリ数を指定します。
     デフォルトは256です。
     リレーションキャッシュは、一つのテーブルあたり最大10個程度のエントリが作成されます。
     そのため、必要なリレーションキャッシュのサイズは、使用するテーブル数 * 10 で見積れます。
    </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>      
      もし以下のようなメッセージが<SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>ログに頻繁に出る場合は、パフォーマンス向上のため<TT
CLASS="VARNAME"
>relcache_size</TT
>を大きくしてください。
      </P><PRE
CLASS="PROGRAMLISTING"
>       "pool_search_relcache: cache replacement happened"
      </PRE
><P>
     </P
></BLOCKQUOTE
></DIV
><P
>     
     このパラメータは、サーバ起動時にのみ設定できます。
    </P
></DD
><DT
><A
NAME="GUC-ENABLE-SHARED-RELCACHE"
></A
><TT
CLASS="VARNAME"
>enable_shared_relcache</TT
> (<TT
CLASS="TYPE"
>boolean</TT
>)
    </DT
><DD
><P
>     onにするとインメモリクエリキャッシュ(<A
HREF="runtime-in-memory-query-cache.html#RUNTIME-IN-MEMORY-QUERY-CACHE-ENABLING"
>項5.12.1</A
>参照)を利用して子プロセス間でリレーションキャッシュを共有します。
     デフォルトはonです。
     それぞれの子プロセスは<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>のシステムカタログを参照するためにクエリを実行します。
     この機能を有効にすると、他のプロセスはクエリキャッシュからカタログを参照した結果を得ることができるので、クエリの実行頻度が減ることが期待できます。
     システムカタログが変更されてもキャッシュは削除されません。
     ですから時間によるキャッシュの削除を<A
HREF="runtime-misc.html#GUC-RELCACHE-EXPIRE"
>relcache_expire</A
>を使って行うことを強くお勧めします。
    </P
><P
>      本パラメータは、<A
HREF="runtime-in-memory-query-cache.html#GUC-MEMORY-CACHE-ENABLED"
>memory_cache_enabled</A
>がoffの場合も有効です。
       この場合、一部のクエリキャッシュのパラメータ（<A
HREF="runtime-in-memory-query-cache.html#GUC-MEMQCACHE-METHOD"
>memqcache_method</A
>と<A
HREF="runtime-in-memory-query-cache.html#GUC-MEMQCACHE-MAXCACHE"
>memqcache_maxcache</A
>、および各キャッシュストレージ用のパラメータ）も有効になります。
    </P
><P
>     このパラメータがonなら、<SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>はローカルのリレーションキャッシュをまず検索します。
     該当するキャッシュエントリが見つからない場合は、次に共有クエリキャッシュを検索します。
     もしクエリキャッシュに該当エントリが見つかったら、ローカルキャッシュにコピーします。
     見つからなかった場合には、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>にクエリを発行して問い合わせを実行し、結果をクエリキャッシュに登録するとともに、ローカルキャッシュにも登録します。
    </P
><P
>     
     このパラメータはサーバ起動時にのみ設定可能です
    </P
></DD
><DT
><A
NAME="GUC-RELCACHE-QUERY-TARGET"
></A
><TT
CLASS="VARNAME"
>relcache_query_target</TT
> (<TT
CLASS="TYPE"
>enum</TT
>)
    </DT
><DD
><P
>     リレーションキャッシュを作成するためのクエリを送る先のノードを指定します。
     <TT
CLASS="LITERAL"
>master</TT
>にすると、クエリはマスタ（プライマリ）に送られます。
     これがデフォルトで、最新のデータを入手できるため、ほとんどのユーザに推奨する設定です。
     もしマスタ（プライマリ）の負荷を下げたい場合は、このパラメータを<TT
CLASS="LITERAL"
>load_balance_node</TT
>に設定できます。
     これにより、クエリは負荷分散ノードに送られます。
     これは特に、大陸Aに<SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>とプライマリサーバがあり、一方大陸Bに<SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>とスタンバイサーバがあるような構成で有効です。
     Bのユーザは地理的にスタンバイサーバが近いため、スタンバイからデータを読みたいと思うでしょう。
     その場合は、backend_weight0 (これはプライマリの設定です)を0に、backend_weight1(これはスタンバイの設定です)を1にし、relache_query_targetを<TT
CLASS="LITERAL"
>load_balance_node</TT
>にします。
    </P
><P
>     しかし、スタンバイにクエリを送る場合、レプリケーションの遅延により、最近作られたテーブルや行はスタンバイサーバにはまだないかもしれないことに注意してください。
     ですから、更新頻度の高いシステムではこの設定はおすすめできません。
    </P
><P
>     このパラメータは<SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>の設定を再読み込みすることで変更可能です。
    </P
></DD
><DT
><A
NAME="GUC-CHECK-TEMP-TABLE"
></A
><TT
CLASS="VARNAME"
>check_temp_table</TT
> (<TT
CLASS="TYPE"
>enum</TT
>)
    </DT
><DD
><P
>     <TT
CLASS="LITERAL"
>catalog</TT
>あるいは<TT
CLASS="LITERAL"
>trace</TT
>に設定されたとき、<ACRONYM
CLASS="ACRONYM"
>SELECT</ACRONYM
>に含まれるテーブルが一時テーブルかどうかのチェックを行います。
     <TT
CLASS="LITERAL"
>catalog</TT
>に設定すると一時テーブルをチェックするため<SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>はプライマリ/マスター<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>バックエンドのシステムカタログに問い合わせ、プライマリ/マスタサーバの負荷を上げます。
    </P
><P
>     <TT
CLASS="LITERAL"
>trace</TT
>に設定されていると、一時テーブルの情報を入手するために<SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>は一時テーブルの作成と削除を追跡します。
     ですからシステムカタログへアクセする必要がありません。
     しかし、一時テーブルの生成が<SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>から見えない場合（たとえば関数やトリガの中で行われる場合）、<SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>は一時テーブルの生成を認識できません。
    </P
><P
>     もしシステムが決して一時テーブルを使用しないことが確かならば、安全に<TT
CLASS="VARNAME"
>check_tmp_table</TT
>を<TT
CLASS="LITERAL"
>none</TT
>にすることができます。
    </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>      4.0以前のバージョンとの互換性のために、<TT
CLASS="LITERAL"
>catalog</TT
>と同じ意味の<TT
CLASS="LITERAL"
>on</TT
>、<TT
CLASS="LITERAL"
>none</TT
>と同じ意味の<TT
CLASS="LITERAL"
>off</TT
>も受け付けますが、将来のバージョンではこれらは削除されるかもしれません。
     </P
></BLOCKQUOTE
></DIV
><P
>     デフォルトは<TT
CLASS="LITERAL"
>catalog</TT
>です。
    </P
><P
>     
     このパラメータは<SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>の設定を再読み込みすることで変更可能です。
     現在のセッションでのパラメータ値は、<A
HREF="sql-pgpool-set.html"
>PGPOOL SET</A
>コマンドで変更することもできます。
    </P
></DD
><DT
><A
NAME="GUC-CHECK-UNLOGGED-TABLE"
></A
><TT
CLASS="VARNAME"
>check_unlogged_table</TT
> (<TT
CLASS="TYPE"
>boolean</TT
>)
    </DT
><DD
><P
>     
     onに設定されたとき、<ACRONYM
CLASS="ACRONYM"
>SELECT</ACRONYM
>に含まれるテーブルがunloggedテーブルかどうかのチェックを行います。
     unloggedテーブルをチェックするため<SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>はプライマリ/マスター<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>バックエンドのシステムカタログに問い合わせ、プライマリ/マスタサーバの負荷を上げます。
     もしシステムが決してunloggedテーブルを使用しないことが確かならば（たとえば、9.0 以前のバージョンの<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>を使っている）、安全に<TT
CLASS="VARNAME"
>check_unlogged_table</TT
>をoffにすることができます。
     デフォルトはonです。
    </P
><P
>     
     このパラメータは<SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>の設定を再読み込みすることで変更可能です。
     現在のセッションでのパラメータ値は、<A
HREF="sql-pgpool-set.html"
>PGPOOL SET</A
>コマンドで変更することもできます。
    </P
></DD
><DT
><A
NAME="GUC-PID-FILE-NAME"
></A
><TT
CLASS="VARNAME"
>pid_file_name</TT
> (<TT
CLASS="TYPE"
>string</TT
>)
    </DT
><DD
><P
>     
     <SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>のプロセスIDを格納するファイルのフルパスを指定します。
     デフォルトは<TT
CLASS="LITERAL"
>'/var/run/pgpool/pgpool.pid'</TT
>です。
    </P
><P
>     
     このパラメータは、サーバ起動時にのみ設定できます。
    </P
></DD
><DT
><A
NAME="GUC-LOGDIR"
></A
><TT
CLASS="VARNAME"
>logdir</TT
> (<TT
CLASS="TYPE"
>string</TT
>)
    </DT
><DD
><P
>     
     <TT
CLASS="LITERAL"
>pgpool_status</TT
>ファイルを格納するディレクトリのフルパスを指定します。
     デフォルトは<TT
CLASS="LITERAL"
>'/tmp'</TT
>です。
    </P
><P
>     
     このパラメータは、サーバ起動時にのみ設定できます。
    </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="runtime-watchdog-config.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>ホーム</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="client-authentication.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Watchdog</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="runtime-config.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>クライアント認証</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>