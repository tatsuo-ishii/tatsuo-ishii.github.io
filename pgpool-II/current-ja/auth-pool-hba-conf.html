<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>pool_hba.confファイル</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="Pgpool-II 4.2devel 文書"
HREF="index.html"><LINK
REL="UP"
TITLE="クライアント認証"
HREF="client-authentication.html"><LINK
REL="PREVIOUS"
TITLE="クライアント認証"
HREF="client-authentication.html"><LINK
REL="NEXT"
TITLE="認証方式"
HREF="auth-methods.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=utf-8"><META
NAME="creation"
CONTENT="2020-09-07T06:23:17"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>Pgpool-II 4.2devel 文書</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="クライアント認証"
HREF="client-authentication.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="client-authentication.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>第 6章クライアント認証</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="認証方式"
HREF="auth-methods.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AUTH-POOL-HBA-CONF"
>6.1. <TT
CLASS="FILENAME"
>pool_hba.conf</TT
>ファイル</A
></H1
><P
>   
   <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の<TT
CLASS="FILENAME"
>pg_hba.conf</TT
>と同じように<SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>でも<TT
CLASS="FILENAME"
>pool_hba.conf</TT
>とよばれる設定ファイルを使った同様のクライアント認証機能をサポートしています。
   <SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>をソースコードからインストールした場合、デフォルトインストール先の設定ファイルディレクトリ（<TT
CLASS="LITERAL"
>"/usr/local/etc"</TT
>）にサンプルの<TT
CLASS="FILENAME"
>pool_hba.conf.sample</TT
>が含まれています。
   デフォルトではpool_hbaによる認証は無効になっており、<TT
CLASS="VARNAME"
>enable_pool_hba</TT
>を<TT
CLASS="LITERAL"
>on</TT
>に設定することで有効になります。
   <A
HREF="runtime-config-connection.html#GUC-ENABLE-POOL-HBA"
>enable_pool_hba</A
>設定パラメータをご覧ください。
  </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>    <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の数が1台のみ、あるいはraw mode(<A
HREF="configuring-pgpool.html#RUNNING-MODE"
>項3.3.2</A
>参照)では、<TT
CLASS="FILENAME"
>pool_hba.conf</TT
>は必要なく、<TT
CLASS="VARNAME"
>enable_pool_hba</TT
>はoffのままで構いません。
     この場合、クライアントの認証方式は<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>に完全に任されます。
     <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の数が複数台、あるいはraw mode以外の場合でも、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>での認証方式が<TT
CLASS="LITERAL"
>trust</TT
>なら、やはり<TT
CLASS="FILENAME"
>pool_hba.conf</TT
>は必要なく、<TT
CLASS="VARNAME"
>enable_pool_hba</TT
>はoffのままで構いません。
   </P
></BLOCKQUOTE
></DIV
><P
>   
   <TT
CLASS="FILENAME"
>pool_hba.conf</TT
>のフォーマットは<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>の<TT
CLASS="FILENAME"
>pg_hba.conf</TT
>のものとほとんど同じです。
   <TT
CLASS="FILENAME"
>pool_hba.conf</TT
>ファイルの一般的な書式は、1行につき1つのレコードというレコードの集合です。
   空行はコメント用の<TT
CLASS="LITERAL"
>#</TT
>文字以降の文字と同じく無視されます。
   レコードは行をまたいで続けることはできません。
   レコードはスペースもしくはタブ、もしくはその両方で区切られた、複数のフィールドで構成されています。
   フィールドには、フィールド値が二重引用符付きの場合空白文字を含むことができます。
   データベース、ユーザもしくはアドレスフィールド内のキーワード(例：<TT
CLASS="LITERAL"
>all</TT
>または<TT
CLASS="LITERAL"
>replication</TT
>)の一つを引用符で囲むとその特別な意味が失われ、その名称のデータベース、ユーザもしくはホストと一致するようになります。
  </P
><P
>   
   それぞれのレコードは接続形式、（接続形式に対して意味を持つのであれば）クライアントのIPアドレス範囲、データベースの名前、ユーザ名およびこれらのパラメータに一致する接続で使用される認証方法を指定します。
   接続形式、クライアントアドレス、要求されたデータベース、およびユーザ名に一致する最初のレコードが認証処理に使用されます。
   「失敗時の継続」や、 あるいは「バックアップ」はありません。
   これは、もしあるレコードが選択されて認証に失敗した場合、後続のレコードは考慮されないということです。
   どのレコードも一致しない時はアクセスが拒否されます。
  </P
><P
>   
   レコードは以下の書式のうちの1つの形式を取ります。
   </P><PRE
CLASS="SYNOPSIS"
>    local      <TT
CLASS="REPLACEABLE"
><I
>database</I
></TT
>  <TT
CLASS="REPLACEABLE"
><I
>user</I
></TT
>  <TT
CLASS="REPLACEABLE"
><I
>auth-method</I
></TT
>  [<SPAN
CLASS="OPTIONAL"
><TT
CLASS="REPLACEABLE"
><I
>auth-options</I
></TT
></SPAN
>]

    host       <TT
CLASS="REPLACEABLE"
><I
>database</I
></TT
>  <TT
CLASS="REPLACEABLE"
><I
>user</I
></TT
>  <TT
CLASS="REPLACEABLE"
><I
>IP-address</I
></TT
> <TT
CLASS="REPLACEABLE"
><I
>IP-mask</I
></TT
>  <TT
CLASS="REPLACEABLE"
><I
>auth-method</I
></TT
>  [<SPAN
CLASS="OPTIONAL"
><TT
CLASS="REPLACEABLE"
><I
>auth-options</I
></TT
></SPAN
>]
    hostssl    <TT
CLASS="REPLACEABLE"
><I
>database</I
></TT
>  <TT
CLASS="REPLACEABLE"
><I
>user</I
></TT
>  <TT
CLASS="REPLACEABLE"
><I
>IP-address</I
></TT
> <TT
CLASS="REPLACEABLE"
><I
>IP-mask</I
></TT
>  <TT
CLASS="REPLACEABLE"
><I
>auth-method</I
></TT
>  [<SPAN
CLASS="OPTIONAL"
><TT
CLASS="REPLACEABLE"
><I
>auth-options</I
></TT
></SPAN
>]
    hostnossl  <TT
CLASS="REPLACEABLE"
><I
>database</I
></TT
>  <TT
CLASS="REPLACEABLE"
><I
>user</I
></TT
>  <TT
CLASS="REPLACEABLE"
><I
>IP-address</I
></TT
> <TT
CLASS="REPLACEABLE"
><I
>IP-mask</I
></TT
>  <TT
CLASS="REPLACEABLE"
><I
>auth-method</I
></TT
>  [<SPAN
CLASS="OPTIONAL"
><TT
CLASS="REPLACEABLE"
><I
>auth-options</I
></TT
></SPAN
>]

    host       <TT
CLASS="REPLACEABLE"
><I
>database</I
></TT
>  <TT
CLASS="REPLACEABLE"
><I
>user</I
></TT
>  <TT
CLASS="REPLACEABLE"
><I
>address</I
></TT
>  <TT
CLASS="REPLACEABLE"
><I
>auth-method</I
></TT
>  [<SPAN
CLASS="OPTIONAL"
><TT
CLASS="REPLACEABLE"
><I
>auth-options</I
></TT
></SPAN
>]
    hostssl    <TT
CLASS="REPLACEABLE"
><I
>database</I
></TT
>  <TT
CLASS="REPLACEABLE"
><I
>user</I
></TT
>  <TT
CLASS="REPLACEABLE"
><I
>address</I
></TT
>  <TT
CLASS="REPLACEABLE"
><I
>auth-method</I
></TT
>  [<SPAN
CLASS="OPTIONAL"
><TT
CLASS="REPLACEABLE"
><I
>auth-options</I
></TT
></SPAN
>]
    hostnossl  <TT
CLASS="REPLACEABLE"
><I
>database</I
></TT
>  <TT
CLASS="REPLACEABLE"
><I
>user</I
></TT
>  <TT
CLASS="REPLACEABLE"
><I
>address</I
></TT
>  <TT
CLASS="REPLACEABLE"
><I
>auth-method</I
></TT
>  [<SPAN
CLASS="OPTIONAL"
><TT
CLASS="REPLACEABLE"
><I
>auth-options</I
></TT
></SPAN
>]
   </PRE
><P>
   
   フィールドの意味は以下のようになっています。

   <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="LITERAL"
>local</TT
></DT
><DD
><P
>       
       このレコードはUnixドメインソケットを使用する接続に対応します。
       この種類のレコードを使用しないと、Unixドメインソケット経由の接続は拒否されます
      </P
></DD
><DT
><TT
CLASS="LITERAL"
>host</TT
></DT
><DD
><P
>       
       このレコードは、TCP/IPを使用した接続に対応します。
       <TT
CLASS="LITERAL"
>host</TT
>レコードは、<ACRONYM
CLASS="ACRONYM"
>SSL</ACRONYM
>もしくは非<ACRONYM
CLASS="ACRONYM"
>SSL</ACRONYM
>接続のいずれかに対応します。
      </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>	
	サーバのデフォルトの動作は、ローカルループバックアドレスである<TT
CLASS="LITERAL"
>localhost</TT
>のみTCP/IP接続を監視しています。
	よってサーバにおいて<A
HREF="runtime-config-connection.html#GUC-LISTEN-ADDRESSES"
>listen_addresses</A
>パラメータが適切な値に設定された状態で起動されていない限り、リモートのTCP/IP接続はできません。
       </P
></BLOCKQUOTE
></DIV
></DD
><DT
><TT
CLASS="LITERAL"
>hostssl</TT
></DT
><DD
><P
>       
       このレコードは、接続が<ACRONYM
CLASS="ACRONYM"
>SSL</ACRONYM
>で暗号化されている場合にのみTCP/IPを使用する接続に対応します。
      </P
><P
>       
       このオプションを使用するには、<SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>は<ACRONYM
CLASS="ACRONYM"
>SSL</ACRONYM
>サポートでビルドする必要があります。
       また、<ACRONYM
CLASS="ACRONYM"
>SSL</ACRONYM
>は<A
HREF="runtime-ssl.html#GUC-SSL"
>ssl</A
>設定パラメータを設定することによって有効にする必要があります。
	そうしなければ、hostsslレコードは無視されます。
      </P
></DD
><DT
><TT
CLASS="LITERAL"
>hostnossl</TT
></DT
><DD
><P
>       
       このレコードは、hostsslと反対の動作で、<ACRONYM
CLASS="ACRONYM"
>SSL</ACRONYM
>を使用していないTCP/IPの接続のみに対応します。
      </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>database</I
></TT
></DT
><DD
><P
>       
       このレコードで対応するデータベース名を指定します。
       <TT
CLASS="LITERAL"
>all</TT
>という値は、全てのデータベースと対応することを指定します。
       </P><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>	 
	 databaseフィールド値として<TT
CLASS="LITERAL"
>"samegroup"</TT
>はサポートされません
	</P
><P
>	 
	 <SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>は<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>バックエンドサーバにあるユーザ情報を事前に知る事ができないため、データベース名は<TT
CLASS="FILENAME"
>pool_hba.conf</TT
>にあるdatabaseフィールドの項目のみと比較されます。
	</P
></BLOCKQUOTE
></DIV
><P>
      </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>user</I
></TT
></DT
><DD
><P
>       
       このレコードで対応するデータベースユーザ名を指定します。
       <TT
CLASS="LITERAL"
>all</TT
>という値は、すべてのユーザが対応することを指定します。
       それ以外の場合には特定のデータベースユーザの名前となります。
       </P><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>	 
	 userフィールド値として"+"を使ったグループ指定はサポートされません

	</P
><P
>	 
	 上記の<TT
CLASS="LITERAL"
>"samegroup"</TT
>と同じ理由で、ユーザ名は単純に<TT
CLASS="FILENAME"
>pool_hba.conf</TT
>にあるuserフィールドの項目のみ対してチェックされます。
	</P
></BLOCKQUOTE
></DIV
><P>
      </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>address</I
></TT
></DT
><DD
><P
>       
       このレコードに対応しているクライアントマシンのアドレスを指定します。
       このフィールドはホスト名、IPアドレスの範囲、もしくは下記の特別なキーワードのいずれかを含むことができます。
      </P
><P
>       
       IPアドレスの範囲は、範囲の開始アドレス、スラッシュ (<TT
CLASS="LITERAL"
>/</TT
>) および<ACRONYM
CLASS="ACRONYM"
>CIDR</ACRONYM
>マスク長という標準数値表記を使用して指定します。
       CIDRマスク長は、クライアントIPアドレスが一致しなければならない、上位のビット数を表すものです。
       指定するIPアドレスの右側のビットには、0を指定しなければなりません。
       IPアドレス、 <TT
CLASS="LITERAL"
>/</TT
>、およびCIDRマスク長の間に空白を入れてはいけません。
      </P
><P
>       
       典型的なIPv4アドレス範囲の例は、単一のホストの場合は<TT
CLASS="LITERAL"
>172.20.143.89/32</TT
>、小規模ネットワークの場合は<TT
CLASS="LITERAL"
>172.20.143.0/24</TT
>、大規模ネットワークの場合は<TT
CLASS="LITERAL"
>10.6.0.0/16</TT
>です。
       IPv6アドレスの範囲は、単一のホストの場合は<TT
CLASS="LITERAL"
>::1/128</TT
>(この場合はIPv6ループバックアドレス)、小規模ネットワークの場合は<TT
CLASS="LITERAL"
>fe80::7a31:c1ff:0000:0000/96</TT
>です。
       <TT
CLASS="LITERAL"
>0.0.0.0/0</TT
>はすべてのIPv4アドレス、<TT
CLASS="LITERAL"
>::0/0</TT
>はすべてのIPv6アドレスを意味しています。
       単一ホストを指定するには、IPv4の場合は32、IPv6の場合は128のマスク長を使用します。ネットワークアドレスでは、末尾の0を省略できません。
      </P
><P
>       
       IPv4書式で指定されたエントリは、IPv4接続のみに対応し、IPv6書式で指定されたエントリは、たとえそのアドレスがIPv6内のIPv4の範囲内であったとしてもIPv6接続のみに対応します。
       IPv6書式のエントリは、システムのCライブラリがIPv6アドレスをサポートしていない場合拒否されることに注意してください。 
      </P
><P
>       
       すべてのIPアドレスに一致するように<TT
CLASS="LITERAL"
>all</TT
>と書くこともできますし、サーバ自身のどのIPアドレスにも一致するように<TT
CLASS="LITERAL"
>samehost</TT
>と書くこともできます。
       もしくは、サーバが直接接続されているサブネット内のどのアドレスにも一致するように<TT
CLASS="LITERAL"
>samenet</TT
>と書くこともできます。 
      </P
><P
>       
       もし、ホスト名が指定されている場合 (IPアドレス範囲以外の場合、もしくはホスト名として処理される特別なキーワード)、その名前は、クライアントのIPアドレスの逆引き名前解決の結果 (例えば、もしDNSが使用されている場合は、逆引きDNS検索により解決されるもの) と比較されます。
       ホスト名の比較では、大文字と小文字を区別しません。
       もし一致するものがあった場合は、ホスト名に対して正引き解決 (例えば正引きDNS検索) が実行され、解決されたアドレスのいずれかがクライアントのIPアドレスと等しいかどうかがチェックされます。
       もし両方が一致した場合、エントリは一致するものとみなされます。
       (<TT
CLASS="FILENAME"
>pool_hba.conf</TT
>で使用されているホスト名は、クライアントのIPアドレスの正引き名前解決が返すホスト名の1つでなければなりません。
       そうでなければ、この行は一致しません。 
       1つのIPアドレスを複数のホスト名に関連付けるホスト名データベースもありますが、IPアドレスの解決を要求された場合にオペレーティングシステムは1つのホスト名のみを返します。)
      </P
><P
>       
       ドット (<TT
CLASS="LITERAL"
>.</TT
>) で始まるホスト名の指定は実際のホスト名のサフィックスに一致します。
       したがって、<TT
CLASS="LITERAL"
>.example.com</TT
>は<TT
CLASS="LITERAL"
>foo.example.com</TT
>に一致します (<TT
CLASS="LITERAL"
>example.com</TT
>だけでは一致しません)。 
      </P
><P
>       
       <TT
CLASS="FILENAME"
>pool_hba.conf</TT
>にホスト名が指定されている場合は、名前解決が十分に高速であることを確認する必要があります。
       <ACRONYM
CLASS="ACRONYM"
>nscd</ACRONYM
>のようなローカル名前解決のキャッシュを設定することは有利かもしれません。
      </P
><P
>       
       このフィールドは<TT
CLASS="LITERAL"
>host</TT
>、<TT
CLASS="LITERAL"
>hostssl</TT
>、<TT
CLASS="LITERAL"
>hostnossl</TT
>レコードにのみ適用されます。
      </P
><P
>       
       アドレスフィールドにホスト名を指定することは、 <SPAN
CLASS="PRODUCTNAME"
>Pgpool-II </SPAN
><SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>V3.7</I
></SPAN
>より前では利用できません。
      </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>IP-address</I
></TT
><BR><TT
CLASS="REPLACEABLE"
><I
>IP-mask</I
></TT
></DT
><DD
><P
>       
       この2つのフィールドは<TT
CLASS="REPLACEABLE"
><I
>IP-address</I
></TT
><TT
CLASS="LITERAL"
>/</TT
><TT
CLASS="REPLACEABLE"
><I
>mask-length</I
></TT
>表記の代替として使用可能です。
       マスク長を指定する代わりに、実際のマスクを分離した列で指定します。 
       例えば、<TT
CLASS="LITERAL"
>255.0.0.0</TT
>はIPv4の<ACRONYM
CLASS="ACRONYM"
>CIDR</ACRONYM
>マスク長8を意味し、<TT
CLASS="LITERAL"
>255.255.255.255</TT
>は<ACRONYM
CLASS="ACRONYM"
>CIDR</ACRONYM
>マスク長32を意味しています。 
      </P
><P
>       
       このフィールドは<TT
CLASS="LITERAL"
>host</TT
>、<TT
CLASS="LITERAL"
>hostssl</TT
>、<TT
CLASS="LITERAL"
>hostnossl</TT
>レコードにのみ適用されます。
      </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>auth-method</I
></TT
></DT
><DD
><P
>       
       接続がこのレコードに一致する場合に使用する認証方式を指定します。
       使用できる選択肢は以下にまとめていますが、詳しく<A
HREF="auth-methods.html"
>項6.2</A
>を参照してください。

	<P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="LITERAL"
>trust</TT
></DT
><DD
><P
>	    
	    接続を無条件で許可します。
	    この方式は、<SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>に接続できる全てのユーザを許可します。
	   </P
></DD
><DT
><TT
CLASS="LITERAL"
>reject</TT
></DT
><DD
><P
>	    
	    接続を無条件に拒否します。
	    特定のホストをあるグループから「除外」するために便利です。
	    例えば、1行の<TT
CLASS="LITERAL"
>reject</TT
>は特定のホストが接続することを拒否します。
	   </P
></DD
><DT
><TT
CLASS="LITERAL"
>md5</TT
></DT
><DD
><P
>	    
	    クライアントに対して認証時に二重MD5ハッシュ化パスワードを要求します。

	    </P><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>	      
	      <TT
CLASS="LITERAL"
>md5</TT
>認証を使うには、ユーザ名とパスワードを<A
HREF="runtime-config-connection.html#GUC-POOL-PASSWD"
>pool_passwd</A
>というパスワードファイルに登録する必要があります。
	       詳細は<A
HREF="auth-methods.html#AUTH-MD5"
>項6.2.2</A
>を参照してください。
		なお、<TT
CLASS="FILENAME"
>pool_passwd</TT
>でパスワードを管理したくない場合は、<A
HREF="runtime-config-connection.html#GUC-ALLOW-CLEAR-TEXT-FRONTEND-AUTH"
>allow_clear_text_frontend_auth</A
>を使うこともできます。
	     </P
></BLOCKQUOTE
></DIV
><P>
	   </P
></DD
><DT
><TT
CLASS="LITERAL"
>scram-sha-256</TT
></DT
><DD
><P
>	    
	    ユーザのパスワードを確認するため、SCRAM-SHA-256認証を行います。
            </P><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>注意: </B
>	      
	      <TT
CLASS="LITERAL"
>scram-sha-256</TT
>認証を使用するためには、<A
HREF="runtime-config-connection.html#GUC-POOL-PASSWD"
>pool_passwd</A
>ファイルにユーザ名とパスワードを登録する必要があります。
	       詳細は<A
HREF="auth-methods.html#AUTH-SCRAM"
>項6.2.3</A
>を参照してください。
		なお、<TT
CLASS="FILENAME"
>pool_passwd</TT
>でパスワードを管理したくない場合は、<A
HREF="runtime-config-connection.html#GUC-ALLOW-CLEAR-TEXT-FRONTEND-AUTH"
>allow_clear_text_frontend_auth</A
>を使うこともできます。
	     </P
></BLOCKQUOTE
></DIV
><P>
	   </P
></DD
><DT
><TT
CLASS="LITERAL"
>cert</TT
></DT
><DD
><P
>	    
	    SSLクライアント証明書を使って認証します。
	    詳細は<A
HREF="auth-methods.html#AUTH-CERT"
>項6.2.4</A
>を参照してください。
	   </P
></DD
><DT
><TT
CLASS="LITERAL"
>pam</TT
></DT
><DD
><P
>	    
	    オペレーティングシステムによって提供されるPAM（Pluggable Authentication Modules）サービスを使用した認証です。
	    詳細は<A
HREF="auth-methods.html#AUTH-PAM"
>項6.2.5</A
>を参照してください
	   </P
><P
>	    
	    <SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>が稼働するホスト上のユーザ情報を使ったPAM認証を利用することができます。
	    PAMサポートを有効にするには、<SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>が<TT
CLASS="COMMAND"
>"--with-pam"</TT
>をつけてconfigureされていなければなりません。
	   </P
><P
>	    
	    PAM認証を有効にするには、<SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>のサービス設定ファイルをシステムのPAM設定ディレクトリ（通常は<TT
CLASS="LITERAL"
>"/etc/pam.d"</TT
>にあります）に作成しなければなりません。
	    サービス設定ファイルのサンプルはインストールディレクトリ下に<TT
CLASS="LITERAL"
>"share/pgpool.pam"</TT
>としてインストールされています。
	   </P
></DD
><DT
><TT
CLASS="LITERAL"
>ldap</TT
></DT
><DD
><P
>	    
	    LDAPサーバを使って認証します。
	    詳細は<A
HREF="auth-methods.html#AUTH-LDAP"
>項6.2.6</A
>を参照してください。
       </P
><P
>	    
	    LDAPサポートを有効にするには、<SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>が<TT
CLASS="COMMAND"
>"--with-ldap"</TT
>をつけてconfigureされていなければなりません。
       </P
></DD
></DL
></DIV
><P>
   </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>auth-options</I
></TT
></DT
><DD
><P
>       
       <TT
CLASS="REPLACEABLE"
><I
>auth-method</I
></TT
>フィールドの後ろに、認証方式のオプションを指定する、<TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
>=<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>の形式のフィールドが存在する可能性があります。
      </P
></DD
></DL
></DIV
><P>
  </P
><P
>   
   <TT
CLASS="FILENAME"
>pool_hba.conf</TT
>レコードは接続が試みられる度に順番に検査されますので、レコードの順序はとても大切です。
   典型的には、始めの方のレコードには厳しい接続照合パラメータと緩い認証方式があるのに対し、終わりの方のレコードにはより緩い照合パラメータとより厳しい認証方式があります。
   例えば、ローカルTCP接続では<TT
CLASS="LITERAL"
>trust</TT
>認証方式、リモートTCP接続に対してはパスワードを要求したいとします。
   この場合、広範囲にわたって許可されるクライアントのIPアドレスに対するパスワード認証を指定するレコードの前に127.0.0.1からの接続に対する<TT
CLASS="LITERAL"
>trust</TT
>認証指定のレコードが置かれなければなりません。
  </P
><DIV
CLASS="TIP"
><BLOCKQUOTE
CLASS="TIP"
><P
><B
>ティップ: </B
>    
    ここで説明された全てのpool_hba認証のオプションはクライアントと<SPAN
CLASS="PRODUCTNAME"
>Pgpool-II</SPAN
>の間についてだということに注意してください。
    クラインアントは依然として、<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>による認証を通過しなければなりませんし、バックエンド<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>サーバ上のデータベースに対して<TT
CLASS="LITERAL"
>CONNECT</TT
>権限を持っていなければなりません。
   </P
><P
>    
    pool_hbaにとってはクライアントに指定されたユーザ名やデータベース名(例. psql -U testuser testdb)が実際にバックエンド上に存在するかどうかは問題ではありません。
    pool_hbaは<TT
CLASS="FILENAME"
>pool_hba.conf</TT
>の値とマッチするかどうかのみを気にします。
   </P
></BLOCKQUOTE
></DIV
><P
>   
   <TT
CLASS="FILENAME"
>pool_hba.conf</TT
>ファイルの例をいくつか以下に示します。
   各種認証方式の詳細については次の節をご覧ください。
  </P
><DIV
CLASS="EXAMPLE"
><A
NAME="EXAMPLE-PG-HBA.CONF"
></A
><P
><B
>例 6-1. <TT
CLASS="FILENAME"
>pool_hba.conf</TT
>の項目の例</B
></P
><PRE
CLASS="PROGRAMLISTING"
>    # Allow any user on the local system to connect to any database with
    # any database user name using Unix-domain sockets (the default for local
    # connections).
    #
    # TYPE  DATABASE        USER            ADDRESS                 METHOD
    local   all             all                                     trust

    # The same using local loopback TCP/IP connections.
    #
    # TYPE  DATABASE        USER            ADDRESS                 METHOD
    host    all             all             127.0.0.1/32            trust

    # Allow any user from host 192.168.12.10 to connect to database
    # "postgres" if the user's password is correctly supplied.
    #
    # TYPE  DATABASE        USER            ADDRESS                 METHOD
    host    postgres        all             192.168.12.10/32        md5
   </PRE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="client-authentication.html"
ACCESSKEY="P"
>前のページ</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>ホーム</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="auth-methods.html"
ACCESSKEY="N"
>次のページ</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>クライアント認証</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="client-authentication.html"
ACCESSKEY="U"
>上に戻る</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>認証方式</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>