<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>4.3. Pgpool-IIの設定</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Pgpool-II 3.6.0 文書" /><link rel="up" href="runtime.html" title="第4章 サーバの準備と運用" /><link rel="prev" href="configuring-pcp-conf.html" title="4.2. pcp.confの設定" /><link rel="next" href="configuring-backend-info.html" title="4.4. バックエンド情報の設定" /><link rel="copyright" href="legalnotice.html" title="Legal Notice" /><meta name="viewport" content="width=device-width,initial-scale=1.0" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><td width="20%" align="left" colspan="2"></td><th width="60%" align="center"><a accesskey="h" href="index.html">Pgpool-II 3.6.0 文書</a></th><td width="20%" align="right"></td></tr><tr><td width="10%" align="left" valign="top"><a accesskey="p" href="configuring-pcp-conf.html">前へ</a> </td><td width="10%" align="left" valign="top"><a accesskey="u" href="runtime.html">上へ</a></td><td width="60%" align="center">4.3. Pgpool-IIの設定</td><td width="20%" align="right" valign="top"> <a accesskey="n" href="configuring-backend-info.html">次へ</a></td></tr></table><hr /></div><div class="sect1" id="configuring-pgpool"><div class="titlepage"><div><div><h2 class="title" style="clear: both">4.3. Pgpool-IIの設定</h2></div></div></div><a id="idp57138576" class="indexterm"></a><div class="sect2" id="configuring-pgpool-conf"><div class="titlepage"><div><div><h3 class="title">4.3.1. pgpool.confの設定</h3></div></div></div><p><code class="filename">pgpool.conf</code>は<span class="productname">Pgpool-II</span>のメインの設定ファイルです。
<span class="productname">Pgpool-II</span>の起動時には<code class="option">-f</code>オプションでこのファイルのパスを指定する必要があります。
デフォルトでは<code class="filename">pgpool.conf</code>は<code class="filename">$prefix/etc/pgpool.conf</code>に配置されます。
    </p></div><div class="sect2" id="running-mode"><div class="titlepage"><div><div><h3 class="title">4.3.2.  Pgpool-IIの動作モード</h3></div></div></div><p><span class="productname">Pgpool-II</span>にはストリーミングレプリケーションモード、マスタースレーブモード、ネイティブレプリケーションモード、rawモードの4つの動作モードがあります。
いずれのモードにおいても、<span class="productname">Pgpool-II</span>はコネクションプーリング、自動フェイルオーバ、オンラインリカバリの機能を提供します。
各モードのためのサンプルの設定ファイルが提供されています。
これらは<code class="filename">$prefix/etc/</code>以下に配置されており、<code class="filename">$prefix/etc/pgpool.conf</code>としてコピーして使用することができます。
    </p><p>これらのモードは互いに排他的であり、サーバ起動後は変更することができません。
システム設計の初期の段階でどのモードを使うか決めなければなりません。
どれを使えばわからない場合は、ストリーミングレプリケーションモードを使うことを推奨します。
    </p><p>ストリーミングレプリケーションモードはストリーミングレプリケーションを使用する<span class="productname">PostgreSQL</span>サーバと一緒に使うことができます。
このモードでは、<span class="productname">PostgreSQL</span>がデータベースを同期する責任を持ちます。
このモードは広く使われており、最も推奨される<span class="productname">Pgpool-II</span>の使用法です。
このモードでは負荷分散が可能です。
サンプルの設定ファイルは<code class="filename">$prefix/etc/pgpool.conf.sample-stream</code>です。
    </p><p>マスタスレーブモードは<span class="productname">Slony</span>を使用する<span class="productname">PostgreSQL</span>サーバと一緒に使うことができます。
このモードでは、<span class="productname">Slony</span>/<span class="productname">PostgreSQL</span>がデータベースを同期する責任を持ちます。
<span class="productname">Slony</span>はストリーミングレプリケーションの登場により廃れつつあるため、<span class="productname">Slony</span>を使う特別な理由が無い限りこのモードの使用を推奨しません。
このモードでは負荷分散が可能です。
サンプルの設定ファイルは<code class="filename">$prefix/etc/pgpool.conf.sample-master-slave</code>です。
    </p><p>ネイティブレプリケーションモードでは、<span class="productname">Pgpool-II</span>がデータベースを同期する責任を持ちます。
このモードの利点は同期が同期的に行われることです。
すなわち、データベースへの書き込みは全ての<span class="productname">PostgreSQL</span>サーバが書き込み操作を完了するまでに返ってきません。
ただし、読み込みスナップショットの制御は行われていないため、このモードでは一貫性のある可視性は保証されていないことに注意してください。
このモードでは負荷分散が可能です。
サンプルの設定ファイルは<code class="filename">$prefix/etc/pgpool.conf.sample-replication</code>です。
    </p><p>rawモードでは、<span class="productname">Pgpool-II</span>はデータベースの同期に関しては関与しません。
システム全体に意味の有る動作をさせるのはユーザの責任となります。
このモードでは負荷分散は<span class="emphasis"><em>できません</em></span>。
サンプルの設定ファイルは<code class="filename">$prefix/etc/pgpool.conf.sample</code>です。

    </p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="configuring-pcp-conf.html">前へ</a> </td><td width="20%" align="center"><a accesskey="u" href="runtime.html">上へ</a></td><td width="40%" align="right"> <a accesskey="n" href="configuring-backend-info.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">4.2. pcp.confの設定 </td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top"> 4.4. バックエンド情報の設定</td></tr></table></div></body></html>