<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>pcp_watchdog_info</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="Pgpool-II 3.7devel 文書" /><link rel="up" href="pcp-commands.html" title="PCP コマンド" /><link rel="prev" href="pcp-node-info.html" title="pcp_node_info" /><link rel="next" href="pcp-proc-count.html" title="pcp_proc_count" /><link rel="copyright" href="legalnotice.html" title="Legal Notice" /><meta name="viewport" content="width=device-width,initial-scale=1.0" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><td width="20%" align="left" colspan="2"></td><th width="60%" align="center"><a accesskey="h" href="index.html">Pgpool-II 3.7devel 文書</a></th><td width="20%" align="right"></td></tr><tr><td width="10%" align="left" valign="top"><a accesskey="p" href="pcp-node-info.html">前へ</a> </td><td width="10%" align="left" valign="top"><a accesskey="u" href="pcp-commands.html">上へ</a></td><td width="60%" align="center">pcp_watchdog_info</td><td width="20%" align="right" valign="top"> <a accesskey="n" href="pcp-proc-count.html">次へ</a></td></tr></table><hr /></div><div class="refentry" id="pcp-watchdog-info"><div class="titlepage"></div><a id="idm45863245364896" class="indexterm"></a><div class="refnamediv"><h2>名前</h2><p>pcp_watchdog_info —   
    <span class="productname">Pgpool-II</span> の watchdog ステータスを表示します</p></div><div class="refsynopsisdiv"><h2>概要</h2><div class="cmdsynopsis"><p id="idm45863245361232"><code class="command">pcp_watchdog_info</code> [<em class="replaceable"><code>options</code></em>...] [<em class="replaceable"><code>watchdog_id</code></em>]</p></div></div><div class="refsect1" id="r1-pcp-watchdog-info-1"><h2>説明</h2><p>  <code class="command">pcp_watchdog_info</code> は、
    <span class="productname">Pgpool-II</span> の <code class="filename">pgpool.conf</code>
    の watchdog セクションで定義された <span class="productname">Pgpool-II</span> の watchdog ステータスを表示します。
    watchdog_id は情報を取得する watchdog ノードのインデックです。
    省略された場合には、クラスタ中の全ての Pgpool-II の watchdog ノードのステータスが表示されます。
    </p><p>    watchdog_id = 0 はローカルの <span class="productname">Pgpool-II</span> ノードのために予約されています。
    そのため、リモートの watchdog ノードのインデックスは 1 から始まります。
    <code class="filename">pgpool.conf</code> ではリモート watchdog ノードのインデックスは 0 をベースにしていますが、
    <code class="command">pcp_watchdog_info</code> ではそれが 1 から始まることに注意してください。
    </p><p>    <code class="command">pcp_watchdog_info</code> コマンドで情報を取得する際には、他の watchdog のインデックスに 1 を足す必要があります。
    </p><p>    例えば、<code class="varname">other_pgpool_hostname0</code> パラメータで定義されている、添字 0 である最初のリモート watchdog ノードの情報を取得するには、
    <code class="command">pcp_watchdog_info</code> で watchdog_id = 1 を指定します。
    </p></div><div class="refsect1" id="idm45863245347600"><h2>オプション</h2><p>    </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-n <em class="replaceable"><code>watcgdog_id</code></em></code><br /></span><span class="term"><code class="option">--node-id=<em class="replaceable"><code>watcgdog_id</code></em></code></span></dt><dd><p>       
     情報を取得する他の <span class="productname">Pgpool-II</span> のインデックスを指定します。
       </p><p>       
     0 の場合ははローカルの watchdog の情報を取得します。
       </p><p>       
     省略された場合は、全ての watchdog ノードの情報を取得します。
       </p></dd><dt><span class="term"><code class="option">その他 </code></span></dt><dd><p>       
	 <a class="xref" href="pcp-common-options.html" title="pcp_common_options"><span class="refentrytitle">pcp_common_options</span></a> を参照してください。
       </p></dd></dl></div><p>
   </p></div><div class="refsect1" id="idm45863245340704"><h2>出力例</h2><p>   
    ここでは，出力例を示します。
    </p><pre class="programlisting">$ pcp_watchdog_info -h localhost -u postgres

3 NO Linux_host1.localdomain_9991 host1

Linux_host1.localdomain_9991 host1 9991 9001 7 STANDBY
Linux_host2.localdomain_9992 host2 9992 9002 4 MASTER
Linux_host3.localdomain_9993 host3 9993 9003 7 STANDBY
    </pre><p>
  </p><p>  
    結果は以下の順のとおりです。
</p><pre class="literallayout">最初に出力される行は、watchdog クラスタの情報を示しています:

1. クラスタ内の全 watchdog ノード数
2. 仮想 IP がこのノードで起動しているか？
3. マスターノード名
4. マスターノードホスト</pre><p>
</p><pre class="literallayout">それ以降は watchdog ノードのリストが出力されます:

1. ノード名
2. ホスト名
3. pgpool ポート番号
4. watchdog ポート番号
5. 現在のノードステータス
6. 現在のノードステータス名</pre><p>
  </p><p>	<code class="option">verbose</code> モードは結果の詳細を表示できます。例えば:
  </p><pre class="programlisting">$ pcp_watchdog_info -h localhost -v -u postgres

Watchdog Cluster Information
Total Nodes          : 3
Remote Nodes         : 2
Quorum state         : QUORUM EXIST
Alive Remote Nodes   : 2
VIP up on local node : NO
Master Node Name     : Linux_host2.localdomain_9992
Master Host Name     : localhost

Watchdog Node Information
Node Name      : Linux_host1.localdomain_9991
Host Name      : host1
Delegate IP    : 192.168.1.10
Pgpool port    : 9991
Watchdog port  : 9001
Node priority  : 1
Status         : 7
Status Name    : STANDBY

Node Name      : Linux_host2.localdomain_9992
Host Name      : host2
Delegate IP    : 192.168.1.10
Pgpool port    : 9992
Watchdog port  : 9002
Node priority  : 1
Status         : 4
Status Name    : MASTER

Node Name      : Linux_host3.localdomain_9993
Host Name      : host3
Delegate IP    : 192.168.1.10
Pgpool port    : 9993
Watchdog port  : 9003
Node priority  : 1
Status         : 7
Status Name    : STANDBY
    </pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="pcp-node-info.html">前へ</a> </td><td width="20%" align="center"><a accesskey="u" href="pcp-commands.html">上へ</a></td><td width="40%" align="right"> <a accesskey="n" href="pcp-proc-count.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">pcp_node_info </td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top"> pcp_proc_count</td></tr></table></div></body></html>