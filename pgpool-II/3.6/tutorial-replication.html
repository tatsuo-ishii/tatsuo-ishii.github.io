<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>1.2. Your First Replication</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="pgpool-II 3.7devel Documentation" /><link rel="up" href="tutorial-start.html" title="Chapter 1. Getting Started" /><link rel="prev" href="tutorial-install.html" title="1.1. Installation" /><link rel="next" href="tutorial-testing-load-balance.html" title="1.3. Testing Load Balance" /><link rel="copyright" href="legalnotice.html" title="Legal Notice" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1.2. Your First Replication</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tutorial-install.html">Prev</a> </td><th width="60%" align="center">Chapter 1. Getting Started</th><td width="20%" align="right"> <a accesskey="n" href="tutorial-testing-load-balance.html">Next</a></td></tr></table><hr /></div><div class="sect1" id="tutorial-replication"><div class="titlepage"><div><div><h2 class="title" style="clear: both">1.2. Your First Replication</h2></div></div></div><p>      In this section we are going to explain how to manage a
      <span class="productname">PostgreSQL</span> cluster with streaming
      replication using <span class="productname">Pgpool-II</span>, which is
      one of most common setup.
    </p><p>      Before going further, you should properly set
      up <code class="filename">pgpool.conf</code> with streaming replication
      mode. For this at least
      following two directives must be set:
      </p><pre class="programlisting">master_slave_mode = on
master_slave_sub_mode = 'stream'
      </pre><p>
    </p><p>      If you plan to use <code class="command">pgpool_setup</code>, type:
      </p><pre class="programlisting">pgpool_setup</pre><p>
      This will create
      a <span class="productname">Pgpool-II</span> with streaming
      replication mode installation,
      primary <span class="productname">PostgreSQL</span> installation, and
      a async standby <span class="productname">PostgreSQL</span>
      installation.
    </p><p>      From now on, we assume that you
      use <code class="command">pgpool_setup</code> to create the installation
      under current directory. Please note that the current directory
      must be empty before executing <code class="command">pgpool_setup</code>.
    </p><p>      To start the whole system, type:
</p><pre class="programlisting">./startall</pre><p>
    </p><p>      Once the system starts, you can check the cluster status by
      issuing a pseudo SQL command called "show pool_node" to any of
      databases. <code class="command">pgpool_setup</code> automatically creates
      "test" database. We use the database. Note that the port number
      is 11000, which is the default port number assigned
      to <span class="productname">Pgpool-II</span>
      by <code class="command">pgpool_setup</code>.
      </p><pre class="programlisting">$ psql -p 11000 -c "show pool_nodes" test
 node_id | hostname | port  | status | lb_weight |  role   | select_cnt | load_balance_node | replication_delay 
---------+----------+-------+--------+-----------+---------+------------+-------------------+-------------------
 0       | /tmp     | 11002 | up     | 0.500000  | primary | 0          | false             | 0
 1       | /tmp     | 11003 | up     | 0.500000  | standby | 0          | true              | 0
(2 rows)
      </pre><p>
      The result shows that the "status" column is "up", which means
      the
      <span class="productname">PostgreSQL</span> is up and running, which
      is good.
    </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tutorial-install.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="tutorial-start.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="tutorial-testing-load-balance.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">1.1. Installation </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 1.3. Testing Load Balance</td></tr></table></div></body></html>