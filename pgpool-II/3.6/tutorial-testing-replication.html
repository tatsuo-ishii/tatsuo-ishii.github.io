<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>1.4. Testing Replication</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="pgpool-II 3.6.0 Documentation" /><link rel="up" href="tutorial-start.html" title="Chapter 1. Getting Started" /><link rel="prev" href="tutorial-testing-load-balance.html" title="1.3. Testing Load Balance" /><link rel="next" href="tutorial-testing-failover.html" title="1.5. Testing Fail Over" /><link rel="copyright" href="legalnotice.html" title="Legal Notice" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1.4. Testing Replication</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tutorial-testing-load-balance.html">Prev</a> </td><th width="60%" align="center">Chapter 1. Getting Started</th><td width="20%" align="right"> <a accesskey="n" href="tutorial-testing-failover.html">Next</a></td></tr></table><hr /></div><div class="sect1" id="tutorial-testing-replication"><div class="titlepage"><div><div><h2 class="title" style="clear: both">1.4. Testing Replication</h2></div></div></div><p>      Let's test the replication functionality using a benchmark
      tool <code class="command">pgbench</code>, which comes with the
      standard <span class="productname">PostgreSQL</span> installation.
      Type following to create the benchmark tables.
      </p><pre class="programlisting">$ pgbench -i -p 11000 test
      </pre><p>
      To see if the replication works correctly, directly connect to
      the primary and the standby server to see if they return
      identical results.
      </p><pre class="programlisting">$ psql -p 11002 test
\dt
              List of relations
 Schema |       Name       | Type  |  Owner  
--------+------------------+-------+---------
 public | pgbench_accounts | table | t-ishii
 public | pgbench_branches | table | t-ishii
 public | pgbench_history  | table | t-ishii
 public | pgbench_tellers  | table | t-ishii
(4 rows)
\q
$ psql -p 11003 test
\dt
              List of relations
 Schema |       Name       | Type  |  Owner  
--------+------------------+-------+---------
 public | pgbench_accounts | table | t-ishii
 public | pgbench_branches | table | t-ishii
 public | pgbench_history  | table | t-ishii
 public | pgbench_tellers  | table | t-ishii
(4 rows)
      </pre><p>
      The primary server (port 11002) and the standby server (port
      11003) return identical results. Next, let's run pgbench for a
      while and check to results.
      </p><pre class="programlisting">$ pgbench -p 11000 -T 10 test
starting vacuum...end.
transaction type: &lt;builtin: TPC-B (sort of)&gt;
scaling factor: 1
query mode: simple
number of clients: 1
number of threads: 1
duration: 10 s
number of transactions actually processed: 2171
latency average = 4.692 ms
tps = 213.147520 (including connections establishing)
tps = 213.258008 (excluding connections establishing)

$ psql -p 11002 -c "SELECT sum(abalance) FROM pgbench_accounts" test
  sum   
--------
 192112
(1 row)

$ psql -p 11003 -c "SELECT sum(abalance) FROM pgbench_accounts" test
  sum   
--------
 192112
(1 row)
      </pre><p>
      Again, the results are identical.
    </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tutorial-testing-load-balance.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="tutorial-start.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="tutorial-testing-failover.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">1.3. Testing Load Balance </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 1.5. Testing Fail Over</td></tr></table></div></body></html>