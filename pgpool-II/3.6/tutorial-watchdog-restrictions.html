<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>2.3. Restrictions on watchdog</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="pgpool-II 3.7devel Documentation" /><link rel="up" href="tutorial-watchdog.html" title="Chapter 2. Watchdog" /><link rel="prev" href="tutorial-watchdog-integrating-external-lifecheck.html" title="2.2. Integrating external lifecheck with watchdog" /><link rel="next" href="tutorial-advanced-arch.html" title="2.4. Architecure of the watchdog" /><link rel="copyright" href="legalnotice.html" title="Legal Notice" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.3. Restrictions on watchdog</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tutorial-watchdog-integrating-external-lifecheck.html">Prev</a> </td><th width="60%" align="center">Chapter 2. Watchdog</th><td width="20%" align="right"> <a accesskey="n" href="tutorial-advanced-arch.html">Next</a></td></tr></table><hr /></div><div class="sect1" id="tutorial-watchdog-restrictions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.3. Restrictions on watchdog</h2></div></div></div><a id="idp46593919150768" class="indexterm"></a><div class="sect2" id="tutorial-watchdog-restrictions-query-mode"><div class="titlepage"><div><div><h3 class="title">2.3.1. Watchdog restriction with query mode lifecheck</h3></div></div></div><a id="idp46593919152256" class="indexterm"></a><p>        In query mode, when all the DB nodes are detached from a
        <span class="productname">Pgpool-II</span> due to PostgreSQL server
        failure or pcp_detach_node issued, watchdog regards that the
        <span class="productname">Pgpool-II</span> service is in the down
        status and brings the virtual IP assigned to watchdog down.
        Thus clients of <span class="productname">Pgpool-II</span> cannot
        connect to <span class="productname">Pgpool-II</span> using the
        virtual IP any more. This is neccessary to avoid split-brain,
        that is, situations where there are multiple active
        <span class="productname">Pgpool-II</span>.
      </p></div><div class="sect2" id="tutorial-watchdog-restrictions-down-watchdog-mode"><div class="titlepage"><div><div><h3 class="title">2.3.2. Connecting to <span class="productname">Pgpool-II</span> whose watchdog status is down</h3></div></div></div><a id="idp46593919158240" class="indexterm"></a><p>        Don't connect to <span class="productname">Pgpool-II</span> in down
        status using the real IP. Because a <span class="productname">Pgpool-II</span>
        in down status can't receive information from other
        <span class="productname">Pgpool-II</span> watchdogs so it's backend status
        may be different from other the <span class="productname">Pgpool-II</span>.
      </p></div><div class="sect2" id="tutorial-watchdog-restrictions-down-watchdog-require-restart"><div class="titlepage"><div><div><h3 class="title">2.3.3. <span class="productname">Pgpool-II</span> whose watchdog status is down requires restart</h3></div></div></div><a id="idp46593919163392" class="indexterm"></a><p>        <span class="productname">Pgpool-II</span> in down status can't become active
        nor the standby <span class="productname">Pgpool-II</span>.
        Recovery from down status requires the restart of <span class="productname">Pgpool-II</span>.
      </p></div><div class="sect2" id="tutorial-watchdog-restrictions-active-take-time"><div class="titlepage"><div><div><h3 class="title">2.3.4. Watchdog promotion to active takes few seconds</h3></div></div></div><a id="idp46593919167248" class="indexterm"></a><p>        After the active <span class="productname">Pgpool-II</span> stops,
        it will take a few seconds until the standby <span class="productname">Pgpool-II</span>
        promote to new active, to make sure that the former virtual IP is
        brought down before a down notification packet is sent to other
        <span class="productname">Pgpool-II</span>.
      </p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tutorial-watchdog-integrating-external-lifecheck.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="tutorial-watchdog.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="tutorial-advanced-arch.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">2.2. Integrating external lifecheck with watchdog </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 2.4. Architecure of the watchdog</td></tr></table></div></body></html>